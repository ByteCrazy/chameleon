(function(y,I){typeof exports=="object"&&typeof module<"u"?I(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],I):(y=typeof globalThis<"u"?globalThis:y||self,I(y.CRender={},y.React,y.ReactDOM))})(this,function(y,I,at){"use strict";var tv=Object.defineProperty;var ev=(y,I,at)=>I in y?tv(y,I,{enumerable:!0,configurable:!0,writable:!0,value:at}):y[I]=at;var _=(y,I,at)=>(ev(y,typeof I!="symbol"?I+"":I,at),at);const ko=t=>t&&typeof t=="object"&&"default"in t?t:{default:t};function zo(t){if(t&&t.__esModule)return t;const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const T=ko(I),Go=zo(at),Ho=t=>()=>{console.warn(`${t} need to be implement getComponent`)},Vo=["customPageRootRender"],jr=["pageRender","render","convertModelToComponent","getComponent","getContext","getUtils","getDataLink","createDataLink","transformProps","transformData","transformGlobalData","errorCatch","clear"],wr=t=>[...jr,...Vo].reduce((r,n)=>{var o;return t!=null&&t[n]?r[n]=(o=t[n])==null?void 0:o.bind(t):jr.includes(n)&&(r[n]=Ho),r},{});var Wo=Object.defineProperty,Jo=(t,e,r)=>e in t?Wo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b=(t,e,r)=>(Jo(t,typeof e!="symbol"?e+"":e,r),r),qo=typeof global=="object"&&global&&global.Object===Object&&global;const Or=qo;var Yo=typeof self=="object"&&self&&self.Object===Object&&self,Xo=Or||Yo||Function("return this")();const q=Xo;var Qo=q.Symbol;const G=Qo;var Sr=Object.prototype,Ko=Sr.hasOwnProperty,Zo=Sr.toString,Mt=G?G.toStringTag:void 0;function ta(t){var e=Ko.call(t,Mt),r=t[Mt];try{t[Mt]=void 0;var n=!0}catch{}var o=Zo.call(t);return n&&(e?t[Mt]=r:delete t[Mt]),o}var ea=Object.prototype,ra=ea.toString;function na(t){return ra.call(t)}var oa="[object Null]",aa="[object Undefined]",Cr=G?G.toStringTag:void 0;function it(t){return t==null?t===void 0?aa:oa:Cr&&Cr in Object(t)?ta(t):na(t)}function Y(t){return t!=null&&typeof t=="object"}var ia="[object Symbol]";function me(t){return typeof t=="symbol"||Y(t)&&it(t)==ia}function ye(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var sa=Array.isArray;const M=sa;var ca=1/0,Er=G?G.prototype:void 0,Nr=Er?Er.toString:void 0;function Ar(t){if(typeof t=="string")return t;if(M(t))return ye(t,Ar)+"";if(me(t))return Nr?Nr.call(t):"";var e=t+"";return e=="0"&&1/t==-ca?"-0":e}function V(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function be(t){return t}var ua="[object AsyncFunction]",la="[object Function]",fa="[object GeneratorFunction]",pa="[object Proxy]";function _e(t){if(!V(t))return!1;var e=it(t);return e==la||e==fa||e==ua||e==pa}var da=q["__core-js_shared__"];const je=da;var $r=function(){var t=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ha(t){return!!$r&&$r in t}var va=Function.prototype,ga=va.toString;function st(t){if(t!=null){try{return ga.call(t)}catch{}try{return t+""}catch{}}return""}var ma=/[\\^$.*+?()[\]{}|]/g,ya=/^\[object .+?Constructor\]$/,ba=Function.prototype,_a=Object.prototype,ja=ba.toString,wa=_a.hasOwnProperty,Oa=RegExp("^"+ja.call(wa).replace(ma,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Sa(t){if(!V(t)||ha(t))return!1;var e=_e(t)?Oa:ya;return e.test(st(t))}function Ca(t,e){return t==null?void 0:t[e]}function ct(t,e){var r=Ca(t,e);return Sa(r)?r:void 0}var Ea=ct(q,"WeakMap");const we=Ea;var Tr=Object.create,Na=function(){function t(){}return function(e){if(!V(e))return{};if(Tr)return Tr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Aa=Na;function $a(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Mr(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Ta=800,Ma=16,Pa=Date.now;function xa(t){var e=0,r=0;return function(){var n=Pa(),o=Ma-(n-r);if(r=n,o>0){if(++e>=Ta)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Ra(t){return function(){return t}}var Da=function(){try{var t=ct(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Yt=Da;var Ia=Yt?function(t,e){return Yt(t,"toString",{configurable:!0,enumerable:!1,value:Ra(e),writable:!0})}:be,Fa=xa(Ia);const Pr=Fa;function La(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var Ba=9007199254740991,Ua=/^(?:0|[1-9]\d*)$/;function Xt(t,e){var r=typeof t;return e=e==null?Ba:e,!!e&&(r=="number"||r!="symbol"&&Ua.test(t))&&t>-1&&t%1==0&&t<e}function Oe(t,e,r){e=="__proto__"&&Yt?Yt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Pt(t,e){return t===e||t!==t&&e!==e}var ka=Object.prototype,za=ka.hasOwnProperty;function Se(t,e,r){var n=t[e];(!(za.call(t,e)&&Pt(n,r))||r===void 0&&!(e in t))&&Oe(t,e,r)}function vt(t,e,r,n){var o=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var i=e[a],c=n?n(r[i],t[i],i,r,t):void 0;c===void 0&&(c=t[i]),o?Oe(r,i,c):Se(r,i,c)}return r}var xr=Math.max;function Rr(t,e,r){return e=xr(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=xr(n.length-e,0),s=Array(a);++o<a;)s[o]=n[e+o];o=-1;for(var i=Array(e+1);++o<e;)i[o]=n[o];return i[e]=r(s),$a(t,this,i)}}function Ga(t,e){return Pr(Rr(t,e,be),t+"")}var Ha=9007199254740991;function Ce(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ha}function Qt(t){return t!=null&&Ce(t.length)&&!_e(t)}function Va(t,e,r){if(!V(r))return!1;var n=typeof e;return(n=="number"?Qt(r)&&Xt(e,r.length):n=="string"&&e in r)?Pt(r[e],t):!1}function Wa(t){return Ga(function(e,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(o--,a):void 0,s&&Va(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var i=r[n];i&&t(e,i,n,a)}return e})}var Ja=Object.prototype;function Ee(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Ja;return t===r}function qa(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Ya="[object Arguments]";function Dr(t){return Y(t)&&it(t)==Ya}var Ir=Object.prototype,Xa=Ir.hasOwnProperty,Qa=Ir.propertyIsEnumerable,Ka=Dr(function(){return arguments}())?Dr:function(t){return Y(t)&&Xa.call(t,"callee")&&!Qa.call(t,"callee")};const xt=Ka;function Za(){return!1}var Fr=typeof y=="object"&&y&&!y.nodeType&&y,Lr=Fr&&typeof module=="object"&&module&&!module.nodeType&&module,ti=Lr&&Lr.exports===Fr,Br=ti?q.Buffer:void 0,ei=Br?Br.isBuffer:void 0,ri=ei||Za;const Rt=ri;var ni="[object Arguments]",oi="[object Array]",ai="[object Boolean]",ii="[object Date]",si="[object Error]",ci="[object Function]",ui="[object Map]",li="[object Number]",fi="[object Object]",pi="[object RegExp]",di="[object Set]",hi="[object String]",vi="[object WeakMap]",gi="[object ArrayBuffer]",mi="[object DataView]",yi="[object Float32Array]",bi="[object Float64Array]",_i="[object Int8Array]",ji="[object Int16Array]",wi="[object Int32Array]",Oi="[object Uint8Array]",Si="[object Uint8ClampedArray]",Ci="[object Uint16Array]",Ei="[object Uint32Array]",N={};N[yi]=N[bi]=N[_i]=N[ji]=N[wi]=N[Oi]=N[Si]=N[Ci]=N[Ei]=!0,N[ni]=N[oi]=N[gi]=N[ai]=N[mi]=N[ii]=N[si]=N[ci]=N[ui]=N[li]=N[fi]=N[pi]=N[di]=N[hi]=N[vi]=!1;function Ni(t){return Y(t)&&Ce(t.length)&&!!N[it(t)]}function Ne(t){return function(e){return t(e)}}var Ur=typeof y=="object"&&y&&!y.nodeType&&y,Dt=Ur&&typeof module=="object"&&module&&!module.nodeType&&module,Ai=Dt&&Dt.exports===Ur,Ae=Ai&&Or.process,$i=function(){try{var t=Dt&&Dt.require&&Dt.require("util").types;return t||Ae&&Ae.binding&&Ae.binding("util")}catch{}}();const gt=$i;var kr=gt&&gt.isTypedArray,Ti=kr?Ne(kr):Ni;const $e=Ti;var Mi=Object.prototype,Pi=Mi.hasOwnProperty;function zr(t,e){var r=M(t),n=!r&&xt(t),o=!r&&!n&&Rt(t),a=!r&&!n&&!o&&$e(t),s=r||n||o||a,i=s?qa(t.length,String):[],c=i.length;for(var u in t)(e||Pi.call(t,u))&&!(s&&(u=="length"||o&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Xt(u,c)))&&i.push(u);return i}function Gr(t,e){return function(r){return t(e(r))}}var xi=Gr(Object.keys,Object);const Ri=xi;var Di=Object.prototype,Ii=Di.hasOwnProperty;function Fi(t){if(!Ee(t))return Ri(t);var e=[];for(var r in Object(t))Ii.call(t,r)&&r!="constructor"&&e.push(r);return e}function Kt(t){return Qt(t)?zr(t):Fi(t)}function Li(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Bi=Object.prototype,Ui=Bi.hasOwnProperty;function ki(t){if(!V(t))return Li(t);var e=Ee(t),r=[];for(var n in t)n=="constructor"&&(e||!Ui.call(t,n))||r.push(n);return r}function It(t){return Qt(t)?zr(t,!0):ki(t)}var zi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gi=/^\w*$/;function Te(t,e){if(M(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||me(t)?!0:Gi.test(t)||!zi.test(t)||e!=null&&t in Object(e)}var Hi=ct(Object,"create");const Ft=Hi;function Vi(){this.__data__=Ft?Ft(null):{},this.size=0}function Wi(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ji="__lodash_hash_undefined__",qi=Object.prototype,Yi=qi.hasOwnProperty;function Xi(t){var e=this.__data__;if(Ft){var r=e[t];return r===Ji?void 0:r}return Yi.call(e,t)?e[t]:void 0}var Qi=Object.prototype,Ki=Qi.hasOwnProperty;function Zi(t){var e=this.__data__;return Ft?e[t]!==void 0:Ki.call(e,t)}var ts="__lodash_hash_undefined__";function es(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ft&&e===void 0?ts:e,this}function ut(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ut.prototype.clear=Vi,ut.prototype.delete=Wi,ut.prototype.get=Xi,ut.prototype.has=Zi,ut.prototype.set=es;function rs(){this.__data__=[],this.size=0}function Zt(t,e){for(var r=t.length;r--;)if(Pt(t[r][0],e))return r;return-1}var ns=Array.prototype,os=ns.splice;function as(t){var e=this.__data__,r=Zt(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():os.call(e,r,1),--this.size,!0}function is(t){var e=this.__data__,r=Zt(e,t);return r<0?void 0:e[r][1]}function ss(t){return Zt(this.__data__,t)>-1}function cs(t,e){var r=this.__data__,n=Zt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function Q(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Q.prototype.clear=rs,Q.prototype.delete=as,Q.prototype.get=is,Q.prototype.has=ss,Q.prototype.set=cs;var us=ct(q,"Map");const Lt=us;function ls(){this.size=0,this.__data__={hash:new ut,map:new(Lt||Q),string:new ut}}function fs(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function te(t,e){var r=t.__data__;return fs(e)?r[typeof e=="string"?"string":"hash"]:r.map}function ps(t){var e=te(this,t).delete(t);return this.size-=e?1:0,e}function ds(t){return te(this,t).get(t)}function hs(t){return te(this,t).has(t)}function vs(t,e){var r=te(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function K(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}K.prototype.clear=ls,K.prototype.delete=ps,K.prototype.get=ds,K.prototype.has=hs,K.prototype.set=vs;var gs="Expected a function";function Me(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(gs);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var s=t.apply(this,n);return r.cache=a.set(o,s)||a,s};return r.cache=new(Me.Cache||K),r}Me.Cache=K;var ms=500;function ys(t){var e=Me(t,function(n){return r.size===ms&&r.clear(),n}),r=e.cache;return e}var bs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_s=/\\(\\)?/g,js=ys(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(bs,function(r,n,o,a){e.push(o?a.replace(_s,"$1"):n||r)}),e});const ws=js;function Os(t){return t==null?"":Ar(t)}function mt(t,e){return M(t)?t:Te(t,e)?[t]:ws(Os(t))}var Ss=1/0;function yt(t){if(typeof t=="string"||me(t))return t;var e=t+"";return e=="0"&&1/t==-Ss?"-0":e}function ee(t,e){e=mt(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[yt(e[r++])];return r&&r==n?t:void 0}function Hr(t,e,r){var n=t==null?void 0:ee(t,e);return n===void 0?r:n}function Pe(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var Vr=G?G.isConcatSpreadable:void 0;function Cs(t){return M(t)||xt(t)||!!(Vr&&t&&t[Vr])}function Wr(t,e,r,n,o){var a=-1,s=t.length;for(r||(r=Cs),o||(o=[]);++a<s;){var i=t[a];e>0&&r(i)?e>1?Wr(i,e-1,r,n,o):Pe(o,i):n||(o[o.length]=i)}return o}function Es(t){var e=t==null?0:t.length;return e?Wr(t,1):[]}function Ns(t){return Pr(Rr(t,void 0,Es),t+"")}var As=Gr(Object.getPrototypeOf,Object);const xe=As;var $s="[object Object]",Ts=Function.prototype,Ms=Object.prototype,Jr=Ts.toString,Ps=Ms.hasOwnProperty,xs=Jr.call(Object);function L(t){if(!Y(t)||it(t)!=$s)return!1;var e=xe(t);if(e===null)return!0;var r=Ps.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Jr.call(r)==xs}function Rs(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a}function Ds(){this.__data__=new Q,this.size=0}function Is(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Fs(t){return this.__data__.get(t)}function Ls(t){return this.__data__.has(t)}var Bs=200;function Us(t,e){var r=this.__data__;if(r instanceof Q){var n=r.__data__;if(!Lt||n.length<Bs-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new K(n)}return r.set(t,e),this.size=r.size,this}function W(t){var e=this.__data__=new Q(t);this.size=e.size}W.prototype.clear=Ds,W.prototype.delete=Is,W.prototype.get=Fs,W.prototype.has=Ls,W.prototype.set=Us;function ks(t,e){return t&&vt(e,Kt(e),t)}function zs(t,e){return t&&vt(e,It(e),t)}var qr=typeof y=="object"&&y&&!y.nodeType&&y,Yr=qr&&typeof module=="object"&&module&&!module.nodeType&&module,Gs=Yr&&Yr.exports===qr,Xr=Gs?q.Buffer:void 0,Qr=Xr?Xr.allocUnsafe:void 0;function Kr(t,e){if(e)return t.slice();var r=t.length,n=Qr?Qr(r):new t.constructor(r);return t.copy(n),n}function Hs(t,e){for(var r=-1,n=t==null?0:t.length,o=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[o++]=s)}return a}function Zr(){return[]}var Vs=Object.prototype,Ws=Vs.propertyIsEnumerable,tn=Object.getOwnPropertySymbols,Js=tn?function(t){return t==null?[]:(t=Object(t),Hs(tn(t),function(e){return Ws.call(t,e)}))}:Zr;const Re=Js;function qs(t,e){return vt(t,Re(t),e)}var Ys=Object.getOwnPropertySymbols,Xs=Ys?function(t){for(var e=[];t;)Pe(e,Re(t)),t=xe(t);return e}:Zr;const en=Xs;function Qs(t,e){return vt(t,en(t),e)}function rn(t,e,r){var n=e(t);return M(t)?n:Pe(n,r(t))}function De(t){return rn(t,Kt,Re)}function Ie(t){return rn(t,It,en)}var Ks=ct(q,"DataView");const Fe=Ks;var Zs=ct(q,"Promise");const Le=Zs;var tc=ct(q,"Set");const Be=tc;var nn="[object Map]",ec="[object Object]",on="[object Promise]",an="[object Set]",sn="[object WeakMap]",cn="[object DataView]",rc=st(Fe),nc=st(Lt),oc=st(Le),ac=st(Be),ic=st(we),lt=it;(Fe&&lt(new Fe(new ArrayBuffer(1)))!=cn||Lt&&lt(new Lt)!=nn||Le&&lt(Le.resolve())!=on||Be&&lt(new Be)!=an||we&&lt(new we)!=sn)&&(lt=function(t){var e=it(t),r=e==ec?t.constructor:void 0,n=r?st(r):"";if(n)switch(n){case rc:return cn;case nc:return nn;case oc:return on;case ac:return an;case ic:return sn}return e});const Bt=lt;var sc=Object.prototype,cc=sc.hasOwnProperty;function uc(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&cc.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var lc=q.Uint8Array;const re=lc;function Ue(t){var e=new t.constructor(t.byteLength);return new re(e).set(new re(t)),e}function fc(t,e){var r=e?Ue(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var pc=/\w*$/;function dc(t){var e=new t.constructor(t.source,pc.exec(t));return e.lastIndex=t.lastIndex,e}var un=G?G.prototype:void 0,ln=un?un.valueOf:void 0;function hc(t){return ln?Object(ln.call(t)):{}}function fn(t,e){var r=e?Ue(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var vc="[object Boolean]",gc="[object Date]",mc="[object Map]",yc="[object Number]",bc="[object RegExp]",_c="[object Set]",jc="[object String]",wc="[object Symbol]",Oc="[object ArrayBuffer]",Sc="[object DataView]",Cc="[object Float32Array]",Ec="[object Float64Array]",Nc="[object Int8Array]",Ac="[object Int16Array]",$c="[object Int32Array]",Tc="[object Uint8Array]",Mc="[object Uint8ClampedArray]",Pc="[object Uint16Array]",xc="[object Uint32Array]";function Rc(t,e,r){var n=t.constructor;switch(e){case Oc:return Ue(t);case vc:case gc:return new n(+t);case Sc:return fc(t,r);case Cc:case Ec:case Nc:case Ac:case $c:case Tc:case Mc:case Pc:case xc:return fn(t,r);case mc:return new n;case yc:case jc:return new n(t);case bc:return dc(t);case _c:return new n;case wc:return hc(t)}}function pn(t){return typeof t.constructor=="function"&&!Ee(t)?Aa(xe(t)):{}}var Dc="[object Map]";function Ic(t){return Y(t)&&Bt(t)==Dc}var dn=gt&&gt.isMap,Fc=dn?Ne(dn):Ic;const Lc=Fc;var Bc="[object Set]";function Uc(t){return Y(t)&&Bt(t)==Bc}var hn=gt&&gt.isSet,kc=hn?Ne(hn):Uc;const zc=kc;var Gc=1,Hc=2,Vc=4,vn="[object Arguments]",Wc="[object Array]",Jc="[object Boolean]",qc="[object Date]",Yc="[object Error]",gn="[object Function]",Xc="[object GeneratorFunction]",Qc="[object Map]",Kc="[object Number]",mn="[object Object]",Zc="[object RegExp]",tu="[object Set]",eu="[object String]",ru="[object Symbol]",nu="[object WeakMap]",ou="[object ArrayBuffer]",au="[object DataView]",iu="[object Float32Array]",su="[object Float64Array]",cu="[object Int8Array]",uu="[object Int16Array]",lu="[object Int32Array]",fu="[object Uint8Array]",pu="[object Uint8ClampedArray]",du="[object Uint16Array]",hu="[object Uint32Array]",C={};C[vn]=C[Wc]=C[ou]=C[au]=C[Jc]=C[qc]=C[iu]=C[su]=C[cu]=C[uu]=C[lu]=C[Qc]=C[Kc]=C[mn]=C[Zc]=C[tu]=C[eu]=C[ru]=C[fu]=C[pu]=C[du]=C[hu]=!0,C[Yc]=C[gn]=C[nu]=!1;function Ut(t,e,r,n,o,a){var s,i=e&Gc,c=e&Hc,u=e&Vc;if(r&&(s=o?r(t,n,o,a):r(t)),s!==void 0)return s;if(!V(t))return t;var l=M(t);if(l){if(s=uc(t),!i)return Mr(t,s)}else{var p=Bt(t),f=p==gn||p==Xc;if(Rt(t))return Kr(t,i);if(p==mn||p==vn||f&&!o){if(s=c||f?{}:pn(t),!i)return c?Qs(t,zs(s,t)):qs(t,ks(s,t))}else{if(!C[p])return o?t:{};s=Rc(t,p,i)}}a||(a=new W);var h=a.get(t);if(h)return h;a.set(t,s),zc(t)?t.forEach(function(j){s.add(Ut(j,e,r,j,t,a))}):Lc(t)&&t.forEach(function(j,w){s.set(w,Ut(j,e,r,w,t,a))});var g=u?c?Ie:De:c?It:Kt,m=l?void 0:g(t);return La(m||t,function(j,w){m&&(w=j,j=t[w]),Se(s,w,Ut(j,e,r,w,t,a))}),s}var vu=1,gu=4;function yn(t){return Ut(t,vu|gu)}var mu="__lodash_hash_undefined__";function yu(t){return this.__data__.set(t,mu),this}function bu(t){return this.__data__.has(t)}function ne(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new K;++e<r;)this.add(t[e])}ne.prototype.add=ne.prototype.push=yu,ne.prototype.has=bu;function _u(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function ju(t,e){return t.has(e)}var wu=1,Ou=2;function bn(t,e,r,n,o,a){var s=r&wu,i=t.length,c=e.length;if(i!=c&&!(s&&c>i))return!1;var u=a.get(t),l=a.get(e);if(u&&l)return u==e&&l==t;var p=-1,f=!0,h=r&Ou?new ne:void 0;for(a.set(t,e),a.set(e,t);++p<i;){var g=t[p],m=e[p];if(n)var j=s?n(m,g,p,e,t,a):n(g,m,p,t,e,a);if(j!==void 0){if(j)continue;f=!1;break}if(h){if(!_u(e,function(w,S){if(!ju(h,S)&&(g===w||o(g,w,r,n,a)))return h.push(S)})){f=!1;break}}else if(!(g===m||o(g,m,r,n,a))){f=!1;break}}return a.delete(t),a.delete(e),f}function Su(t){var e=-1,r=Array(t.size);return t.forEach(function(n,o){r[++e]=[o,n]}),r}function Cu(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Eu=1,Nu=2,Au="[object Boolean]",$u="[object Date]",Tu="[object Error]",Mu="[object Map]",Pu="[object Number]",xu="[object RegExp]",Ru="[object Set]",Du="[object String]",Iu="[object Symbol]",Fu="[object ArrayBuffer]",Lu="[object DataView]",_n=G?G.prototype:void 0,ke=_n?_n.valueOf:void 0;function Bu(t,e,r,n,o,a,s){switch(r){case Lu:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Fu:return!(t.byteLength!=e.byteLength||!a(new re(t),new re(e)));case Au:case $u:case Pu:return Pt(+t,+e);case Tu:return t.name==e.name&&t.message==e.message;case xu:case Du:return t==e+"";case Mu:var i=Su;case Ru:var c=n&Eu;if(i||(i=Cu),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;n|=Nu,s.set(t,e);var l=bn(i(t),i(e),n,o,a,s);return s.delete(t),l;case Iu:if(ke)return ke.call(t)==ke.call(e)}return!1}var Uu=1,ku=Object.prototype,zu=ku.hasOwnProperty;function Gu(t,e,r,n,o,a){var s=r&Uu,i=De(t),c=i.length,u=De(e),l=u.length;if(c!=l&&!s)return!1;for(var p=c;p--;){var f=i[p];if(!(s?f in e:zu.call(e,f)))return!1}var h=a.get(t),g=a.get(e);if(h&&g)return h==e&&g==t;var m=!0;a.set(t,e),a.set(e,t);for(var j=s;++p<c;){f=i[p];var w=t[f],S=e[f];if(n)var P=s?n(S,w,f,e,t,a):n(w,S,f,t,e,a);if(!(P===void 0?w===S||o(w,S,r,n,a):P)){m=!1;break}j||(j=f=="constructor")}if(m&&!j){var x=t.constructor,D=e.constructor;x!=D&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof D=="function"&&D instanceof D)&&(m=!1)}return a.delete(t),a.delete(e),m}var Hu=1,jn="[object Arguments]",wn="[object Array]",oe="[object Object]",Vu=Object.prototype,On=Vu.hasOwnProperty;function Wu(t,e,r,n,o,a){var s=M(t),i=M(e),c=s?wn:Bt(t),u=i?wn:Bt(e);c=c==jn?oe:c,u=u==jn?oe:u;var l=c==oe,p=u==oe,f=c==u;if(f&&Rt(t)){if(!Rt(e))return!1;s=!0,l=!1}if(f&&!l)return a||(a=new W),s||$e(t)?bn(t,e,r,n,o,a):Bu(t,e,c,r,n,o,a);if(!(r&Hu)){var h=l&&On.call(t,"__wrapped__"),g=p&&On.call(e,"__wrapped__");if(h||g){var m=h?t.value():t,j=g?e.value():e;return a||(a=new W),o(m,j,r,n,a)}}return f?(a||(a=new W),Gu(t,e,r,n,o,a)):!1}function ze(t,e,r,n,o){return t===e?!0:t==null||e==null||!Y(t)&&!Y(e)?t!==t&&e!==e:Wu(t,e,r,n,ze,o)}var Ju=1,qu=2;function Yu(t,e,r,n){var o=r.length,a=o,s=!n;if(t==null)return!a;for(t=Object(t);o--;){var i=r[o];if(s&&i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++o<a;){i=r[o];var c=i[0],u=t[c],l=i[1];if(s&&i[2]){if(u===void 0&&!(c in t))return!1}else{var p=new W;if(n)var f=n(u,l,c,t,e,p);if(!(f===void 0?ze(l,u,Ju|qu,n,p):f))return!1}}return!0}function Sn(t){return t===t&&!V(t)}function Xu(t){for(var e=Kt(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Sn(o)]}return e}function Cn(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function Qu(t){var e=Xu(t);return e.length==1&&e[0][2]?Cn(e[0][0],e[0][1]):function(r){return r===t||Yu(r,t,e)}}function Ku(t,e){return t!=null&&e in Object(t)}function Zu(t,e,r){e=mt(e,t);for(var n=-1,o=e.length,a=!1;++n<o;){var s=yt(e[n]);if(!(a=t!=null&&r(t,s)))break;t=t[s]}return a||++n!=o?a:(o=t==null?0:t.length,!!o&&Ce(o)&&Xt(s,o)&&(M(t)||xt(t)))}function tl(t,e){return t!=null&&Zu(t,e,Ku)}var el=1,rl=2;function nl(t,e){return Te(t)&&Sn(e)?Cn(yt(t),e):function(r){var n=Hr(r,t);return n===void 0&&n===e?tl(r,t):ze(e,n,el|rl)}}function ol(t){return function(e){return e==null?void 0:e[t]}}function al(t){return function(e){return ee(e,t)}}function il(t){return Te(t)?ol(yt(t)):al(t)}function En(t){return typeof t=="function"?t:t==null?be:typeof t=="object"?M(t)?nl(t[0],t[1]):Qu(t):il(t)}function sl(t){return function(e,r,n){for(var o=-1,a=Object(e),s=n(e),i=s.length;i--;){var c=s[t?i:++o];if(r(a[c],c,a)===!1)break}return e}}var cl=sl();const ul=cl;function Ge(t,e,r){(r!==void 0&&!Pt(t[e],r)||r===void 0&&!(e in t))&&Oe(t,e,r)}function ll(t){return Y(t)&&Qt(t)}function He(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function fl(t){return vt(t,It(t))}function pl(t,e,r,n,o,a,s){var i=He(t,r),c=He(e,r),u=s.get(c);if(u){Ge(t,r,u);return}var l=a?a(i,c,r+"",t,e,s):void 0,p=l===void 0;if(p){var f=M(c),h=!f&&Rt(c),g=!f&&!h&&$e(c);l=c,f||h||g?M(i)?l=i:ll(i)?l=Mr(i):h?(p=!1,l=Kr(c,!0)):g?(p=!1,l=fn(c,!0)):l=[]:L(c)||xt(c)?(l=i,xt(i)?l=fl(i):(!V(i)||_e(i))&&(l=pn(c))):p=!1}p&&(s.set(c,l),o(l,c,n,a,s),s.delete(c)),Ge(t,r,l)}function Nn(t,e,r,n,o){t!==e&&ul(e,function(a,s){if(o||(o=new W),V(a))pl(t,e,s,r,Nn,n,o);else{var i=n?n(He(t,s),a,s+"",t,e,o):void 0;i===void 0&&(i=a),Ge(t,s,i)}},It)}function dl(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function hl(t,e){return e.length<2?t:ee(t,Rs(e,0,-1))}var vl=Wa(function(t,e,r){Nn(t,e,r)});const gl=vl;var ml="Expected a function";function yl(t){if(typeof t!="function")throw new TypeError(ml);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function bl(t,e){return e=mt(e,t),t=hl(t,e),t==null||delete t[yt(dl(e))]}function _l(t){return L(t)?void 0:t}var jl=1,wl=2,Ol=4,Sl=Ns(function(t,e){var r={};if(t==null)return r;var n=!1;e=ye(e,function(a){return a=mt(a,t),n||(n=a.length>1),a}),vt(t,Ie(t),r),n&&(r=Ut(r,jl|wl|Ol,_l));for(var o=e.length;o--;)bl(r,e[o]);return r});const An=Sl;function Cl(t,e,r,n){if(!V(t))return t;e=mt(e,t);for(var o=-1,a=e.length,s=a-1,i=t;i!=null&&++o<a;){var c=yt(e[o]),u=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(o!=s){var l=i[c];u=n?n(l,c,i):void 0,u===void 0&&(u=V(l)?l:Xt(e[o+1])?[]:{})}Se(i,c,u),i=i[c]}return t}function El(t,e,r){for(var n=-1,o=e.length,a={};++n<o;){var s=e[n],i=ee(t,s);r(i,s)&&Cl(a,mt(s,t),i)}return a}function Nl(t,e){if(t==null)return{};var r=ye(Ie(t),function(n){return[n]});return e=En(e),El(t,r,function(n,o){return e(n,o[0])})}function Al(t,e){return Nl(t,yl(En(e)))}class $n extends TypeError{constructor(e,r){let n;const{message:o,...a}=e,{path:s}=e,i=s.length===0?o:`At path: ${s.join(".")} -- ${o}`;super(i),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n!=null?n:n=[e,...r()]}}function $l(t){return J(t)&&typeof t[Symbol.iterator]=="function"}function J(t){return typeof t=="object"&&t!=null}function k(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Tl(t){const{done:e,value:r}=t.next();return e?void 0:r}function Ml(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:o,branch:a}=e,{type:s}=r,{refinement:i,message:c=`Expected a value of type \`${s}\`${i?` with refinement \`${i}\``:""}, but received: \`${k(n)}\``}=t;return{value:n,type:s,refinement:i,key:o[o.length-1],path:o,branch:a,...t,message:c}}function*Tn(t,e,r,n){$l(t)||(t=[t]);for(const o of t){const a=Ml(o,e,r,n);a&&(yield a)}}function*Ve(t,e,r){r===void 0&&(r={});const{path:n=[],branch:o=[t],coerce:a=!1,mask:s=!1}=r,i={path:n,branch:o};if(a&&(t=e.coercer(t,i),s&&e.type!=="type"&&J(e.schema)&&J(t)&&!Array.isArray(t)))for(const u in t)e.schema[u]===void 0&&delete t[u];let c="valid";for(const u of e.validator(t,i))c="not_valid",yield[u,void 0];for(let[u,l,p]of e.entries(t,i)){const f=Ve(l,p,{path:u===void 0?n:[...n,u],branch:u===void 0?o:[...o,l],coerce:a,mask:s});for(const h of f)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):a&&(l=h[1],u===void 0?t=l:t instanceof Map?t.set(u,l):t instanceof Set?t.add(l):J(t)&&(l!==void 0||u in t)&&(t[u]=l))}if(c!=="not_valid")for(const u of e.refiner(t,i))c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,t])}class X{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:r,schema:n,validator:o,refiner:a,coercer:s=c=>c,entries:i=function*(){}}=e;this.type=r,this.schema=n,this.entries=i,this.coercer=s,o?this.validator=(c,u)=>{const l=o(c,u);return Tn(l,u,this,c)}:this.validator=()=>[],a?this.refiner=(c,u)=>{const l=a(c,u);return Tn(l,u,this,c)}:this.refiner=()=>[]}assert(e){return Mn(e,this)}create(e){return Pl(e,this)}is(e){return Rl(e,this)}mask(e){return xl(e,this)}validate(e,r){return r===void 0&&(r={}),bt(e,this,r)}}function Mn(t,e){const r=bt(t,e);if(r[0])throw r[0]}function Pl(t,e){const r=bt(t,e,{coerce:!0});if(r[0])throw r[0];return r[1]}function xl(t,e){const r=bt(t,e,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function Rl(t,e){return!bt(t,e)[0]}function bt(t,e,r){r===void 0&&(r={});const n=Ve(t,e,r),o=Tl(n);return o[0]?[new $n(o[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function We(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=e[0].type==="type",o=e.map(s=>s.schema),a=Object.assign({},...o);return n?Dn(a):O(a)}function rt(t,e){return new X({type:t,schema:null,validator:e})}function _t(t){return new X({type:"dynamic",schema:null,*entries(e,r){yield*t(e,r).entries(e,r)},validator(e,r){return t(e,r).validator(e,r)},coercer(e,r){return t(e,r).coercer(e,r)},refiner(e,r){return t(e,r).refiner(e,r)}})}function Pn(t,e){const{schema:r}=t,n={...r};for(const o of e)delete n[o];switch(t.type){case"type":return Dn(n);default:return O(n)}}function B(){return rt("any",()=>!0)}function R(t){return new X({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${k(e)}`}})}function Z(){return rt("boolean",t=>typeof t=="boolean")}function Je(t){const e={},r=t.map(n=>k(n)).join();for(const n of t)e[n]=n;return new X({type:"enums",schema:e,validator(n){return t.includes(n)||`Expected one of \`${r}\`, but received: ${k(n)}`}})}function xn(){return rt("func",t=>typeof t=="function"||`Expected a function, but received: ${k(t)}`)}function z(t){const e=k(t),r=typeof t;return new X({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${k(n)}`}})}function Dl(){return rt("never",()=>!1)}function Rn(){return rt("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${k(t)}`)}function O(t){const e=t?Object.keys(t):[],r=Dl();return new X({type:"object",schema:t||null,*entries(n){if(t&&J(n)){const o=new Set(Object.keys(n));for(const a of e)o.delete(a),yield[a,n[a],t[a]];for(const a of o)yield[a,n[a],r]}},validator(n){return J(n)||`Expected an object, but received: ${k(n)}`},coercer(n){return J(n)?{...n}:n}})}function v(t){return new X({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function kt(t,e){return new X({type:"record",schema:null,*entries(r){if(J(r))for(const n in r){const o=r[n];yield[n,n,t],yield[n,o,e]}},validator(r){return J(r)||`Expected an object, but received: ${k(r)}`}})}function d(){return rt("string",t=>typeof t=="string"||`Expected a string, but received: ${k(t)}`)}function Dn(t){const e=Object.keys(t);return new X({type:"type",schema:t,*entries(r){if(J(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return J(r)||`Expected an object, but received: ${k(r)}`}})}function F(t){const e=t.map(r=>r.type).join(" | ");return new X({type:"union",schema:null,coercer(r,n){return(t.find(o=>{const[a]=o.validate(r,{coerce:!0});return!a})||Il()).coercer(r,n)},validator(r,n){const o=[];for(const a of t){const[...s]=Ve(r,a,n),[i]=s;if(i[0])for(const[c]of s)c&&o.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${k(r)}`,...o]}})}function Il(){return rt("unknown",()=>!0)}const qe=O({package:d(),version:d(),exportName:d(),destructuring:v(Z()),subName:v(d()),main:v(d())}),Fl=R(qe);var H=(t=>(t.SLOT="SLOT",t.FUNCTION="FUNCTION",t.EXPRESSION="EXPRESSION",t))(H||{}),Ye=(t=>(t.DESIGN="design",t.SAVE="save",t))(Ye||{}),Xe=(t=>(t.FUNC="FUNC",t.COMP="COMP",t))(Xe||{});const Ll=()=>rt("normalObj",t=>!L(t)||[H.SLOT,H.EXPRESSION,H.FUNCTION].includes(t==null?void 0:t.type)?!1:(bt(t,kt(d(),Qe)),!0)),Qe=F([d(),Rn(),Z(),O({type:z(H.SLOT),renderType:Je([Xe.FUNC,Xe.COMP]),params:v(R(d())),value:_t(()=>F([jt,R(jt)]))}),O({type:z(H.EXPRESSION),value:d()}),O({type:z(H.FUNCTION),value:d()}),Ll(),R(_t(()=>Qe))]),In=O({type:z(H.EXPRESSION),value:d()}),jt=O({id:v(d()),title:v(d()),componentName:d(),props:v(kt(d(),Qe)),stateName:v(d()),state:v(kt(d(),B())),children:_t(()=>v(R(F([d(),jt])))),configure:v(B()),style:v(d()),className:v(d()),refId:v(d()),extra:v(kt(B(),B())),condition:v(F([Z(),In])),tempDevConfig:v(B()),loop:v(O({open:Z(),data:F([R(B()),In]),args:v(R(d())),forName:v(d()),forIndex:v(d()),key:v(B()),name:v(d())}))}),ae=F([d(),O({label:d(),tip:v(d())})]),Bl=O({type:z("shape"),value:R(O({name:d(),title:ae,valueType:_t(()=>ie)}))}),Ul=O({type:z("enums"),value:R(d())});O({type:z("array"),value:_t(()=>ie)});const kl=O({type:z("array"),value:_t(()=>R(ie))}),ie=F([Je(["array","boolean","number","object","string"]),Je(["component","expression","function"]),Bl,Ul,kl]),zl=F([d(),O({componentName:d(),props:v(B()),initialValue:v(B())})]),Ke=O({name:d(),title:ae,valueType:ie,description:v(d()),defaultValue:B(),setters:v(R(zl)),condition:v(xn())}),Gl=F([d(),xn()]);var Ze=(t=>(t.SINGLE="single",t.GROUP="group",t))(Ze||{});F([d(),O({name:d(),describe:v(d()),params:v(O({name:d(),description:d()})),template:d()})]);const Hl=O({id:v(d()),title:d(),snapshot:F([d(),B()]),snapshotText:v(d()),description:v(d()),tags:v(R(d())),groupName:v(d()),category:v(d()),schema:We(Pn(jt,["id"]),O({componentName:v(d())}))}),Vl=O({componentName:d(),title:d(),screenshot:v(d()),icon:v(d()),tags:v(R(d())),groupName:v(d()),category:v(d()),priority:v(Rn()),npm:F([qe,z(!1)]),snippets:R(Hl),props:R(F([Ke,O({title:v(ae),type:z("single"),content:Ke}),O({title:v(ae),type:z("group"),content:R(Ke)})])),fixedProps:v(B()),isContainer:v(F([Z(),O({placeholder:d(),width:d(),height:d()})])),isModal:v(F([Z(),O({visibleKey:d()})])),isSupportStyle:v(Z()),isSupportDispatchNativeEvent:v(Z()),isLayout:v(Z()),rootSelector:v(d()),selectionToolBars:v(R(Gl)),extra:v(kt(B(),B()))}),Wl=t=>({data:e,message:r,throwError:n})=>{const o=t({data:e,message:r,throwError:n});if(o.isValidate)return o;if(n)throw o.message||r?new Error(`${o.message||r}
 originData: ${JSON.stringify(e)}`):new Error(`${JSON.stringify(e)} 
 data struct format is invalidate`);return o},tr=t=>{const{data:e,message:r,throwError:n,dataStruct:o}=t;return Wl(({data:a})=>{try{return Mn(a,o),{isValidate:!0}}catch(s){let i=s;return s instanceof $n&&(i=s.failures().map(c=>`\u3010${c.path.join(".")}\u3011: ${c.message}
`)),{isValidate:!1,message:i,error:s}}})({data:e,message:r,throwError:n})};var se=(t=>(t.PAGE="CPage",t.COMPONENT="CComponent",t))(se||{});const er=O({type:z(H.FUNCTION),value:d()}),Jl=We(Pn(jt,["componentName"]),O({componentName:z("CPage"),beforeRender:v(er),afterRender:v(er),methods:v(R(er))}));function ql(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(o){o(r)}),(n=t.get("*"))&&n.slice().map(function(o){o(e,r)})}}}const zt=ql(),Yl=(t,e)=>{const r={...t,value:[]},n=t.value;let o=new ft([]);return e&&(o=e.materialsMode||new ft([])),n&&(M(n)?r.value=n.map(a=>new $(a,{parent:e,materials:o})):L(n)&&r.value.push(new $(n,{parent:e,materials:o}))),r};class wt{constructor(e,r){b(this,"nodeType","SLOT"),b(this,"rawData"),b(this,"parent"),b(this,"emitter",zt),b(this,"data"),b(this,"id"),b(this,"materialsMode"),this.parent=(r==null?void 0:r.parent)||null,this.rawData=e;const n=(r==null?void 0:r.materials)||new ft([]);this.materialsMode=n,this.id=tt(),this.data=Yl(e,this)}get value(){return this.data}export(e){const r=this.data,n=o=>{if(o instanceof $)return o.export(e);if(L(o)){const a={};return Object.keys(o||{}).forEach(s=>{a[s]=n(o[s])}),a}return M(o)?o.map(a=>n(a)):o};return n(r)}}const Fn=t=>{let e=[];return t.forEach(r=>{const n=r;n.type?n.type===Ze.SINGLE?e.push(n.content):n.type===Ze.GROUP&&(e=[...e,...Fn(n.content)]):e.push(r)}),e},rr=(t,e,r)=>{if(t.type)return t.type===H.SLOT?new wt(t,{parent:e,materials:r}):t;if(L(t)){const n={};return Object.keys(t).forEach(o=>{n[o]=nr(t[o],e,r)}),n}else return Array.isArray(t)?t.map(n=>rr(n,e,r)):t},nr=(t,e,r)=>L(t)?rr(t,e,r):M(t)?t.map(n=>rr(n,e,r)):t;class nt{constructor(e,r,n){b(this,"nodeType","PROP"),b(this,"rawData"),b(this,"parent"),b(this,"emitter",zt),b(this,"data"),b(this,"name"),b(this,"materialsMode");const o=(n==null?void 0:n.materials)||new ft([]);this.materialsMode=o,this.parent=n==null?void 0:n.parent,this.rawData=r,this.name=e,this.data=nr(r,this,o)}isIncludeSlot(){return!1}isIncludeExpression(){return!1}get value(){return this.data}updateValue(e){const r=this.data;this.data=nr(e!=null?e:r,this,this.materialsMode),this.emitter.emit("onPropChange",{value:this.data,preValue:r,node:this}),this.parent&&!(this.parent instanceof wt)&&this.emitter.emit("onNodeChange",{value:this.parent.value,preValue:this.parent.value,node:this.parent})}get material(){const e=this.parent;if(e instanceof $){const r=e.material;return Fn((r==null?void 0:r.value.props)||[]).find(n=>n.name===this.name)}else return null}export(e){const r=this.data,n=o=>{if(o instanceof nt||o instanceof wt||o instanceof $)return o.export(e);if(M(o))return o.map(a=>n(a));if(L(o)){const a={};return Object.keys(o||{}).forEach(s=>{a[s]=n(o[s])}),a}return o};return n(r)}}const Xl=t=>{if(typeof t=="string")return!0;tr({data:t,dataStruct:jt,throwError:!0})},Ln=(t,e,r=new ft([]))=>{var n;if(typeof t=="string")return t;const o={...t,id:(n=t.id)!=null?n:tt(),children:[],props:{},configure:gl(t.configure,{})},a=Object.keys(t.props||{});return a.length&&a.forEach(s=>{var i;const c=(i=t.props)==null?void 0:i[s];if(c instanceof nt){o.props[s]=c;return}o.props[s]=new nt(s,c||"",{parent:e,materials:r})}),t.children&&(Array.isArray(t.children)?o.children=t.children.map(s=>{if(s instanceof $)return s;if(L(s)){const i=s;return new $(i,{parent:e,materials:r})}else return s}):(t.children instanceof $&&(o.children=[t.children]),o.children=[new $(t.children,{parent:e,materials:r})])),o};class ${constructor(e,r){b(this,"nodeType","NODE"),b(this,"rawData"),b(this,"data"),b(this,"emitter",zt),b(this,"parent"),b(this,"materialsModel"),b(this,"listenerHandle"),b(this,"onChangeCbQueue"),this.rawData=JSON.parse(JSON.stringify(e)),Xl(e);const n=(r==null?void 0:r.materials)||new ft([]);this.parent=(r==null?void 0:r.parent)||null,this.materialsModel=n,this.data=Ln(e,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener()}registerListener(){const e=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",e),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",e)})}onChange(e){return this.onChangeCbQueue.push(e),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==e)}}destroy(){this.listenerHandle.forEach(e=>e())}get id(){return this.data.id}get value(){return this.data}clone(e){const r={...this.export("design"),id:e||tt()};return new $(r)}updateValue(e){const r=this.data,n={...this.data,...e};this.data=Ln(n,this),this.emitter.emit("onNodeChange",{value:n,preValue:r,node:this})}contains(e){return sr(this,e)}get props(){return this.data.props}get material(){const e=this.materialsModel;return e==null?void 0:e.findByComponentName(this.data.componentName)}getPlainProps(){const e=this.data,r={};return Object.keys(e.props||{}).forEach(n=>{r[n]=e.props[n].export("design")}),r}export(e){var r;const n=this.data;if(typeof n=="string")return n;const o={};Object.keys(n.props||{}).forEach(l=>{o[l]=n.props[l].export(e)});const a=(r=n.children)==null?void 0:r.map(l=>l instanceof $?l.export(e):l),s=n.configure||{},i=s.propsSetter||{},c={};Object.keys(i).forEach(l=>{const p=Hr(i,l,!1);p&&(c[l]=p)}),s.propsSetter=c,this.material&&this.materialsModel.usedMaterials.push(this.material);let u={...n,configure:s,props:o,children:a};return u=ir(u),u}}const Bn=(t,e,r)=>{const n={...t,id:tt(),props:{},componentName:se.PAGE,children:[]};let o=[];M(t.children)?o=t.children.map(s=>s instanceof $?s:L(s)?new $(s,{parent:e,materials:r}):s):t.children instanceof $?o.push(t.children):t.children&&L(t.children)?o.push(new $(t.children,{parent:e,materials:r})):o.push(t.children,{parent:e});const a=Object.keys(t.props||{});return a.length&&a.forEach(s=>{var i;const c=(i=t.props)==null?void 0:i[s];c instanceof nt?n.props[s]=c:n.props[s]=new nt(s,c||"",{parent:e,materials:r})}),n.children=o,n};class or{constructor(e,{parent:r,materials:n}){b(this,"rawData"),b(this,"data"),b(this,"nodeType","SCHEMA"),b(this,"emitter",zt),b(this,"materialsModel"),b(this,"listenerHandle"),b(this,"onChangeCbQueue"),b(this,"parent"),this.materialsModel=n,this.rawData=JSON.parse(JSON.stringify(e)),this.data=Bn(e,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener(),this.parent=r}registerListener(){const e=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",e),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",e)})}onChange(e){return this.onChangeCbQueue.push(e),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==e)}}get id(){return this.data.id}get value(){return this.data}get props(){return this.data.props}get material(){const e=this.materialsModel;return e==null?void 0:e.findByComponentName(this.data.componentName)}updateValue(e){const r=this.data,n={...this.data,...e};this.data=Bn(n,this,this.materialsModel),this.emitter.emit("onNodeChange",{value:this.data,preValue:r,node:this})}contains(e){return sr(this,e)}export(e=Ye.SAVE){var r;const n=this.data,o={};Object.keys(n.props||{}).forEach(c=>{o[c]=n.props[c].export(e)});const a=(r=n.children)==null?void 0:r.map(c=>c.export(e)),s={...n,props:o,children:a};let i=An(s,["id"]);return i=ir(i),i}}const ce=t=>(t==null?void 0:t.type)===H.EXPRESSION,Ql=t=>(t==null?void 0:t.type)==H.FUNCTION,tt=()=>Math.random().toString(32).slice(3,9),Kl=t=>(t==null?void 0:t.nodeType)==="NODE",ar=t=>(t==null?void 0:t.nodeType)==="PROP",Zl=t=>(t==null?void 0:t.nodeType)==="SLOT",ir=t=>Al(t,e=>L(e)?!Object.keys(e).length:M(e)?!e.length:!e);function sr(t,e){const r=[t];for(;r.length;){const n=r.shift();if((n==null?void 0:n.id)===e)return n;const o=(n==null?void 0:n.props)||{},a=i=>{if(i instanceof $){r.push(i);return}if(i instanceof wt&&a(i.value.value),i instanceof nt){a(i.value);return}if(L(i)){const c=i;Object.keys(c).map(u=>{a(c[u])});return}if(M(i)){i.forEach(c=>{a(c)});return}};a(o);const s=(n==null?void 0:n.value.children.filter(i=>i instanceof $))||[];r.push(...s)}return null}const tf=t=>{const e=yn(t),r=e.snippets;return delete e.snippets,e.snippets=r.map(n=>({...e,...n,id:n.id||`${t.componentName}-${tt()}`,title:n.title||t.title,category:n.category||t.category,tags:[...n.tags||[],...t.tags||[]],groupName:n.groupName||t.groupName,snapshot:n.snapshot||t.icon,snapshotText:n.snapshotText,schema:{...n.schema,componentName:n.schema.componentName||t.componentName}})),e};class ef{constructor(e){b(this,"rawData"),b(this,"data"),this.rawData=e,this.data=tf(e)}get value(){return this.data}get componentName(){return this.data.componentName}get snippets(){return this.data.snippets}getSnippetById(e){return this.data.snippets.find(r=>r.id===e)}}const rf=t=>{if(!M(t))throw new Error("Materials must be a array");return t.map(e=>new ef(e))},nf=t=>{t==null||t.forEach(e=>{tr({data:e,dataStruct:Vl,throwError:!0})})};class ft{constructor(e){b(this,"rowData"),b(this,"data"),b(this,"usedMaterials",[]),this.rowData=e,nf(e),this.data=rf(e)}findByComponentName(e){return this.data.find(r=>r.componentName===e)}findSnippetById(e){const r=[...this.data];let n=null;for(;!n&&r.length;){const o=r.pop();n=o==null?void 0:o.getSnippetById(e)}return n}getAllSnippets(){let e=this.data.reduce((a,s)=>(a.push(...s.snippets),a),[]);const r=["default"],n={default:[]};e=e.sort((a,s)=>(a.category||"")>(s.category||"")?1:-1),e.forEach(a=>{const s=a.groupName||"default";r.includes(s)||(r.push(s),n[s]=[]),n[s].push(a)});const o=[];return r.forEach(a=>{const s=["default"],i={default:[]},c=n[a];if(c.length!==0){c.forEach(p=>{const f=p.category||"default";s.includes(f)||(s.push(f),i[f]=[]),i[f].push(p)});const u=[];s.forEach(p=>{i[p].length&&u.push({name:p,list:i[p]})});const l={name:a,list:u};o.push(l)}}),o}get value(){return this.data}}const of=O({version:d(),pageName:d(),style:v(d()),css:v(d()),componentsMeta:R(We(O({componentName:d()}),qe)),thirdLibs:v(Fl),componentsTree:Jl}),af=t=>(tr({data:t,dataStruct:of,throwError:!0}),t),sf=(t,e,r)=>({...t,componentsTree:new or(t.componentsTree,{parent:e,materials:r})});class ue{constructor(e,r){b(this,"nodeType","PAGE"),b(this,"rawData"),b(this,"emitter",zt),b(this,"data"),b(this,"parent"),b(this,"materialsModel"),af(e),this.rawData=JSON.parse(JSON.stringify(e)),this.materialsModel=new ft((r==null?void 0:r.materials)||[]),this.data=sf(e,this,this.materialsModel)}get value(){return this.data}getNode(e){const r=this.data.componentsTree;return sr(r,e)}addNode(e,r,n="AFTER"){var o,a,s;if(n==="AFTER"||n==="BEFORE"){const i=r.parent;if(i===null&&r instanceof or)return console.warn("Not found parent node"),!1;if(i instanceof nt)return console.warn("CProp can not add node"),!1;if(i instanceof wt){const u=i.value.value,l=(o=u.findIndex(p=>p===r))!=null?o:-1;return l>=0?(n==="BEFORE"?u.splice(l,0,e):u.splice(l+1,0,e),e.parent=i,(a=i.parent)==null||a.updateValue(),!0):!1}if(i instanceof ue)return!1;const c=(s=i==null?void 0:i.value.children.findIndex(u=>u===r))!=null?s:-1;return c>=0?(n==="BEFORE"?i==null||i.value.children.splice(c,0,e):i==null||i.value.children.splice(c+1,0,e),e.parent=i,i==null||i.updateValue(),!0):(console.warn("Not found target node"),!1)}if(n==="CHILD_START")return r.value.children.unshift(e),e.parent=r,r.updateValue(),!0;if(n==="CHILD_END")return r.value.children.push(e),e.parent=r,r.updateValue(),!0;if(L(n)){const i=n;if(i.type==="CHILD"){const c=i.pos,u=i.index||0;return c==="BEFORE"?r==null||r.value.children.splice(u,0,e):r==null||r.value.children.splice(u+1,0,e),e.parent=r,r.updateValue(),!0}else console.warn("Can not parse pos obj")}return!1}createNode(e){return delete e.id,new $(e,{parent:null,materials:this.materialsModel})}addNodeById(e,r,n="AFTER"){const o=this.getNode(r);return o?this.addNode(e,o,n):(console.warn(`Not find a node by ${r}, pls check it`),!1)}copyNode(e){const r=e.export("design");r.id=tt();const n=new $(r,{parent:e.parent,materials:this.materialsModel});return this.addNode(n,e,"AFTER"),n}copyNodeById(e){const r=this.getNode(e);return r&&r instanceof $?this.copyNode(r):!1}moveNode(e,r,n){this.deleteNode(e);let o=r;return["AFTER","BEFORE"].includes(n)&&(o=r.parent),e.parent=o,this.addNode(e,r,n)}moveNodeById(e,r,n){const o=this.getNode(e),a=this.getNode(r);return o&&a&&o instanceof $&&a instanceof $?this.moveNode(o,a,n):!1}deleteNode(e){var r;const n=e.parent;if(!n)throw new Error("parent node is null or undefined, pls check it");if(n instanceof wt){const o=n.value.value,a=o.findIndex(i=>i===e),s=o[a];return o.splice(a,1),(r=n.parent)==null||r.updateValue(),s}if(n instanceof $||n instanceof or){const o=n.value.children,a=o.findIndex(i=>i===e),s=o[a];return o.splice(a,1),n.updateValue(),s}}deleteNodeById(e){const r=this.getNode(e);if(r)return this.deleteNode(r)}export(e=Ye.SAVE){const r=this.data.componentsTree.export(e),n=this.materialsModel.usedMaterials.map(a=>({componentName:a.componentName,...yn(a.value.npm||{})}));this.materialsModel.usedMaterials=[];let o={...this.data,componentsTree:ir(r),componentsMeta:n};return o=An(o,["id"]),JSON.parse(JSON.stringify(o))}}se.PAGE;var cf=typeof global=="object"&&global&&global.Object===Object&&global;const Un=cf;var uf=typeof self=="object"&&self&&self.Object===Object&&self,lf=Un||uf||Function("return this")();const Ot=lf;var ff=Ot.Symbol;const St=ff;var kn=Object.prototype,pf=kn.hasOwnProperty,df=kn.toString,Gt=St?St.toStringTag:void 0;function hf(t){var e=pf.call(t,Gt),r=t[Gt];try{t[Gt]=void 0;var n=!0}catch{}var o=df.call(t);return n&&(e?t[Gt]=r:delete t[Gt]),o}var vf=Object.prototype,gf=vf.toString;function mf(t){return gf.call(t)}var yf="[object Null]",bf="[object Undefined]",zn=St?St.toStringTag:void 0;function Ht(t){return t==null?t===void 0?bf:yf:zn&&zn in Object(t)?hf(t):mf(t)}function Ct(t){return t!=null&&typeof t=="object"}var _f="[object Symbol]";function jf(t){return typeof t=="symbol"||Ct(t)&&Ht(t)==_f}function wf(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var Of=Array.isArray;const Et=Of;var Sf=1/0,Gn=St?St.prototype:void 0,Hn=Gn?Gn.toString:void 0;function Vn(t){if(typeof t=="string")return t;if(Et(t))return wf(t,Vn)+"";if(jf(t))return Hn?Hn.call(t):"";var e=t+"";return e=="0"&&1/t==-Sf?"-0":e}function pt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Wn(t){return t}var Cf="[object AsyncFunction]",Ef="[object Function]",Nf="[object GeneratorFunction]",Af="[object Proxy]";function cr(t){if(!pt(t))return!1;var e=Ht(t);return e==Ef||e==Nf||e==Cf||e==Af}var $f=Ot["__core-js_shared__"];const ur=$f;var Jn=function(){var t=/[^.]+$/.exec(ur&&ur.keys&&ur.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Tf(t){return!!Jn&&Jn in t}var Mf=Function.prototype,Pf=Mf.toString;function xf(t){if(t!=null){try{return Pf.call(t)}catch{}try{return t+""}catch{}}return""}var Rf=/[\\^$.*+?()[\]{}|]/g,Df=/^\[object .+?Constructor\]$/,If=Function.prototype,Ff=Object.prototype,Lf=If.toString,Bf=Ff.hasOwnProperty,Uf=RegExp("^"+Lf.call(Bf).replace(Rf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kf(t){if(!pt(t)||Tf(t))return!1;var e=cr(t)?Uf:Df;return e.test(xf(t))}function zf(t,e){return t==null?void 0:t[e]}function lr(t,e){var r=zf(t,e);return kf(r)?r:void 0}var qn=Object.create,Gf=function(){function t(){}return function(e){if(!pt(e))return{};if(qn)return qn(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Hf=Gf;function Vf(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Wf(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Jf=800,qf=16,Yf=Date.now;function Xf(t){var e=0,r=0;return function(){var n=Yf(),o=qf-(n-r);if(r=n,o>0){if(++e>=Jf)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Qf(t){return function(){return t}}var Kf=function(){try{var t=lr(Object,"defineProperty");return t({},"",{}),t}catch{}}();const le=Kf;var Zf=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:Qf(e),writable:!0})}:Wn,tp=Xf(Zf);const ep=tp;var rp=9007199254740991,np=/^(?:0|[1-9]\d*)$/;function Yn(t,e){var r=typeof t;return e=e==null?rp:e,!!e&&(r=="number"||r!="symbol"&&np.test(t))&&t>-1&&t%1==0&&t<e}function fr(t,e,r){e=="__proto__"&&le?le(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function fe(t,e){return t===e||t!==t&&e!==e}var op=Object.prototype,ap=op.hasOwnProperty;function ip(t,e,r){var n=t[e];(!(ap.call(t,e)&&fe(n,r))||r===void 0&&!(e in t))&&fr(t,e,r)}function sp(t,e,r,n){var o=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var i=e[a],c=n?n(r[i],t[i],i,r,t):void 0;c===void 0&&(c=t[i]),o?fr(r,i,c):ip(r,i,c)}return r}var Xn=Math.max;function cp(t,e,r){return e=Xn(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=Xn(n.length-e,0),s=Array(a);++o<a;)s[o]=n[e+o];o=-1;for(var i=Array(e+1);++o<e;)i[o]=n[o];return i[e]=r(s),Vf(t,this,i)}}function up(t,e){return ep(cp(t,e,Wn),t+"")}var lp=9007199254740991;function Qn(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=lp}function pr(t){return t!=null&&Qn(t.length)&&!cr(t)}function fp(t,e,r){if(!pt(r))return!1;var n=typeof e;return(n=="number"?pr(r)&&Yn(e,r.length):n=="string"&&e in r)?fe(r[e],t):!1}function pp(t){return up(function(e,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(o--,a):void 0,s&&fp(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var i=r[n];i&&t(e,i,n,a)}return e})}var dp=Object.prototype;function Kn(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||dp;return t===r}function hp(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var vp="[object Arguments]";function Zn(t){return Ct(t)&&Ht(t)==vp}var to=Object.prototype,gp=to.hasOwnProperty,mp=to.propertyIsEnumerable,yp=Zn(function(){return arguments}())?Zn:function(t){return Ct(t)&&gp.call(t,"callee")&&!mp.call(t,"callee")};const dr=yp;function bp(){return!1}var eo=typeof y=="object"&&y&&!y.nodeType&&y,ro=eo&&typeof module=="object"&&module&&!module.nodeType&&module,_p=ro&&ro.exports===eo,no=_p?Ot.Buffer:void 0,jp=no?no.isBuffer:void 0,wp=jp||bp;const oo=wp;var Op="[object Arguments]",Sp="[object Array]",Cp="[object Boolean]",Ep="[object Date]",Np="[object Error]",Ap="[object Function]",$p="[object Map]",Tp="[object Number]",Mp="[object Object]",Pp="[object RegExp]",xp="[object Set]",Rp="[object String]",Dp="[object WeakMap]",Ip="[object ArrayBuffer]",Fp="[object DataView]",Lp="[object Float32Array]",Bp="[object Float64Array]",Up="[object Int8Array]",kp="[object Int16Array]",zp="[object Int32Array]",Gp="[object Uint8Array]",Hp="[object Uint8ClampedArray]",Vp="[object Uint16Array]",Wp="[object Uint32Array]",A={};A[Lp]=A[Bp]=A[Up]=A[kp]=A[zp]=A[Gp]=A[Hp]=A[Vp]=A[Wp]=!0,A[Op]=A[Sp]=A[Ip]=A[Cp]=A[Fp]=A[Ep]=A[Np]=A[Ap]=A[$p]=A[Tp]=A[Mp]=A[Pp]=A[xp]=A[Rp]=A[Dp]=!1;function Jp(t){return Ct(t)&&Qn(t.length)&&!!A[Ht(t)]}function qp(t){return function(e){return t(e)}}var ao=typeof y=="object"&&y&&!y.nodeType&&y,Vt=ao&&typeof module=="object"&&module&&!module.nodeType&&module,Yp=Vt&&Vt.exports===ao,hr=Yp&&Un.process,Xp=function(){try{var t=Vt&&Vt.require&&Vt.require("util").types;return t||hr&&hr.binding&&hr.binding("util")}catch{}}();const io=Xp;var so=io&&io.isTypedArray,Qp=so?qp(so):Jp;const co=Qp;var Kp=Object.prototype,Zp=Kp.hasOwnProperty;function td(t,e){var r=Et(t),n=!r&&dr(t),o=!r&&!n&&oo(t),a=!r&&!n&&!o&&co(t),s=r||n||o||a,i=s?hp(t.length,String):[],c=i.length;for(var u in t)(e||Zp.call(t,u))&&!(s&&(u=="length"||o&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Yn(u,c)))&&i.push(u);return i}function ed(t,e){return function(r){return t(e(r))}}function rd(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var nd=Object.prototype,od=nd.hasOwnProperty;function ad(t){if(!pt(t))return rd(t);var e=Kn(t),r=[];for(var n in t)n=="constructor"&&(e||!od.call(t,n))||r.push(n);return r}function uo(t){return pr(t)?td(t,!0):ad(t)}var id=lr(Object,"create");const Wt=id;function sd(){this.__data__=Wt?Wt(null):{},this.size=0}function cd(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ud="__lodash_hash_undefined__",ld=Object.prototype,fd=ld.hasOwnProperty;function pd(t){var e=this.__data__;if(Wt){var r=e[t];return r===ud?void 0:r}return fd.call(e,t)?e[t]:void 0}var dd=Object.prototype,hd=dd.hasOwnProperty;function vd(t){var e=this.__data__;return Wt?e[t]!==void 0:hd.call(e,t)}var gd="__lodash_hash_undefined__";function md(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Wt&&e===void 0?gd:e,this}function dt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}dt.prototype.clear=sd,dt.prototype.delete=cd,dt.prototype.get=pd,dt.prototype.has=vd,dt.prototype.set=md;function yd(){this.__data__=[],this.size=0}function pe(t,e){for(var r=t.length;r--;)if(fe(t[r][0],e))return r;return-1}var bd=Array.prototype,_d=bd.splice;function jd(t){var e=this.__data__,r=pe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():_d.call(e,r,1),--this.size,!0}function wd(t){var e=this.__data__,r=pe(e,t);return r<0?void 0:e[r][1]}function Od(t){return pe(this.__data__,t)>-1}function Sd(t,e){var r=this.__data__,n=pe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function et(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}et.prototype.clear=yd,et.prototype.delete=jd,et.prototype.get=wd,et.prototype.has=Od,et.prototype.set=Sd;var Cd=lr(Ot,"Map");const lo=Cd;function Ed(){this.size=0,this.__data__={hash:new dt,map:new(lo||et),string:new dt}}function Nd(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function de(t,e){var r=t.__data__;return Nd(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Ad(t){var e=de(this,t).delete(t);return this.size-=e?1:0,e}function $d(t){return de(this,t).get(t)}function Td(t){return de(this,t).has(t)}function Md(t,e){var r=de(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function Nt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Nt.prototype.clear=Ed,Nt.prototype.delete=Ad,Nt.prototype.get=$d,Nt.prototype.has=Td,Nt.prototype.set=Md;function fo(t){return t==null?"":Vn(t)}var Pd=ed(Object.getPrototypeOf,Object);const po=Pd;var xd="[object Object]",Rd=Function.prototype,Dd=Object.prototype,ho=Rd.toString,Id=Dd.hasOwnProperty,Fd=ho.call(Object);function Jt(t){if(!Ct(t)||Ht(t)!=xd)return!1;var e=po(t);if(e===null)return!0;var r=Id.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&ho.call(r)==Fd}function Ld(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a}function Bd(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Ld(t,e,r)}var Ud="\\ud800-\\udfff",kd="\\u0300-\\u036f",zd="\\ufe20-\\ufe2f",Gd="\\u20d0-\\u20ff",Hd=kd+zd+Gd,Vd="\\ufe0e\\ufe0f",Wd="\\u200d",Jd=RegExp("["+Wd+Ud+Hd+Vd+"]");function vo(t){return Jd.test(t)}function qd(t){return t.split("")}var go="\\ud800-\\udfff",Yd="\\u0300-\\u036f",Xd="\\ufe20-\\ufe2f",Qd="\\u20d0-\\u20ff",Kd=Yd+Xd+Qd,Zd="\\ufe0e\\ufe0f",th="["+go+"]",vr="["+Kd+"]",gr="\\ud83c[\\udffb-\\udfff]",eh="(?:"+vr+"|"+gr+")",mo="[^"+go+"]",yo="(?:\\ud83c[\\udde6-\\uddff]){2}",bo="[\\ud800-\\udbff][\\udc00-\\udfff]",rh="\\u200d",_o=eh+"?",jo="["+Zd+"]?",nh="(?:"+rh+"(?:"+[mo,yo,bo].join("|")+")"+jo+_o+")*",oh=jo+_o+nh,ah="(?:"+[mo+vr+"?",vr,yo,bo,th].join("|")+")",ih=RegExp(gr+"(?="+gr+")|"+ah+oh,"g");function sh(t){return t.match(ih)||[]}function ch(t){return vo(t)?sh(t):qd(t)}function uh(t){return function(e){e=fo(e);var r=vo(e)?ch(e):void 0,n=r?r[0]:e.charAt(0),o=r?Bd(r,1).join(""):e.slice(1);return n[t]()+o}}var lh=uh("toUpperCase");const fh=lh;function mr(t){return fh(fo(t).toLowerCase())}function ph(){this.__data__=new et,this.size=0}function dh(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function hh(t){return this.__data__.get(t)}function vh(t){return this.__data__.has(t)}var gh=200;function mh(t,e){var r=this.__data__;if(r instanceof et){var n=r.__data__;if(!lo||n.length<gh-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Nt(n)}return r.set(t,e),this.size=r.size,this}function At(t){var e=this.__data__=new et(t);this.size=e.size}At.prototype.clear=ph,At.prototype.delete=dh,At.prototype.get=hh,At.prototype.has=vh,At.prototype.set=mh;var wo=typeof y=="object"&&y&&!y.nodeType&&y,Oo=wo&&typeof module=="object"&&module&&!module.nodeType&&module,yh=Oo&&Oo.exports===wo,So=yh?Ot.Buffer:void 0,Co=So?So.allocUnsafe:void 0;function bh(t,e){if(e)return t.slice();var r=t.length,n=Co?Co(r):new t.constructor(r);return t.copy(n),n}var _h=Ot.Uint8Array;const Eo=_h;function jh(t){var e=new t.constructor(t.byteLength);return new Eo(e).set(new Eo(t)),e}function wh(t,e){var r=e?jh(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Oh(t){return typeof t.constructor=="function"&&!Kn(t)?Hf(po(t)):{}}function Sh(t){return function(e,r,n){for(var o=-1,a=Object(e),s=n(e),i=s.length;i--;){var c=s[t?i:++o];if(r(a[c],c,a)===!1)break}return e}}var Ch=Sh();const Eh=Ch;function yr(t,e,r){(r!==void 0&&!fe(t[e],r)||r===void 0&&!(e in t))&&fr(t,e,r)}function Nh(t){return Ct(t)&&pr(t)}function br(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function Ah(t){return sp(t,uo(t))}function $h(t,e,r,n,o,a,s){var i=br(t,r),c=br(e,r),u=s.get(c);if(u){yr(t,r,u);return}var l=a?a(i,c,r+"",t,e,s):void 0,p=l===void 0;if(p){var f=Et(c),h=!f&&oo(c),g=!f&&!h&&co(c);l=c,f||h||g?Et(i)?l=i:Nh(i)?l=Wf(i):h?(p=!1,l=bh(c,!0)):g?(p=!1,l=wh(c,!0)):l=[]:Jt(c)||dr(c)?(l=i,dr(i)?l=Ah(i):(!pt(i)||cr(i))&&(l=Oh(c))):p=!1}p&&(s.set(c,l),o(l,c,n,a,s),s.delete(c)),yr(t,r,l)}function No(t,e,r,n,o){t!==e&&Eh(e,function(a,s){if(o||(o=new At),pt(a))$h(t,e,s,r,No,n,o);else{var i=n?n(br(t,s),a,s+"",t,e,o):void 0;i===void 0&&(i=a),yr(t,s,i)}},uo)}var Th=pp(function(t,e,r){No(t,e,r)});const Mh=Th;function Ph(t){const e=t.prototype;return!!(e&&e.isReactComponent)}function xh(t){var n,o;const r=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.forward_ref"):60112;return(t==null?void 0:t.$$typeof)===r||((n=t==null?void 0:t.prototype)==null?void 0:n.isReactComponent)||((o=t==null?void 0:t.prototype)==null?void 0:o.setState)||t._forwardRef}function Rh(t){class e extends I.Component{render(){return I.createElement(t,this.props)}}return e.displayName=t.displayName,e}const he=(t,e)=>{const r=n=>{const a=`
    ${Object.keys(e).map(s=>`const ${s} = $$context['${s}'];`).join(`
`)}
    return ${n};
    `;return new Function("$$context",a)(e)};try{return r(t)}catch(n){console.warn(n);const o=`[${t}] expression run failed`;return console.warn(o),null}},Dh=(t,e,r)=>function(...o){try{const a=`
        var f = ${t};
        var args = Array.from(arguments);
        var __$$storeManager__ = args.pop();
        var $$context = args.pop();
        $$context.stateManager = __$$storeManager__.getStateSnapshot();
        return f.apply(f, args)
      `;new Function(a)(...o,e,r)}catch(a){console.warn(a)}},Ao=(t,e)=>{const r={};return e.forEach((n,o)=>{r[n]=t[o]}),r},Ih=t=>{const e={};return Object.keys(t).forEach(r=>{let n=r.split("-");n.length>=2&&(n=n.map((o,a)=>a!==0?mr(o):o)),e[n.join("")]=t[r]}),e},ve="DYNAMIC",Fh=["$$context","$$nodeModel"],$o=t=>{let e;const r=new Set,n=(c,u)=>{const l=typeof c=="function"?c(e):c;if(!Object.is(l,e)){const p=e;e=(u!=null?u:typeof l!="object")?l:Object.assign({},e,l),r.forEach(f=>f(e,p))}},o=()=>e,i={setState:n,getState:o,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>r.clear()};return e=t(n,o,i),i},Lh=t=>t?$o(t):$o;class Bh{constructor(){_(this,"storeMap",new Map)}addStore(e,r){const n=Lh(r);return this.storeMap.set(e,n),n.name=e,n}setStore(e,r){this.storeMap.set(e,r)}removeStore(e){this.storeMap.delete(e)}getStore(e){return this.storeMap.get(e)}connect(e,r){const n=this.storeMap.get(e);n?n.subscribe(r):console.warn("store not exits")}getStateSnapshot(){const e={};return this.storeMap.forEach((r,n)=>{e[n]={state:r.getState(),updateState:o=>{r.setState(o)}}}),e}destroy(){this.storeMap.forEach(e=>{e.destroy()}),this.storeMap=new Map}}class To{constructor(){_(this,"renderMode","normal");_(this,"components",{});_(this,"storeManager",new Bh);_(this,"runtimeComponentCache",new Map);_(this,"onGetRef");_(this,"onGetComponent");_(this,"onComponentMount");_(this,"onComponentDestroy");_(this,"processNodeConfigHook")}getComponent(e){var o;const r=e.value.componentName;let n=this.components[r]||(()=>"Component not found");return xh(n)||(n=Rh(n),this.components[r]=n),this.onGetComponent&&(n=(o=this.onGetComponent)==null?void 0:o.call(this,n,e)),n}getContext(e={},r){let n=e;return r&&(n={...e},n.__proto__=r||null),n}pageRender(e,{components:r,onGetRef:n,$$context:o={},onGetComponent:a,onComponentMount:s,onComponentDestroy:i,renderMode:c,processNodeConfigHook:u}){this.renderMode=c,this.components=r,this.onGetRef=n,this.onGetComponent=a,this.onComponentMount=s,this.onComponentDestroy=i,this.processNodeConfigHook=u;const l=e.value.componentsTree,p=this.getComponent(l),f=this.convertModelToComponent(p,e.value.componentsTree),h={},g=l.props;return Object.keys(g).forEach(m=>{h[m]=g[m].value}),h.$$context=o,this.render(f,h)}transformProps(e={},{$$context:r}){const n=e,o=s=>{if(Array.isArray(s))return s.map(i=>o(i));if(ar(s))return o(s.value);if(Zl(s)){const i=s.value,c=i.value;if(!c)return console.warn("slot value is null, this maybe cause some error, pls check it",e),()=>{};const u=l=>{const p=`${l.id}-${ve}`;if(this.runtimeComponentCache.get(l.id))return{key:p,component:this.runtimeComponentCache.get(l.id)};const f=this.getComponent(l),h=this.convertModelToComponent(f,l),g=i.params||[];return{component:(...w)=>{const S=Ao(w,g),P=this.getContext({params:S},r);return this.render(h,{$$context:P,key:p})},key:p}};if(Array.isArray(c)){const l=c==null?void 0:c.map(p=>u(p));return(...p)=>l.map(f=>Ph(f.component)?T.default.createElement(f.component,{$$context:r,key:f.key}):f.component(...p))}else return u(c).component}else{if(ce(s))return he(s.value,r||{});if(Ql(s))return Dh(s.value,r,this.storeManager);if(Jt(s)){let i=s;ar(s)&&(i=s.value);const c=i,u={};return Object.keys(i).forEach(l=>{u[l]=o(c[l])}),u}else return s}},a={};return Object.keys(n).forEach(s=>{const i=n[s];a[s]=o(i)}),a}collectSpecialProps(e={},r){const n=[],o=(a,s)=>{let i=s;ar(s)&&(i=s.value),r(i)?n.push({keyPath:a,val:i}):Et(i)?i.forEach((c,u)=>{o([...a,String(u)],c)}):Jt(i)&&Object.keys(i).forEach(c=>{o([...a,c],i[c])})};return o(["$root"],e),n}convertModelToComponent(e,r){const n=this;class o extends T.default.Component{constructor(i){super(i);_(this,"_CONDITION",!0);_(this,"_DESIGN_BOX",!1);_(this,"_NODE_MODEL",r);_(this,"_NODE_ID",r.id);_(this,"UNIQUE_ID",`${r.id}_${tt()}`);_(this,"targetComponentRef");_(this,"listenerHandle",[]);_(this,"storeState");_(this,"updateState",i=>{this.storeState.setState(i),this.forceUpdate()});this.targetComponentRef=T.default.createRef(),this.state=r.value.state||{};const c=r.value.stateName||r.id,u=n.storeManager.getStore(c);u?(this.storeState=u,u.setState({...r.value.state||{}})):this.storeState=n.storeManager.addStore(c,()=>({...r.value.state||{}})),this.storeState.subscribe(l=>{this.setState({...l})}),this.connectStore()}connectStore(){const c=n.collectSpecialProps(r.props,u=>!!ce(u)).map(u=>{const l=u.val,f=/\$\$context.stateManager\.(.+?)\./gim.exec(l.value);return f!=null&&f.length?f[1]:""}).filter(Boolean);c.length&&c.forEach(u=>{n.storeManager.getStore(u)||n.storeManager.addStore(u,()=>({})),n.storeManager.connect(u,()=>{this.forceUpdate()})})}componentDidMount(){var c;n.onGetRef&&n.onGetRef(this.targetComponentRef,r,this),(c=n.onComponentMount)==null||c.call(n,this,r);const i=()=>{n.storeManager.setStore(r.value.stateName||r.id,this.storeState),this.storeState.setState({...this.state,...r.value.state||{}}),this.forceUpdate()};r.onChange(i)}componentWillUnmount(){var i;(i=n.onComponentDestroy)==null||i.call(n,this,r)}render(){var x;const{$$context:i,...c}=this.props,u={key:r.id,...r.props,...c},l={state:this.state||{},updateState:this.updateState};r.value.componentName===se.PAGE&&(l.globalState=this.state,l.updateGlobalState=this.updateState),l.stateManager=n.storeManager.getStateSnapshot();const p=n.getContext(l,i),f=r.value.loop;let h=[];if(f&&f.open){this.targetComponentRef.current=[];let D=f.data||[];if(ce(f.data)){const U=f.data;D=he(U.value,p||{})}return h=D.map((...U)=>{const E=U[1],$t=[f.forName||"item",f.forIndex||"index"],ot=Ao(U,$t);let qt="loopData";f.name&&(qt=`${qt}${f.name}`);const Bo=n.getContext({[qt]:ot},p),ht=n.transformProps(u,{$$context:Bo}),{children:ge}=ht;let _r=[];if(ge!==void 0)delete ht.children,_r=Array.isArray(ge)?ge:[ge];else{const Tt=[];r.value.children.forEach((Qh,Kh)=>{const Zh=n.buildComponent(Qh,{$$context:p,idx:Kh});Tt.push(Zh)}),_r=Tt}if(ht.key=`${ht.key}-${E}`,ce(f.key)){const Tt=f.key,Uo=he(Tt.value,Bo||{});ht.key+=`-${Uo}`}return ht.ref=Tt=>{this.targetComponentRef.current=this.targetComponentRef.current||[],this.targetComponentRef.current[E]=Tt},n.render(e,ht,..._r)}),h}const g=n.transformProps(u,{$$context:p}),{children:m}=g;let j=[];if(m!==void 0)delete g.children,j=Array.isArray(m)?m:[m];else{const D=[];r.value.children.forEach((E,$t)=>{const ot=n.buildComponent(E,{$$context:p,idx:$t});D.push(ot)}),j=D}g.ref=this.targetComponentRef,g.style&&(g.style=Ih(g.style));let w=(x=r.value.condition)!=null?x:!0;typeof w!="boolean"&&(w=he(w.value,p||{}));let S={condition:w,props:g};n.processNodeConfigHook&&(S=n.processNodeConfigHook(S,r));const P=n.render(e,S.props,...j);return this._CONDITION=S.condition,S.condition?P:T.default.createElement("div",{style:{display:"none"}},P)}}return _(o,"__CP_TYPE__",ve),o.displayName=`${r.value.componentName}Dynamic`,o}buildComponent(e,{$$context:r={}}){const n=this.runtimeComponentCache;return typeof e=="string"?this.render(e):Kl(e)?(({currentNode:a})=>{const s=a.value.id;let i=null;if(n.get(s))i=n.get(s);else{const l=this.getComponent(a);i=this.convertModelToComponent(l,a)}!n.get(s)&&this.renderMode!=="design"&&n.set(s,i);const c=`${s}-${ve}`,u={$$context:r,$$nodeModel:e,key:c};return this.render(i,u)})({currentNode:e}):void 0}render(e,r={},...n){return typeof e=="string"||typeof e=="number"?String(e):(Fh.forEach(a=>{a in r&&e.__CP_TYPE__!==ve&&delete r[a]}),T.default.createElement(e,r,...n))}clear(){this.runtimeComponentCache.clear(),this.storeManager.destroy()}}const Uh=wr(new To),Mo=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],kh=Mo.reduce((t,e)=>(t[e]=({children:r,...n})=>{let o=r;return Array.isArray(r)||(o=[r]),T.default.createElement(e,n,...o)},t),{});Mo.map(t=>({title:mr(t),componentName:t,npm:!1,icon:"",props:[{name:"style",title:"\u6837\u5F0F",valueType:"object",setters:["JSONSetter"]},{name:"className",title:"\u7C7B\u540D",valueType:"string",setters:["StringSetter"]}],snippets:[{title:`${mr(t)}`,snapshotText:t,category:"HTML \u5143\u7D20",schema:{props:{},children:[`I am a ${t}`]}}]}));const zh={CPage:({children:t})=>t,...kh};class Gh{constructor(){_(this,"refMap",new Map)}get(e){return this.refMap.get(e)}add(e,r){this.refMap.set(e,r)}remove(e){this.refMap.delete(e)}destroy(){this.refMap.clear()}}class Po extends T.default.Component{constructor(r){super(r);_(this,"refManager");_(this,"dynamicComponentInstanceMap",new Map);_(this,"onGetRef",(r,n,o)=>{var a,s;(s=(a=this.props).onGetRef)==null||s.call(a,r,n,o),this.dynamicComponentInstanceMap.set(n.id,o),this.refManager.add(n.value.refId||n.id,r)});_(this,"rerender",r=>{var n;this.props.adapter.clear(),this.setState({pageModel:new ue(r)}),(n=this.state.pageModel)==null||n.emitter.emit("onNodeChange",{value:r,preValue:this.state.pageModel,node:this.state.pageModel})});this.state={pageModel:r.pageModel||new ue(r.page)},this.refManager=new Gh}getPageModel(){return this.state.pageModel}componentDidMount(){const{render:r}=this.props;r&&(r.ref.current=this)}componentWillUnmount(){this.refManager.destroy()}render(){const{props:r}=this,{adapter:n,onGetComponent:o,onComponentDestroy:a,onComponentMount:s}=r,{pageModel:i}=this.state;if(!i)return console.warn("pageModel is null"),null;const c={...zh,...r.components};return n.pageRender(i,{libs:{},components:c,onGetRef:this.onGetRef,onGetComponent:o,onComponentMount:s,onComponentDestroy:a,$$context:{refs:this.refManager},renderMode:r.renderMode,processNodeConfigHook:r.processNodeConfigHook})}}const Hh=()=>{const t=I.useRef(null);return{ref:t,rerender:function(...e){t.current&&t.current.rerender(...e)}}};class Vh extends T.default.Component{constructor(r){super(r);_(this,"onDoubleClick",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:""}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){var o,a;(a=(o=this.props).onError)==null||a.call(o,n)}render(){if(this.state.hasError){const{onDoubleClick:r}=this,n=this.props.node.value;console.error(this.props.node,this.props.children);const o=T.default.createElement("div",{style:{backgroundColor:"rgb(255 206 215 / 13%)",padding:"5px",color:"#ff0000b0",textAlign:"center",fontSize:"12px"}},"Render error, node id: ",n.id,", node name\uFF1A",n.title," component name\uFF1A",n.title||n.componentName,T.default.createElement("p",null,"msg: ",String(this.state.error)),T.default.createElement("button",{onDoubleClick:r,style:{border:"1px solid rgba(100,100,100,0.1)",backgroundColor:"#fff",padding:"5px 10px",borderRadius:"2px",color:"gray",cursor:"pointer",marginTop:"5px"}},"double click to refresh"),T.default.createElement("div",{style:{display:"none"}}));return T.default.createElement(this.props.targetComponent,{onlyRenderChild:!0},o)}return this.props.children}}class xo{constructor(){_(this,"instanceMap",new Map)}get(e){return this.instanceMap.get(e)}add(e,r){const n=this.instanceMap.get(e);n?n.push(r):this.instanceMap.set(e,[r])}remove(e,r){const n=this.instanceMap.get(e);if(r!==void 0&&Array.isArray(n)){const o=n.filter(a=>a!==r);this.instanceMap.set(e,o)}else this.instanceMap.delete(e)}destroy(){this.instanceMap.clear()}}const Ro=t=>{const{node:e}=t,r=I.useMemo(()=>{var c,u;const i=(u=(c=e.material)==null?void 0:c.value)==null?void 0:u.isContainer;return Jt(i)?i:{placeholder:"Drag the component to place it",width:"100%",height:"100%",style:{}}},[t.node]),{placeholder:n,height:o,width:a,style:s}=r;return T.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(200,200,200,0.1)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"2px",fontSize:"14px",color:"gray",cursor:"default",minWidth:"300px",minHeight:"50px",width:a,height:o,...s}},n)};class Wh extends T.default.Component{constructor(r){super(r);_(this,"instanceManager",new xo);_(this,"renderRef");_(this,"dropPlaceholder",Ro);_(this,"onGetComponent",(r,n)=>{const o=this;class a extends T.default.Component{constructor(){super(...arguments);_(this,"_DESIGN_BOX",!0);_(this,"_NODE_MODEL",n);_(this,"_NODE_ID",n.id);_(this,"_UNIQUE_ID",`${n.id}_${tt()}`);_(this,"_STATUS")}componentDidMount(){o.instanceManager.add(n.id,this)}componentWillUnmount(){this._STATUS="DESTROY",o.instanceManager.remove(n.id,this)}render(){var h;const{children:c=[],onlyRenderChild:u,...l}=this.props;let p=c;return Et(c)||(p=[c]),!Boolean(p.filter(Boolean).length)&&(((h=n.material)==null?void 0:h.value.isContainer)||n.value.componentName==="CPage")&&p.push(T.default.createElement(o.dropPlaceholder,{node:n})),u?p:T.default.createElement(r,l,...p)}}return T.default.forwardRef(function(i,c){return T.default.createElement(Vh,{node:n,targetComponent:a},T.default.createElement(a,{ref:c,...i}))})});this.renderRef=T.default.createRef(),r.dropPlaceholder&&(this.dropPlaceholder=r.dropPlaceholder)}componentDidMount(){var r,n;(n=(r=this.props).onMount)==null||n.call(r,this)}getPageModel(){var r;return(r=this.renderRef.current)==null?void 0:r.state.pageModel}rerender(r){var n;return(n=this.renderRef.current)==null?void 0:n.rerender(r)}getInstancesById(r,n){let o=[...this.instanceManager.get(r)||[]];return n!==void 0&&(o=o.filter(a=>n===(a==null?void 0:a._UNIQUE_ID))),o}getInstanceByDom(r){const n=Do(r);if(!n)return null;const o=Io(n);return(o==null?void 0:o.stateNode)||null}getDomsById(r,n){const o=this.getInstancesById(r),a=[];return o==null||o.forEach(s=>{if((s==null?void 0:s._STATUS)==="DESTROY")return;const i=Go.findDOMNode(s);if(i&&!(i instanceof Text))if(n){const c=Array.from(i.querySelectorAll(n));a.push(...c)}else a.push(i)}),a}getDomRectById(r,n){return this.getDomsById(r,n).map(s=>s==null?void 0:s.getBoundingClientRect()).filter(Boolean)}render(){const{props:r,onGetComponent:n}=this,{render:o,...a}=r;return o&&(o.ref.current=this),T.default.createElement(Po,{onGetComponent:n,...a,processNodeConfigHook:(s,i)=>{var g,m;if(i.nodeType!=="NODE")return s;const{props:c,condition:u}=s;let l={...c};const p=((g=i.value.configure)==null?void 0:g.devState)||{},f=(m=i.material)==null?void 0:m.value.fixedProps;if(f!==void 0){if(Jt(f))l={...l,...f};else if(typeof f=="function"){const j=f(l);l={...l,...j}}}let h=u;return p.condition===!1&&(h=p.condition),{props:Mh(l,p.props||{}),condition:h}},renderMode:"design",ref:this.renderRef})}}const Do=t=>{if(!t)return null;const e=Object.keys(t).find(r=>r.startsWith("__reactInternalInstance$")||r.startsWith("__reactFiber$"))||"";return e?t[e]:Do(t.parentElement)},Io=t=>{var e;return t?(e=t==null?void 0:t.stateNode)!=null&&e._DESIGN_BOX?t:Io(t.return):null},Jh=()=>{const t=I.useRef(null);return{ref:t,rerender:function(...e){t.current&&t.current.rerender(...e)},getInstancesById(e,r){var n;return((n=t.current)==null?void 0:n.getInstancesById(e,r))||[]},getInstanceByDom(e){var r;return((r=t.current)==null?void 0:r.getInstanceByDom(e))||null},getDomsById(e,r){var n;return((n=t.current)==null?void 0:n.getDomsById(e,r))||[]},getDomRectById(e,r){var n;return((n=t.current)==null?void 0:n.getDomRectById(e,r))||[]}}};var qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fo={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(qh,function(){var r=function(){},n={},o={},a={};function s(f,h){f=f.push?f:[f];var g=[],m=f.length,j=m,w,S,P,x;for(w=function(D,U){U.length&&g.push(D),j--,j||h(g)};m--;){if(S=f[m],P=o[S],P){w(S,P);continue}x=a[S]=a[S]||[],x.push(w)}}function i(f,h){if(!!f){var g=a[f];if(o[f]=h,!!g)for(;g.length;)g[0](f,h),g.splice(0,1)}}function c(f,h){f.call&&(f={success:f}),h.length?(f.error||r)(h):(f.success||r)(f)}function u(f,h,g,m){var j=document,w=g.async,S=(g.numRetries||0)+1,P=g.before||r,x=f.replace(/[\?|#].*$/,""),D=f.replace(/^(css|img)!/,""),U,E;m=m||0,/(^css!|\.css$)/.test(x)?(E=j.createElement("link"),E.rel="stylesheet",E.href=D,U="hideFocus"in E,U&&E.relList&&(U=0,E.rel="preload",E.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(x)?(E=j.createElement("img"),E.src=D):(E=j.createElement("script"),E.src=f,E.async=w===void 0?!0:w),E.onload=E.onerror=E.onbeforeload=function($t){var ot=$t.type[0];if(U)try{E.sheet.cssText.length||(ot="e")}catch(qt){qt.code!=18&&(ot="e")}if(ot=="e"){if(m+=1,m<S)return u(f,h,g,m)}else if(E.rel=="preload"&&E.as=="style")return E.rel="stylesheet";h(f,ot,$t.defaultPrevented)},P(f,E)!==!1&&j.head.appendChild(E)}function l(f,h,g){f=f.push?f:[f];var m=f.length,j=m,w=[],S,P;for(S=function(x,D,U){if(D=="e"&&w.push(x),D=="b")if(U)w.push(x);else return;m--,m||h(w)},P=0;P<j;P++)u(f[P],S,g)}function p(f,h,g){var m,j;if(h&&h.trim&&(m=h),j=(m?g:h)||{},m){if(m in n)throw"LoadJS";n[m]=!0}function w(S,P){l(f,function(x){c(j,x),S&&c({success:S,error:P},x),i(m,x)},j)}if(j.returnPromise)return new Promise(w);w()}return p.ready=function(h,g){return s(h,function(m){c(g,m)}),p},p.done=function(h){i(h,[])},p.reset=function(){n={},o={},a={}},p.isDefined=function(h){return h in n},p})})(Fo);const Lo=Fo.exports,Yh=t=>!!((t==null?void 0:t.name)&&(t==null?void 0:t.assets));class Xh{constructor(e){_(this,"assets");_(this,"loadStatus");_(this,"_onSuccessList",[]);_(this,"_onErrorList",[]);this.assets=e,this.loadStatus="INIT"}load(){const e=this.assets||[],r=[];for(let n=0;n<e.length;n++){const o=e[n];o.id||(o.id=tt()),r.push(o.id);const a=o.assets.map(s=>s.src);Lo(a,o.id,{async:!1})}return setTimeout(()=>{Lo.ready(r,{success:()=>{this._onSuccessList.forEach(n=>n())},error:n=>{this._onErrorList.forEach(o=>o(n))}})},0),this}onSuccess(e){return this._onSuccessList.push(e),this}onError(e){return this._onErrorList.push(e),this}}y.AssetLoader=Xh,y.ComponentInstanceManager=xo,y.DefaultDropPlaceholder=Ro,y.DefineReactAdapter=To,y.DesignRender=Wh,y.ReactAdapter=Uh,y.Render=Po,y.getAdapter=wr,y.isAssetPackage=Yh,y.useDesignRender=Jh,y.useRender=Hh,Object.defineProperties(y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
