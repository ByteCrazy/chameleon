(function(j,$){typeof exports=="object"&&typeof module<"u"?$(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],$):(j=typeof globalThis<"u"?globalThis:j||self,$(j.CRender={},j.React,j.ReactDOM))})(this,function(j,$,ot){"use strict";var gl=Object.defineProperty;var bl=(j,$,ot)=>$ in j?gl(j,$,{enumerable:!0,configurable:!0,writable:!0,value:ot}):j[$]=ot;var O=(j,$,ot)=>(bl(j,typeof $!="symbol"?$+"":$,ot),ot);const dr=t=>t&&typeof t=="object"&&"default"in t?t:{default:t};function pr(t){if(t&&t.__esModule)return t;const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const k=dr($),hr=pr(ot),vr=t=>()=>{console.warn(`${t} need to be implement getComponent`)},mr=["customPageRootRender"],ke=["pageRender","render","convertModelToComponent","getComponent","getContext","getUtils","getDataLink","createDataLink","transformProps","transformData","transformGlobalData","errorCatch"],Le=t=>[...ke,...mr].reduce((n,r)=>{var o;return t!=null&&t[r]?n[r]=(o=t[r])==null?void 0:o.bind(t):ke.includes(r)&&(n[r]=vr),n},{});var yr=Object.defineProperty,gr=(t,e,n)=>e in t?yr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g=(t,e,n)=>(gr(t,typeof e!="symbol"?e+"":e,n),n);class Fe extends TypeError{constructor(e,n){let r;const{message:o,...a}=e,{path:i}=e,s=i.length===0?o:`At path: ${i.join(".")} -- ${o}`;super(s),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>r!=null?r:r=[e,...n()]}}function br(t){return G(t)&&typeof t[Symbol.iterator]=="function"}function G(t){return typeof t=="object"&&t!=null}function L(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function jr(t){const{done:e,value:n}=t.next();return e?void 0:n}function wr(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:o,branch:a}=e,{type:i}=n,{refinement:s,message:c=`Expected a value of type \`${i}\`${s?` with refinement \`${s}\``:""}, but received: \`${L(r)}\``}=t;return{value:r,type:i,refinement:s,key:o[o.length-1],path:o,branch:a,...t,message:c}}function*Be(t,e,n,r){br(t)||(t=[t]);for(const o of t){const a=wr(o,e,n,r);a&&(yield a)}}function*Wt(t,e,n){n===void 0&&(n={});const{path:r=[],branch:o=[t],coerce:a=!1,mask:i=!1}=n,s={path:r,branch:o};if(a&&(t=e.coercer(t,s),i&&e.type!=="type"&&G(e.schema)&&G(t)&&!Array.isArray(t)))for(const u in t)e.schema[u]===void 0&&delete t[u];let c="valid";for(const u of e.validator(t,s))c="not_valid",yield[u,void 0];for(let[u,d,p]of e.entries(t,s)){const l=Wt(d,p,{path:u===void 0?r:[...r,u],branch:u===void 0?o:[...o,d],coerce:a,mask:i});for(const h of l)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):a&&(d=h[1],u===void 0?t=d:t instanceof Map?t.set(u,d):t instanceof Set?t.add(d):G(t)&&(d!==void 0||u in t)&&(t[u]=d))}if(c!=="not_valid")for(const u of e.refiner(t,s))c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,t])}class Q{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:n,schema:r,validator:o,refiner:a,coercer:i=c=>c,entries:s=function*(){}}=e;this.type=n,this.schema=r,this.entries=s,this.coercer=i,o?this.validator=(c,u)=>{const d=o(c,u);return Be(d,u,this,c)}:this.validator=()=>[],a?this.refiner=(c,u)=>{const d=a(c,u);return Be(d,u,this,c)}:this.refiner=()=>[]}assert(e){return Ue(e,this)}create(e){return _r(e,this)}is(e){return Sr(e,this)}mask(e){return Or(e,this)}validate(e,n){return n===void 0&&(n={}),ft(e,this,n)}}function Ue(t,e){const n=ft(t,e);if(n[0])throw n[0]}function _r(t,e){const n=ft(t,e,{coerce:!0});if(n[0])throw n[0];return n[1]}function Or(t,e){const n=ft(t,e,{coerce:!0,mask:!0});if(n[0])throw n[0];return n[1]}function Sr(t,e){return!ft(t,e)[0]}function ft(t,e,n){n===void 0&&(n={});const r=Wt(t,e,n),o=jr(r);return o[0]?[new Fe(o[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function Ht(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e[0].type==="type",o=e.map(i=>i.schema),a=Object.assign({},...o);return r?Qe(a):_(a)}function tt(t,e){return new Q({type:t,schema:null,validator:e})}function dt(t){return new Q({type:"dynamic",schema:null,*entries(e,n){yield*t(e,n).entries(e,n)},validator(e,n){return t(e,n).validator(e,n)},coercer(e,n){return t(e,n).coercer(e,n)},refiner(e,n){return t(e,n).refiner(e,n)}})}function Ge(t,e){const{schema:n}=t,r={...n};for(const o of e)delete r[o];switch(t.type){case"type":return Qe(r);default:return _(r)}}function z(){return tt("any",()=>!0)}function x(t){return new Q({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${L(e)}`}})}function J(){return tt("boolean",t=>typeof t=="boolean")}function Jt(t){const e={},n=t.map(r=>L(r)).join();for(const r of t)e[r]=r;return new Q({type:"enums",schema:e,validator(r){return t.includes(r)||`Expected one of \`${n}\`, but received: ${L(r)}`}})}function ze(){return tt("func",t=>typeof t=="function"||`Expected a function, but received: ${L(t)}`)}function I(t){const e=L(t),n=typeof t;return new Q({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${L(r)}`}})}function Cr(){return tt("never",()=>!1)}function Ve(){return tt("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${L(t)}`)}function _(t){const e=t?Object.keys(t):[],n=Cr();return new Q({type:"object",schema:t||null,*entries(r){if(t&&G(r)){const o=new Set(Object.keys(r));for(const a of e)o.delete(a),yield[a,r[a],t[a]];for(const a of o)yield[a,r[a],n]}},validator(r){return G(r)||`Expected an object, but received: ${L(r)}`},coercer(r){return G(r)?{...r}:r}})}function v(t){return new Q({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function jt(t,e){return new Q({type:"record",schema:null,*entries(n){if(G(n))for(const r in n){const o=n[r];yield[r,r,t],yield[r,o,e]}},validator(n){return G(n)||`Expected an object, but received: ${L(n)}`}})}function f(){return tt("string",t=>typeof t=="string"||`Expected a string, but received: ${L(t)}`)}function Qe(t){const e=Object.keys(t);return new Q({type:"type",schema:t,*entries(n){if(G(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return G(n)||`Expected an object, but received: ${L(n)}`}})}function D(t){const e=t.map(n=>n.type).join(" | ");return new Q({type:"union",schema:null,coercer(n,r){return(t.find(o=>{const[a]=o.validate(n,{coerce:!0});return!a})||Er()).coercer(n,r)},validator(n,r){const o=[];for(const a of t){const[...i]=Wt(n,a,r),[s]=i;if(s[0])for(const[c]of i)c&&o.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${L(n)}`,...o]}})}function Er(){return tt("unknown",()=>!0)}const Yt=_({package:f(),version:f(),exportName:f(),destructuring:v(J()),subName:v(f()),main:v(f())}),Nr=D([_({globName:f(),type:I(["CDN"]),content:D([Yt])}),_({globName:f(),type:I(["FUNCTION"]),content:D([f()])})]);var V=(t=>(t.SLOT="SLOT",t.FUNCTION="FUNCTION",t.EXPRESSION="EXPRESSION",t))(V||{}),qt=(t=>(t.DESIGN="design",t.SAVE="save",t))(qt||{}),Xt=(t=>(t.FUNC="FUNC",t.COMP="COMP",t))(Xt||{}),Ar=typeof global=="object"&&global&&global.Object===Object&&global;const We=Ar;var Pr=typeof self=="object"&&self&&self.Object===Object&&self,Mr=We||Pr||Function("return this")();const W=Mr;var Tr=W.Symbol;const U=Tr;var He=Object.prototype,$r=He.hasOwnProperty,Dr=He.toString,wt=U?U.toStringTag:void 0;function Rr(t){var e=$r.call(t,wt),n=t[wt];try{t[wt]=void 0;var r=!0}catch{}var o=Dr.call(t);return r&&(e?t[wt]=n:delete t[wt]),o}var xr=Object.prototype,Ir=xr.toString;function kr(t){return Ir.call(t)}var Lr="[object Null]",Fr="[object Undefined]",Je=U?U.toStringTag:void 0;function at(t){return t==null?t===void 0?Fr:Lr:Je&&Je in Object(t)?Rr(t):kr(t)}function Y(t){return t!=null&&typeof t=="object"}var Br="[object Symbol]";function Kt(t){return typeof t=="symbol"||Y(t)&&at(t)==Br}function Zt(t,e){for(var n=-1,r=t==null?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}var Ur=Array.isArray;const T=Ur;var Gr=1/0,Ye=U?U.prototype:void 0,qe=Ye?Ye.toString:void 0;function Xe(t){if(typeof t=="string")return t;if(T(t))return Zt(t,Xe)+"";if(Kt(t))return qe?qe.call(t):"";var e=t+"";return e=="0"&&1/t==-Gr?"-0":e}function et(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Ke(t){return t}var zr="[object AsyncFunction]",Vr="[object Function]",Qr="[object GeneratorFunction]",Wr="[object Proxy]";function Ze(t){if(!et(t))return!1;var e=at(t);return e==Vr||e==Qr||e==zr||e==Wr}var Hr=W["__core-js_shared__"];const te=Hr;var tn=function(){var t=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Jr(t){return!!tn&&tn in t}var Yr=Function.prototype,qr=Yr.toString;function it(t){if(t!=null){try{return qr.call(t)}catch{}try{return t+""}catch{}}return""}var Xr=/[\\^$.*+?()[\]{}|]/g,Kr=/^\[object .+?Constructor\]$/,Zr=Function.prototype,to=Object.prototype,eo=Zr.toString,no=to.hasOwnProperty,ro=RegExp("^"+eo.call(no).replace(Xr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oo(t){if(!et(t)||Jr(t))return!1;var e=Ze(t)?ro:Kr;return e.test(it(t))}function ao(t,e){return t==null?void 0:t[e]}function st(t,e){var n=ao(t,e);return oo(n)?n:void 0}var io=st(W,"WeakMap");const ee=io;var en=Object.create,so=function(){function t(){}return function(e){if(!et(e))return{};if(en)return en(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const co=so;function uo(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function lo(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var fo=800,po=16,ho=Date.now;function vo(t){var e=0,n=0;return function(){var r=ho(),o=po-(r-n);if(n=r,o>0){if(++e>=fo)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function mo(t){return function(){return t}}var yo=function(){try{var t=st(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Mt=yo;var go=Mt?function(t,e){return Mt(t,"toString",{configurable:!0,enumerable:!1,value:mo(e),writable:!0})}:Ke,bo=vo(go);const jo=bo;function wo(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var _o=9007199254740991,Oo=/^(?:0|[1-9]\d*)$/;function ne(t,e){var n=typeof t;return e=e==null?_o:e,!!e&&(n=="number"||n!="symbol"&&Oo.test(t))&&t>-1&&t%1==0&&t<e}function nn(t,e,n){e=="__proto__"&&Mt?Mt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function re(t,e){return t===e||t!==t&&e!==e}var So=Object.prototype,Co=So.hasOwnProperty;function oe(t,e,n){var r=t[e];(!(Co.call(t,e)&&re(r,n))||n===void 0&&!(e in t))&&nn(t,e,n)}function _t(t,e,n,r){var o=!n;n||(n={});for(var a=-1,i=e.length;++a<i;){var s=e[a],c=r?r(n[s],t[s],s,n,t):void 0;c===void 0&&(c=t[s]),o?nn(n,s,c):oe(n,s,c)}return n}var rn=Math.max;function Eo(t,e,n){return e=rn(e===void 0?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=rn(r.length-e,0),i=Array(a);++o<a;)i[o]=r[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=r[o];return s[e]=n(i),uo(t,this,s)}}var No=9007199254740991;function ae(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=No}function on(t){return t!=null&&ae(t.length)&&!Ze(t)}var Ao=Object.prototype;function ie(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Ao;return t===n}function Po(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Mo="[object Arguments]";function an(t){return Y(t)&&at(t)==Mo}var sn=Object.prototype,To=sn.hasOwnProperty,$o=sn.propertyIsEnumerable,Do=an(function(){return arguments}())?an:function(t){return Y(t)&&To.call(t,"callee")&&!$o.call(t,"callee")};const se=Do;function Ro(){return!1}var cn=typeof j=="object"&&j&&!j.nodeType&&j,un=cn&&typeof module=="object"&&module&&!module.nodeType&&module,xo=un&&un.exports===cn,ln=xo?W.Buffer:void 0,Io=ln?ln.isBuffer:void 0,ko=Io||Ro;const Tt=ko;var Lo="[object Arguments]",Fo="[object Array]",Bo="[object Boolean]",Uo="[object Date]",Go="[object Error]",zo="[object Function]",Vo="[object Map]",Qo="[object Number]",Wo="[object Object]",Ho="[object RegExp]",Jo="[object Set]",Yo="[object String]",qo="[object WeakMap]",Xo="[object ArrayBuffer]",Ko="[object DataView]",Zo="[object Float32Array]",ta="[object Float64Array]",ea="[object Int8Array]",na="[object Int16Array]",ra="[object Int32Array]",oa="[object Uint8Array]",aa="[object Uint8ClampedArray]",ia="[object Uint16Array]",sa="[object Uint32Array]",E={};E[Zo]=E[ta]=E[ea]=E[na]=E[ra]=E[oa]=E[aa]=E[ia]=E[sa]=!0,E[Lo]=E[Fo]=E[Xo]=E[Bo]=E[Ko]=E[Uo]=E[Go]=E[zo]=E[Vo]=E[Qo]=E[Wo]=E[Ho]=E[Jo]=E[Yo]=E[qo]=!1;function ca(t){return Y(t)&&ae(t.length)&&!!E[at(t)]}function ce(t){return function(e){return t(e)}}var fn=typeof j=="object"&&j&&!j.nodeType&&j,Ot=fn&&typeof module=="object"&&module&&!module.nodeType&&module,ua=Ot&&Ot.exports===fn,ue=ua&&We.process,la=function(){try{var t=Ot&&Ot.require&&Ot.require("util").types;return t||ue&&ue.binding&&ue.binding("util")}catch{}}();const pt=la;var dn=pt&&pt.isTypedArray,fa=dn?ce(dn):ca;const pn=fa;var da=Object.prototype,pa=da.hasOwnProperty;function hn(t,e){var n=T(t),r=!n&&se(t),o=!n&&!r&&Tt(t),a=!n&&!r&&!o&&pn(t),i=n||r||o||a,s=i?Po(t.length,String):[],c=s.length;for(var u in t)(e||pa.call(t,u))&&!(i&&(u=="length"||o&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ne(u,c)))&&s.push(u);return s}function vn(t,e){return function(n){return t(e(n))}}var ha=vn(Object.keys,Object);const va=ha;var ma=Object.prototype,ya=ma.hasOwnProperty;function ga(t){if(!ie(t))return va(t);var e=[];for(var n in Object(t))ya.call(t,n)&&n!="constructor"&&e.push(n);return e}function $t(t){return on(t)?hn(t):ga(t)}function ba(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var ja=Object.prototype,wa=ja.hasOwnProperty;function _a(t){if(!et(t))return ba(t);var e=ie(t),n=[];for(var r in t)r=="constructor"&&(e||!wa.call(t,r))||n.push(r);return n}function le(t){return on(t)?hn(t,!0):_a(t)}var Oa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sa=/^\w*$/;function fe(t,e){if(T(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Kt(t)?!0:Sa.test(t)||!Oa.test(t)||e!=null&&t in Object(e)}var Ca=st(Object,"create");const St=Ca;function Ea(){this.__data__=St?St(null):{},this.size=0}function Na(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Aa="__lodash_hash_undefined__",Pa=Object.prototype,Ma=Pa.hasOwnProperty;function Ta(t){var e=this.__data__;if(St){var n=e[t];return n===Aa?void 0:n}return Ma.call(e,t)?e[t]:void 0}var $a=Object.prototype,Da=$a.hasOwnProperty;function Ra(t){var e=this.__data__;return St?e[t]!==void 0:Da.call(e,t)}var xa="__lodash_hash_undefined__";function Ia(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=St&&e===void 0?xa:e,this}function ct(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ct.prototype.clear=Ea,ct.prototype.delete=Na,ct.prototype.get=Ta,ct.prototype.has=Ra,ct.prototype.set=Ia;function ka(){this.__data__=[],this.size=0}function Dt(t,e){for(var n=t.length;n--;)if(re(t[n][0],e))return n;return-1}var La=Array.prototype,Fa=La.splice;function Ba(t){var e=this.__data__,n=Dt(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Fa.call(e,n,1),--this.size,!0}function Ua(t){var e=this.__data__,n=Dt(e,t);return n<0?void 0:e[n][1]}function Ga(t){return Dt(this.__data__,t)>-1}function za(t,e){var n=this.__data__,r=Dt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function q(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}q.prototype.clear=ka,q.prototype.delete=Ba,q.prototype.get=Ua,q.prototype.has=Ga,q.prototype.set=za;var Va=st(W,"Map");const Ct=Va;function Qa(){this.size=0,this.__data__={hash:new ct,map:new(Ct||q),string:new ct}}function Wa(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Rt(t,e){var n=t.__data__;return Wa(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Ha(t){var e=Rt(this,t).delete(t);return this.size-=e?1:0,e}function Ja(t){return Rt(this,t).get(t)}function Ya(t){return Rt(this,t).has(t)}function qa(t,e){var n=Rt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function X(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}X.prototype.clear=Qa,X.prototype.delete=Ha,X.prototype.get=Ja,X.prototype.has=Ya,X.prototype.set=qa;var Xa="Expected a function";function de(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Xa);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=t.apply(this,r);return n.cache=a.set(o,i)||a,i};return n.cache=new(de.Cache||X),n}de.Cache=X;var Ka=500;function Za(t){var e=de(t,function(r){return n.size===Ka&&n.clear(),r}),n=e.cache;return e}var ti=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ei=/\\(\\)?/g,ni=Za(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(ti,function(n,r,o,a){e.push(o?a.replace(ei,"$1"):r||n)}),e});const ri=ni;function oi(t){return t==null?"":Xe(t)}function ht(t,e){return T(t)?t:fe(t,e)?[t]:ri(oi(t))}var ai=1/0;function vt(t){if(typeof t=="string"||Kt(t))return t;var e=t+"";return e=="0"&&1/t==-ai?"-0":e}function xt(t,e){e=ht(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[vt(e[n++])];return n&&n==r?t:void 0}function ii(t,e,n){var r=t==null?void 0:xt(t,e);return r===void 0?n:r}function pe(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}var mn=U?U.isConcatSpreadable:void 0;function si(t){return T(t)||se(t)||!!(mn&&t&&t[mn])}function yn(t,e,n,r,o){var a=-1,i=t.length;for(n||(n=si),o||(o=[]);++a<i;){var s=t[a];e>0&&n(s)?e>1?yn(s,e-1,n,r,o):pe(o,s):r||(o[o.length]=s)}return o}function ci(t){var e=t==null?0:t.length;return e?yn(t,1):[]}function ui(t){return jo(Eo(t,void 0,ci),t+"")}var li=vn(Object.getPrototypeOf,Object);const he=li;var fi="[object Object]",di=Function.prototype,pi=Object.prototype,gn=di.toString,hi=pi.hasOwnProperty,vi=gn.call(Object);function F(t){if(!Y(t)||at(t)!=fi)return!1;var e=he(t);if(e===null)return!0;var n=hi.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&gn.call(n)==vi}function mi(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(o);++r<o;)a[r]=t[r+e];return a}function yi(){this.__data__=new q,this.size=0}function gi(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function bi(t){return this.__data__.get(t)}function ji(t){return this.__data__.has(t)}var wi=200;function _i(t,e){var n=this.__data__;if(n instanceof q){var r=n.__data__;if(!Ct||r.length<wi-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new X(r)}return n.set(t,e),this.size=n.size,this}function H(t){var e=this.__data__=new q(t);this.size=e.size}H.prototype.clear=yi,H.prototype.delete=gi,H.prototype.get=bi,H.prototype.has=ji,H.prototype.set=_i;function Oi(t,e){return t&&_t(e,$t(e),t)}function Si(t,e){return t&&_t(e,le(e),t)}var bn=typeof j=="object"&&j&&!j.nodeType&&j,jn=bn&&typeof module=="object"&&module&&!module.nodeType&&module,Ci=jn&&jn.exports===bn,wn=Ci?W.Buffer:void 0,_n=wn?wn.allocUnsafe:void 0;function Ei(t,e){if(e)return t.slice();var n=t.length,r=_n?_n(n):new t.constructor(n);return t.copy(r),r}function Ni(t,e){for(var n=-1,r=t==null?0:t.length,o=0,a=[];++n<r;){var i=t[n];e(i,n,t)&&(a[o++]=i)}return a}function On(){return[]}var Ai=Object.prototype,Pi=Ai.propertyIsEnumerable,Sn=Object.getOwnPropertySymbols,Mi=Sn?function(t){return t==null?[]:(t=Object(t),Ni(Sn(t),function(e){return Pi.call(t,e)}))}:On;const ve=Mi;function Ti(t,e){return _t(t,ve(t),e)}var $i=Object.getOwnPropertySymbols,Di=$i?function(t){for(var e=[];t;)pe(e,ve(t)),t=he(t);return e}:On;const Cn=Di;function Ri(t,e){return _t(t,Cn(t),e)}function En(t,e,n){var r=e(t);return T(t)?r:pe(r,n(t))}function me(t){return En(t,$t,ve)}function ye(t){return En(t,le,Cn)}var xi=st(W,"DataView");const ge=xi;var Ii=st(W,"Promise");const be=Ii;var ki=st(W,"Set");const je=ki;var Nn="[object Map]",Li="[object Object]",An="[object Promise]",Pn="[object Set]",Mn="[object WeakMap]",Tn="[object DataView]",Fi=it(ge),Bi=it(Ct),Ui=it(be),Gi=it(je),zi=it(ee),ut=at;(ge&&ut(new ge(new ArrayBuffer(1)))!=Tn||Ct&&ut(new Ct)!=Nn||be&&ut(be.resolve())!=An||je&&ut(new je)!=Pn||ee&&ut(new ee)!=Mn)&&(ut=function(t){var e=at(t),n=e==Li?t.constructor:void 0,r=n?it(n):"";if(r)switch(r){case Fi:return Tn;case Bi:return Nn;case Ui:return An;case Gi:return Pn;case zi:return Mn}return e});const Et=ut;var Vi=Object.prototype,Qi=Vi.hasOwnProperty;function Wi(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Qi.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Hi=W.Uint8Array;const It=Hi;function we(t){var e=new t.constructor(t.byteLength);return new It(e).set(new It(t)),e}function Ji(t,e){var n=e?we(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Yi=/\w*$/;function qi(t){var e=new t.constructor(t.source,Yi.exec(t));return e.lastIndex=t.lastIndex,e}var $n=U?U.prototype:void 0,Dn=$n?$n.valueOf:void 0;function Xi(t){return Dn?Object(Dn.call(t)):{}}function Ki(t,e){var n=e?we(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Zi="[object Boolean]",ts="[object Date]",es="[object Map]",ns="[object Number]",rs="[object RegExp]",os="[object Set]",as="[object String]",is="[object Symbol]",ss="[object ArrayBuffer]",cs="[object DataView]",us="[object Float32Array]",ls="[object Float64Array]",fs="[object Int8Array]",ds="[object Int16Array]",ps="[object Int32Array]",hs="[object Uint8Array]",vs="[object Uint8ClampedArray]",ms="[object Uint16Array]",ys="[object Uint32Array]";function gs(t,e,n){var r=t.constructor;switch(e){case ss:return we(t);case Zi:case ts:return new r(+t);case cs:return Ji(t,n);case us:case ls:case fs:case ds:case ps:case hs:case vs:case ms:case ys:return Ki(t,n);case es:return new r;case ns:case as:return new r(t);case rs:return qi(t);case os:return new r;case is:return Xi(t)}}function bs(t){return typeof t.constructor=="function"&&!ie(t)?co(he(t)):{}}var js="[object Map]";function ws(t){return Y(t)&&Et(t)==js}var Rn=pt&&pt.isMap,_s=Rn?ce(Rn):ws;const Os=_s;var Ss="[object Set]";function Cs(t){return Y(t)&&Et(t)==Ss}var xn=pt&&pt.isSet,Es=xn?ce(xn):Cs;const Ns=Es;var As=1,Ps=2,Ms=4,In="[object Arguments]",Ts="[object Array]",$s="[object Boolean]",Ds="[object Date]",Rs="[object Error]",kn="[object Function]",xs="[object GeneratorFunction]",Is="[object Map]",ks="[object Number]",Ln="[object Object]",Ls="[object RegExp]",Fs="[object Set]",Bs="[object String]",Us="[object Symbol]",Gs="[object WeakMap]",zs="[object ArrayBuffer]",Vs="[object DataView]",Qs="[object Float32Array]",Ws="[object Float64Array]",Hs="[object Int8Array]",Js="[object Int16Array]",Ys="[object Int32Array]",qs="[object Uint8Array]",Xs="[object Uint8ClampedArray]",Ks="[object Uint16Array]",Zs="[object Uint32Array]",C={};C[In]=C[Ts]=C[zs]=C[Vs]=C[$s]=C[Ds]=C[Qs]=C[Ws]=C[Hs]=C[Js]=C[Ys]=C[Is]=C[ks]=C[Ln]=C[Ls]=C[Fs]=C[Bs]=C[Us]=C[qs]=C[Xs]=C[Ks]=C[Zs]=!0,C[Rs]=C[kn]=C[Gs]=!1;function Nt(t,e,n,r,o,a){var i,s=e&As,c=e&Ps,u=e&Ms;if(n&&(i=o?n(t,r,o,a):n(t)),i!==void 0)return i;if(!et(t))return t;var d=T(t);if(d){if(i=Wi(t),!s)return lo(t,i)}else{var p=Et(t),l=p==kn||p==xs;if(Tt(t))return Ei(t,s);if(p==Ln||p==In||l&&!o){if(i=c||l?{}:bs(t),!s)return c?Ri(t,Si(i,t)):Ti(t,Oi(i,t))}else{if(!C[p])return o?t:{};i=gs(t,p,s)}}a||(a=new H);var h=a.get(t);if(h)return h;a.set(t,i),Ns(t)?t.forEach(function(b){i.add(Nt(b,e,n,b,t,a))}):Os(t)&&t.forEach(function(b,w){i.set(w,Nt(b,e,n,w,t,a))});var y=u?c?ye:me:c?le:$t,m=d?void 0:y(t);return wo(m||t,function(b,w){m&&(w=b,b=t[w]),oe(i,w,Nt(b,e,n,w,t,a))}),i}var tc=1,ec=4;function nc(t){return Nt(t,tc|ec)}var rc="__lodash_hash_undefined__";function oc(t){return this.__data__.set(t,rc),this}function ac(t){return this.__data__.has(t)}function kt(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new X;++e<n;)this.add(t[e])}kt.prototype.add=kt.prototype.push=oc,kt.prototype.has=ac;function ic(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function sc(t,e){return t.has(e)}var cc=1,uc=2;function Fn(t,e,n,r,o,a){var i=n&cc,s=t.length,c=e.length;if(s!=c&&!(i&&c>s))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var p=-1,l=!0,h=n&uc?new kt:void 0;for(a.set(t,e),a.set(e,t);++p<s;){var y=t[p],m=e[p];if(r)var b=i?r(m,y,p,e,t,a):r(y,m,p,t,e,a);if(b!==void 0){if(b)continue;l=!1;break}if(h){if(!ic(e,function(w,S){if(!sc(h,S)&&(y===w||o(y,w,n,r,a)))return h.push(S)})){l=!1;break}}else if(!(y===m||o(y,m,n,r,a))){l=!1;break}}return a.delete(t),a.delete(e),l}function lc(t){var e=-1,n=Array(t.size);return t.forEach(function(r,o){n[++e]=[o,r]}),n}function fc(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var dc=1,pc=2,hc="[object Boolean]",vc="[object Date]",mc="[object Error]",yc="[object Map]",gc="[object Number]",bc="[object RegExp]",jc="[object Set]",wc="[object String]",_c="[object Symbol]",Oc="[object ArrayBuffer]",Sc="[object DataView]",Bn=U?U.prototype:void 0,_e=Bn?Bn.valueOf:void 0;function Cc(t,e,n,r,o,a,i){switch(n){case Sc:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Oc:return!(t.byteLength!=e.byteLength||!a(new It(t),new It(e)));case hc:case vc:case gc:return re(+t,+e);case mc:return t.name==e.name&&t.message==e.message;case bc:case wc:return t==e+"";case yc:var s=lc;case jc:var c=r&dc;if(s||(s=fc),t.size!=e.size&&!c)return!1;var u=i.get(t);if(u)return u==e;r|=pc,i.set(t,e);var d=Fn(s(t),s(e),r,o,a,i);return i.delete(t),d;case _c:if(_e)return _e.call(t)==_e.call(e)}return!1}var Ec=1,Nc=Object.prototype,Ac=Nc.hasOwnProperty;function Pc(t,e,n,r,o,a){var i=n&Ec,s=me(t),c=s.length,u=me(e),d=u.length;if(c!=d&&!i)return!1;for(var p=c;p--;){var l=s[p];if(!(i?l in e:Ac.call(e,l)))return!1}var h=a.get(t),y=a.get(e);if(h&&y)return h==e&&y==t;var m=!0;a.set(t,e),a.set(e,t);for(var b=i;++p<c;){l=s[p];var w=t[l],S=e[l];if(r)var M=i?r(S,w,l,e,t,a):r(w,S,l,t,e,a);if(!(M===void 0?w===S||o(w,S,n,r,a):M)){m=!1;break}b||(b=l=="constructor")}if(m&&!b){var P=t.constructor,R=e.constructor;P!=R&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof R=="function"&&R instanceof R)&&(m=!1)}return a.delete(t),a.delete(e),m}var Mc=1,Un="[object Arguments]",Gn="[object Array]",Lt="[object Object]",Tc=Object.prototype,zn=Tc.hasOwnProperty;function $c(t,e,n,r,o,a){var i=T(t),s=T(e),c=i?Gn:Et(t),u=s?Gn:Et(e);c=c==Un?Lt:c,u=u==Un?Lt:u;var d=c==Lt,p=u==Lt,l=c==u;if(l&&Tt(t)){if(!Tt(e))return!1;i=!0,d=!1}if(l&&!d)return a||(a=new H),i||pn(t)?Fn(t,e,n,r,o,a):Cc(t,e,c,n,r,o,a);if(!(n&Mc)){var h=d&&zn.call(t,"__wrapped__"),y=p&&zn.call(e,"__wrapped__");if(h||y){var m=h?t.value():t,b=y?e.value():e;return a||(a=new H),o(m,b,n,r,a)}}return l?(a||(a=new H),Pc(t,e,n,r,o,a)):!1}function Oe(t,e,n,r,o){return t===e?!0:t==null||e==null||!Y(t)&&!Y(e)?t!==t&&e!==e:$c(t,e,n,r,Oe,o)}var Dc=1,Rc=2;function xc(t,e,n,r){var o=n.length,a=o,i=!r;if(t==null)return!a;for(t=Object(t);o--;){var s=n[o];if(i&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<a;){s=n[o];var c=s[0],u=t[c],d=s[1];if(i&&s[2]){if(u===void 0&&!(c in t))return!1}else{var p=new H;if(r)var l=r(u,d,c,t,e,p);if(!(l===void 0?Oe(d,u,Dc|Rc,r,p):l))return!1}}return!0}function Vn(t){return t===t&&!et(t)}function Ic(t){for(var e=$t(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Vn(o)]}return e}function Qn(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function kc(t){var e=Ic(t);return e.length==1&&e[0][2]?Qn(e[0][0],e[0][1]):function(n){return n===t||xc(n,t,e)}}function Lc(t,e){return t!=null&&e in Object(t)}function Fc(t,e,n){e=ht(e,t);for(var r=-1,o=e.length,a=!1;++r<o;){var i=vt(e[r]);if(!(a=t!=null&&n(t,i)))break;t=t[i]}return a||++r!=o?a:(o=t==null?0:t.length,!!o&&ae(o)&&ne(i,o)&&(T(t)||se(t)))}function Bc(t,e){return t!=null&&Fc(t,e,Lc)}var Uc=1,Gc=2;function zc(t,e){return fe(t)&&Vn(e)?Qn(vt(t),e):function(n){var r=ii(n,t);return r===void 0&&r===e?Bc(n,t):Oe(e,r,Uc|Gc)}}function Vc(t){return function(e){return e==null?void 0:e[t]}}function Qc(t){return function(e){return xt(e,t)}}function Wc(t){return fe(t)?Vc(vt(t)):Qc(t)}function Wn(t){return typeof t=="function"?t:t==null?Ke:typeof t=="object"?T(t)?zc(t[0],t[1]):kc(t):Wc(t)}function Hc(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function Jc(t,e){return e.length<2?t:xt(t,mi(e,0,-1))}var Yc="Expected a function";function qc(t){if(typeof t!="function")throw new TypeError(Yc);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Xc(t,e){return e=ht(e,t),t=Jc(t,e),t==null||delete t[vt(Hc(e))]}function Kc(t){return F(t)?void 0:t}var Zc=1,tu=2,eu=4,nu=ui(function(t,e){var n={};if(t==null)return n;var r=!1;e=Zt(e,function(a){return a=ht(a,t),r||(r=a.length>1),a}),_t(t,ye(t),n),r&&(n=Nt(n,Zc|tu|eu,Kc));for(var o=e.length;o--;)Xc(n,e[o]);return n});const Hn=nu;function ru(t,e,n,r){if(!et(t))return t;e=ht(e,t);for(var o=-1,a=e.length,i=a-1,s=t;s!=null&&++o<a;){var c=vt(e[o]),u=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(o!=i){var d=s[c];u=r?r(d,c,s):void 0,u===void 0&&(u=et(d)?d:ne(e[o+1])?[]:{})}oe(s,c,u),s=s[c]}return t}function ou(t,e,n){for(var r=-1,o=e.length,a={};++r<o;){var i=e[r],s=xt(t,i);n(s,i)&&ru(a,ht(i,t),s)}return a}function au(t,e){if(t==null)return{};var n=Zt(ye(t),function(r){return[r]});return e=Wn(e),ou(t,n,function(r,o){return e(r,o[0])})}function iu(t,e){return au(t,qc(Wn(e)))}const su=()=>tt("normalObj",t=>!F(t)||[V.SLOT,V.EXPRESSION,V.FUNCTION].includes(t==null?void 0:t.type)?!1:(ft(t,jt(f(),Se)),!0)),Se=D([f(),Ve(),J(),_({type:I(V.SLOT),renderType:Jt([Xt.FUNC,Xt.COMP]),params:v(x(f())),value:dt(()=>D([mt,x(mt)]))}),_({type:I(V.EXPRESSION),value:f()}),_({type:I(V.FUNCTION),value:f()}),su(),x(dt(()=>Se))]),Jn=_({type:I(V.EXPRESSION),value:f()}),mt=_({id:v(f()),title:v(f()),componentName:f(),props:v(jt(f(),Se)),stateName:v(f()),state:v(jt(f(),z())),children:dt(()=>v(x(D([f(),mt])))),configure:v(z()),style:v(f()),className:v(f()),refId:v(f()),extra:v(jt(z(),z())),condition:v(D([J(),Jn])),loop:v(_({open:J(),data:D([x(z()),Jn]),args:v(x(f()))}))}),Ft=D([f(),_({label:f(),tip:v(f())})]),cu=_({type:I("shape"),value:x(_({name:f(),title:Ft,valueType:dt(()=>Bt)}))}),uu=_({type:I("enums"),value:x(f())});_({type:I("array"),value:dt(()=>Bt)});const lu=_({type:I("array"),value:dt(()=>x(Bt))}),Bt=D([Jt(["array","boolean","number","object","string"]),Jt(["component","expression","function"]),cu,uu,lu]),fu=D([f(),_({componentName:f(),props:z(),initialValue:z()})]),Ce=_({name:f(),title:Ft,valueType:Bt,description:v(f()),defaultValue:z(),setters:v(x(fu)),condition:v(ze())}),du=D([f(),ze()]);var Ee=(t=>(t.SINGLE="single",t.GROUP="group",t))(Ee||{});D([f(),_({name:f(),describe:v(f()),params:v(_({name:f(),description:f()})),template:f()})]);const pu=_({id:v(f()),title:f(),snapshot:D([f(),z()]),description:v(f()),tags:v(x(f())),groupName:v(f()),category:v(f()),schema:Ht(Ge(mt,["id"]),_({componentName:v(f())}))}),hu=_({componentName:f(),title:f(),screenshot:v(f()),icon:v(f()),tags:v(x(f())),groupName:v(f()),category:v(f()),priority:v(Ve()),npm:D([Yt,I(!1)]),snippets:x(pu),props:x(D([Ce,_({title:v(Ft),type:I("single"),content:Ce}),_({title:v(Ft),type:I("group"),content:x(Ce)})])),isContainer:v(D([J(),_({placeholder:f(),width:f(),height:f()})])),isModal:v(D([J(),_({visibleKey:f()})])),isSupportStyle:v(J()),isSupportDispatchNativeEvent:v(J()),isLayout:v(J()),rootSelector:v(f()),selectionToolBars:v(x(du)),extra:v(jt(z(),z()))}),vu=t=>({data:e,message:n,throwError:r})=>{const o=t({data:e,message:n,throwError:r});if(o.isValidate)return o;if(r)throw o.message||n?new Error(`${o.message||n}
 originData: ${JSON.stringify(e)}`):new Error(`${JSON.stringify(e)} 
 data struct format is invalidate`);return o},Ne=t=>{const{data:e,message:n,throwError:r,dataStruct:o}=t;return vu(({data:a})=>{try{return Ue(a,o),{isValidate:!0}}catch(i){let s=i;return i instanceof Fe&&(s=i.failures().map(c=>`\u3010${c.path.join(".")}\u3011: ${c.message}
`)),{isValidate:!1,message:s,error:i}}})({data:e,message:n,throwError:r})};var Ae=(t=>(t.PAGE="Page",t))(Ae||{});const mu=Ht(Ge(mt,["componentName"]),_({componentName:I("Page")}));function yu(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(o){o(n)}),(r=t.get("*"))&&r.slice().map(function(o){o(e,n)})}}}const At=yu(),gu=(t,e)=>{const n={...t,value:[]},r=t.value;let o=new lt([]);return e&&(o=e.materialsMode||new lt([])),r&&(T(r)?n.value=r.map(a=>new A(a,{parent:e,materials:o})):F(r)&&n.value.push(new A(r,{parent:e,materials:o}))),n};class yt{constructor(e,n){g(this,"nodeType","SLOT"),g(this,"rawData"),g(this,"parent"),g(this,"emitter",At),g(this,"data"),g(this,"id"),g(this,"materialsMode"),this.parent=(n==null?void 0:n.parent)||null,this.rawData=e;const r=(n==null?void 0:n.materials)||new lt([]);this.materialsMode=r,this.id=K(),this.data=gu(e,this)}get value(){return this.data}export(e){const n=this.data,r=o=>{if(o instanceof A)return o.export(e);if(F(o)){const a={};return Object.keys(o||{}).forEach(i=>{a[i]=r(o[i])}),a}return T(o)?o.map(a=>r(a)):(e==="design"&&delete o.id,o)};return r(n)}}const Yn=t=>{let e=[];return t.forEach(n=>{const r=n;r.type?r.type===Ee.SINGLE?e.push(r.content):r.type===Ee.GROUP&&(e=[...e,...Yn(r.content)]):e.push(n)}),e},Pe=(t,e,n)=>{if(t.type)return t.type===V.SLOT?new yt(t,{parent:e,materials:n}):t;if(F(t)){const r={};return Object.keys(t).forEach(o=>{r[o]=Me(t[o],e,n)}),r}else return Array.isArray(t)?t.map(r=>Pe(r,e,n)):t},Me=(t,e,n)=>F(t)?Pe(t,e,n):T(t)?t.map(r=>Pe(r,e,n)):t;class nt{constructor(e,n,r){g(this,"nodeType","PROP"),g(this,"rawData"),g(this,"parent"),g(this,"emitter",At),g(this,"data"),g(this,"name"),g(this,"materialsMode");const o=(r==null?void 0:r.materials)||new lt([]);this.materialsMode=o,this.parent=r==null?void 0:r.parent,this.rawData=n,this.name=e,this.data=Me(n,this,o)}isIncludeSlot(){return!1}isIncludeExpression(){return!1}get value(){return this.data}updateValue(e){const n=this.data;this.data=Me(e!=null?e:n,this,this.materialsMode),this.emitter.emit("onPropChange",{value:this.data,preValue:n,node:this}),this.parent&&!(this.parent instanceof yt)&&this.emitter.emit("onNodeChange",{value:this.parent.value,preValue:this.parent.value,node:this.parent})}get material(){const e=this.parent;if(e instanceof A){const n=e.material;return Yn((n==null?void 0:n.value.props)||[]).find(r=>r.name===this.name)}else return null}export(e){const n=this.data,r=o=>{if(o instanceof nt||o instanceof yt||o instanceof A)return o.export(e);if(T(o))return o.map(a=>r(a));if(F(o)){const a={};return Object.keys(o||{}).forEach(i=>{a[i]=r(o[i])}),a}return o};return r(n)}}const bu=t=>{if(typeof t=="string")return!0;Ne({data:t,dataStruct:mt,throwError:!0})},qn=(t,e,n=new lt([]))=>{var r;if(typeof t=="string")return t;const o={...t,id:(r=t.id)!=null?r:K(),children:[],props:{}},a=Object.keys(t.props||{});return a.length&&a.forEach(i=>{var s;const c=(s=t.props)==null?void 0:s[i];if(c instanceof nt){o.props[i]=c;return}o.props[i]=new nt(i,c||"",{parent:e,materials:n})}),t.children&&(Array.isArray(t.children)?o.children=t.children.map(i=>{if(i instanceof A)return i;if(F(i)){const s=i;return new A(s,{parent:e,materials:n})}else return i}):(t.children instanceof A&&(o.children=[t.children]),o.children=[new A(t.children,{parent:e,materials:n})])),o};class A{constructor(e,n){g(this,"nodeType","NODE"),g(this,"rawData"),g(this,"data"),g(this,"emitter",At),g(this,"parent"),g(this,"materialsModel"),g(this,"listenerHandle"),g(this,"onChangeCbQueue"),this.rawData=JSON.parse(JSON.stringify(e)),bu(e);const r=(n==null?void 0:n.materials)||new lt([]);this.parent=(n==null?void 0:n.parent)||null,this.materialsModel=r,this.data=qn(e,this,r),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener()}registerListener(){const e=n=>{const{node:r}=n;r===this&&r.id===this.id&&this.onChangeCbQueue.forEach(o=>o(n))};this.emitter.on("onNodeChange",e),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",e)})}onChange(e){return this.onChangeCbQueue.push(e),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(n=>n!==e)}}destroy(){this.listenerHandle.forEach(e=>e())}get id(){return this.data.id}get value(){return this.data}clone(e){const n={...this.export("design"),id:e||K()};return new A(n)}updateValue(e){const n=this.data,r={...this.data,...e};this.data=qn(r,this),this.emitter.emit("onNodeChange",{value:r,preValue:n,node:this})}contains(e){return De(this,e)}get props(){return this.data.props}get material(){const e=this.materialsModel;return e==null?void 0:e.findByComponentName(this.data.componentName)}export(e){var n;const r=this.data;if(typeof r=="string")return r;const o={};Object.keys(r.props||{}).forEach(s=>{o[s]=r.props[s].export(e)});const a=(n=r.children)==null?void 0:n.map(s=>s instanceof A?s.export(e):s);let i={...r,props:o,children:a};return e==="design"&&delete i.id,i=$e(i),i}}const Xn=(t,e,n)=>{const r={...t,id:K(),props:{},componentName:Ae.PAGE,children:[]};let o=[];T(t.children)?o=t.children.map(i=>i instanceof A?i:F(i)?new A(i,{parent:e,materials:n}):i):t.children instanceof A?o.push(t.children):t.children&&F(t.children)?o.push(new A(t.children,{parent:e,materials:n})):o.push(t.children,{parent:e});const a=Object.keys(t.props||{});return a.length&&a.forEach(i=>{var s;const c=(s=t.props)==null?void 0:s[i];c instanceof nt?r.props[i]=c:r.props[i]=new nt(i,c||"",{parent:e,materials:n})}),r.children=o,r};class Te{constructor(e,{parent:n,materials:r}){g(this,"rawData"),g(this,"data"),g(this,"nodeType","SCHEMA"),g(this,"emitter",At),g(this,"materialsModel"),g(this,"listenerHandle"),g(this,"onChangeCbQueue"),g(this,"parent"),this.materialsModel=r,this.rawData=JSON.parse(JSON.stringify(e)),this.data=Xn(e,this,r),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener(),this.parent=n}registerListener(){const e=n=>{const{node:r}=n;r===this&&r.id===this.id&&this.onChangeCbQueue.forEach(o=>o(n))};this.emitter.on("onNodeChange",e),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",e)})}onChange(e){return this.onChangeCbQueue.push(e),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(n=>n!==e)}}get id(){return this.data.id}get value(){return this.data}get props(){return this.data.props}get material(){const e=this.materialsModel;return e==null?void 0:e.findByComponentName(this.data.componentName)}updateValue(e){const n=this.data,r={...this.data,...e};this.data=Xn(r,this,this.materialsModel),this.emitter.emit("onNodeChange",{value:this.data,preValue:n,node:this})}contains(e){return De(this,e)}export(e=qt.SAVE){var n;const r=this.data,o={};Object.keys(r.props||{}).forEach(c=>{o[c]=r.props[c].export(e)});const a=(n=r.children)==null?void 0:n.map(c=>c.export(e)),i={...r,props:o,children:a};let s=Hn(i,["id"]);return s=$e(s),s}}const Kn=t=>(t==null?void 0:t.type)===V.EXPRESSION,ju=t=>(t==null?void 0:t.type)==V.FUNCTION,K=()=>Math.random().toString(32).slice(3,9),Zn=t=>(t==null?void 0:t.nodeType)==="PROP",wu=t=>(t==null?void 0:t.nodeType)==="SLOT",$e=t=>iu(t,e=>F(e)?!Object.keys(e).length:T(e)?!e.length:!e);function De(t,e){const n=[t];for(;n.length;){const r=n.shift();if((r==null?void 0:r.id)===e)return r;const o=(r==null?void 0:r.props)||{},a=s=>{if(s instanceof A){n.push(s);return}if(s instanceof yt&&a(s.value.value),s instanceof nt){a(s.value);return}if(F(s)){const c=s;Object.keys(c).map(u=>{a(c[u])});return}if(T(s)){s.forEach(c=>{a(c)});return}};a(o);const i=(r==null?void 0:r.value.children.filter(s=>s instanceof A))||[];n.push(...i)}return null}const _u=t=>{const e=nc(t);return e.snippets=e.snippets.map(n=>({...n,id:n.id||`${t.componentName}-${K()}`,title:n.title||t.title,category:n.category||t.category,tags:[...n.tags||[],...t.tags||[]],groupName:n.groupName||t.groupName,snapshot:n.snapshot||t.icon,schema:{...n.schema,componentName:n.schema.componentName||t.componentName}})),e};class Ou{constructor(e){g(this,"rawData"),g(this,"data"),this.rawData=e,this.data=_u(e)}get value(){return this.data}get componentName(){return this.data.componentName}get snippets(){return this.data.snippets}getSnippetById(e){return this.data.snippets.find(n=>n.id===e)}}const Su=t=>{if(!T(t))throw new Error("Materials must be a array");return t.map(e=>new Ou(e))},Cu=t=>{t==null||t.forEach(e=>{Ne({data:e,dataStruct:hu,throwError:!0})})};class lt{constructor(e){g(this,"rowData"),g(this,"data"),this.rowData=e,Cu(e),this.data=Su(e)}findByComponentName(e){return this.data.find(n=>n.componentName===e)}findSnippetById(e){const n=[...this.data];let r=null;for(;!r&&n.length;){const o=n.pop();r=o==null?void 0:o.getSnippetById(e)}return r}getAllSnippets(){const e=this.data.reduce((a,i)=>(a.push(...i.snippets),a),[]),n=["default"],r={default:[]};e.forEach(a=>{const i=a.groupName||"default";n.includes(i)||(n.push(i),r[i]=[]),r[i].push(a)});const o=[];return n.forEach(a=>{const i=["default"],s={default:[]},c=r[a];if(c.length!==0){c.forEach(p=>{const l=p.category||"default";i.includes(l)||(i.push(l),s[l]=[]),s[l].push(p)});const u=[];i.forEach(p=>{s[p].length&&u.push({name:p,list:s[p]})});const d={name:a,list:u};o.push(d)}}),o}get value(){return this.data}}const Eu=_({version:f(),pageName:f(),style:v(f()),css:v(f()),componentsMeta:x(Ht(_({componentName:f()}),Yt)),thirdLibs:v(Nr),componentsTree:mu}),Nu=t=>(Ne({data:t,dataStruct:Eu,throwError:!0}),t),Au=(t,e,n)=>({...t,componentsTree:new Te(t.componentsTree,{parent:e,materials:n})});class Ut{constructor(e,n){g(this,"nodeType","PAGE"),g(this,"rawData"),g(this,"emitter",At),g(this,"data"),g(this,"parent"),g(this,"materialsModel"),Nu(e),this.rawData=JSON.parse(JSON.stringify(e)),this.materialsModel=new lt((n==null?void 0:n.materials)||[]),this.data=Au(e,this,this.materialsModel)}get value(){return this.data}getNode(e){const n=this.data.componentsTree;return De(n,e)}addNode(e,n,r="AFTER"){var o,a,i;if(r==="AFTER"||r==="BEFORE"){const s=n.parent;if(s===null&&n instanceof Te)return console.warn("Not found parent node"),!1;if(s instanceof nt)return console.warn("CProp can not add node"),!1;if(s instanceof yt){const u=s.value.value,d=(o=u.findIndex(p=>p===n))!=null?o:-1;return d>=0?(r==="BEFORE"?u.splice(d,0,e):u.splice(d+1,0,e),e.parent=s,(a=s.parent)==null||a.updateValue(),!0):!1}if(s instanceof Ut)return!1;const c=(i=s==null?void 0:s.value.children.findIndex(u=>u===n))!=null?i:-1;return c>=0?(r==="BEFORE"?s==null||s.value.children.splice(c,0,e):s==null||s.value.children.splice(c+1,0,e),e.parent=s,s==null||s.updateValue(),!0):(console.warn("Not found target node"),!1)}if(r==="CHILD_START")return n.value.children.unshift(e),e.parent=n,n.updateValue(),!0;if(r==="CHILD_END")return n.value.children.push(e),e.parent=n,n.updateValue(),!0;if(F(r)){const s=r;if(s.type==="CHILD"){const c=s.pos,u=s.index||0;return c==="BEFORE"?n==null||n.value.children.splice(u,0,e):n==null||n.value.children.splice(u+1,0,e),e.parent=n,n.updateValue(),!0}else console.warn("Can not parse pos obj")}return!1}createNode(e){return delete e.id,new A(e,{parent:null,materials:this.materialsModel})}addNodeById(e,n,r="AFTER"){const o=this.getNode(n);return o?this.addNode(e,o,r):(console.warn(`Not find a node by ${n}, pls check it`),!1)}copyNode(e){const n=e.export("design");n.id=K();const r=new A(n,{parent:e.parent,materials:this.materialsModel});return this.addNode(r,e,"AFTER"),r}copyNodeById(e){const n=this.getNode(e);return n&&n instanceof A?this.copyNode(n):!1}moveNode(e,n,r){this.deleteNode(e);let o=n;return["AFTER","BEFORE"].includes(r)&&(o=n.parent),e.parent=o,this.addNode(e,n,r)}moveNodeById(e,n,r){const o=this.getNode(e),a=this.getNode(n);return o&&a&&o instanceof A&&a instanceof A?this.moveNode(o,a,r):!1}deleteNode(e){var n;const r=e.parent;if(!r)throw new Error("parent node is null or undefined, pls check it");if(r instanceof yt){const o=r.value.value,a=o.findIndex(s=>s===e),i=o[a];return o.splice(a,1),(n=r.parent)==null||n.updateValue(),i}if(r instanceof A||r instanceof Te){const o=r.value.children,a=o.findIndex(s=>s===e),i=o[a];return o.splice(a,1),r.updateValue(),i}}deleteNodeById(e){const n=this.getNode(e);if(n)return this.deleteNode(n)}export(e=qt.SAVE){let n={...this.data,componentsTree:this.data.componentsTree.export(e)};return n=Hn(n,["id"]),n=$e(n),JSON.parse(JSON.stringify(n))}}var Pu=typeof global=="object"&&global&&global.Object===Object&&global;const Mu=Pu;var Tu=typeof self=="object"&&self&&self.Object===Object&&self,$u=Mu||Tu||Function("return this")(),Du=$u.Symbol;const Gt=Du;var tr=Object.prototype,Ru=tr.hasOwnProperty,xu=tr.toString,Pt=Gt?Gt.toStringTag:void 0;function Iu(t){var e=Ru.call(t,Pt),n=t[Pt];try{t[Pt]=void 0;var r=!0}catch{}var o=xu.call(t);return r&&(e?t[Pt]=n:delete t[Pt]),o}var ku=Object.prototype,Lu=ku.toString;function Fu(t){return Lu.call(t)}var Bu="[object Null]",Uu="[object Undefined]",er=Gt?Gt.toStringTag:void 0;function Gu(t){return t==null?t===void 0?Uu:Bu:er&&er in Object(t)?Iu(t):Fu(t)}function zu(t){return t!=null&&typeof t=="object"}var Vu=Array.isArray;const Qu=Vu;function Wu(t,e){return function(n){return t(e(n))}}var Hu=Wu(Object.getPrototypeOf,Object);const Ju=Hu;var Yu="[object Object]",qu=Function.prototype,Xu=Object.prototype,nr=qu.toString,Ku=Xu.hasOwnProperty,Zu=nr.call(Object);function rr(t){if(!zu(t)||Gu(t)!=Yu)return!1;var e=Ju(t);if(e===null)return!0;var n=Ku.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&nr.call(n)==Zu}function tl(t){const e=t.prototype;return!!(e&&e.isReactComponent)}function el(t){var r,o;const n=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.forward_ref"):60112;return(t==null?void 0:t.$$typeof)===n||((r=t==null?void 0:t.prototype)==null?void 0:r.isReactComponent)||((o=t==null?void 0:t.prototype)==null?void 0:o.setState)||t._forwardRef}function nl(t){class e extends $.Component{render(){return $.createElement(t,this.props)}}return e.displayName=t.displayName,e}const Re=(t,e)=>{const n=r=>{const a=`
    ${Object.keys(e).map(i=>`const ${i} = $$context['${i}'];`).join(`
`)}
    return ${r};
    `;return new Function("$$context",a)(e)};try{return n(t)}catch(r){return console.warn(r),`[${t}] expression run failed`}},rl=(t,e)=>function(...r){try{const o=`
        var f = ${t};
        return f.apply(f, arguments)
      `;new Function(o)(...r,e)}catch(o){console.warn(o)}},or=(t,e)=>{const n={};return e.forEach((r,o)=>{n[r]=t[o]}),n},zt="DYNAMIC",ol=["$$context","$$nodeModel"],Z=new Map;class al{constructor(){O(this,"components",{});O(this,"onGetRef");O(this,"onGetComponent");O(this,"onComponentMount");O(this,"onComponentDestroy")}getComponent(e){var o;const n=e.value.componentName;let r=this.components[n]||(()=>"Component not found");return el(r)||(r=nl(r),this.components[n]=r),this.onGetComponent&&(r=(o=this.onGetComponent)==null?void 0:o.call(this,r,e)),r}getContext(e={},n){let r=e;return n&&(r={...e},r.__proto__=n||null),r}pageRender(e,{components:n,onGetRef:r,$$context:o={},onGetComponent:a,onComponentMount:i,onComponentDestroy:s}){this.components=n,this.onGetRef=r,this.onGetComponent=a,this.onComponentMount=i,this.onComponentDestroy=s;const c=e.value.componentsTree,u=this.getComponent(c),d=this.convertModelToComponent(u,e.value.componentsTree),p={},l=c.props;return Object.keys(l).forEach(h=>{p[h]=l[h].value}),p.$$context=o,this.render(d,p)}transformProps(e={},{$$context:n}){const r=e,o=i=>{if(Array.isArray(i))return i.map(s=>o(s));if(Zn(i))return o(i.value);if(wu(i)){const s=i.value,c=s.value;if(!c)return console.warn("slot value is null, this maybe cause some error, pls check it",e),()=>{};const u=d=>{const p=`${d.id}-${zt}`;if(Z.get(d.id))return{key:p,component:Z.get(d.id)};const l=this.getComponent(d),h=this.convertModelToComponent(l,d),y=s.params||[],m=(...w)=>{const S=or(w,y),M=this.getContext({params:S},n);return this.render(h,{$$context:M,key:p})};return Z.set(d.id,m),{component:m,key:p}};if(Array.isArray(c)){const d=c==null?void 0:c.map(p=>u(p));return(...p)=>d.map(l=>tl(l.component)?k.default.createElement(l.component,{$$context:n,key:l.key}):l.component(...p))}else return u(c).component}else{if(Kn(i))return Re(i.value,n||{});if(ju(i))return rl(i.value,n);if(rr(i)){let s=i;Zn(i)&&(s=i.value);const c=s,u={};return Object.keys(s).forEach(d=>{u[d]=o(c[d])}),u}else return i}},a={};return Object.keys(r).forEach(i=>{const s=r[i];a[i]=o(s)}),a}convertModelToComponent(e,n){const r=this;class o extends k.default.Component{constructor(s){super(s);O(this,"NODE_ID",n.id);O(this,"UNIQUE_ID",`${n.id}_${K()}`);O(this,"targetComponentRef");O(this,"listenerHandle",[]);O(this,"updateState",s=>{this.setState(s)});this.targetComponentRef=k.default.createRef(),this.state=n.value.state||{}}componentDidMount(){var c;r.onGetRef&&r.onGetRef(this.targetComponentRef,n,this),(c=r.onComponentMount)==null||c.call(r,this,n);const s=()=>{this.forceUpdate()};n.onChange(s)}componentWillUnmount(){var s;(s=r.onComponentDestroy)==null||s.call(r,this,n)}render(){var M;const{$$context:s,...c}=this.props,u={key:n.id,...n.props,...c},d={state:this.state||{},updateState:this.updateState};n.value.componentName===Ae.PAGE&&(d.globalState=this.state,d.updateGlobalState=this.updateState,d.stateManager={});const p=r.getContext(d,s),l=n.value.stateName;n.value.stateName&&typeof l=="string"&&p.stateManager&&(p.stateManager[l]={state:this.state||{},updateState:this.updateState});let h=(M=n.value.condition)!=null?M:!0;if(typeof h!="boolean"&&(h=Re(h.value,p||{})),!h)return null;const y=n.value.loop;let m=[];if(y&&y.open){this.targetComponentRef.current=[];let P=[];if(Kn(y.data)){const R=y.data;P=Re(R.value,p||{})}return m=P.map((...R)=>{const B=R[1],N=y.args||["item","index"],gt=or(R,N),bt=r.getContext({loopData:gt},p),rt=r.transformProps(u,{$$context:bt}),{children:Vt}=rt;let Ie=[];if(Vt!==void 0)delete rt.children,Ie=Array.isArray(Vt)?Vt:[Vt];else{const Qt=[];n.value.children.forEach((vl,ml)=>{const yl=r.buildComponent(vl,{$$context:p,idx:ml});Qt.push(yl)}),Ie=Qt}return rt.key=`${rt.key}-${B}`,rt.ref=Qt=>{this.targetComponentRef.current[B]=Qt},r.render(e,rt,...Ie)}),m}const b=r.transformProps(u,{$$context:p}),{children:w}=b;let S=[];if(w!==void 0)delete b.children,S=Array.isArray(w)?w:[w];else{const P=[];n.value.children.forEach((B,N)=>{const gt=r.buildComponent(B,{$$context:p,idx:N});P.push(gt)}),S=P}return b.ref=this.targetComponentRef,r.render(e,b,...S)}}return O(o,"__CP_TYPE__",zt),o}buildComponent(e,{$$context:n={}}){return typeof e=="string"?this.render(e):(({currentNode:o})=>{const a=o.value.id;let i=null;if(Z.get(a))i=Z.get(a);else{const u=this.getComponent(o);i=this.convertModelToComponent(u,o)}Z.get(a)||Z.set(a,i);const s=`${a}-${zt}`,c={$$context:n,$$nodeModel:e,key:s};return this.render(i,c)})({currentNode:e})}render(e,n={},...r){return typeof e=="string"||typeof e=="number"?String(e):(ol.forEach(a=>{a in n&&e.__CP_TYPE__!==zt&&delete n[a]}),k.default.createElement(e,n,...r))}}const il=Le(new al),sl=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"].reduce((t,e)=>(t[e]=({children:n,...r})=>{let o=n;return Array.isArray(n)||(o=[n]),k.default.createElement(e,r,...o)},t),{}),cl={Page:({children:t})=>t,...sl};class ul{constructor(){O(this,"refMap",new Map)}get(e){return this.refMap.get(e).current}add(e,n){this.refMap.set(e,n)}remove(e){this.refMap.delete(e)}destroy(){this.refMap.clear()}}class ar extends k.default.Component{constructor(n){super(n);O(this,"refManager");O(this,"rerender",n=>{var r;Z.clear(),this.setState({pageModel:new Ut(n)}),(r=this.state.pageModel)==null||r.emitter.emit("onNodeChange",{value:n,preValue:this.state.pageModel,node:this.state.pageModel})});O(this,"onGetRef",(n,r,o)=>{var a,i;(i=(a=this.props).onGetRef)==null||i.call(a,n,r,o),this.refManager.add(r.value.refId||r.id,n)});this.state={pageModel:n.pageModel||new Ut(n.page)},this.refManager=new ul}getPageModel(){return this.state.pageModel}componentDidMount(){const{render:n}=this.props;n&&(n.ref.current=this)}componentWillUnmount(){this.refManager.destroy()}render(){const{props:n}=this,{adapter:r,onGetComponent:o,onComponentDestroy:a,onComponentMount:i}=n,{pageModel:s}=this.state;if(!s)return null;const c={...cl,...n.components};return r.pageRender(s,{libs:{},components:c,onGetRef:this.onGetRef,onGetComponent:o,onComponentMount:i,onComponentDestroy:a,$$context:{refs:this.refManager}})}}const ll=()=>{const t=$.useRef(null);return{ref:t,rerender:function(...e){t.current&&t.current.rerender(...e)}}};class ir{constructor(){O(this,"instanceMap",new Map)}get(e){return this.instanceMap.get(e)}add(e,n){const r=this.instanceMap.get(e);r?r.push(n):this.instanceMap.set(e,[n])}remove(e,n){const r=this.instanceMap.get(e);if(n!==void 0&&Array.isArray(r)){const o=r.filter(a=>a===n);this.instanceMap.set(e,o)}else this.instanceMap.delete(e)}destroy(){this.instanceMap.clear()}}const sr=t=>{const{node:e}=t,n=$.useMemo(()=>{var c;const s=(c=e.material)==null?void 0:c.value.isContainer;return s&&rr(s)?s:{placeholder:"Drag the component to place it",width:"100%",height:"100%",style:{}}},[t.node]),{placeholder:r,height:o,width:a,style:i}=n;return k.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(200,200,200,0.1)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"2px",fontSize:"14px",color:"gray",cursor:"default",minWidth:"300px",minHeight:"50px",width:a,height:o,...i}},r)};class fl extends k.default.Component{constructor(n){super(n);O(this,"instanceManager",new ir);O(this,"renderRef");O(this,"dropPlaceholder",sr);O(this,"onGetComponent",(n,r)=>{const o=this;class a extends k.default.Component{constructor(){super(...arguments);O(this,"_DESIGN_BOX",!0);O(this,"_NODE_MODEL",r);O(this,"_NODE_ID",r.id);O(this,"_UNIQUE_ID",`${r.id}_${K()}`);O(this,"_STATUS")}componentDidMount(){o.instanceManager.add(r.id,this)}componentWillUnmount(){o.instanceManager.remove(r.id,this),this._STATUS="DESTROY"}render(){var l;const{children:c=[],...u}=this.props;let d=c;return Qu(c)||(d=[c]),!Boolean(d.filter(Boolean).length)&&((l=r.material)==null?void 0:l.value.isContainer)&&d.push(k.default.createElement(o.dropPlaceholder,{node:r})),k.default.createElement(n,u,...d)}}return a});this.renderRef=k.default.createRef(),n.dropPlaceholder&&(this.dropPlaceholder=n.dropPlaceholder)}componentDidMount(){var n,r;(r=(n=this.props).onMount)==null||r.call(n,this)}getPageModel(){var n;return(n=this.renderRef.current)==null?void 0:n.state.pageModel}rerender(n){var r;return(r=this.renderRef.current)==null?void 0:r.rerender(n)}getInstancesById(n,r){let o=[...this.instanceManager.get(n)||[]];return r!==void 0&&(o=o.filter(a=>r===(a==null?void 0:a._UNIQUE_ID))),o}getInstanceByDom(n){const r=cr(n);if(!r)return null;const o=ur(r);return(o==null?void 0:o.stateNode)||null}getDomsById(n,r){const o=this.getInstancesById(n),a=[];return o==null||o.forEach(i=>{if((i==null?void 0:i._STATUS)==="DESTROY")return;const s=hr.findDOMNode(i);if(s&&!(s instanceof Text))if(r){const c=Array.from(s.querySelectorAll(r));a.push(...c)}else a.push(s)}),a}getDomRectById(n,r){return this.getDomsById(n,r).map(i=>i==null?void 0:i.getBoundingClientRect()).filter(Boolean)}render(){const{props:n,onGetComponent:r}=this,{render:o,...a}=n;return o&&(o.ref.current=this),k.default.createElement(ar,{onGetComponent:r,...a,ref:this.renderRef})}}const cr=t=>{if(!t)return null;const e=Object.keys(t).find(n=>n.startsWith("__reactInternalInstance$")||n.startsWith("__reactFiber$"))||"";return e?t[e]:cr(t.parentElement)},ur=t=>{var e;return t?(e=t==null?void 0:t.stateNode)!=null&&e._DESIGN_BOX?t:ur(t.return):null},dl=()=>{const t=$.useRef(null);return{ref:t,rerender:function(...e){t.current&&t.current.rerender(...e)},getInstancesById(e,n){var r;return((r=t.current)==null?void 0:r.getInstancesById(e,n))||[]},getInstanceByDom(e){var n;return(n=t.current)==null?void 0:n.getInstanceByDom(e)},getDomsById(e,n){var r;return((r=t.current)==null?void 0:r.getDomsById(e,n))||[]},getDomRectById(e,n){var r;return((r=t.current)==null?void 0:r.getDomRectById(e,n))||[]}}};var pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lr={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(pl,function(){var n=function(){},r={},o={},a={};function i(l,h){l=l.push?l:[l];var y=[],m=l.length,b=m,w,S,M,P;for(w=function(R,B){B.length&&y.push(R),b--,b||h(y)};m--;){if(S=l[m],M=o[S],M){w(S,M);continue}P=a[S]=a[S]||[],P.push(w)}}function s(l,h){if(!!l){var y=a[l];if(o[l]=h,!!y)for(;y.length;)y[0](l,h),y.splice(0,1)}}function c(l,h){l.call&&(l={success:l}),h.length?(l.error||n)(h):(l.success||n)(l)}function u(l,h,y,m){var b=document,w=y.async,S=(y.numRetries||0)+1,M=y.before||n,P=l.replace(/[\?|#].*$/,""),R=l.replace(/^(css|img)!/,""),B,N;m=m||0,/(^css!|\.css$)/.test(P)?(N=b.createElement("link"),N.rel="stylesheet",N.href=R,B="hideFocus"in N,B&&N.relList&&(B=0,N.rel="preload",N.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(P)?(N=b.createElement("img"),N.src=R):(N=b.createElement("script"),N.src=l,N.async=w===void 0?!0:w),N.onload=N.onerror=N.onbeforeload=function(gt){var bt=gt.type[0];if(B)try{N.sheet.cssText.length||(bt="e")}catch(rt){rt.code!=18&&(bt="e")}if(bt=="e"){if(m+=1,m<S)return u(l,h,y,m)}else if(N.rel=="preload"&&N.as=="style")return N.rel="stylesheet";h(l,bt,gt.defaultPrevented)},M(l,N)!==!1&&b.head.appendChild(N)}function d(l,h,y){l=l.push?l:[l];var m=l.length,b=m,w=[],S,M;for(S=function(P,R,B){if(R=="e"&&w.push(P),R=="b")if(B)w.push(P);else return;m--,m||h(w)},M=0;M<b;M++)u(l[M],S,y)}function p(l,h,y){var m,b;if(h&&h.trim&&(m=h),b=(m?y:h)||{},m){if(m in r)throw"LoadJS";r[m]=!0}function w(S,M){d(l,function(P){c(b,P),S&&c({success:S,error:M},P),s(m,P)},b)}if(b.returnPromise)return new Promise(w);w()}return p.ready=function(h,y){return i(h,function(m){c(y,m)}),p},p.done=function(h){s(h,[])},p.reset=function(){r={},o={},a={}},p.isDefined=function(h){return h in r},p})})(lr);const xe=lr.exports,fr=t=>!!((t==null?void 0:t.name)&&(t==null?void 0:t.assets));class hl{constructor(e){O(this,"assets");O(this,"loadStatus");O(this,"_onSuccessList",[]);O(this,"_onErrorList",[]);this.assets=e,this.loadStatus="INIT"}load(){const e=this.assets||[],n=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.id||(o.id=K()),n.push(o.id),fr(o)){const a=o.assets.map(i=>i.src);xe(a,o.id)}else xe(o.src,o.id)}return setTimeout(()=>{xe.ready(n,{success:()=>{this._onSuccessList.forEach(r=>r())},error:r=>{this._onErrorList.forEach(o=>o(r))}})},0),this}onSuccess(e){return this._onSuccessList.push(e),this}onError(e){return this._onErrorList.push(e),this}}j.AssetLoader=hl,j.ComponentInstanceManager=ir,j.DefaultDropPlaceholder=sr,j.DesignRender=fl,j.ReactAdapter=il,j.Render=ar,j.getAdapter=Le,j.isAssetPackage=fr,j.runtimeComponentCache=Z,j.useDesignRender=dl,j.useRender=ll,Object.defineProperties(j,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
