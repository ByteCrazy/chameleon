(function(y,I){typeof exports=="object"&&typeof module<"u"?I(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],I):(y=typeof globalThis<"u"?globalThis:y||self,I(y.CRender={},y.React,y.ReactDOM))})(this,function(y,I,st){"use strict";var vv=Object.defineProperty;var gv=(y,I,st)=>I in y?vv(y,I,{enumerable:!0,configurable:!0,writable:!0,value:st}):y[I]=st;var _=(y,I,st)=>(gv(y,typeof I!="symbol"?I+"":I,st),st);const qo=t=>t&&typeof t=="object"&&"default"in t?t:{default:t};function Yo(t){if(t&&t.__esModule)return t;const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const C=qo(I),Qo=Yo(st),Xo=t=>()=>{console.warn(`${t} need to be implement getComponent`)},Ko=["customPageRootRender"],Sr=["pageRender","render","convertModelToComponent","getComponent","getContext","getUtils","getDataLink","createDataLink","transformProps","transformData","transformGlobalData","errorCatch","clear"],Er=t=>[...Sr,...Ko].reduce((r,n)=>{var o;return t!=null&&t[n]?r[n]=(o=t[n])==null?void 0:o.bind(t):Sr.includes(n)&&(r[n]=Xo),r},{});var Zo=Object.defineProperty,ta=(t,e,r)=>e in t?Zo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b=(t,e,r)=>(ta(t,typeof e!="symbol"?e+"":e,r),r),ea=typeof global=="object"&&global&&global.Object===Object&&global;const Tr=ea;var ra=typeof self=="object"&&self&&self.Object===Object&&self,na=Tr||ra||Function("return this")();const q=na;var oa=q.Symbol;const G=oa;var Nr=Object.prototype,aa=Nr.hasOwnProperty,ia=Nr.toString,It=G?G.toStringTag:void 0;function sa(t){var e=aa.call(t,It),r=t[It];try{t[It]=void 0;var n=!0}catch{}var o=ia.call(t);return n&&(e?t[It]=r:delete t[It]),o}var ca=Object.prototype,ua=ca.toString;function la(t){return ua.call(t)}var fa="[object Null]",da="[object Undefined]",Ar=G?G.toStringTag:void 0;function ct(t){return t==null?t===void 0?da:fa:Ar&&Ar in Object(t)?sa(t):la(t)}function Y(t){return t!=null&&typeof t=="object"}var pa="[object Symbol]";function be(t){return typeof t=="symbol"||Y(t)&&ct(t)==pa}function _e(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var ha=Array.isArray;const M=ha;var va=1/0,$r=G?G.prototype:void 0,Mr=$r?$r.toString:void 0;function Pr(t){if(typeof t=="string")return t;if(M(t))return _e(t,Pr)+"";if(be(t))return Mr?Mr.call(t):"";var e=t+"";return e=="0"&&1/t==-va?"-0":e}function H(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function je(t){return t}var ga="[object AsyncFunction]",ma="[object Function]",ya="[object GeneratorFunction]",ba="[object Proxy]";function Oe(t){if(!H(t))return!1;var e=ct(t);return e==ma||e==ya||e==ga||e==ba}var _a=q["__core-js_shared__"];const Ce=_a;var xr=function(){var t=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ja(t){return!!xr&&xr in t}var Oa=Function.prototype,Ca=Oa.toString;function ut(t){if(t!=null){try{return Ca.call(t)}catch{}try{return t+""}catch{}}return""}var wa=/[\\^$.*+?()[\]{}|]/g,Sa=/^\[object .+?Constructor\]$/,Ea=Function.prototype,Ta=Object.prototype,Na=Ea.toString,Aa=Ta.hasOwnProperty,$a=RegExp("^"+Na.call(Aa).replace(wa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ma(t){if(!H(t)||ja(t))return!1;var e=Oe(t)?$a:Sa;return e.test(ut(t))}function Pa(t,e){return t==null?void 0:t[e]}function lt(t,e){var r=Pa(t,e);return Ma(r)?r:void 0}var xa=lt(q,"WeakMap");const we=xa;var Rr=Object.create,Ra=function(){function t(){}return function(e){if(!H(e))return{};if(Rr)return Rr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Ia=Ra;function Da(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Fa(){}function Ir(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var La=800,Ba=16,Ua=Date.now;function ka(t){var e=0,r=0;return function(){var n=Ua(),o=Ba-(n-r);if(r=n,o>0){if(++e>=La)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function za(t){return function(){return t}}var Ga=function(){try{var t=lt(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Zt=Ga;var Va=Zt?function(t,e){return Zt(t,"toString",{configurable:!0,enumerable:!1,value:za(e),writable:!0})}:je,Ha=ka(Va);const Dr=Ha;function Wa(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function Ja(t,e,r,n){for(var o=t.length,a=r+(n?1:-1);n?a--:++a<o;)if(e(t[a],a,t))return a;return-1}function qa(t){return t!==t}function Ya(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function Qa(t,e,r){return e===e?Ya(t,e,r):Ja(t,qa,r)}function Xa(t,e){var r=t==null?0:t.length;return!!r&&Qa(t,e,0)>-1}var Ka=9007199254740991,Za=/^(?:0|[1-9]\d*)$/;function te(t,e){var r=typeof t;return e=e==null?Ka:e,!!e&&(r=="number"||r!="symbol"&&Za.test(t))&&t>-1&&t%1==0&&t<e}function Se(t,e,r){e=="__proto__"&&Zt?Zt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Dt(t,e){return t===e||t!==t&&e!==e}var ti=Object.prototype,ei=ti.hasOwnProperty;function Ee(t,e,r){var n=t[e];(!(ei.call(t,e)&&Dt(n,r))||r===void 0&&!(e in t))&&Se(t,e,r)}function gt(t,e,r,n){var o=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var i=e[a],c=n?n(r[i],t[i],i,r,t):void 0;c===void 0&&(c=t[i]),o?Se(r,i,c):Ee(r,i,c)}return r}var Fr=Math.max;function Lr(t,e,r){return e=Fr(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=Fr(n.length-e,0),s=Array(a);++o<a;)s[o]=n[e+o];o=-1;for(var i=Array(e+1);++o<e;)i[o]=n[o];return i[e]=r(s),Da(t,this,i)}}function Br(t,e){return Dr(Lr(t,e,je),t+"")}var ri=9007199254740991;function Te(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ri}function ee(t){return t!=null&&Te(t.length)&&!Oe(t)}function ni(t,e,r){if(!H(r))return!1;var n=typeof e;return(n=="number"?ee(r)&&te(e,r.length):n=="string"&&e in r)?Dt(r[e],t):!1}function oi(t){return Br(function(e,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(o--,a):void 0,s&&ni(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var i=r[n];i&&t(e,i,n,a)}return e})}var ai=Object.prototype;function Ne(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ai;return t===r}function ii(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var si="[object Arguments]";function Ur(t){return Y(t)&&ct(t)==si}var kr=Object.prototype,ci=kr.hasOwnProperty,ui=kr.propertyIsEnumerable,li=Ur(function(){return arguments}())?Ur:function(t){return Y(t)&&ci.call(t,"callee")&&!ui.call(t,"callee")};const Ft=li;function fi(){return!1}var zr=typeof y=="object"&&y&&!y.nodeType&&y,Gr=zr&&typeof module=="object"&&module&&!module.nodeType&&module,di=Gr&&Gr.exports===zr,Vr=di?q.Buffer:void 0,pi=Vr?Vr.isBuffer:void 0,hi=pi||fi;const Lt=hi;var vi="[object Arguments]",gi="[object Array]",mi="[object Boolean]",yi="[object Date]",bi="[object Error]",_i="[object Function]",ji="[object Map]",Oi="[object Number]",Ci="[object Object]",wi="[object RegExp]",Si="[object Set]",Ei="[object String]",Ti="[object WeakMap]",Ni="[object ArrayBuffer]",Ai="[object DataView]",$i="[object Float32Array]",Mi="[object Float64Array]",Pi="[object Int8Array]",xi="[object Int16Array]",Ri="[object Int32Array]",Ii="[object Uint8Array]",Di="[object Uint8ClampedArray]",Fi="[object Uint16Array]",Li="[object Uint32Array]",N={};N[$i]=N[Mi]=N[Pi]=N[xi]=N[Ri]=N[Ii]=N[Di]=N[Fi]=N[Li]=!0,N[vi]=N[gi]=N[Ni]=N[mi]=N[Ai]=N[yi]=N[bi]=N[_i]=N[ji]=N[Oi]=N[Ci]=N[wi]=N[Si]=N[Ei]=N[Ti]=!1;function Bi(t){return Y(t)&&Te(t.length)&&!!N[ct(t)]}function Ae(t){return function(e){return t(e)}}var Hr=typeof y=="object"&&y&&!y.nodeType&&y,Bt=Hr&&typeof module=="object"&&module&&!module.nodeType&&module,Ui=Bt&&Bt.exports===Hr,$e=Ui&&Tr.process,ki=function(){try{var t=Bt&&Bt.require&&Bt.require("util").types;return t||$e&&$e.binding&&$e.binding("util")}catch{}}();const mt=ki;var Wr=mt&&mt.isTypedArray,zi=Wr?Ae(Wr):Bi;const Me=zi;var Gi=Object.prototype,Vi=Gi.hasOwnProperty;function Jr(t,e){var r=M(t),n=!r&&Ft(t),o=!r&&!n&&Lt(t),a=!r&&!n&&!o&&Me(t),s=r||n||o||a,i=s?ii(t.length,String):[],c=i.length;for(var u in t)(e||Vi.call(t,u))&&!(s&&(u=="length"||o&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||te(u,c)))&&i.push(u);return i}function qr(t,e){return function(r){return t(e(r))}}var Hi=qr(Object.keys,Object);const Wi=Hi;var Ji=Object.prototype,qi=Ji.hasOwnProperty;function Yi(t){if(!Ne(t))return Wi(t);var e=[];for(var r in Object(t))qi.call(t,r)&&r!="constructor"&&e.push(r);return e}function re(t){return ee(t)?Jr(t):Yi(t)}function Qi(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Xi=Object.prototype,Ki=Xi.hasOwnProperty;function Zi(t){if(!H(t))return Qi(t);var e=Ne(t),r=[];for(var n in t)n=="constructor"&&(e||!Ki.call(t,n))||r.push(n);return r}function Ut(t){return ee(t)?Jr(t,!0):Zi(t)}var ts=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,es=/^\w*$/;function Pe(t,e){if(M(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||be(t)?!0:es.test(t)||!ts.test(t)||e!=null&&t in Object(e)}var rs=lt(Object,"create");const kt=rs;function ns(){this.__data__=kt?kt(null):{},this.size=0}function os(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var as="__lodash_hash_undefined__",is=Object.prototype,ss=is.hasOwnProperty;function cs(t){var e=this.__data__;if(kt){var r=e[t];return r===as?void 0:r}return ss.call(e,t)?e[t]:void 0}var us=Object.prototype,ls=us.hasOwnProperty;function fs(t){var e=this.__data__;return kt?e[t]!==void 0:ls.call(e,t)}var ds="__lodash_hash_undefined__";function ps(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=kt&&e===void 0?ds:e,this}function ft(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ft.prototype.clear=ns,ft.prototype.delete=os,ft.prototype.get=cs,ft.prototype.has=fs,ft.prototype.set=ps;function hs(){this.__data__=[],this.size=0}function ne(t,e){for(var r=t.length;r--;)if(Dt(t[r][0],e))return r;return-1}var vs=Array.prototype,gs=vs.splice;function ms(t){var e=this.__data__,r=ne(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():gs.call(e,r,1),--this.size,!0}function ys(t){var e=this.__data__,r=ne(e,t);return r<0?void 0:e[r][1]}function bs(t){return ne(this.__data__,t)>-1}function _s(t,e){var r=this.__data__,n=ne(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function K(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}K.prototype.clear=hs,K.prototype.delete=ms,K.prototype.get=ys,K.prototype.has=bs,K.prototype.set=_s;var js=lt(q,"Map");const zt=js;function Os(){this.size=0,this.__data__={hash:new ft,map:new(zt||K),string:new ft}}function Cs(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function oe(t,e){var r=t.__data__;return Cs(e)?r[typeof e=="string"?"string":"hash"]:r.map}function ws(t){var e=oe(this,t).delete(t);return this.size-=e?1:0,e}function Ss(t){return oe(this,t).get(t)}function Es(t){return oe(this,t).has(t)}function Ts(t,e){var r=oe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function Z(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Z.prototype.clear=Os,Z.prototype.delete=ws,Z.prototype.get=Ss,Z.prototype.has=Es,Z.prototype.set=Ts;var Ns="Expected a function";function xe(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Ns);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var s=t.apply(this,n);return r.cache=a.set(o,s)||a,s};return r.cache=new(xe.Cache||Z),r}xe.Cache=Z;var As=500;function $s(t){var e=xe(t,function(n){return r.size===As&&r.clear(),n}),r=e.cache;return e}var Ms=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ps=/\\(\\)?/g,xs=$s(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Ms,function(r,n,o,a){e.push(o?a.replace(Ps,"$1"):n||r)}),e});const Rs=xs;function Is(t){return t==null?"":Pr(t)}function yt(t,e){return M(t)?t:Pe(t,e)?[t]:Rs(Is(t))}var Ds=1/0;function bt(t){if(typeof t=="string"||be(t))return t;var e=t+"";return e=="0"&&1/t==-Ds?"-0":e}function ae(t,e){e=yt(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[bt(e[r++])];return r&&r==n?t:void 0}function Yr(t,e,r){var n=t==null?void 0:ae(t,e);return n===void 0?r:n}function Re(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var Qr=G?G.isConcatSpreadable:void 0;function Fs(t){return M(t)||Ft(t)||!!(Qr&&t&&t[Qr])}function Ie(t,e,r,n,o){var a=-1,s=t.length;for(r||(r=Fs),o||(o=[]);++a<s;){var i=t[a];e>0&&r(i)?e>1?Ie(i,e-1,r,n,o):Re(o,i):n||(o[o.length]=i)}return o}function Ls(t){var e=t==null?0:t.length;return e?Ie(t,1):[]}function Bs(t){return Dr(Lr(t,void 0,Ls),t+"")}var Us=qr(Object.getPrototypeOf,Object);const De=Us;var ks="[object Object]",zs=Function.prototype,Gs=Object.prototype,Xr=zs.toString,Vs=Gs.hasOwnProperty,Hs=Xr.call(Object);function B(t){if(!Y(t)||ct(t)!=ks)return!1;var e=De(t);if(e===null)return!0;var r=Vs.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Xr.call(r)==Hs}function Ws(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a}function Js(){this.__data__=new K,this.size=0}function qs(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Ys(t){return this.__data__.get(t)}function Qs(t){return this.__data__.has(t)}var Xs=200;function Ks(t,e){var r=this.__data__;if(r instanceof K){var n=r.__data__;if(!zt||n.length<Xs-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Z(n)}return r.set(t,e),this.size=r.size,this}function W(t){var e=this.__data__=new K(t);this.size=e.size}W.prototype.clear=Js,W.prototype.delete=qs,W.prototype.get=Ys,W.prototype.has=Qs,W.prototype.set=Ks;function Zs(t,e){return t&&gt(e,re(e),t)}function tc(t,e){return t&&gt(e,Ut(e),t)}var Kr=typeof y=="object"&&y&&!y.nodeType&&y,Zr=Kr&&typeof module=="object"&&module&&!module.nodeType&&module,ec=Zr&&Zr.exports===Kr,tn=ec?q.Buffer:void 0,en=tn?tn.allocUnsafe:void 0;function rn(t,e){if(e)return t.slice();var r=t.length,n=en?en(r):new t.constructor(r);return t.copy(n),n}function rc(t,e){for(var r=-1,n=t==null?0:t.length,o=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[o++]=s)}return a}function nn(){return[]}var nc=Object.prototype,oc=nc.propertyIsEnumerable,on=Object.getOwnPropertySymbols,ac=on?function(t){return t==null?[]:(t=Object(t),rc(on(t),function(e){return oc.call(t,e)}))}:nn;const Fe=ac;function ic(t,e){return gt(t,Fe(t),e)}var sc=Object.getOwnPropertySymbols,cc=sc?function(t){for(var e=[];t;)Re(e,Fe(t)),t=De(t);return e}:nn;const an=cc;function uc(t,e){return gt(t,an(t),e)}function sn(t,e,r){var n=e(t);return M(t)?n:Re(n,r(t))}function Le(t){return sn(t,re,Fe)}function Be(t){return sn(t,Ut,an)}var lc=lt(q,"DataView");const Ue=lc;var fc=lt(q,"Promise");const ke=fc;var dc=lt(q,"Set");const _t=dc;var cn="[object Map]",pc="[object Object]",un="[object Promise]",ln="[object Set]",fn="[object WeakMap]",dn="[object DataView]",hc=ut(Ue),vc=ut(zt),gc=ut(ke),mc=ut(_t),yc=ut(we),dt=ct;(Ue&&dt(new Ue(new ArrayBuffer(1)))!=dn||zt&&dt(new zt)!=cn||ke&&dt(ke.resolve())!=un||_t&&dt(new _t)!=ln||we&&dt(new we)!=fn)&&(dt=function(t){var e=ct(t),r=e==pc?t.constructor:void 0,n=r?ut(r):"";if(n)switch(n){case hc:return dn;case vc:return cn;case gc:return un;case mc:return ln;case yc:return fn}return e});const Gt=dt;var bc=Object.prototype,_c=bc.hasOwnProperty;function jc(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&_c.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Oc=q.Uint8Array;const ie=Oc;function ze(t){var e=new t.constructor(t.byteLength);return new ie(e).set(new ie(t)),e}function Cc(t,e){var r=e?ze(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var wc=/\w*$/;function Sc(t){var e=new t.constructor(t.source,wc.exec(t));return e.lastIndex=t.lastIndex,e}var pn=G?G.prototype:void 0,hn=pn?pn.valueOf:void 0;function Ec(t){return hn?Object(hn.call(t)):{}}function vn(t,e){var r=e?ze(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Tc="[object Boolean]",Nc="[object Date]",Ac="[object Map]",$c="[object Number]",Mc="[object RegExp]",Pc="[object Set]",xc="[object String]",Rc="[object Symbol]",Ic="[object ArrayBuffer]",Dc="[object DataView]",Fc="[object Float32Array]",Lc="[object Float64Array]",Bc="[object Int8Array]",Uc="[object Int16Array]",kc="[object Int32Array]",zc="[object Uint8Array]",Gc="[object Uint8ClampedArray]",Vc="[object Uint16Array]",Hc="[object Uint32Array]";function Wc(t,e,r){var n=t.constructor;switch(e){case Ic:return ze(t);case Tc:case Nc:return new n(+t);case Dc:return Cc(t,r);case Fc:case Lc:case Bc:case Uc:case kc:case zc:case Gc:case Vc:case Hc:return vn(t,r);case Ac:return new n;case $c:case xc:return new n(t);case Mc:return Sc(t);case Pc:return new n;case Rc:return Ec(t)}}function gn(t){return typeof t.constructor=="function"&&!Ne(t)?Ia(De(t)):{}}var Jc="[object Map]";function qc(t){return Y(t)&&Gt(t)==Jc}var mn=mt&&mt.isMap,Yc=mn?Ae(mn):qc;const Qc=Yc;var Xc="[object Set]";function Kc(t){return Y(t)&&Gt(t)==Xc}var yn=mt&&mt.isSet,Zc=yn?Ae(yn):Kc;const tu=Zc;var eu=1,ru=2,nu=4,bn="[object Arguments]",ou="[object Array]",au="[object Boolean]",iu="[object Date]",su="[object Error]",_n="[object Function]",cu="[object GeneratorFunction]",uu="[object Map]",lu="[object Number]",jn="[object Object]",fu="[object RegExp]",du="[object Set]",pu="[object String]",hu="[object Symbol]",vu="[object WeakMap]",gu="[object ArrayBuffer]",mu="[object DataView]",yu="[object Float32Array]",bu="[object Float64Array]",_u="[object Int8Array]",ju="[object Int16Array]",Ou="[object Int32Array]",Cu="[object Uint8Array]",wu="[object Uint8ClampedArray]",Su="[object Uint16Array]",Eu="[object Uint32Array]",E={};E[bn]=E[ou]=E[gu]=E[mu]=E[au]=E[iu]=E[yu]=E[bu]=E[_u]=E[ju]=E[Ou]=E[uu]=E[lu]=E[jn]=E[fu]=E[du]=E[pu]=E[hu]=E[Cu]=E[wu]=E[Su]=E[Eu]=!0,E[su]=E[_n]=E[vu]=!1;function Vt(t,e,r,n,o,a){var s,i=e&eu,c=e&ru,u=e&nu;if(r&&(s=o?r(t,n,o,a):r(t)),s!==void 0)return s;if(!H(t))return t;var l=M(t);if(l){if(s=jc(t),!i)return Ir(t,s)}else{var d=Gt(t),f=d==_n||d==cu;if(Lt(t))return rn(t,i);if(d==jn||d==bn||f&&!o){if(s=c||f?{}:gn(t),!i)return c?uc(t,tc(s,t)):ic(t,Zs(s,t))}else{if(!E[d])return o?t:{};s=Wc(t,d,i)}}a||(a=new W);var h=a.get(t);if(h)return h;a.set(t,s),tu(t)?t.forEach(function(j){s.add(Vt(j,e,r,j,t,a))}):Qc(t)&&t.forEach(function(j,O){s.set(O,Vt(j,e,r,O,t,a))});var g=u?c?Be:Le:c?Ut:re,m=l?void 0:g(t);return Wa(m||t,function(j,O){m&&(O=j,j=t[O]),Ee(s,O,Vt(j,e,r,O,t,a))}),s}var Tu=1,Nu=4;function On(t){return Vt(t,Tu|Nu)}var Au="__lodash_hash_undefined__";function $u(t){return this.__data__.set(t,Au),this}function Mu(t){return this.__data__.has(t)}function Ht(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Z;++e<r;)this.add(t[e])}Ht.prototype.add=Ht.prototype.push=$u,Ht.prototype.has=Mu;function Pu(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Cn(t,e){return t.has(e)}var xu=1,Ru=2;function wn(t,e,r,n,o,a){var s=r&xu,i=t.length,c=e.length;if(i!=c&&!(s&&c>i))return!1;var u=a.get(t),l=a.get(e);if(u&&l)return u==e&&l==t;var d=-1,f=!0,h=r&Ru?new Ht:void 0;for(a.set(t,e),a.set(e,t);++d<i;){var g=t[d],m=e[d];if(n)var j=s?n(m,g,d,e,t,a):n(g,m,d,t,e,a);if(j!==void 0){if(j)continue;f=!1;break}if(h){if(!Pu(e,function(O,S){if(!Cn(h,S)&&(g===O||o(g,O,r,n,a)))return h.push(S)})){f=!1;break}}else if(!(g===m||o(g,m,r,n,a))){f=!1;break}}return a.delete(t),a.delete(e),f}function Iu(t){var e=-1,r=Array(t.size);return t.forEach(function(n,o){r[++e]=[o,n]}),r}function Ge(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Du=1,Fu=2,Lu="[object Boolean]",Bu="[object Date]",Uu="[object Error]",ku="[object Map]",zu="[object Number]",Gu="[object RegExp]",Vu="[object Set]",Hu="[object String]",Wu="[object Symbol]",Ju="[object ArrayBuffer]",qu="[object DataView]",Sn=G?G.prototype:void 0,Ve=Sn?Sn.valueOf:void 0;function Yu(t,e,r,n,o,a,s){switch(r){case qu:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ju:return!(t.byteLength!=e.byteLength||!a(new ie(t),new ie(e)));case Lu:case Bu:case zu:return Dt(+t,+e);case Uu:return t.name==e.name&&t.message==e.message;case Gu:case Hu:return t==e+"";case ku:var i=Iu;case Vu:var c=n&Du;if(i||(i=Ge),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;n|=Fu,s.set(t,e);var l=wn(i(t),i(e),n,o,a,s);return s.delete(t),l;case Wu:if(Ve)return Ve.call(t)==Ve.call(e)}return!1}var Qu=1,Xu=Object.prototype,Ku=Xu.hasOwnProperty;function Zu(t,e,r,n,o,a){var s=r&Qu,i=Le(t),c=i.length,u=Le(e),l=u.length;if(c!=l&&!s)return!1;for(var d=c;d--;){var f=i[d];if(!(s?f in e:Ku.call(e,f)))return!1}var h=a.get(t),g=a.get(e);if(h&&g)return h==e&&g==t;var m=!0;a.set(t,e),a.set(e,t);for(var j=s;++d<c;){f=i[d];var O=t[f],S=e[f];if(n)var x=s?n(S,O,f,e,t,a):n(O,S,f,t,e,a);if(!(x===void 0?O===S||o(O,S,r,n,a):x)){m=!1;break}j||(j=f=="constructor")}if(m&&!j){var R=t.constructor,D=e.constructor;R!=D&&"constructor"in t&&"constructor"in e&&!(typeof R=="function"&&R instanceof R&&typeof D=="function"&&D instanceof D)&&(m=!1)}return a.delete(t),a.delete(e),m}var tl=1,En="[object Arguments]",Tn="[object Array]",se="[object Object]",el=Object.prototype,Nn=el.hasOwnProperty;function rl(t,e,r,n,o,a){var s=M(t),i=M(e),c=s?Tn:Gt(t),u=i?Tn:Gt(e);c=c==En?se:c,u=u==En?se:u;var l=c==se,d=u==se,f=c==u;if(f&&Lt(t)){if(!Lt(e))return!1;s=!0,l=!1}if(f&&!l)return a||(a=new W),s||Me(t)?wn(t,e,r,n,o,a):Yu(t,e,c,r,n,o,a);if(!(r&tl)){var h=l&&Nn.call(t,"__wrapped__"),g=d&&Nn.call(e,"__wrapped__");if(h||g){var m=h?t.value():t,j=g?e.value():e;return a||(a=new W),o(m,j,r,n,a)}}return f?(a||(a=new W),Zu(t,e,r,n,o,a)):!1}function He(t,e,r,n,o){return t===e?!0:t==null||e==null||!Y(t)&&!Y(e)?t!==t&&e!==e:rl(t,e,r,n,He,o)}var nl=1,ol=2;function al(t,e,r,n){var o=r.length,a=o,s=!n;if(t==null)return!a;for(t=Object(t);o--;){var i=r[o];if(s&&i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++o<a;){i=r[o];var c=i[0],u=t[c],l=i[1];if(s&&i[2]){if(u===void 0&&!(c in t))return!1}else{var d=new W;if(n)var f=n(u,l,c,t,e,d);if(!(f===void 0?He(l,u,nl|ol,n,d):f))return!1}}return!0}function An(t){return t===t&&!H(t)}function il(t){for(var e=re(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,An(o)]}return e}function $n(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function sl(t){var e=il(t);return e.length==1&&e[0][2]?$n(e[0][0],e[0][1]):function(r){return r===t||al(r,t,e)}}function cl(t,e){return t!=null&&e in Object(t)}function ul(t,e,r){e=yt(e,t);for(var n=-1,o=e.length,a=!1;++n<o;){var s=bt(e[n]);if(!(a=t!=null&&r(t,s)))break;t=t[s]}return a||++n!=o?a:(o=t==null?0:t.length,!!o&&Te(o)&&te(s,o)&&(M(t)||Ft(t)))}function ll(t,e){return t!=null&&ul(t,e,cl)}var fl=1,dl=2;function pl(t,e){return Pe(t)&&An(e)?$n(bt(t),e):function(r){var n=Yr(r,t);return n===void 0&&n===e?ll(r,t):He(e,n,fl|dl)}}function hl(t){return function(e){return e==null?void 0:e[t]}}function vl(t){return function(e){return ae(e,t)}}function gl(t){return Pe(t)?hl(bt(t)):vl(t)}function We(t){return typeof t=="function"?t:t==null?je:typeof t=="object"?M(t)?pl(t[0],t[1]):sl(t):gl(t)}function ml(t){return function(e,r,n){for(var o=-1,a=Object(e),s=n(e),i=s.length;i--;){var c=s[t?i:++o];if(r(a[c],c,a)===!1)break}return e}}var yl=ml();const bl=yl;function Je(t,e,r){(r!==void 0&&!Dt(t[e],r)||r===void 0&&!(e in t))&&Se(t,e,r)}function qe(t){return Y(t)&&ee(t)}function Ye(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function _l(t){return gt(t,Ut(t))}function jl(t,e,r,n,o,a,s){var i=Ye(t,r),c=Ye(e,r),u=s.get(c);if(u){Je(t,r,u);return}var l=a?a(i,c,r+"",t,e,s):void 0,d=l===void 0;if(d){var f=M(c),h=!f&&Lt(c),g=!f&&!h&&Me(c);l=c,f||h||g?M(i)?l=i:qe(i)?l=Ir(i):h?(d=!1,l=rn(c,!0)):g?(d=!1,l=vn(c,!0)):l=[]:B(c)||Ft(c)?(l=i,Ft(i)?l=_l(i):(!H(i)||Oe(i))&&(l=gn(c))):d=!1}d&&(s.set(c,l),o(l,c,n,a,s),s.delete(c)),Je(t,r,l)}function Mn(t,e,r,n,o){t!==e&&bl(e,function(a,s){if(o||(o=new W),H(a))jl(t,e,s,r,Mn,n,o);else{var i=n?n(Ye(t,s),a,s+"",t,e,o):void 0;i===void 0&&(i=a),Je(t,s,i)}},Ut)}function Ol(t,e,r){for(var n=-1,o=t==null?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}function Pn(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function Cl(t,e){return e.length<2?t:ae(t,Ws(e,0,-1))}var wl=oi(function(t,e,r){Mn(t,e,r)});const xn=wl;var Sl="Expected a function";function El(t){if(typeof t!="function")throw new TypeError(Sl);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Tl(t,e){return e=yt(e,t),t=Cl(t,e),t==null||delete t[bt(Pn(e))]}function Nl(t){return B(t)?void 0:t}var Al=1,$l=2,Ml=4,Pl=Bs(function(t,e){var r={};if(t==null)return r;var n=!1;e=_e(e,function(a){return a=yt(a,t),n||(n=a.length>1),a}),gt(t,Be(t),r),n&&(r=Vt(r,Al|$l|Ml,Nl));for(var o=e.length;o--;)Tl(r,e[o]);return r});const Rn=Pl;function xl(t,e,r,n){if(!H(t))return t;e=yt(e,t);for(var o=-1,a=e.length,s=a-1,i=t;i!=null&&++o<a;){var c=bt(e[o]),u=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(o!=s){var l=i[c];u=n?n(l,c,i):void 0,u===void 0&&(u=H(l)?l:te(e[o+1])?[]:{})}Ee(i,c,u),i=i[c]}return t}function Rl(t,e,r){for(var n=-1,o=e.length,a={};++n<o;){var s=e[n],i=ae(t,s);r(i,s)&&xl(a,yt(s,t),i)}return a}function Il(t,e){if(t==null)return{};var r=_e(Be(t),function(n){return[n]});return e=We(e),Rl(t,r,function(n,o){return e(n,o[0])})}function Dl(t,e){return Il(t,El(We(e)))}var Fl=1/0,Ll=_t&&1/Ge(new _t([,-0]))[1]==Fl?function(t){return new _t(t)}:Fa;const Bl=Ll;var Ul=200;function kl(t,e,r){var n=-1,o=Xa,a=t.length,s=!0,i=[],c=i;if(r)s=!1,o=Ol;else if(a>=Ul){var u=e?null:Bl(t);if(u)return Ge(u);s=!1,o=Cn,c=new Ht}else c=e?[]:i;t:for(;++n<a;){var l=t[n],d=e?e(l):l;if(l=r||l!==0?l:0,s&&d===d){for(var f=c.length;f--;)if(c[f]===d)continue t;e&&c.push(d),i.push(l)}else o(c,d,r)||(c!==i&&c.push(d),i.push(l))}return i}var zl=Br(function(t){var e=Pn(t);return qe(e)&&(e=void 0),kl(Ie(t,1,qe,!0),We(e))});const Gl=zl;class In extends TypeError{constructor(e,r){let n;const{message:o,...a}=e,{path:s}=e,i=s.length===0?o:`At path: ${s.join(".")} -- ${o}`;super(i),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n!=null?n:n=[e,...r()]}}function Vl(t){return J(t)&&typeof t[Symbol.iterator]=="function"}function J(t){return typeof t=="object"&&t!=null}function z(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Hl(t){const{done:e,value:r}=t.next();return e?void 0:r}function Wl(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:o,branch:a}=e,{type:s}=r,{refinement:i,message:c=`Expected a value of type \`${s}\`${i?` with refinement \`${i}\``:""}, but received: \`${z(n)}\``}=t;return{value:n,type:s,refinement:i,key:o[o.length-1],path:o,branch:a,...t,message:c}}function*Dn(t,e,r,n){Vl(t)||(t=[t]);for(const o of t){const a=Wl(o,e,r,n);a&&(yield a)}}function*Qe(t,e,r){r===void 0&&(r={});const{path:n=[],branch:o=[t],coerce:a=!1,mask:s=!1}=r,i={path:n,branch:o};if(a&&(t=e.coercer(t,i),s&&e.type!=="type"&&J(e.schema)&&J(t)&&!Array.isArray(t)))for(const u in t)e.schema[u]===void 0&&delete t[u];let c="valid";for(const u of e.validator(t,i))c="not_valid",yield[u,void 0];for(let[u,l,d]of e.entries(t,i)){const f=Qe(l,d,{path:u===void 0?n:[...n,u],branch:u===void 0?o:[...o,l],coerce:a,mask:s});for(const h of f)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):a&&(l=h[1],u===void 0?t=l:t instanceof Map?t.set(u,l):t instanceof Set?t.add(l):J(t)&&(l!==void 0||u in t)&&(t[u]=l))}if(c!=="not_valid")for(const u of e.refiner(t,i))c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,t])}class Q{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:r,schema:n,validator:o,refiner:a,coercer:s=c=>c,entries:i=function*(){}}=e;this.type=r,this.schema=n,this.entries=i,this.coercer=s,o?this.validator=(c,u)=>{const l=o(c,u);return Dn(l,u,this,c)}:this.validator=()=>[],a?this.refiner=(c,u)=>{const l=a(c,u);return Dn(l,u,this,c)}:this.refiner=()=>[]}assert(e){return Fn(e,this)}create(e){return Jl(e,this)}is(e){return Yl(e,this)}mask(e){return ql(e,this)}validate(e,r){return r===void 0&&(r={}),jt(e,this,r)}}function Fn(t,e){const r=jt(t,e);if(r[0])throw r[0]}function Jl(t,e){const r=jt(t,e,{coerce:!0});if(r[0])throw r[0];return r[1]}function ql(t,e){const r=jt(t,e,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function Yl(t,e){return!jt(t,e)[0]}function jt(t,e,r){r===void 0&&(r={});const n=Qe(t,e,r),o=Hl(n);return o[0]?[new In(o[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function Xe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=e[0].type==="type",o=e.map(s=>s.schema),a=Object.assign({},...o);return n?kn(a):w(a)}function ot(t,e){return new Q({type:t,schema:null,validator:e})}function Ot(t){return new Q({type:"dynamic",schema:null,*entries(e,r){yield*t(e,r).entries(e,r)},validator(e,r){return t(e,r).validator(e,r)},coercer(e,r){return t(e,r).coercer(e,r)},refiner(e,r){return t(e,r).refiner(e,r)}})}function Ln(t,e){const{schema:r}=t,n={...r};for(const o of e)delete n[o];switch(t.type){case"type":return kn(n);default:return w(n)}}function F(){return ot("any",()=>!0)}function P(t){return new Q({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${z(e)}`}})}function tt(){return ot("boolean",t=>typeof t=="boolean")}function Ke(t){const e={},r=t.map(n=>z(n)).join();for(const n of t)e[n]=n;return new Q({type:"enums",schema:e,validator(n){return t.includes(n)||`Expected one of \`${r}\`, but received: ${z(n)}`}})}function Bn(){return ot("func",t=>typeof t=="function"||`Expected a function, but received: ${z(t)}`)}function U(t){const e=z(t),r=typeof t;return new Q({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${z(n)}`}})}function Ql(){return ot("never",()=>!1)}function Un(){return ot("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${z(t)}`)}function w(t){const e=t?Object.keys(t):[],r=Ql();return new Q({type:"object",schema:t||null,*entries(n){if(t&&J(n)){const o=new Set(Object.keys(n));for(const a of e)o.delete(a),yield[a,n[a],t[a]];for(const a of o)yield[a,n[a],r]}},validator(n){return J(n)||`Expected an object, but received: ${z(n)}`},coercer(n){return J(n)?{...n}:n}})}function v(t){return new Q({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function Wt(t,e){return new Q({type:"record",schema:null,*entries(r){if(J(r))for(const n in r){const o=r[n];yield[n,n,t],yield[n,o,e]}},validator(r){return J(r)||`Expected an object, but received: ${z(r)}`}})}function p(){return ot("string",t=>typeof t=="string"||`Expected a string, but received: ${z(t)}`)}function kn(t){const e=Object.keys(t);return new Q({type:"type",schema:t,*entries(r){if(J(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return J(r)||`Expected an object, but received: ${z(r)}`}})}function L(t){const e=t.map(r=>r.type).join(" | ");return new Q({type:"union",schema:null,coercer(r,n){return(t.find(o=>{const[a]=o.validate(r,{coerce:!0});return!a})||Xl()).coercer(r,n)},validator(r,n){const o=[];for(const a of t){const[...s]=Qe(r,a,n),[i]=s;if(i[0])for(const[c]of s)c&&o.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${z(r)}`,...o]}})}function Xl(){return ot("unknown",()=>!0)}const Ze=w({package:p(),version:p(),exportName:p(),destructuring:v(tt()),subName:v(p()),main:v(p())}),Kl=P(Ze),Zl=["CBlock","CContainer","CImage","CCanvas","CVideo","CAudio","CText","CNativeTag"];var V=(t=>(t.SLOT="SLOT",t.FUNCTION="FUNCTION",t.EXPRESSION="EXPRESSION",t))(V||{}),tr=(t=>(t.DESIGN="design",t.SAVE="save",t))(tr||{}),er=(t=>(t.FUNC="FUNC",t.COMP="COMP",t))(er||{});const tf=()=>ot("normalObj",t=>!B(t)||[V.SLOT,V.EXPRESSION,V.FUNCTION].includes(t==null?void 0:t.type)?!1:(jt(t,Wt(p(),rr)),!0)),rr=L([p(),Un(),tt(),w({type:U(V.SLOT),renderType:Ke([er.FUNC,er.COMP]),params:v(P(p())),value:Ot(()=>L([Ct,P(Ct)]))}),w({type:U(V.EXPRESSION),value:p()}),w({type:U(V.FUNCTION),value:p()}),tf(),P(Ot(()=>rr))]),zn=w({type:U(V.EXPRESSION),value:p()}),Ct=w({id:v(p()),title:v(p()),componentName:p(),props:v(Wt(p(),rr)),stateName:v(p()),state:v(Wt(p(),F())),children:Ot(()=>v(P(L([p(),Ct])))),configure:v(F()),css:v(F()),className:v(P(p())),refId:v(p()),extra:v(Wt(F(),F())),condition:v(L([tt(),zn])),tempDevConfig:v(F()),loop:v(w({open:tt(),data:L([P(F()),zn]),args:v(P(p())),forName:v(p()),forIndex:v(p()),key:v(F()),name:v(p())}))}),ce=L([p(),w({label:p(),tip:v(p())})]),ef=w({type:U("shape"),value:P(w({name:p(),title:ce,valueType:Ot(()=>ue)}))}),rf=w({type:U("enums"),value:P(p())});w({type:U("array"),value:Ot(()=>ue)});const nf=w({type:U("array"),value:Ot(()=>P(ue))}),ue=L([Ke(["array","boolean","number","object","string"]),Ke(["component","expression","function"]),ef,rf,nf]),of=L([p(),w({componentName:p(),props:v(F()),initialValue:v(F()),component:v(F())})]),nr=w({name:p(),title:ce,valueType:ue,description:v(p()),defaultValue:F(),setters:v(P(of)),condition:v(Bn())}),af=L([p(),Bn()]);var or=(t=>(t.SINGLE="single",t.GROUP="group",t))(or||{});L([p(),w({name:p(),describe:v(p()),params:v(w({name:p(),description:p()})),template:p()})]);const sf=w({id:v(p()),title:p(),snapshot:L([p(),F()]),snapshotText:v(p()),description:v(p()),tags:v(P(p())),groupName:v(p()),category:v(p()),schema:Xe(Ln(Ct,["id"]),w({componentName:v(p())}))}),cf=w({componentName:p(),title:p(),screenshot:v(p()),icon:v(p()),tags:v(P(p())),groupName:v(p()),category:v(p()),priority:v(Un()),npm:v(Ze),snippets:P(sf),props:P(L([nr,w({title:v(ce),type:U("single"),content:nr}),w({title:v(ce),type:U("group"),content:P(nr)})])),fixedProps:v(F()),isContainer:v(L([tt(),w({placeholder:p(),width:p(),height:p()})])),isModal:v(L([tt(),w({visibleKey:p()})])),isSupportStyle:v(tt()),isSupportDispatchNativeEvent:v(tt()),isLayout:v(tt()),rootSelector:v(p()),selectionToolBars:v(P(af)),extra:v(Wt(F(),F()))}),uf=t=>({data:e,message:r,throwError:n})=>{const o=t({data:e,message:r,throwError:n});if(o.isValidate)return o;if(n)throw o.message||r?new Error(`${o.message||r}
 originData: ${JSON.stringify(e)}`):new Error(`${JSON.stringify(e)} 
 data struct format is invalidate`);return o},ar=t=>{const{data:e,message:r,throwError:n,dataStruct:o}=t;return uf(({data:a})=>{try{return Fn(a,o),{isValidate:!0}}catch(s){let i=s;return s instanceof In&&(i=s.failures().map(c=>`\u3010${c.path.join(".")}\u3011: ${c.message}
`)),{isValidate:!1,message:i,error:s}}})({data:e,message:r,throwError:n})};var wt=(t=>(t.ROOT_CONTAINER="RootContainer",t))(wt||{});const lf=w({type:U(V.FUNCTION),value:p()}),ff=Xe(Ln(Ct,["componentName"]),w({componentName:U("RootContainer")}));function df(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(o){o(r)}),(n=t.get("*"))&&n.slice().map(function(o){o(e,r)})}}}const Jt=df(),pf=(t,e)=>{const r={...t,value:[]},n=t.value;let o=new pt([]);return e&&(o=e.materialsMode||new pt([])),n&&(M(n)?r.value=n.map(a=>new $(a,{parent:e,materials:o})):B(n)&&r.value.push(new $(n,{parent:e,materials:o}))),r};class St{constructor(e,r){b(this,"nodeType","SLOT"),b(this,"rawData"),b(this,"parent"),b(this,"emitter",Jt),b(this,"data"),b(this,"id"),b(this,"materialsMode"),this.parent=(r==null?void 0:r.parent)||null,this.rawData=e;const n=(r==null?void 0:r.materials)||new pt([]);this.materialsMode=n,this.id=et(),this.data=pf(e,this)}get value(){return this.data}export(e){const r=this.data,n=o=>{if(o instanceof $)return o.export(e);if(B(o)){const a={};return Object.keys(o||{}).forEach(s=>{a[s]=n(o[s])}),a}return M(o)?o.map(a=>n(a)):(e==="design"&&delete o.id,o)};return n(r)}}const Gn=t=>{let e=[];return t.forEach(r=>{const n=r;n.type?n.type===or.SINGLE?e.push(n.content):n.type===or.GROUP&&(e=[...e,...Gn(n.content)]):e.push(r)}),e},ir=(t,e,r)=>{if(t.type)return t.type===V.SLOT?new St(t,{parent:e,materials:r}):t;if(B(t)){const n={};return Object.keys(t).forEach(o=>{n[o]=sr(t[o],e,r)}),n}else return Array.isArray(t)?t.map(n=>ir(n,e,r)):t},sr=(t,e,r)=>B(t)?ir(t,e,r):M(t)?t.map(n=>ir(n,e,r)):t;class at{constructor(e,r,n){b(this,"nodeType","PROP"),b(this,"rawData"),b(this,"parent"),b(this,"emitter",Jt),b(this,"data"),b(this,"name"),b(this,"materialsMode");const o=(n==null?void 0:n.materials)||new pt([]);this.materialsMode=o,this.parent=n==null?void 0:n.parent,this.rawData=r,this.name=e,this.data=sr(r,this,o)}isIncludeSlot(){return!1}isIncludeExpression(){return!1}get value(){return this.data}updateValue(e){const r=this.data;this.data=sr(e!=null?e:r,this,this.materialsMode),this.emitter.emit("onPropChange",{value:this.data,preValue:r,node:this}),this.parent&&!(this.parent instanceof St)&&this.emitter.emit("onNodeChange",{value:this.parent.value,preValue:this.parent.value,node:this.parent})}get material(){const e=this.parent;if(e instanceof $){const r=e.material;return Gn((r==null?void 0:r.value.props)||[]).find(n=>n.name===this.name)}else return null}export(e){const r=this.data,n=o=>{if(o instanceof at||o instanceof St||o instanceof $)return o.export(e);if(M(o))return o.map(a=>n(a));if(B(o)){const a={};return Object.keys(o||{}).forEach(s=>{a[s]=n(o[s])}),a}return o};return n(r)}}const hf=t=>{if(typeof t=="string")return!0;ar({data:t,dataStruct:Ct,throwError:!0})},Vn=(t,e,r=new pt([]))=>{var n;if(typeof t=="string")return t;const o={...t,id:(n=t.id)!=null?n:et(),children:[],props:{},configure:xn(t.configure||{},{propsSetter:{},advanceSetter:{}})},a=Object.keys(t.props||{});return a.length&&a.forEach(s=>{var i;const c=(i=t.props)==null?void 0:i[s];if(c instanceof at){o.props[s]=c;return}o.props[s]=new at(s,c||"",{parent:e,materials:r})}),t.children&&(Array.isArray(t.children)?o.children=t.children.map(s=>{if(s instanceof $)return s;if(B(s)){const i=s;return new $(i,{parent:e,materials:r})}else return s}):(t.children instanceof $&&(o.children=[t.children]),o.children=[new $(t.children,{parent:e,materials:r})])),o};class ${constructor(e,r){b(this,"nodeType","NODE"),b(this,"rawData"),b(this,"data"),b(this,"emitter",Jt),b(this,"parent"),b(this,"materialsModel"),b(this,"listenerHandle"),b(this,"onChangeCbQueue"),this.rawData=JSON.parse(JSON.stringify(e)),hf(e);const n=(r==null?void 0:r.materials)||new pt([]);this.parent=(r==null?void 0:r.parent)||null,this.materialsModel=n,this.data=Vn(e,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener()}registerListener(){const e=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",e),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",e)})}onChange(e){return this.onChangeCbQueue.push(e),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==e)}}destroy(){this.listenerHandle.forEach(e=>e())}get id(){return this.data.id}get value(){return this.data}clone(e){const r={...this.export("design"),id:e||et()};return new $(r)}updateValue(e){const r=this.data,n={...this.data,...e};this.data=Vn(n,this),this.emitter.emit("onNodeChange",{value:n,preValue:r,node:this})}contains(e){return fr(this,e)}get props(){return this.data.props}get material(){const e=this.materialsModel;return e==null?void 0:e.findByComponentName(this.data.componentName)}getPlainProps(){const e=this.data,r={};return Object.keys(e.props||{}).forEach(n=>{r[n]=e.props[n].export("design")}),r}export(e){var r;const n=this.data;if(typeof n=="string")return n;const o={};Object.keys(n.props||{}).forEach(l=>{o[l]=n.props[l].export(e)});const a=(r=n.children)==null?void 0:r.map(l=>l instanceof $?l.export(e):l),s=n.configure||{},i=s.propsSetter||{},c={};Object.keys(i).forEach(l=>{const d=Yr(i,l,!1);d&&(c[l]=d)}),s.propsSetter=c,this.material&&this.materialsModel.usedMaterials.push(this.material);let u={...n,configure:s,props:o,children:a};return e==="design"&&delete u.id,u=lr(u),u}}const Hn=(t,e,r)=>{const n={...t,id:et(),props:{},componentName:wt.ROOT_CONTAINER,children:[],configure:xn(t.configure||{},{propsSetter:{},advanceSetter:{}})};let o=[];M(t.children)?o=t.children.map(s=>s instanceof $?s:B(s)?new $(s,{parent:e,materials:r}):s):t.children instanceof $?o.push(t.children):t.children&&B(t.children)&&o.push(new $(t.children,{parent:e,materials:r}));const a=Object.keys(t.props||{});return a.length&&a.forEach(s=>{var i;const c=(i=t.props)==null?void 0:i[s];c instanceof at?n.props[s]=c:n.props[s]=new at(s,c||"",{parent:e,materials:r})}),n.children=o,n};class cr{constructor(e,{parent:r,materials:n}){b(this,"rawData"),b(this,"data"),b(this,"nodeType",wt.ROOT_CONTAINER),b(this,"emitter",Jt),b(this,"materialsModel"),b(this,"listenerHandle"),b(this,"onChangeCbQueue"),b(this,"parent"),this.materialsModel=n,this.rawData=JSON.parse(JSON.stringify(e)),this.data=Hn(e,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener(),this.parent=r}registerListener(){const e=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",e),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",e)})}onChange(e){return this.onChangeCbQueue.push(e),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==e)}}get id(){return this.data.id}get value(){return this.data}get props(){return this.data.props}get material(){const e=this.materialsModel;return e==null?void 0:e.findByComponentName(this.data.componentName)}updateValue(e){const r=this.data,n={...this.data,...e};this.data=Hn(n,this,this.materialsModel),this.emitter.emit("onNodeChange",{value:this.data,preValue:r,node:this})}contains(e){return fr(this,e)}export(e=tr.SAVE){var r;const n=this.data,o={};Object.keys(n.props||{}).forEach(c=>{o[c]=n.props[c].export(e)});const a=((r=n.children)==null?void 0:r.map(c=>{var u;return(u=c==null?void 0:c.export)==null?void 0:u.call(c,e)}))||[],s={...n,props:o,children:a.filter(c=>c)};let i=Rn(s,["id"]);return i=lr(i),i}}const le=t=>(t==null?void 0:t.type)===V.EXPRESSION,vf=t=>(t==null?void 0:t.type)==V.FUNCTION,et=()=>Math.random().toString(32).slice(3,9),gf=t=>(t==null?void 0:t.nodeType)==="NODE",ur=t=>(t==null?void 0:t.nodeType)==="PROP",mf=t=>(t==null?void 0:t.nodeType)==="SLOT",lr=t=>Dl(t,e=>B(e)?!Object.keys(e).length:M(e)?!e.length:!e);function fr(t,e){const r=[t];for(;r.length;){const n=r.shift();if((n==null?void 0:n.id)===e)return n;const o=(n==null?void 0:n.props)||{},a=i=>{if(i instanceof $){r.push(i);return}if(i instanceof St&&a(i.value.value),i instanceof at){a(i.value);return}if(B(i)){const c=i;Object.keys(c).map(u=>{a(c[u])});return}if(M(i)){i.forEach(c=>{a(c)});return}};a(o);const s=(n==null?void 0:n.value.children.filter(i=>i instanceof $))||[];r.push(...s)}return null}const yf=t=>{const e=On(t),r=e.snippets;return delete e.snippets,e.snippets=r.map(n=>({...e,...n,id:n.id||`${t.componentName}-${et()}`,title:n.title||t.title,category:n.category||t.category,tags:[...n.tags||[],...t.tags||[]],groupName:n.groupName||t.groupName,snapshot:n.snapshot||t.icon,snapshotText:n.snapshotText,schema:{...n.schema,componentName:n.schema.componentName||t.componentName}})),e};class bf{constructor(e){b(this,"rawData"),b(this,"data"),this.rawData=e,this.data=yf(e)}get value(){return this.data}get rawValue(){return this.rawData}get componentName(){return this.data.componentName}get snippets(){return this.data.snippets}getSnippetById(e){return this.data.snippets.find(r=>r.id===e)}}const _f=t=>{if(!M(t))throw new Error("Materials must be a array");return t.map(e=>new bf(e))},jf=t=>{t==null||t.forEach(e=>{ar({data:e,dataStruct:cf,throwError:!0})})};class pt{constructor(e){b(this,"rawData"),b(this,"data"),b(this,"usedMaterials",[]),this.rawData=e,jf(e),this.data=_f(e)}findByComponentName(e){return this.data.find(r=>r.componentName===e)}findSnippetById(e){const r=[...this.data];let n=null;for(;!n&&r.length;){const o=r.pop();n=o==null?void 0:o.getSnippetById(e)}return n}getAllSnippets(){let e=this.data.reduce((a,s)=>(a.push(...s.snippets),a),[]);const r=["default"],n={default:[]};e=e.sort((a,s)=>(a.category||"")>(s.category||"")?1:-1),e.forEach(a=>{const s=a.groupName||"default";r.includes(s)||(r.push(s),n[s]=[]),n[s].push(a)});const o=[];return r.forEach(a=>{const s=["default"],i={default:[]},c=n[a];if(c.length!==0){c.forEach(d=>{const f=d.category||"default";s.includes(f)||(s.push(f),i[f]=[]),i[f].push(d)});const u=[];s.forEach(d=>{i[d].length&&u.push({name:d,list:i[d]})});const l={name:a,list:u};o.push(l)}}),o}get value(){return this.data}get rawValue(){return this.rawData}}const Of=w({version:p(),name:p(),css:v(p()),renderType:v(L([U("COMPONENT"),U("PAGE")])),methods:v(P(lf)),componentsMeta:P(Xe(w({componentName:p()}),Ze)),thirdLibs:v(Kl),componentsTree:ff,assets:v(P(F()))}),Wn=t=>(ar({data:t,dataStruct:Of,throwError:!0}),t),Jn=(t,e,r)=>({...t,componentsTree:new cr(t.componentsTree,{parent:e,materials:r})});class fe{constructor(e,r){b(this,"nodeType","PAGE"),b(this,"rawData"),b(this,"emitter",Jt),b(this,"data"),b(this,"parent"),b(this,"materialsModel"),b(this,"assetPackagesList"),Wn(e),this.assetPackagesList=(r==null?void 0:r.assetPackagesList)||[],this.rawData=JSON.parse(JSON.stringify(e)),this.materialsModel=new pt((r==null?void 0:r.materials)||[]),this.data=Jn(e,this,this.materialsModel)}updatePage(e){const r=this.data;this.rawData=JSON.parse(JSON.stringify(e)),this.data=Jn(e,this,this.materialsModel),this.emitter.emit("onPageChange",{value:this.data,preValue:r,node:this})}get value(){return this.data}getNode(e){const r=this.data.componentsTree;return fr(r,e)}addNode(e,r,n="AFTER"){var o,a,s;if(n==="AFTER"||n==="BEFORE"){const i=r.parent;if(i===null&&r instanceof cr)return console.warn("Not found parent node"),!1;if(i instanceof at)return console.warn("CProp can not add node"),!1;if(i instanceof St){const u=i.value.value,l=(o=u.findIndex(d=>d===r))!=null?o:-1;return l>=0?(n==="BEFORE"?u.splice(l,0,e):u.splice(l+1,0,e),e.parent=i,(a=i.parent)==null||a.updateValue(),!0):!1}if(i instanceof fe)return!1;const c=(s=i==null?void 0:i.value.children.findIndex(u=>u===r))!=null?s:-1;return c>=0?(n==="BEFORE"?i==null||i.value.children.splice(c,0,e):i==null||i.value.children.splice(c+1,0,e),e.parent=i,i==null||i.updateValue(),!0):(console.warn("Not found target node"),!1)}if(n==="CHILD_START")return r.value.children.unshift(e),e.parent=r,r.updateValue(),!0;if(n==="CHILD_END")return r.value.children.push(e),e.parent=r,r.updateValue(),!0;if(B(n)){const i=n;if(i.type==="CHILD"){const c=i.pos,u=i.index||0;return c==="BEFORE"?r==null||r.value.children.splice(u,0,e):r==null||r.value.children.splice(u+1,0,e),e.parent=r,r.updateValue(),!0}else console.warn("Can not parse pos obj")}return!1}createNode(e){return delete e.id,new $(e,{parent:null,materials:this.materialsModel})}addNodeById(e,r,n="AFTER"){const o=this.getNode(r);return o?this.addNode(e,o,n):(console.warn(`Not find a node by ${r}, pls check it`),!1)}copyNode(e){const r=e.export("design");r.id=et();const n=new $(r,{parent:e.parent,materials:this.materialsModel});return this.addNode(n,e,"AFTER"),n}copyNodeById(e){const r=this.getNode(e);return r&&r instanceof $?this.copyNode(r):!1}moveNode(e,r,n){this.deleteNode(e);let o=r;return["AFTER","BEFORE"].includes(n)&&(o=r.parent),e.parent=o,this.addNode(e,r,n)}moveNodeById(e,r,n){const o=this.getNode(e),a=this.getNode(r);return o&&a&&o instanceof $&&a instanceof $?this.moveNode(o,a,n):!1}deleteNode(e){var r;const n=e.parent;if(!n)throw new Error("parent node is null or undefined, pls check it");if(n instanceof St){const o=n.value.value,a=o.findIndex(i=>i===e),s=o[a];return o.splice(a,1),(r=n.parent)==null||r.updateValue(),s}if(n instanceof $||n instanceof cr){const o=n.value.children,a=o.findIndex(i=>i===e),s=o[a];return o.splice(a,1),n.updateValue(),s}}deleteNodeById(e){const r=this.getNode(e);if(r)return this.deleteNode(r)}export(e=tr.SAVE){var r;const n=this.data.componentsTree.export(e),o=this.assetPackagesList,a=[],s=this.materialsModel.usedMaterials.map(c=>{const u=o.find(l=>{var d;return l.package===((d=c.value.npm)==null?void 0:d.package)});return u&&a.push(u),{componentName:c.componentName,...On(c.value.npm||{})}}).filter(c=>{if(c.componentName&&c.package&&c.version)return!0});this.materialsModel.usedMaterials=[];let i={...this.data,componentsTree:lr(n),componentsMeta:s,thirdLibs:this.data.thirdLibs,assets:[]};return(r=this.data.thirdLibs)==null||r.forEach(c=>{const u=o.find(l=>{l.package,l.package});u&&a.push(u)}),i.assets=Gl(a,c=>c.package),i=Rn(i,["id"]),JSON.parse(JSON.stringify(i))}}wt.ROOT_CONTAINER;var Cf=typeof global=="object"&&global&&global.Object===Object&&global;const qn=Cf;var wf=typeof self=="object"&&self&&self.Object===Object&&self,Sf=qn||wf||Function("return this")();const Et=Sf;var Ef=Et.Symbol;const Tt=Ef;var Yn=Object.prototype,Tf=Yn.hasOwnProperty,Nf=Yn.toString,qt=Tt?Tt.toStringTag:void 0;function Af(t){var e=Tf.call(t,qt),r=t[qt];try{t[qt]=void 0;var n=!0}catch{}var o=Nf.call(t);return n&&(e?t[qt]=r:delete t[qt]),o}var $f=Object.prototype,Mf=$f.toString;function Pf(t){return Mf.call(t)}var xf="[object Null]",Rf="[object Undefined]",Qn=Tt?Tt.toStringTag:void 0;function Yt(t){return t==null?t===void 0?Rf:xf:Qn&&Qn in Object(t)?Af(t):Pf(t)}function Nt(t){return t!=null&&typeof t=="object"}var If="[object Symbol]";function Df(t){return typeof t=="symbol"||Nt(t)&&Yt(t)==If}function Ff(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var Lf=Array.isArray;const At=Lf;var Bf=1/0,Xn=Tt?Tt.prototype:void 0,Kn=Xn?Xn.toString:void 0;function Zn(t){if(typeof t=="string")return t;if(At(t))return Ff(t,Zn)+"";if(Df(t))return Kn?Kn.call(t):"";var e=t+"";return e=="0"&&1/t==-Bf?"-0":e}function ht(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function to(t){return t}var Uf="[object AsyncFunction]",kf="[object Function]",zf="[object GeneratorFunction]",Gf="[object Proxy]";function dr(t){if(!ht(t))return!1;var e=Yt(t);return e==kf||e==zf||e==Uf||e==Gf}var Vf=Et["__core-js_shared__"];const pr=Vf;var eo=function(){var t=/[^.]+$/.exec(pr&&pr.keys&&pr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Hf(t){return!!eo&&eo in t}var Wf=Function.prototype,Jf=Wf.toString;function qf(t){if(t!=null){try{return Jf.call(t)}catch{}try{return t+""}catch{}}return""}var Yf=/[\\^$.*+?()[\]{}|]/g,Qf=/^\[object .+?Constructor\]$/,Xf=Function.prototype,Kf=Object.prototype,Zf=Xf.toString,td=Kf.hasOwnProperty,ed=RegExp("^"+Zf.call(td).replace(Yf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rd(t){if(!ht(t)||Hf(t))return!1;var e=dr(t)?ed:Qf;return e.test(qf(t))}function nd(t,e){return t==null?void 0:t[e]}function hr(t,e){var r=nd(t,e);return rd(r)?r:void 0}var ro=Object.create,od=function(){function t(){}return function(e){if(!ht(e))return{};if(ro)return ro(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const ad=od;function id(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function sd(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var cd=800,ud=16,ld=Date.now;function fd(t){var e=0,r=0;return function(){var n=ld(),o=ud-(n-r);if(r=n,o>0){if(++e>=cd)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function dd(t){return function(){return t}}var pd=function(){try{var t=hr(Object,"defineProperty");return t({},"",{}),t}catch{}}();const de=pd;var hd=de?function(t,e){return de(t,"toString",{configurable:!0,enumerable:!1,value:dd(e),writable:!0})}:to,vd=fd(hd);const gd=vd;var md=9007199254740991,yd=/^(?:0|[1-9]\d*)$/;function no(t,e){var r=typeof t;return e=e==null?md:e,!!e&&(r=="number"||r!="symbol"&&yd.test(t))&&t>-1&&t%1==0&&t<e}function vr(t,e,r){e=="__proto__"&&de?de(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function pe(t,e){return t===e||t!==t&&e!==e}var bd=Object.prototype,_d=bd.hasOwnProperty;function jd(t,e,r){var n=t[e];(!(_d.call(t,e)&&pe(n,r))||r===void 0&&!(e in t))&&vr(t,e,r)}function Od(t,e,r,n){var o=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var i=e[a],c=n?n(r[i],t[i],i,r,t):void 0;c===void 0&&(c=t[i]),o?vr(r,i,c):jd(r,i,c)}return r}var oo=Math.max;function Cd(t,e,r){return e=oo(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=oo(n.length-e,0),s=Array(a);++o<a;)s[o]=n[e+o];o=-1;for(var i=Array(e+1);++o<e;)i[o]=n[o];return i[e]=r(s),id(t,this,i)}}function wd(t,e){return gd(Cd(t,e,to),t+"")}var Sd=9007199254740991;function ao(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Sd}function gr(t){return t!=null&&ao(t.length)&&!dr(t)}function Ed(t,e,r){if(!ht(r))return!1;var n=typeof e;return(n=="number"?gr(r)&&no(e,r.length):n=="string"&&e in r)?pe(r[e],t):!1}function Td(t){return wd(function(e,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(o--,a):void 0,s&&Ed(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var i=r[n];i&&t(e,i,n,a)}return e})}var Nd=Object.prototype;function io(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Nd;return t===r}function Ad(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var $d="[object Arguments]";function so(t){return Nt(t)&&Yt(t)==$d}var co=Object.prototype,Md=co.hasOwnProperty,Pd=co.propertyIsEnumerable,xd=so(function(){return arguments}())?so:function(t){return Nt(t)&&Md.call(t,"callee")&&!Pd.call(t,"callee")};const mr=xd;function Rd(){return!1}var uo=typeof y=="object"&&y&&!y.nodeType&&y,lo=uo&&typeof module=="object"&&module&&!module.nodeType&&module,Id=lo&&lo.exports===uo,fo=Id?Et.Buffer:void 0,Dd=fo?fo.isBuffer:void 0,Fd=Dd||Rd;const po=Fd;var Ld="[object Arguments]",Bd="[object Array]",Ud="[object Boolean]",kd="[object Date]",zd="[object Error]",Gd="[object Function]",Vd="[object Map]",Hd="[object Number]",Wd="[object Object]",Jd="[object RegExp]",qd="[object Set]",Yd="[object String]",Qd="[object WeakMap]",Xd="[object ArrayBuffer]",Kd="[object DataView]",Zd="[object Float32Array]",tp="[object Float64Array]",ep="[object Int8Array]",rp="[object Int16Array]",np="[object Int32Array]",op="[object Uint8Array]",ap="[object Uint8ClampedArray]",ip="[object Uint16Array]",sp="[object Uint32Array]",A={};A[Zd]=A[tp]=A[ep]=A[rp]=A[np]=A[op]=A[ap]=A[ip]=A[sp]=!0,A[Ld]=A[Bd]=A[Xd]=A[Ud]=A[Kd]=A[kd]=A[zd]=A[Gd]=A[Vd]=A[Hd]=A[Wd]=A[Jd]=A[qd]=A[Yd]=A[Qd]=!1;function cp(t){return Nt(t)&&ao(t.length)&&!!A[Yt(t)]}function up(t){return function(e){return t(e)}}var ho=typeof y=="object"&&y&&!y.nodeType&&y,Qt=ho&&typeof module=="object"&&module&&!module.nodeType&&module,lp=Qt&&Qt.exports===ho,yr=lp&&qn.process,fp=function(){try{var t=Qt&&Qt.require&&Qt.require("util").types;return t||yr&&yr.binding&&yr.binding("util")}catch{}}();const vo=fp;var go=vo&&vo.isTypedArray,dp=go?up(go):cp;const mo=dp;var pp=Object.prototype,hp=pp.hasOwnProperty;function vp(t,e){var r=At(t),n=!r&&mr(t),o=!r&&!n&&po(t),a=!r&&!n&&!o&&mo(t),s=r||n||o||a,i=s?Ad(t.length,String):[],c=i.length;for(var u in t)(e||hp.call(t,u))&&!(s&&(u=="length"||o&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||no(u,c)))&&i.push(u);return i}function gp(t,e){return function(r){return t(e(r))}}function mp(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var yp=Object.prototype,bp=yp.hasOwnProperty;function _p(t){if(!ht(t))return mp(t);var e=io(t),r=[];for(var n in t)n=="constructor"&&(e||!bp.call(t,n))||r.push(n);return r}function yo(t){return gr(t)?vp(t,!0):_p(t)}var jp=hr(Object,"create");const Xt=jp;function Op(){this.__data__=Xt?Xt(null):{},this.size=0}function Cp(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var wp="__lodash_hash_undefined__",Sp=Object.prototype,Ep=Sp.hasOwnProperty;function Tp(t){var e=this.__data__;if(Xt){var r=e[t];return r===wp?void 0:r}return Ep.call(e,t)?e[t]:void 0}var Np=Object.prototype,Ap=Np.hasOwnProperty;function $p(t){var e=this.__data__;return Xt?e[t]!==void 0:Ap.call(e,t)}var Mp="__lodash_hash_undefined__";function Pp(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Xt&&e===void 0?Mp:e,this}function vt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}vt.prototype.clear=Op,vt.prototype.delete=Cp,vt.prototype.get=Tp,vt.prototype.has=$p,vt.prototype.set=Pp;function xp(){this.__data__=[],this.size=0}function he(t,e){for(var r=t.length;r--;)if(pe(t[r][0],e))return r;return-1}var Rp=Array.prototype,Ip=Rp.splice;function Dp(t){var e=this.__data__,r=he(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ip.call(e,r,1),--this.size,!0}function Fp(t){var e=this.__data__,r=he(e,t);return r<0?void 0:e[r][1]}function Lp(t){return he(this.__data__,t)>-1}function Bp(t,e){var r=this.__data__,n=he(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function rt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}rt.prototype.clear=xp,rt.prototype.delete=Dp,rt.prototype.get=Fp,rt.prototype.has=Lp,rt.prototype.set=Bp;var Up=hr(Et,"Map");const bo=Up;function kp(){this.size=0,this.__data__={hash:new vt,map:new(bo||rt),string:new vt}}function zp(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function ve(t,e){var r=t.__data__;return zp(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Gp(t){var e=ve(this,t).delete(t);return this.size-=e?1:0,e}function Vp(t){return ve(this,t).get(t)}function Hp(t){return ve(this,t).has(t)}function Wp(t,e){var r=ve(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function $t(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}$t.prototype.clear=kp,$t.prototype.delete=Gp,$t.prototype.get=Vp,$t.prototype.has=Hp,$t.prototype.set=Wp;function _o(t){return t==null?"":Zn(t)}var Jp=gp(Object.getPrototypeOf,Object);const jo=Jp;var qp="[object Object]",Yp=Function.prototype,Qp=Object.prototype,Oo=Yp.toString,Xp=Qp.hasOwnProperty,Kp=Oo.call(Object);function Mt(t){if(!Nt(t)||Yt(t)!=qp)return!1;var e=jo(t);if(e===null)return!0;var r=Xp.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Oo.call(r)==Kp}function Zp(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a}function th(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Zp(t,e,r)}var eh="\\ud800-\\udfff",rh="\\u0300-\\u036f",nh="\\ufe20-\\ufe2f",oh="\\u20d0-\\u20ff",ah=rh+nh+oh,ih="\\ufe0e\\ufe0f",sh="\\u200d",ch=RegExp("["+sh+eh+ah+ih+"]");function Co(t){return ch.test(t)}function uh(t){return t.split("")}var wo="\\ud800-\\udfff",lh="\\u0300-\\u036f",fh="\\ufe20-\\ufe2f",dh="\\u20d0-\\u20ff",ph=lh+fh+dh,hh="\\ufe0e\\ufe0f",vh="["+wo+"]",br="["+ph+"]",_r="\\ud83c[\\udffb-\\udfff]",gh="(?:"+br+"|"+_r+")",So="[^"+wo+"]",Eo="(?:\\ud83c[\\udde6-\\uddff]){2}",To="[\\ud800-\\udbff][\\udc00-\\udfff]",mh="\\u200d",No=gh+"?",Ao="["+hh+"]?",yh="(?:"+mh+"(?:"+[So,Eo,To].join("|")+")"+Ao+No+")*",bh=Ao+No+yh,_h="(?:"+[So+br+"?",br,Eo,To,vh].join("|")+")",jh=RegExp(_r+"(?="+_r+")|"+_h+bh,"g");function Oh(t){return t.match(jh)||[]}function Ch(t){return Co(t)?Oh(t):uh(t)}function wh(t){return function(e){e=_o(e);var r=Co(e)?Ch(e):void 0,n=r?r[0]:e.charAt(0),o=r?th(r,1).join(""):e.slice(1);return n[t]()+o}}var Sh=wh("toUpperCase");const Eh=Sh;function Th(t){return Eh(_o(t).toLowerCase())}function Nh(){this.__data__=new rt,this.size=0}function Ah(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function $h(t){return this.__data__.get(t)}function Mh(t){return this.__data__.has(t)}var Ph=200;function xh(t,e){var r=this.__data__;if(r instanceof rt){var n=r.__data__;if(!bo||n.length<Ph-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new $t(n)}return r.set(t,e),this.size=r.size,this}function Pt(t){var e=this.__data__=new rt(t);this.size=e.size}Pt.prototype.clear=Nh,Pt.prototype.delete=Ah,Pt.prototype.get=$h,Pt.prototype.has=Mh,Pt.prototype.set=xh;var $o=typeof y=="object"&&y&&!y.nodeType&&y,Mo=$o&&typeof module=="object"&&module&&!module.nodeType&&module,Rh=Mo&&Mo.exports===$o,Po=Rh?Et.Buffer:void 0,xo=Po?Po.allocUnsafe:void 0;function Ih(t,e){if(e)return t.slice();var r=t.length,n=xo?xo(r):new t.constructor(r);return t.copy(n),n}var Dh=Et.Uint8Array;const Ro=Dh;function Fh(t){var e=new t.constructor(t.byteLength);return new Ro(e).set(new Ro(t)),e}function Lh(t,e){var r=e?Fh(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Bh(t){return typeof t.constructor=="function"&&!io(t)?ad(jo(t)):{}}function Uh(t){return function(e,r,n){for(var o=-1,a=Object(e),s=n(e),i=s.length;i--;){var c=s[t?i:++o];if(r(a[c],c,a)===!1)break}return e}}var kh=Uh();const zh=kh;function jr(t,e,r){(r!==void 0&&!pe(t[e],r)||r===void 0&&!(e in t))&&vr(t,e,r)}function Gh(t){return Nt(t)&&gr(t)}function Or(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function Vh(t){return Od(t,yo(t))}function Hh(t,e,r,n,o,a,s){var i=Or(t,r),c=Or(e,r),u=s.get(c);if(u){jr(t,r,u);return}var l=a?a(i,c,r+"",t,e,s):void 0,d=l===void 0;if(d){var f=At(c),h=!f&&po(c),g=!f&&!h&&mo(c);l=c,f||h||g?At(i)?l=i:Gh(i)?l=sd(i):h?(d=!1,l=Ih(c,!0)):g?(d=!1,l=Lh(c,!0)):l=[]:Mt(c)||mr(c)?(l=i,mr(i)?l=Vh(i):(!ht(i)||dr(i))&&(l=Bh(c))):d=!1}d&&(s.set(c,l),o(l,c,n,a,s),s.delete(c)),jr(t,r,l)}function Io(t,e,r,n,o){t!==e&&zh(e,function(a,s){if(o||(o=new Pt),ht(a))Hh(t,e,s,r,Io,n,o);else{var i=n?n(Or(t,s),a,s+"",t,e,o):void 0;i===void 0&&(i=a),jr(t,s,i)}},yo)}var Wh=Td(function(t,e,r){Io(t,e,r)});const Jh=Wh;function qh(t){const e=t.prototype;return!!(e&&e.isReactComponent)}function Yh(t){var n,o;const r=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.forward_ref"):60112;return(t==null?void 0:t.$$typeof)===r||((n=t==null?void 0:t.prototype)==null?void 0:n.isReactComponent)||((o=t==null?void 0:t.prototype)==null?void 0:o.setState)||t._forwardRef}function Qh(t){class e extends I.Component{render(){return I.createElement(t,this.props)}}return e.displayName=t.displayName,e}const ge=(t,e)=>{const r=n=>{const a=`
    ${Object.keys(e).map(s=>`const ${s} = $$context['${s}'];`).join(`
`)}
    return ${n};
    `;return new Function("$$context",a)(e)};try{return r(t)}catch(n){console.warn(n);const o=`[${t}] expression run failed`;return console.warn(o),null}},Xh=(t,e,r)=>function(...o){try{const a=`
        var f = ${t};
        var args = Array.from(arguments);
        var __$$storeManager__ = args.pop();
        var $$context = args.pop();
        $$context.stateManager = __$$storeManager__.getStateSnapshot();
        return f.apply(f, args)
      `;new Function(a)(...o,e,r)}catch(a){console.warn(a)}},Do=(t,e)=>{const r={};return e.forEach((n,o)=>{r[n]=t[o]}),r},Fo=t=>{const e={};return Object.keys(t).forEach(r=>{let n=r.replace("-webkit","Webkit");n=n.replace("-ms","ms"),n=n.replace("-moz","Moz"),n=n.replace("-o","O");let o=n.split("-");o.length>=2&&(o=o.map((a,s)=>s!==0?Th(a):a)),e[o.join("")]=t[r]}),e},me="DYNAMIC",Kh=["$$context","$$nodeModel"],Lo=t=>{let e;const r=new Set,n=(c,u)=>{const l=typeof c=="function"?c(e):c;if(!Object.is(l,e)){const d=e;e=(u!=null?u:typeof l!="object")?l:Object.assign({},e,l),r.forEach(f=>f(e,d))}},o=()=>e,i={setState:n,getState:o,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>r.clear()};return e=t(n,o,i),i},Zh=t=>t?Lo(t):Lo;class tv{constructor(){_(this,"storeMap",new Map)}addStore(e,r){const n=Zh(r);return this.storeMap.set(e,n),n.name=e,n}setStore(e,r){this.storeMap.set(e,r)}removeStore(e){this.storeMap.delete(e)}getStore(e){return this.storeMap.get(e)}connect(e,r){const n=this.storeMap.get(e);n?n.subscribe(r):console.warn("store not exits")}getStateSnapshot(){const e={};return this.storeMap.forEach((r,n)=>{e[n]={state:r.getState(),updateState:o=>{r.setState(o)}}}),e}destroy(){this.storeMap.forEach(e=>{e.destroy()}),this.storeMap=new Map}}class Bo{constructor(){_(this,"renderMode","normal");_(this,"components",{});_(this,"storeManager",new tv);_(this,"runtimeComponentCache",new Map);_(this,"onGetRef");_(this,"onGetComponent");_(this,"onComponentMount");_(this,"onComponentDestroy");_(this,"processNodeConfigHook")}getComponent(e){var o;const r=e.value.componentName;let n=this.components[r]||(()=>`Component [${r}] not found`);return Yh(n)||(n=Qh(n),this.components[r]=n),this.onGetComponent&&(n=(o=this.onGetComponent)==null?void 0:o.call(this,n,e)),n}getContext(e={},r){let n=e;return r&&(n={...e},n.__proto__=r||null),n}pageRender(e,{components:r,onGetRef:n,$$context:o={},onGetComponent:a,onComponentMount:s,onComponentDestroy:i,renderMode:c,processNodeConfigHook:u}){this.renderMode=c,this.components=r,this.onGetRef=n,this.onGetComponent=a,this.onComponentMount=s,this.onComponentDestroy=i,this.processNodeConfigHook=u;const l=e.value.componentsTree,d=this.getComponent(l),f=this.convertModelToComponent(d,e.value.componentsTree),h={},g=l.props;return Object.keys(g).forEach(m=>{h[m]=g[m].value}),h.$$context=o,this.render(f,h)}transformProps(e={},{$$context:r}){const n=e,o=s=>{if(Array.isArray(s))return s.map(i=>o(i));if(ur(s))return o(s.value);if(mf(s)){const i=s.value,c=i.value;if(!c)return console.warn("slot value is null, this maybe cause some error, pls check it",e),()=>{};const u=l=>{const d=`${l.id}-${me}`;if(this.runtimeComponentCache.get(l.id))return{key:d,component:this.runtimeComponentCache.get(l.id)};const f=this.getComponent(l),h=this.convertModelToComponent(f,l),g=i.params||[];return{component:(...O)=>{const S=Do(O,g),x=this.getContext({params:S},r);return this.render(h,{$$context:x,key:d})},key:d}};if(Array.isArray(c)){const l=c==null?void 0:c.map(d=>u(d));return(...d)=>l.map(f=>qh(f.component)?C.default.createElement(f.component,{$$context:r,key:f.key}):f.component(...d))}else return u(c).component}else{if(le(s))return ge(s.value,r||{});if(vf(s))return Xh(s.value,r,this.storeManager);if(Mt(s)){let i=s;ur(s)&&(i=s.value);const c=i,u={};return Object.keys(i).forEach(l=>{u[l]=o(c[l])}),u}else return s}},a={};return Object.keys(n).forEach(s=>{const i=n[s];a[s]=o(i)}),a}collectSpecialProps(e={},r){const n=[],o=(a,s)=>{let i=s;ur(s)&&(i=s.value),r(i)?n.push({keyPath:a,val:i}):At(i)?i.forEach((c,u)=>{o([...a,String(u)],c)}):Mt(i)&&Object.keys(i).forEach(c=>{o([...a,c],i[c])})};return o(["$root"],e),n}convertModelToComponent(e,r){const n=this;class o extends C.default.Component{constructor(i){super(i);_(this,"_CONDITION",!0);_(this,"_DESIGN_BOX",!1);_(this,"_NODE_MODEL",r);_(this,"_NODE_ID",r.id);_(this,"UNIQUE_ID",`${r.id}_${et()}`);_(this,"targetComponentRef");_(this,"listenerHandle",[]);_(this,"storeState");_(this,"updateState",i=>{this.storeState.setState(i),this.forceUpdate()});this.targetComponentRef=C.default.createRef(),this.state=r.value.state||{};const c=r.value.stateName||r.id,u=n.storeManager.getStore(c);u?(this.storeState=u,u.setState({...r.value.state||{}})):this.storeState=n.storeManager.addStore(c,()=>({...r.value.state||{}})),this.storeState.subscribe(l=>{this.setState({...l})}),this.connectStore()}connectStore(){const c=n.collectSpecialProps(r.props,u=>!!le(u)).map(u=>{const l=u.val,f=/\$\$context.stateManager\.(.+?)\./gim.exec(l.value);return f!=null&&f.length?f[1]:""}).filter(Boolean);c.length&&c.forEach(u=>{n.storeManager.getStore(u)||n.storeManager.addStore(u,()=>({})),n.storeManager.connect(u,()=>{this.forceUpdate()})})}componentDidMount(){var c;n.onGetRef&&n.onGetRef(this.targetComponentRef,r,this),(c=n.onComponentMount)==null||c.call(n,this,r);const i=()=>{n.storeManager.setStore(r.value.stateName||r.id,this.storeState),this.storeState.setState({...this.state,...r.value.state||{}}),this.forceUpdate()};r.onChange(i)}componentWillUnmount(){var i;(i=n.onComponentDestroy)==null||i.call(n,this,r)}render(){var R;const{$$context:i,...c}=this.props,u={key:r.id,...r.props,...c},l={state:this.state||{},updateState:this.updateState};r.value.componentName===wt.ROOT_CONTAINER&&(l.globalState=this.state,l.updateGlobalState=this.updateState),l.stateManager=n.storeManager.getStateSnapshot();const d=n.getContext(l,i),f=r.value.loop;let h=[];if(f&&f.open){this.targetComponentRef.current=[];let D=f.data||[];if(le(f.data)){const k=f.data;D=ge(k.value,d||{})}return h=D.map((...k)=>{const T=k[1],xt=[f.forName||"item",f.forIndex||"index"],it=Do(k,xt);let Kt="loopData";f.name&&(Kt=`${Kt}${f.name}`);const Cr=n.getContext({[Kt]:it},d),X=n.transformProps(u,{$$context:Cr});X.style&&(X.style=Fo(X.style));const{children:ye}=X;let wr=[];if(ye!==void 0)delete X.children,wr=Array.isArray(ye)?ye:[ye];else{const Rt=[];r.value.children.forEach((dv,pv)=>{const hv=n.buildComponent(dv,{$$context:Cr,idx:pv});Rt.push(hv)}),wr=Rt}if(X.key=`${X.key}-${T}`,le(f.key)){const Rt=f.key,Jo=ge(Rt.value,Cr||{});X.key+=`-${Jo}`}return X.ref=Rt=>{this.targetComponentRef.current=this.targetComponentRef.current||[],this.targetComponentRef.current[T]=Rt},n.render(e,X,...wr)}),h}const g=n.transformProps(u,{$$context:d}),{children:m}=g;let j=[];if(m!==void 0)delete g.children,j=Array.isArray(m)?m:[m];else{const D=[];r.value.children.forEach((T,xt)=>{const it=n.buildComponent(T,{$$context:d,idx:xt});D.push(it)}),j=D}g.ref=this.targetComponentRef,g.style&&(g.style=Fo(g.style));let O=(R=r.value.condition)!=null?R:!0;typeof O!="boolean"&&(O=ge(O.value,d||{}));let S={condition:O,props:g};n.processNodeConfigHook&&(S=n.processNodeConfigHook(S,r));const x=n.render(e,S.props,...j);return this._CONDITION=S.condition,S.condition?x:C.default.createElement("div",{style:{display:"none"}},x)}}return _(o,"__CP_TYPE__",me),o.displayName=`${r.value.componentName}Dynamic`,o}buildComponent(e,{$$context:r={}}){const n=this.runtimeComponentCache;return typeof e=="string"?this.render(e):gf(e)?(({currentNode:a})=>{const s=a.value.id;let i=null;if(n.get(s))i=n.get(s);else{const l=this.getComponent(a);i=this.convertModelToComponent(l,a)}!n.get(s)&&this.renderMode!=="design"&&n.set(s,i);const c=`${s}-${me}`,u={$$context:r,$$nodeModel:e,key:c};return this.render(i,u)})({currentNode:e}):void 0}render(e,r={},...n){return typeof e=="string"||typeof e=="number"?String(e):(Kh.forEach(a=>{a in r&&e.__CP_TYPE__!==me&&delete r[a]}),C.default.createElement(e,r,...n))}clear(){this.runtimeComponentCache.clear(),this.storeManager.destroy()}}const ev=Er(new Bo),rv=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],nt=t=>{const e={};return t.forEach(r=>{e[r.key]=r.value}),e},nv=[...rv,...Zl].reduce((t,e)=>(t[e]=({children:r,$$attributes:n=[],...o})=>{let a=r;return Array.isArray(r)||(a=[r]),C.default.createElement(e,{...o,...nt(n)},...a)},t),{}),ov={RootContainer:({children:t})=>t,...nv,CContainer:({children:t,$$attributes:e=[],afterMount:r,beforeDestroy:n,...o})=>{let a=t;return Array.isArray(t)||(a=[t]),I.useEffect(()=>(r==null||r(o),()=>{n==null||n(o)}),[]),C.default.createElement("div",{...o,...nt(e)},...a)},CVideo:({children:t,$$attributes:e=[],...r})=>{let n=t;return Array.isArray(t)||(n=[t]),C.default.createElement("video",{...r,...nt(e)},...n)},CAudio:({children:t,$$attributes:e=[],...r})=>{let n=t;return Array.isArray(t)||(n=[t]),C.default.createElement("video",{...r,...nt(e)},...n)},CBlock:({children:t,width:e,height:r,$$attributes:n=[],...o})=>{let a=t;Array.isArray(t)||(a=[t]),a=a.filter(u=>u!==void 0);const{style:s={},...i}=nt(n),c={height:r,width:e,...s,...o.style||{}};return C.default.createElement("div",{...o,...i,style:c},...a)},CImage:({children:t,$$attributes:e=[],...r})=>{let n=t;return Array.isArray(t)||(n=[t]),C.default.createElement("img",{...r,...nt(e)},...n)},CText:({children:t,$$attributes:e=[],content:r,...n})=>C.default.createElement("span",{...n,...nt(e)},r),CCanvas:({children:t,$$attributes:e=[],...r})=>{let n=t;return Array.isArray(t)||(n=[t]),C.default.createElement("canvas",{...r,...nt(e)},...n)},CNativeTag:({children:t,$$attributes:e=[],htmlTag:r="div",...n})=>{let o=t;return Array.isArray(t)||(o=[t]),C.default.createElement(r,{...n,...nt(e)},...o)}};class av{constructor(){_(this,"refMap",new Map)}get(e){return this.refMap.get(e)}add(e,r){this.refMap.set(e,r)}remove(e){this.refMap.delete(e)}destroy(){this.refMap.clear()}}class Uo extends C.default.Component{constructor(r){super(r);_(this,"refManager");_(this,"dynamicComponentInstanceMap",new Map);_(this,"onGetRef",(r,n,o)=>{var a,s;(s=(a=this.props).onGetRef)==null||s.call(a,r,n,o),this.dynamicComponentInstanceMap.set(n.id,o),this.refManager.add(n.value.refId||n.id,r)});_(this,"rerender",r=>{var n;if(this.props.adapter.clear(),(r==null?void 0:r.nodeType)==="PAGE"&&r)this.setState({pageModel:r});else if(Mt(r)&&Wn(r)){const o=r;this.setState({pageModel:new fe(o,{materials:this.state.pageModel.materialsModel.rawValue})})}(n=this.state.pageModel)==null||n.emitter.emit("onNodeChange",{value:r,preValue:this.state.pageModel,node:this.state.pageModel})});this.state={pageModel:r.pageModel||new fe(r.page)},this.refManager=new av}getPageModel(){return this.state.pageModel}componentDidMount(){const{render:r}=this.props;r&&(r.ref.current=this)}componentWillUnmount(){this.refManager.destroy()}render(){const{props:r}=this,{adapter:n,onGetComponent:o,onComponentDestroy:a,onComponentMount:s}=r,{pageModel:i}=this.state;if(!i)return console.warn("pageModel is null"),null;const c={...ov,...r.components};return n.pageRender(i,{libs:{},components:c,onGetRef:this.onGetRef,onGetComponent:o,onComponentMount:s,onComponentDestroy:a,$$context:{refs:this.refManager},renderMode:r.renderMode,processNodeConfigHook:r.processNodeConfigHook})}}const iv=()=>{const t=I.useRef(null);return{ref:t,rerender:function(...e){t.current&&t.current.rerender(...e)}}};class sv extends C.default.Component{constructor(r){super(r);_(this,"onDoubleClick",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:""}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){var o,a;(a=(o=this.props).onError)==null||a.call(o,n)}render(){if(this.state.hasError){const{onDoubleClick:r}=this,n=this.props.node.value;console.error(this.props.node,this.props.children);const o=C.default.createElement("div",{style:{backgroundColor:"rgb(255 206 215 / 13%)",padding:"5px",color:"#ff0000b0",textAlign:"center",fontSize:"12px"}},"Render error, node id: ",n.id,", node name\uFF1A",n.title," component name\uFF1A",n.title||n.componentName,C.default.createElement("p",null,"msg: ",String(this.state.error)),C.default.createElement("button",{onDoubleClick:r,style:{border:"1px solid rgba(100,100,100,0.1)",backgroundColor:"#fff",padding:"5px 10px",borderRadius:"2px",color:"gray",cursor:"pointer",marginTop:"5px"}},"double click to refresh"),C.default.createElement("div",{style:{display:"none"}}));return C.default.createElement(this.props.targetComponent,{onlyRenderChild:!0},o)}return this.props.children}}class ko{constructor(){_(this,"instanceMap",new Map)}get(e){return this.instanceMap.get(e)}add(e,r){const n=this.instanceMap.get(e);n?n.push(r):this.instanceMap.set(e,[r])}remove(e,r){const n=this.instanceMap.get(e);if(r!==void 0&&Array.isArray(n)){const o=n.filter(a=>a!==r);this.instanceMap.set(e,o)}else this.instanceMap.delete(e)}destroy(){this.instanceMap.clear()}}const zo=t=>{const{node:e}=t,r=I.useMemo(()=>{var c,u;const i=(u=(c=e.material)==null?void 0:c.value)==null?void 0:u.isContainer;return Mt(i)?i:{placeholder:"Drag the component to place it",width:"100%",height:"100%",style:{}}},[t.node]),{placeholder:n,height:o,width:a,style:s}=r;return C.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(200,200,200,0.1)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"2px",fontSize:"14px",color:"gray",cursor:"default",minWidth:"300px",minHeight:"50px",width:a,height:o,...s}},n)};class cv extends C.default.Component{constructor(r){super(r);_(this,"instanceManager",new ko);_(this,"renderRef");_(this,"dropPlaceholder",zo);_(this,"onGetComponent",(r,n)=>{const o=this;class a extends C.default.Component{constructor(){super(...arguments);_(this,"_DESIGN_BOX",!0);_(this,"_NODE_MODEL",n);_(this,"_NODE_ID",n.id);_(this,"_UNIQUE_ID",`${n.id}_${et()}`);_(this,"_STATUS")}componentDidMount(){o.instanceManager.add(n.id,this)}componentWillUnmount(){this._STATUS="DESTROY",o.instanceManager.remove(n.id,this)}render(){var h;const{children:c=[],onlyRenderChild:u,...l}=this.props;let d=c;return At(c)||(d=[c]),!Boolean(d.filter(Boolean).length)&&(((h=n.material)==null?void 0:h.value.isContainer)||n.value.componentName===wt.ROOT_CONTAINER)&&d.push(C.default.createElement(o.dropPlaceholder,{node:n})),u?d:C.default.createElement(r,l,...d)}}return C.default.forwardRef(function(i,c){return C.default.createElement(sv,{node:n,targetComponent:a},C.default.createElement(a,{ref:c,...i}))})});this.renderRef=C.default.createRef(),r.dropPlaceholder&&(this.dropPlaceholder=r.dropPlaceholder)}componentDidMount(){var r,n;(n=(r=this.props).onMount)==null||n.call(r,this)}getPageModel(){var r;return(r=this.renderRef.current)==null?void 0:r.state.pageModel}rerender(r){var n;return(n=this.renderRef.current)==null?void 0:n.rerender(r)}getInstancesById(r,n){let o=[...this.instanceManager.get(r)||[]];return n!==void 0&&(o=o.filter(a=>n===(a==null?void 0:a._UNIQUE_ID))),o}getInstanceByDom(r){const n=Go(r);if(!n)return null;const o=Vo(n);return(o==null?void 0:o.stateNode)||null}getDomsById(r,n){const o=this.getInstancesById(r),a=[];return o==null||o.forEach(s=>{if((s==null?void 0:s._STATUS)==="DESTROY")return;const i=Qo.findDOMNode(s);if(i&&!(i instanceof Text))if(n){const c=Array.from(i.querySelectorAll(n));a.push(...c)}else a.push(i)}),a}getDomRectById(r,n){return this.getDomsById(r,n).map(s=>s==null?void 0:s.getBoundingClientRect()).filter(Boolean)}render(){const{props:r,onGetComponent:n}=this,{render:o,...a}=r;return o&&(o.ref.current=this),C.default.createElement(Uo,{onGetComponent:n,...a,processNodeConfigHook:(s,i)=>{var g,m;if(i.nodeType!=="NODE")return s;const{props:c,condition:u}=s;let l={...c};const d=((g=i.value.configure)==null?void 0:g.devState)||{},f=(m=i.material)==null?void 0:m.value.fixedProps;if(f!==void 0){if(Mt(f))l={...l,...f};else if(typeof f=="function"){const j=f(l);l={...l,...j}}}let h=u;return d.condition===!1&&(h=d.condition),{props:Jh(l,d.props||{}),condition:h}},renderMode:"design",ref:this.renderRef})}}const Go=t=>{if(!t)return null;const e=Object.keys(t).find(r=>r.startsWith("__reactInternalInstance$")||r.startsWith("__reactFiber$"))||"";return e?t[e]:Go(t.parentElement)},Vo=t=>{var e;return t?(e=t==null?void 0:t.stateNode)!=null&&e._DESIGN_BOX?t:Vo(t.return):null},uv=()=>{const t=I.useRef(null);return{ref:t,rerender:function(...e){t.current&&t.current.rerender(...e)},getInstancesById(e,r){var n;return((n=t.current)==null?void 0:n.getInstancesById(e,r))||[]},getInstanceByDom(e){var r;return((r=t.current)==null?void 0:r.getInstanceByDom(e))||null},getDomsById(e,r){var n;return((n=t.current)==null?void 0:n.getDomsById(e,r))||[]},getDomRectById(e,r){var n;return((n=t.current)==null?void 0:n.getDomRectById(e,r))||[]}}};var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ho={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(lv,function(){var r=function(){},n={},o={},a={};function s(f,h){f=f.push?f:[f];var g=[],m=f.length,j=m,O,S,x,R;for(O=function(D,k){k.length&&g.push(D),j--,j||h(g)};m--;){if(S=f[m],x=o[S],x){O(S,x);continue}R=a[S]=a[S]||[],R.push(O)}}function i(f,h){if(!!f){var g=a[f];if(o[f]=h,!!g)for(;g.length;)g[0](f,h),g.splice(0,1)}}function c(f,h){f.call&&(f={success:f}),h.length?(f.error||r)(h):(f.success||r)(f)}function u(f,h,g,m){var j=document,O=g.async,S=(g.numRetries||0)+1,x=g.before||r,R=f.replace(/[\?|#].*$/,""),D=f.replace(/^(css|img)!/,""),k,T;m=m||0,/(^css!|\.css$)/.test(R)?(T=j.createElement("link"),T.rel="stylesheet",T.href=D,k="hideFocus"in T,k&&T.relList&&(k=0,T.rel="preload",T.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(R)?(T=j.createElement("img"),T.src=D):(T=j.createElement("script"),T.src=f,T.async=O===void 0?!0:O),T.onload=T.onerror=T.onbeforeload=function(xt){var it=xt.type[0];if(k)try{T.sheet.cssText.length||(it="e")}catch(Kt){Kt.code!=18&&(it="e")}if(it=="e"){if(m+=1,m<S)return u(f,h,g,m)}else if(T.rel=="preload"&&T.as=="style")return T.rel="stylesheet";h(f,it,xt.defaultPrevented)},x(f,T)!==!1&&j.head.appendChild(T)}function l(f,h,g){f=f.push?f:[f];var m=f.length,j=m,O=[],S,x;for(S=function(R,D,k){if(D=="e"&&O.push(R),D=="b")if(k)O.push(R);else return;m--,m||h(O)},x=0;x<j;x++)u(f[x],S,g)}function d(f,h,g){var m,j;if(h&&h.trim&&(m=h),j=(m?g:h)||{},m){if(m in n)throw"LoadJS";n[m]=!0}function O(S,x){l(f,function(R){c(j,R),S&&c({success:S,error:x},R),i(m,R)},j)}if(j.returnPromise)return new Promise(O);O()}return d.ready=function(h,g){return s(h,function(m){c(g,m)}),d},d.done=function(h){i(h,[])},d.reset=function(){n={},o={},a={}},d.isDefined=function(h){return h in n},d})})(Ho);const Wo=Ho.exports;class fv{constructor(e){_(this,"assets");_(this,"loadStatus");_(this,"_onSuccessList",[]);_(this,"_onErrorList",[]);this.assets=e,this.loadStatus="INIT"}load(){const e=this.assets||[],r=[];for(let n=0;n<e.length;n++){const o=e[n];o.id||(o.id=et()),r.push(o.id);const a=o.resources.map(s=>s.src);Wo(a,o.id,{async:!1})}if(e.length===0){this._onSuccessList.forEach(n=>n());return}return setTimeout(()=>{Wo.ready(r,{success:()=>{this._onSuccessList.forEach(n=>n())},error:n=>{this._onErrorList.forEach(o=>o(n))}})},0),this}onSuccess(e){return this._onSuccessList.push(e),this}onError(e){return this._onErrorList.push(e),this}}y.AssetLoader=fv,y.ComponentInstanceManager=ko,y.DefaultDropPlaceholder=zo,y.DefineReactAdapter=Bo,y.DesignRender=cv,y.ReactAdapter=ev,y.Render=Uo,y.getAdapter=Er,y.useDesignRender=uv,y.useRender=iv,Object.defineProperties(y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
