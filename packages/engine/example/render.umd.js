(function(x,ut){typeof exports=="object"&&typeof module<"u"?module.exports=ut(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],ut):(x=typeof globalThis<"u"?globalThis:x||self,x.CRender=ut(x.React,x.ReactDOM))})(this,function(x,ut){"use strict";function Ka(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const Za=Ka(ut);var Mt={},ei={get exports(){return Mt},set exports(e){Mt=e}},lt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hn;function ti(){if(hn)return lt;hn=1;var e=x,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(i,c,l){var f,d={},p=null,v=null;l!==void 0&&(p=""+l),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(v=c.ref);for(f in c)n.call(c,f)&&!a.hasOwnProperty(f)&&(d[f]=c[f]);if(i&&i.defaultProps)for(f in c=i.defaultProps,c)d[f]===void 0&&(d[f]=c[f]);return{$$typeof:t,type:i,key:p,ref:v,props:d,_owner:o.current}}return lt.Fragment=r,lt.jsx=s,lt.jsxs=s,lt}var ft={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vn;function ri(){return vn||(vn=1,{}.NODE_ENV!=="production"&&function(){var e=x,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),i=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),g=Symbol.iterator,j="@@iterator";function _(u){if(u===null||typeof u!="object")return null;var h=g&&u[g]||u[j];return typeof h=="function"?h:null}var S=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C(u){{for(var h=arguments.length,y=new Array(h>1?h-1:0),O=1;O<h;O++)y[O-1]=arguments[O];G("error",u,y)}}function G(u,h,y){{var O=S.ReactDebugCurrentFrame,A=O.getStackAddendum();A!==""&&(h+="%s",y=y.concat([A]));var $=y.map(function(N){return String(N)});$.unshift("Warning: "+h),Function.prototype.apply.call(console[u],console,$)}}var I=!1,W=!1,J=!1,ue=!1,M=!1,q;q=Symbol.for("react.module.reference");function H(u){return!!(typeof u=="string"||typeof u=="function"||u===n||u===a||M||u===o||u===l||u===f||ue||u===v||I||W||J||typeof u=="object"&&u!==null&&(u.$$typeof===p||u.$$typeof===d||u.$$typeof===s||u.$$typeof===i||u.$$typeof===c||u.$$typeof===q||u.getModuleId!==void 0))}function he(u,h,y){var O=u.displayName;if(O)return O;var A=h.displayName||h.name||"";return A!==""?y+"("+A+")":y}function De(u){return u.displayName||"Context"}function ne(u){if(u==null)return null;if(typeof u.tag=="number"&&C("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case n:return"Fragment";case r:return"Portal";case a:return"Profiler";case o:return"StrictMode";case l:return"Suspense";case f:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case i:var h=u;return De(h)+".Consumer";case s:var y=u;return De(y._context)+".Provider";case c:return he(u,u.render,"ForwardRef");case d:var O=u.displayName||null;return O!==null?O:ne(u.type)||"Memo";case p:{var A=u,$=A._payload,N=A._init;try{return ne(N($))}catch{return null}}}return null}var _e=Object.assign,ke=0,ot,Se,ee,Qt,at,Xt,Ie;function it(){}it.__reactDisabledLog=!0;function oe(){{if(ke===0){ot=console.log,Se=console.info,ee=console.warn,Qt=console.error,at=console.group,Xt=console.groupCollapsed,Ie=console.groupEnd;var u={configurable:!0,enumerable:!0,value:it,writable:!0};Object.defineProperties(console,{info:u,log:u,warn:u,error:u,group:u,groupCollapsed:u,groupEnd:u})}ke++}}function Ce(){{if(ke--,ke===0){var u={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:_e({},u,{value:ot}),info:_e({},u,{value:Se}),warn:_e({},u,{value:ee}),error:_e({},u,{value:Qt}),group:_e({},u,{value:at}),groupCollapsed:_e({},u,{value:Xt}),groupEnd:_e({},u,{value:Ie})})}ke<0&&C("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Fe=S.ReactCurrentDispatcher,At;function Kt(u,h,y){{if(At===void 0)try{throw Error()}catch(A){var O=A.stack.trim().match(/\n( *(at )?)/);At=O&&O[1]||""}return`
`+At+u}}var cn=!1,Zt;{var Ay=typeof WeakMap=="function"?WeakMap:Map;Zt=new Ay}function Fa(u,h){if(!u||cn)return"";{var y=Zt.get(u);if(y!==void 0)return y}var O;cn=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var $;$=Fe.current,Fe.current=null,oe();try{if(h){var N=function(){throw Error()};if(Object.defineProperty(N.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(N,[])}catch(je){O=je}Reflect.construct(u,[],N)}else{try{N.call()}catch(je){O=je}u.call(N.prototype)}}else{try{throw Error()}catch(je){O=je}u()}}catch(je){if(je&&O&&typeof je.stack=="string"){for(var R=je.stack.split(`
`),Q=O.stack.split(`
`),U=R.length-1,z=Q.length-1;U>=1&&z>=0&&R[U]!==Q[z];)z--;for(;U>=1&&z>=0;U--,z--)if(R[U]!==Q[z]){if(U!==1||z!==1)do if(U--,z--,z<0||R[U]!==Q[z]){var ae=`
`+R[U].replace(" at new "," at ");return u.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",u.displayName)),typeof u=="function"&&Zt.set(u,ae),ae}while(U>=1&&z>=0);break}}}finally{cn=!1,Fe.current=$,Ce(),Error.prepareStackTrace=A}var ct=u?u.displayName||u.name:"",Xa=ct?Kt(ct):"";return typeof u=="function"&&Zt.set(u,Xa),Xa}function Ty(u,h,y){return Fa(u,!1)}function My(u){var h=u.prototype;return!!(h&&h.isReactComponent)}function er(u,h,y){if(u==null)return"";if(typeof u=="function")return Fa(u,My(u));if(typeof u=="string")return Kt(u);switch(u){case l:return Kt("Suspense");case f:return Kt("SuspenseList")}if(typeof u=="object")switch(u.$$typeof){case c:return Ty(u.render);case d:return er(u.type,h,y);case p:{var O=u,A=O._payload,$=O._init;try{return er($(A),h,y)}catch{}}}return""}var tr=Object.prototype.hasOwnProperty,La={},Ba=S.ReactDebugCurrentFrame;function rr(u){if(u){var h=u._owner,y=er(u.type,u._source,h?h.type:null);Ba.setExtraStackFrame(y)}else Ba.setExtraStackFrame(null)}function $y(u,h,y,O,A){{var $=Function.call.bind(tr);for(var N in u)if($(u,N)){var R=void 0;try{if(typeof u[N]!="function"){var Q=Error((O||"React class")+": "+y+" type `"+N+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof u[N]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Q.name="Invariant Violation",Q}R=u[N](h,N,O,y,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(U){R=U}R&&!(R instanceof Error)&&(rr(A),C("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",O||"React class",y,N,typeof R),rr(null)),R instanceof Error&&!(R.message in La)&&(La[R.message]=!0,rr(A),C("Failed %s type: %s",y,R.message),rr(null))}}}var Py=Array.isArray;function un(u){return Py(u)}function Dy(u){{var h=typeof Symbol=="function"&&Symbol.toStringTag,y=h&&u[Symbol.toStringTag]||u.constructor.name||"Object";return y}}function ky(u){try{return Ua(u),!1}catch{return!0}}function Ua(u){return""+u}function za(u){if(ky(u))return C("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Dy(u)),Ua(u)}var Tt=S.ReactCurrentOwner,Iy={key:!0,ref:!0,__self:!0,__source:!0},Va,Ga,ln;ln={};function Fy(u){if(tr.call(u,"ref")){var h=Object.getOwnPropertyDescriptor(u,"ref").get;if(h&&h.isReactWarning)return!1}return u.ref!==void 0}function Ly(u){if(tr.call(u,"key")){var h=Object.getOwnPropertyDescriptor(u,"key").get;if(h&&h.isReactWarning)return!1}return u.key!==void 0}function By(u,h){if(typeof u.ref=="string"&&Tt.current&&h&&Tt.current.stateNode!==h){var y=ne(Tt.current.type);ln[y]||(C('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ne(Tt.current.type),u.ref),ln[y]=!0)}}function Uy(u,h){{var y=function(){Va||(Va=!0,C("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};y.isReactWarning=!0,Object.defineProperty(u,"key",{get:y,configurable:!0})}}function zy(u,h){{var y=function(){Ga||(Ga=!0,C("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};y.isReactWarning=!0,Object.defineProperty(u,"ref",{get:y,configurable:!0})}}var Vy=function(u,h,y,O,A,$,N){var R={$$typeof:t,type:u,key:h,ref:y,props:N,_owner:$};return R._store={},Object.defineProperty(R._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(R,"_self",{configurable:!1,enumerable:!1,writable:!1,value:O}),Object.defineProperty(R,"_source",{configurable:!1,enumerable:!1,writable:!1,value:A}),Object.freeze&&(Object.freeze(R.props),Object.freeze(R)),R};function Gy(u,h,y,O,A){{var $,N={},R=null,Q=null;y!==void 0&&(za(y),R=""+y),Ly(h)&&(za(h.key),R=""+h.key),Fy(h)&&(Q=h.ref,By(h,A));for($ in h)tr.call(h,$)&&!Iy.hasOwnProperty($)&&(N[$]=h[$]);if(u&&u.defaultProps){var U=u.defaultProps;for($ in U)N[$]===void 0&&(N[$]=U[$])}if(R||Q){var z=typeof u=="function"?u.displayName||u.name||"Unknown":u;R&&Uy(N,z),Q&&zy(N,z)}return Vy(u,R,Q,A,O,Tt.current,N)}}var fn=S.ReactCurrentOwner,Wa=S.ReactDebugCurrentFrame;function st(u){if(u){var h=u._owner,y=er(u.type,u._source,h?h.type:null);Wa.setExtraStackFrame(y)}else Wa.setExtraStackFrame(null)}var dn;dn=!1;function pn(u){return typeof u=="object"&&u!==null&&u.$$typeof===t}function Ha(){{if(fn.current){var u=ne(fn.current.type);if(u)return`

Check the render method of \``+u+"`."}return""}}function Wy(u){{if(u!==void 0){var h=u.fileName.replace(/^.*[\\\/]/,""),y=u.lineNumber;return`

Check your code at `+h+":"+y+"."}return""}}var Ya={};function Hy(u){{var h=Ha();if(!h){var y=typeof u=="string"?u:u.displayName||u.name;y&&(h=`

Check the top-level render call using <`+y+">.")}return h}}function Ja(u,h){{if(!u._store||u._store.validated||u.key!=null)return;u._store.validated=!0;var y=Hy(h);if(Ya[y])return;Ya[y]=!0;var O="";u&&u._owner&&u._owner!==fn.current&&(O=" It was passed a child from "+ne(u._owner.type)+"."),st(u),C('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',y,O),st(null)}}function qa(u,h){{if(typeof u!="object")return;if(un(u))for(var y=0;y<u.length;y++){var O=u[y];pn(O)&&Ja(O,h)}else if(pn(u))u._store&&(u._store.validated=!0);else if(u){var A=_(u);if(typeof A=="function"&&A!==u.entries)for(var $=A.call(u),N;!(N=$.next()).done;)pn(N.value)&&Ja(N.value,h)}}}function Yy(u){{var h=u.type;if(h==null||typeof h=="string")return;var y;if(typeof h=="function")y=h.propTypes;else if(typeof h=="object"&&(h.$$typeof===c||h.$$typeof===d))y=h.propTypes;else return;if(y){var O=ne(h);$y(y,u.props,"prop",O,u)}else if(h.PropTypes!==void 0&&!dn){dn=!0;var A=ne(h);C("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",A||"Unknown")}typeof h.getDefaultProps=="function"&&!h.getDefaultProps.isReactClassApproved&&C("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Jy(u){{for(var h=Object.keys(u.props),y=0;y<h.length;y++){var O=h[y];if(O!=="children"&&O!=="key"){st(u),C("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",O),st(null);break}}u.ref!==null&&(st(u),C("Invalid attribute `ref` supplied to `React.Fragment`."),st(null))}}function Qa(u,h,y,O,A,$){{var N=H(u);if(!N){var R="";(u===void 0||typeof u=="object"&&u!==null&&Object.keys(u).length===0)&&(R+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Q=Wy(A);Q?R+=Q:R+=Ha();var U;u===null?U="null":un(u)?U="array":u!==void 0&&u.$$typeof===t?(U="<"+(ne(u.type)||"Unknown")+" />",R=" Did you accidentally export a JSX literal instead of a component?"):U=typeof u,C("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",U,R)}var z=Gy(u,h,y,A,$);if(z==null)return z;if(N){var ae=h.children;if(ae!==void 0)if(O)if(un(ae)){for(var ct=0;ct<ae.length;ct++)qa(ae[ct],u);Object.freeze&&Object.freeze(ae)}else C("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else qa(ae,u)}return u===n?Jy(z):Yy(z),z}}function qy(u,h,y){return Qa(u,h,y,!0)}function Qy(u,h,y){return Qa(u,h,y,!1)}var Xy=Qy,Ky=qy;ft.Fragment=n,ft.jsx=Xy,ft.jsxs=Ky}()),ft}(function(e){({}).NODE_ENV==="production"?e.exports=ti():e.exports=ri()})(ei);const Le=Mt.jsx,yn=Mt.jsxs;var ni=Object.defineProperty,oi=(e,t,r)=>t in e?ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t,r)=>(oi(e,typeof t!="symbol"?t+"":t,r),r);const ai=e=>()=>{console.warn(`${e} need to be implement getComponent`)},ii=["customPageRootRender"],mn=["pageRender","render","convertModelToComponent","getComponent","getContext","getUtils","getDataLink","createDataLink","transformProps","transformData","transformGlobalData","errorCatch","clear"],gn=e=>[...mn,...ii].reduce((t,r)=>{var n;return e!=null&&e[r]?t[r]=(n=e[r])==null?void 0:n.bind(e):mn.includes(r)&&(t[r]=ai),t},{});var si=Object.defineProperty,ci=(e,t,r)=>t in e?si(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t,r)=>(ci(e,typeof t!="symbol"?t+"":t,r),r),ui=typeof global=="object"&&global&&global.Object===Object&&global;const bn=ui;var li=typeof self=="object"&&self&&self.Object===Object&&self,fi=bn||li||Function("return this")();const le=fi;var di=le.Symbol;const te=di;var _n=Object.prototype,pi=_n.hasOwnProperty,hi=_n.toString,dt=te?te.toStringTag:void 0;function vi(e){var t=pi.call(e,dt),r=e[dt];try{e[dt]=void 0;var n=!0}catch{}var o=hi.call(e);return n&&(t?e[dt]=r:delete e[dt]),o}var yi=Object.prototype,mi=yi.toString;function gi(e){return mi.call(e)}var bi="[object Null]",_i="[object Undefined]",jn=te?te.toStringTag:void 0;function we(e){return e==null?e===void 0?_i:bi:jn&&jn in Object(e)?vi(e):gi(e)}function fe(e){return e!=null&&typeof e=="object"}var ji="[object Symbol]";function nr(e){return typeof e=="symbol"||fe(e)&&we(e)==ji}function or(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Ei=Array.isArray;const L=Ei;var Oi=1/0,En=te?te.prototype:void 0,On=En?En.toString:void 0;function Sn(e){if(typeof e=="string")return e;if(L(e))return or(e,Sn)+"";if(nr(e))return On?On.call(e):"";var t=e+"";return t=="0"&&1/e==-Oi?"-0":t}function ie(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ar(e){return e}var Si="[object AsyncFunction]",Ci="[object Function]",wi="[object GeneratorFunction]",xi="[object Proxy]";function ir(e){if(!ie(e))return!1;var t=we(e);return t==Ci||t==wi||t==Si||t==xi}var Ri=le["__core-js_shared__"];const sr=Ri;var Cn=function(){var e=/[^.]+$/.exec(sr&&sr.keys&&sr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ni(e){return!!Cn&&Cn in e}var Ai=Function.prototype,Ti=Ai.toString;function xe(e){if(e!=null){try{return Ti.call(e)}catch{}try{return e+""}catch{}}return""}var Mi=/[\\^$.*+?()[\]{}|]/g,$i=/^\[object .+?Constructor\]$/,Pi=Function.prototype,Di=Object.prototype,ki=Pi.toString,Ii=Di.hasOwnProperty,Fi=RegExp("^"+ki.call(Ii).replace(Mi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Li(e){if(!ie(e)||Ni(e))return!1;var t=ir(e)?Fi:$i;return t.test(xe(e))}function Bi(e,t){return e==null?void 0:e[t]}function Re(e,t){var r=Bi(e,t);return Li(r)?r:void 0}var Ui=Re(le,"WeakMap");const cr=Ui;var wn=Object.create,zi=function(){function e(){}return function(t){if(!ie(t))return{};if(wn)return wn(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Vi=zi;function Gi(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Wi(){}function xn(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Hi=800,Yi=16,Ji=Date.now;function qi(e){var t=0,r=0;return function(){var n=Ji(),o=Yi-(n-r);if(r=n,o>0){if(++t>=Hi)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Qi(e){return function(){return e}}var Xi=function(){try{var e=Re(Object,"defineProperty");return e({},"",{}),e}catch{}}();const $t=Xi;var Ki=$t?function(e,t){return $t(e,"toString",{configurable:!0,enumerable:!1,value:Qi(t),writable:!0})}:ar,Zi=qi(Ki);const Rn=Zi;function es(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function ts(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function rs(e){return e!==e}function ns(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function os(e,t,r){return t===t?ns(e,t,r):ts(e,rs,r)}function as(e,t){var r=e==null?0:e.length;return!!r&&os(e,t,0)>-1}var is=9007199254740991,ss=/^(?:0|[1-9]\d*)$/;function Pt(e,t){var r=typeof e;return t=t??is,!!t&&(r=="number"||r!="symbol"&&ss.test(e))&&e>-1&&e%1==0&&e<t}function ur(e,t,r){t=="__proto__"&&$t?$t(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function pt(e,t){return e===t||e!==e&&t!==t}var cs=Object.prototype,us=cs.hasOwnProperty;function lr(e,t,r){var n=e[t];(!(us.call(e,t)&&pt(n,r))||r===void 0&&!(t in e))&&ur(e,t,r)}function Be(e,t,r,n){var o=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var i=t[a],c=n?n(r[i],e[i],i,r,e):void 0;c===void 0&&(c=e[i]),o?ur(r,i,c):lr(r,i,c)}return r}var Nn=Math.max;function An(e,t,r){return t=Nn(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=Nn(n.length-t,0),s=Array(a);++o<a;)s[o]=n[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=n[o];return i[t]=r(s),Gi(e,this,i)}}function Tn(e,t){return Rn(An(e,t,ar),e+"")}var ls=9007199254740991;function fr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ls}function Dt(e){return e!=null&&fr(e.length)&&!ir(e)}function fs(e,t,r){if(!ie(r))return!1;var n=typeof t;return(n=="number"?Dt(r)&&Pt(t,r.length):n=="string"&&t in r)?pt(r[t],e):!1}function ds(e){return Tn(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,s&&fs(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var i=r[n];i&&e(t,i,n,a)}return t})}var ps=Object.prototype;function dr(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ps;return e===r}function hs(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var vs="[object Arguments]";function Mn(e){return fe(e)&&we(e)==vs}var $n=Object.prototype,ys=$n.hasOwnProperty,ms=$n.propertyIsEnumerable,gs=Mn(function(){return arguments}())?Mn:function(e){return fe(e)&&ys.call(e,"callee")&&!ms.call(e,"callee")};const ht=gs;function bs(){return!1}var Pn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Dn=Pn&&typeof module=="object"&&module&&!module.nodeType&&module,_s=Dn&&Dn.exports===Pn,kn=_s?le.Buffer:void 0,js=kn?kn.isBuffer:void 0,Es=js||bs;const vt=Es;var Os="[object Arguments]",Ss="[object Array]",Cs="[object Boolean]",ws="[object Date]",xs="[object Error]",Rs="[object Function]",Ns="[object Map]",As="[object Number]",Ts="[object Object]",Ms="[object RegExp]",$s="[object Set]",Ps="[object String]",Ds="[object WeakMap]",ks="[object ArrayBuffer]",Is="[object DataView]",Fs="[object Float32Array]",Ls="[object Float64Array]",Bs="[object Int8Array]",Us="[object Int16Array]",zs="[object Int32Array]",Vs="[object Uint8Array]",Gs="[object Uint8ClampedArray]",Ws="[object Uint16Array]",Hs="[object Uint32Array]",D={};D[Fs]=D[Ls]=D[Bs]=D[Us]=D[zs]=D[Vs]=D[Gs]=D[Ws]=D[Hs]=!0,D[Os]=D[Ss]=D[ks]=D[Cs]=D[Is]=D[ws]=D[xs]=D[Rs]=D[Ns]=D[As]=D[Ts]=D[Ms]=D[$s]=D[Ps]=D[Ds]=!1;function Ys(e){return fe(e)&&fr(e.length)&&!!D[we(e)]}function pr(e){return function(t){return e(t)}}var In=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yt=In&&typeof module=="object"&&module&&!module.nodeType&&module,Js=yt&&yt.exports===In,hr=Js&&bn.process,qs=function(){try{var e=yt&&yt.require&&yt.require("util").types;return e||hr&&hr.binding&&hr.binding("util")}catch{}}();const Ue=qs;var Fn=Ue&&Ue.isTypedArray,Qs=Fn?pr(Fn):Ys;const vr=Qs;var Xs=Object.prototype,Ks=Xs.hasOwnProperty;function Ln(e,t){var r=L(e),n=!r&&ht(e),o=!r&&!n&&vt(e),a=!r&&!n&&!o&&vr(e),s=r||n||o||a,i=s?hs(e.length,String):[],c=i.length;for(var l in e)(t||Ks.call(e,l))&&!(s&&(l=="length"||o&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Pt(l,c)))&&i.push(l);return i}function Bn(e,t){return function(r){return e(t(r))}}var Zs=Bn(Object.keys,Object);const ec=Zs;var tc=Object.prototype,rc=tc.hasOwnProperty;function nc(e){if(!dr(e))return ec(e);var t=[];for(var r in Object(e))rc.call(e,r)&&r!="constructor"&&t.push(r);return t}function kt(e){return Dt(e)?Ln(e):nc(e)}function oc(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var ac=Object.prototype,ic=ac.hasOwnProperty;function sc(e){if(!ie(e))return oc(e);var t=dr(e),r=[];for(var n in e)n=="constructor"&&(t||!ic.call(e,n))||r.push(n);return r}function mt(e){return Dt(e)?Ln(e,!0):sc(e)}var cc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uc=/^\w*$/;function yr(e,t){if(L(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||nr(e)?!0:uc.test(e)||!cc.test(e)||t!=null&&e in Object(t)}var lc=Re(Object,"create");const gt=lc;function fc(){this.__data__=gt?gt(null):{},this.size=0}function dc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var pc="__lodash_hash_undefined__",hc=Object.prototype,vc=hc.hasOwnProperty;function yc(e){var t=this.__data__;if(gt){var r=t[e];return r===pc?void 0:r}return vc.call(t,e)?t[e]:void 0}var mc=Object.prototype,gc=mc.hasOwnProperty;function bc(e){var t=this.__data__;return gt?t[e]!==void 0:gc.call(t,e)}var _c="__lodash_hash_undefined__";function jc(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=gt&&t===void 0?_c:t,this}function Ne(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ne.prototype.clear=fc,Ne.prototype.delete=dc,Ne.prototype.get=yc,Ne.prototype.has=bc,Ne.prototype.set=jc;function Ec(){this.__data__=[],this.size=0}function It(e,t){for(var r=e.length;r--;)if(pt(e[r][0],t))return r;return-1}var Oc=Array.prototype,Sc=Oc.splice;function Cc(e){var t=this.__data__,r=It(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Sc.call(t,r,1),--this.size,!0}function wc(e){var t=this.__data__,r=It(t,e);return r<0?void 0:t[r][1]}function xc(e){return It(this.__data__,e)>-1}function Rc(e,t){var r=this.__data__,n=It(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ve(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ve.prototype.clear=Ec,ve.prototype.delete=Cc,ve.prototype.get=wc,ve.prototype.has=xc,ve.prototype.set=Rc;var Nc=Re(le,"Map");const bt=Nc;function Ac(){this.size=0,this.__data__={hash:new Ne,map:new(bt||ve),string:new Ne}}function Tc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ft(e,t){var r=e.__data__;return Tc(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Mc(e){var t=Ft(this,e).delete(e);return this.size-=t?1:0,t}function $c(e){return Ft(this,e).get(e)}function Pc(e){return Ft(this,e).has(e)}function Dc(e,t){var r=Ft(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function ye(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ye.prototype.clear=Ac,ye.prototype.delete=Mc,ye.prototype.get=$c,ye.prototype.has=Pc,ye.prototype.set=Dc;var kc="Expected a function";function mr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(kc);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var s=e.apply(this,n);return r.cache=a.set(o,s)||a,s};return r.cache=new(mr.Cache||ye),r}mr.Cache=ye;var Ic=500;function Fc(e){var t=mr(e,function(n){return r.size===Ic&&r.clear(),n}),r=t.cache;return t}var Lc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bc=/\\(\\)?/g,Uc=Fc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Lc,function(r,n,o,a){t.push(o?a.replace(Bc,"$1"):n||r)}),t});const zc=Uc;function Vc(e){return e==null?"":Sn(e)}function ze(e,t){return L(e)?e:yr(e,t)?[e]:zc(Vc(e))}var Gc=1/0;function Ve(e){if(typeof e=="string"||nr(e))return e;var t=e+"";return t=="0"&&1/e==-Gc?"-0":t}function Lt(e,t){t=ze(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Ve(t[r++])];return r&&r==n?e:void 0}function Un(e,t,r){var n=e==null?void 0:Lt(e,t);return n===void 0?r:n}function gr(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var zn=te?te.isConcatSpreadable:void 0;function Wc(e){return L(e)||ht(e)||!!(zn&&e&&e[zn])}function br(e,t,r,n,o){var a=-1,s=e.length;for(r||(r=Wc),o||(o=[]);++a<s;){var i=e[a];t>0&&r(i)?t>1?br(i,t-1,r,n,o):gr(o,i):n||(o[o.length]=i)}return o}function Hc(e){var t=e==null?0:e.length;return t?br(e,1):[]}function Yc(e){return Rn(An(e,void 0,Hc),e+"")}var Jc=Bn(Object.getPrototypeOf,Object);const _r=Jc;var qc="[object Object]",Qc=Function.prototype,Xc=Object.prototype,Vn=Qc.toString,Kc=Xc.hasOwnProperty,Zc=Vn.call(Object);function X(e){if(!fe(e)||we(e)!=qc)return!1;var t=_r(e);if(t===null)return!0;var r=Kc.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Vn.call(r)==Zc}function eu(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}function tu(){this.__data__=new ve,this.size=0}function ru(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function nu(e){return this.__data__.get(e)}function ou(e){return this.__data__.has(e)}var au=200;function iu(e,t){var r=this.__data__;if(r instanceof ve){var n=r.__data__;if(!bt||n.length<au-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ye(n)}return r.set(e,t),this.size=r.size,this}function se(e){var t=this.__data__=new ve(e);this.size=t.size}se.prototype.clear=tu,se.prototype.delete=ru,se.prototype.get=nu,se.prototype.has=ou,se.prototype.set=iu;function su(e,t){return e&&Be(t,kt(t),e)}function cu(e,t){return e&&Be(t,mt(t),e)}var Gn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wn=Gn&&typeof module=="object"&&module&&!module.nodeType&&module,uu=Wn&&Wn.exports===Gn,Hn=uu?le.Buffer:void 0,Yn=Hn?Hn.allocUnsafe:void 0;function Jn(e,t){if(t)return e.slice();var r=e.length,n=Yn?Yn(r):new e.constructor(r);return e.copy(n),n}function lu(e,t){for(var r=-1,n=e==null?0:e.length,o=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[o++]=s)}return a}function qn(){return[]}var fu=Object.prototype,du=fu.propertyIsEnumerable,Qn=Object.getOwnPropertySymbols,pu=Qn?function(e){return e==null?[]:(e=Object(e),lu(Qn(e),function(t){return du.call(e,t)}))}:qn;const jr=pu;function hu(e,t){return Be(e,jr(e),t)}var vu=Object.getOwnPropertySymbols,yu=vu?function(e){for(var t=[];e;)gr(t,jr(e)),e=_r(e);return t}:qn;const Xn=yu;function mu(e,t){return Be(e,Xn(e),t)}function Kn(e,t,r){var n=t(e);return L(e)?n:gr(n,r(e))}function Er(e){return Kn(e,kt,jr)}function Or(e){return Kn(e,mt,Xn)}var gu=Re(le,"DataView");const Sr=gu;var bu=Re(le,"Promise");const Cr=bu;var _u=Re(le,"Set");const Ge=_u;var Zn="[object Map]",ju="[object Object]",eo="[object Promise]",to="[object Set]",ro="[object WeakMap]",no="[object DataView]",Eu=xe(Sr),Ou=xe(bt),Su=xe(Cr),Cu=xe(Ge),wu=xe(cr),Ae=we;(Sr&&Ae(new Sr(new ArrayBuffer(1)))!=no||bt&&Ae(new bt)!=Zn||Cr&&Ae(Cr.resolve())!=eo||Ge&&Ae(new Ge)!=to||cr&&Ae(new cr)!=ro)&&(Ae=function(e){var t=we(e),r=t==ju?e.constructor:void 0,n=r?xe(r):"";if(n)switch(n){case Eu:return no;case Ou:return Zn;case Su:return eo;case Cu:return to;case wu:return ro}return t});const _t=Ae;var xu=Object.prototype,Ru=xu.hasOwnProperty;function Nu(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Ru.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Au=le.Uint8Array;const Bt=Au;function wr(e){var t=new e.constructor(e.byteLength);return new Bt(t).set(new Bt(e)),t}function Tu(e,t){var r=t?wr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Mu=/\w*$/;function $u(e){var t=new e.constructor(e.source,Mu.exec(e));return t.lastIndex=e.lastIndex,t}var oo=te?te.prototype:void 0,ao=oo?oo.valueOf:void 0;function Pu(e){return ao?Object(ao.call(e)):{}}function io(e,t){var r=t?wr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Du="[object Boolean]",ku="[object Date]",Iu="[object Map]",Fu="[object Number]",Lu="[object RegExp]",Bu="[object Set]",Uu="[object String]",zu="[object Symbol]",Vu="[object ArrayBuffer]",Gu="[object DataView]",Wu="[object Float32Array]",Hu="[object Float64Array]",Yu="[object Int8Array]",Ju="[object Int16Array]",qu="[object Int32Array]",Qu="[object Uint8Array]",Xu="[object Uint8ClampedArray]",Ku="[object Uint16Array]",Zu="[object Uint32Array]";function el(e,t,r){var n=e.constructor;switch(t){case Vu:return wr(e);case Du:case ku:return new n(+e);case Gu:return Tu(e,r);case Wu:case Hu:case Yu:case Ju:case qu:case Qu:case Xu:case Ku:case Zu:return io(e,r);case Iu:return new n;case Fu:case Uu:return new n(e);case Lu:return $u(e);case Bu:return new n;case zu:return Pu(e)}}function so(e){return typeof e.constructor=="function"&&!dr(e)?Vi(_r(e)):{}}var tl="[object Map]";function rl(e){return fe(e)&&_t(e)==tl}var co=Ue&&Ue.isMap,nl=co?pr(co):rl;const ol=nl;var al="[object Set]";function il(e){return fe(e)&&_t(e)==al}var uo=Ue&&Ue.isSet,sl=uo?pr(uo):il;const cl=sl;var ul=1,ll=2,fl=4,lo="[object Arguments]",dl="[object Array]",pl="[object Boolean]",hl="[object Date]",vl="[object Error]",fo="[object Function]",yl="[object GeneratorFunction]",ml="[object Map]",gl="[object Number]",po="[object Object]",bl="[object RegExp]",_l="[object Set]",jl="[object String]",El="[object Symbol]",Ol="[object WeakMap]",Sl="[object ArrayBuffer]",Cl="[object DataView]",wl="[object Float32Array]",xl="[object Float64Array]",Rl="[object Int8Array]",Nl="[object Int16Array]",Al="[object Int32Array]",Tl="[object Uint8Array]",Ml="[object Uint8ClampedArray]",$l="[object Uint16Array]",Pl="[object Uint32Array]",P={};P[lo]=P[dl]=P[Sl]=P[Cl]=P[pl]=P[hl]=P[wl]=P[xl]=P[Rl]=P[Nl]=P[Al]=P[ml]=P[gl]=P[po]=P[bl]=P[_l]=P[jl]=P[El]=P[Tl]=P[Ml]=P[$l]=P[Pl]=!0,P[vl]=P[fo]=P[Ol]=!1;function jt(e,t,r,n,o,a){var s,i=t&ul,c=t&ll,l=t&fl;if(r&&(s=o?r(e,n,o,a):r(e)),s!==void 0)return s;if(!ie(e))return e;var f=L(e);if(f){if(s=Nu(e),!i)return xn(e,s)}else{var d=_t(e),p=d==fo||d==yl;if(vt(e))return Jn(e,i);if(d==po||d==lo||p&&!o){if(s=c||p?{}:so(e),!i)return c?mu(e,cu(s,e)):hu(e,su(s,e))}else{if(!P[d])return o?e:{};s=el(e,d,i)}}a||(a=new se);var v=a.get(e);if(v)return v;a.set(e,s),cl(e)?e.forEach(function(_){s.add(jt(_,t,r,_,e,a))}):ol(e)&&e.forEach(function(_,S){s.set(S,jt(_,t,r,S,e,a))});var g=l?c?Or:Er:c?mt:kt,j=f?void 0:g(e);return es(j||e,function(_,S){j&&(S=_,_=e[S]),lr(s,S,jt(_,t,r,S,e,a))}),s}var Dl=1,kl=4;function ho(e){return jt(e,Dl|kl)}var Il="__lodash_hash_undefined__";function Fl(e){return this.__data__.set(e,Il),this}function Ll(e){return this.__data__.has(e)}function Et(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ye;++t<r;)this.add(e[t])}Et.prototype.add=Et.prototype.push=Fl,Et.prototype.has=Ll;function Bl(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function vo(e,t){return e.has(t)}var Ul=1,zl=2;function yo(e,t,r,n,o,a){var s=r&Ul,i=e.length,c=t.length;if(i!=c&&!(s&&c>i))return!1;var l=a.get(e),f=a.get(t);if(l&&f)return l==t&&f==e;var d=-1,p=!0,v=r&zl?new Et:void 0;for(a.set(e,t),a.set(t,e);++d<i;){var g=e[d],j=t[d];if(n)var _=s?n(j,g,d,t,e,a):n(g,j,d,e,t,a);if(_!==void 0){if(_)continue;p=!1;break}if(v){if(!Bl(t,function(S,C){if(!vo(v,C)&&(g===S||o(g,S,r,n,a)))return v.push(C)})){p=!1;break}}else if(!(g===j||o(g,j,r,n,a))){p=!1;break}}return a.delete(e),a.delete(t),p}function Vl(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}function xr(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Gl=1,Wl=2,Hl="[object Boolean]",Yl="[object Date]",Jl="[object Error]",ql="[object Map]",Ql="[object Number]",Xl="[object RegExp]",Kl="[object Set]",Zl="[object String]",ef="[object Symbol]",tf="[object ArrayBuffer]",rf="[object DataView]",mo=te?te.prototype:void 0,Rr=mo?mo.valueOf:void 0;function nf(e,t,r,n,o,a,s){switch(r){case rf:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case tf:return!(e.byteLength!=t.byteLength||!a(new Bt(e),new Bt(t)));case Hl:case Yl:case Ql:return pt(+e,+t);case Jl:return e.name==t.name&&e.message==t.message;case Xl:case Zl:return e==t+"";case ql:var i=Vl;case Kl:var c=n&Gl;if(i||(i=xr),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;n|=Wl,s.set(e,t);var f=yo(i(e),i(t),n,o,a,s);return s.delete(e),f;case ef:if(Rr)return Rr.call(e)==Rr.call(t)}return!1}var of=1,af=Object.prototype,sf=af.hasOwnProperty;function cf(e,t,r,n,o,a){var s=r&of,i=Er(e),c=i.length,l=Er(t),f=l.length;if(c!=f&&!s)return!1;for(var d=c;d--;){var p=i[d];if(!(s?p in t:sf.call(t,p)))return!1}var v=a.get(e),g=a.get(t);if(v&&g)return v==t&&g==e;var j=!0;a.set(e,t),a.set(t,e);for(var _=s;++d<c;){p=i[d];var S=e[p],C=t[p];if(n)var G=s?n(C,S,p,t,e,a):n(S,C,p,e,t,a);if(!(G===void 0?S===C||o(S,C,r,n,a):G)){j=!1;break}_||(_=p=="constructor")}if(j&&!_){var I=e.constructor,W=t.constructor;I!=W&&"constructor"in e&&"constructor"in t&&!(typeof I=="function"&&I instanceof I&&typeof W=="function"&&W instanceof W)&&(j=!1)}return a.delete(e),a.delete(t),j}var uf=1,go="[object Arguments]",bo="[object Array]",Ut="[object Object]",lf=Object.prototype,_o=lf.hasOwnProperty;function ff(e,t,r,n,o,a){var s=L(e),i=L(t),c=s?bo:_t(e),l=i?bo:_t(t);c=c==go?Ut:c,l=l==go?Ut:l;var f=c==Ut,d=l==Ut,p=c==l;if(p&&vt(e)){if(!vt(t))return!1;s=!0,f=!1}if(p&&!f)return a||(a=new se),s||vr(e)?yo(e,t,r,n,o,a):nf(e,t,c,r,n,o,a);if(!(r&uf)){var v=f&&_o.call(e,"__wrapped__"),g=d&&_o.call(t,"__wrapped__");if(v||g){var j=v?e.value():e,_=g?t.value():t;return a||(a=new se),o(j,_,r,n,a)}}return p?(a||(a=new se),cf(e,t,r,n,o,a)):!1}function Nr(e,t,r,n,o){return e===t?!0:e==null||t==null||!fe(e)&&!fe(t)?e!==e&&t!==t:ff(e,t,r,n,Nr,o)}var df=1,pf=2;function hf(e,t,r,n){var o=r.length,a=o,s=!n;if(e==null)return!a;for(e=Object(e);o--;){var i=r[o];if(s&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++o<a;){i=r[o];var c=i[0],l=e[c],f=i[1];if(s&&i[2]){if(l===void 0&&!(c in e))return!1}else{var d=new se;if(n)var p=n(l,f,c,e,t,d);if(!(p===void 0?Nr(f,l,df|pf,n,d):p))return!1}}return!0}function jo(e){return e===e&&!ie(e)}function vf(e){for(var t=kt(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,jo(o)]}return t}function Eo(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function yf(e){var t=vf(e);return t.length==1&&t[0][2]?Eo(t[0][0],t[0][1]):function(r){return r===e||hf(r,e,t)}}function mf(e,t){return e!=null&&t in Object(e)}function gf(e,t,r){t=ze(t,e);for(var n=-1,o=t.length,a=!1;++n<o;){var s=Ve(t[n]);if(!(a=e!=null&&r(e,s)))break;e=e[s]}return a||++n!=o?a:(o=e==null?0:e.length,!!o&&fr(o)&&Pt(s,o)&&(L(e)||ht(e)))}function bf(e,t){return e!=null&&gf(e,t,mf)}var _f=1,jf=2;function Ef(e,t){return yr(e)&&jo(t)?Eo(Ve(e),t):function(r){var n=Un(r,e);return n===void 0&&n===t?bf(r,e):Nr(t,n,_f|jf)}}function Of(e){return function(t){return t==null?void 0:t[e]}}function Sf(e){return function(t){return Lt(t,e)}}function Cf(e){return yr(e)?Of(Ve(e)):Sf(e)}function Ar(e){return typeof e=="function"?e:e==null?ar:typeof e=="object"?L(e)?Ef(e[0],e[1]):yf(e):Cf(e)}function wf(e){return function(t,r,n){for(var o=-1,a=Object(t),s=n(t),i=s.length;i--;){var c=s[e?i:++o];if(r(a[c],c,a)===!1)break}return t}}var xf=wf();const Rf=xf;function Tr(e,t,r){(r!==void 0&&!pt(e[t],r)||r===void 0&&!(t in e))&&ur(e,t,r)}function Mr(e){return fe(e)&&Dt(e)}function $r(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Nf(e){return Be(e,mt(e))}function Af(e,t,r,n,o,a,s){var i=$r(e,r),c=$r(t,r),l=s.get(c);if(l){Tr(e,r,l);return}var f=a?a(i,c,r+"",e,t,s):void 0,d=f===void 0;if(d){var p=L(c),v=!p&&vt(c),g=!p&&!v&&vr(c);f=c,p||v||g?L(i)?f=i:Mr(i)?f=xn(i):v?(d=!1,f=Jn(c,!0)):g?(d=!1,f=io(c,!0)):f=[]:X(c)||ht(c)?(f=i,ht(i)?f=Nf(i):(!ie(i)||ir(i))&&(f=so(c))):d=!1}d&&(s.set(c,f),o(f,c,n,a,s),s.delete(c)),Tr(e,r,f)}function Oo(e,t,r,n,o){e!==t&&Rf(t,function(a,s){if(o||(o=new se),ie(a))Af(e,t,s,r,Oo,n,o);else{var i=n?n($r(e,s),a,s+"",e,t,o):void 0;i===void 0&&(i=a),Tr(e,s,i)}},mt)}function Tf(e,t,r){for(var n=-1,o=e==null?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}function So(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function Mf(e,t){return t.length<2?e:Lt(e,eu(t,0,-1))}var $f=ds(function(e,t,r){Oo(e,t,r)});const Co=$f;var Pf="Expected a function";function Df(e){if(typeof e!="function")throw new TypeError(Pf);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function kf(e,t){return t=ze(t,e),e=Mf(e,t),e==null||delete e[Ve(So(t))]}function If(e){return X(e)?void 0:e}var Ff=1,Lf=2,Bf=4,Uf=Yc(function(e,t){var r={};if(e==null)return r;var n=!1;t=or(t,function(a){return a=ze(a,e),n||(n=a.length>1),a}),Be(e,Or(e),r),n&&(r=jt(r,Ff|Lf|Bf,If));for(var o=t.length;o--;)kf(r,t[o]);return r});const wo=Uf;function zf(e,t,r,n){if(!ie(e))return e;t=ze(t,e);for(var o=-1,a=t.length,s=a-1,i=e;i!=null&&++o<a;){var c=Ve(t[o]),l=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(o!=s){var f=i[c];l=n?n(f,c,i):void 0,l===void 0&&(l=ie(f)?f:Pt(t[o+1])?[]:{})}lr(i,c,l),i=i[c]}return e}function Vf(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var s=t[n],i=Lt(e,s);r(i,s)&&zf(a,ze(s,e),i)}return a}function Gf(e,t){if(e==null)return{};var r=or(Or(e),function(n){return[n]});return t=Ar(t),Vf(e,r,function(n,o){return t(n,o[0])})}function Wf(e,t){return Gf(e,Df(Ar(t)))}var Hf=1/0,Yf=Ge&&1/xr(new Ge([,-0]))[1]==Hf?function(e){return new Ge(e)}:Wi;const Jf=Yf;var qf=200;function Qf(e,t,r){var n=-1,o=as,a=e.length,s=!0,i=[],c=i;if(r)s=!1,o=Tf;else if(a>=qf){var l=t?null:Jf(e);if(l)return xr(l);s=!1,o=vo,c=new Et}else c=t?[]:i;e:for(;++n<a;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,s&&d===d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),i.push(f)}else o(c,d,r)||(c!==i&&c.push(d),i.push(f))}return i}var Xf=Tn(function(e){var t=So(e);return Mr(t)&&(t=void 0),Qf(br(e,1,Mr,!0),Ar(t))});const Kf=Xf;class xo extends TypeError{constructor(t,r){let n;const{message:o,...a}=t,{path:s}=t,i=s.length===0?o:`At path: ${s.join(".")} -- ${o}`;super(i),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...r()])}}function Zf(e){return ce(e)&&typeof e[Symbol.iterator]=="function"}function ce(e){return typeof e=="object"&&e!=null}function Z(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function ed(e){const{done:t,value:r}=e.next();return t?void 0:r}function td(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:o,branch:a}=t,{type:s}=r,{refinement:i,message:c=`Expected a value of type \`${s}\`${i?` with refinement \`${i}\``:""}, but received: \`${Z(n)}\``}=e;return{value:n,type:s,refinement:i,key:o[o.length-1],path:o,branch:a,...e,message:c}}function*Ro(e,t,r,n){Zf(e)||(e=[e]);for(const o of e){const a=td(o,t,r,n);a&&(yield a)}}function*Pr(e,t,r){r===void 0&&(r={});const{path:n=[],branch:o=[e],coerce:a=!1,mask:s=!1}=r,i={path:n,branch:o};if(a&&(e=t.coercer(e,i),s&&t.type!=="type"&&ce(t.schema)&&ce(e)&&!Array.isArray(e)))for(const l in e)t.schema[l]===void 0&&delete e[l];let c="valid";for(const l of t.validator(e,i))c="not_valid",yield[l,void 0];for(let[l,f,d]of t.entries(e,i)){const p=Pr(f,d,{path:l===void 0?n:[...n,l],branch:l===void 0?o:[...o,f],coerce:a,mask:s});for(const v of p)v[0]?(c=v[0].refinement!=null?"not_refined":"not_valid",yield[v[0],void 0]):a&&(f=v[1],l===void 0?e=f:e instanceof Map?e.set(l,f):e instanceof Set?e.add(f):ce(e)&&(f!==void 0||l in e)&&(e[l]=f))}if(c!=="not_valid")for(const l of t.refiner(e,i))c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,e])}class de{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:r,schema:n,validator:o,refiner:a,coercer:s=c=>c,entries:i=function*(){}}=t;this.type=r,this.schema=n,this.entries=i,this.coercer=s,o?this.validator=(c,l)=>{const f=o(c,l);return Ro(f,l,this,c)}:this.validator=()=>[],a?this.refiner=(c,l)=>{const f=a(c,l);return Ro(f,l,this,c)}:this.refiner=()=>[]}assert(t){return No(t,this)}create(t){return rd(t,this)}is(t){return od(t,this)}mask(t){return nd(t,this)}validate(t,r){return r===void 0&&(r={}),We(t,this,r)}}function No(e,t){const r=We(e,t);if(r[0])throw r[0]}function rd(e,t){const r=We(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function nd(e,t){const r=We(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function od(e,t){return!We(e,t)[0]}function We(e,t,r){r===void 0&&(r={});const n=Pr(e,t,r),o=ed(n);return o[0]?[new xo(o[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function Dr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t[0].type==="type",o=t.map(s=>s.schema),a=Object.assign({},...o);return n?$o(a):T(a)}function Ee(e,t){return new de({type:e,schema:null,validator:t})}function He(e){return new de({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)},refiner(t,r){return e(t,r).refiner(t,r)}})}function Ao(e,t){const{schema:r}=e,n={...r};for(const o of t)delete n[o];switch(e.type){case"type":return $o(n);default:return T(n)}}function V(){return Ee("any",()=>!0)}function B(e){return new de({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Z(t)}`}})}function me(){return Ee("boolean",e=>typeof e=="boolean")}function kr(e){const t={},r=e.map(n=>Z(n)).join();for(const n of e)t[n]=n;return new de({type:"enums",schema:t,validator(n){return e.includes(n)||`Expected one of \`${r}\`, but received: ${Z(n)}`}})}function To(){return Ee("func",e=>typeof e=="function"||`Expected a function, but received: ${Z(e)}`)}function K(e){const t=Z(e),r=typeof e;return new de({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||`Expected the literal \`${t}\`, but received: ${Z(n)}`}})}function ad(){return Ee("never",()=>!1)}function Mo(){return Ee("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${Z(e)}`)}function T(e){const t=e?Object.keys(e):[],r=ad();return new de({type:"object",schema:e||null,*entries(n){if(e&&ce(n)){const o=new Set(Object.keys(n));for(const a of t)o.delete(a),yield[a,n[a],e[a]];for(const a of o)yield[a,n[a],r]}},validator(n){return ce(n)||`Expected an object, but received: ${Z(n)}`},coercer(n){return ce(n)?{...n}:n}})}function b(e){return new de({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function Ot(e,t){return new de({type:"record",schema:null,*entries(r){if(ce(r))for(const n in r){const o=r[n];yield[n,n,e],yield[n,o,t]}},validator(r){return ce(r)||`Expected an object, but received: ${Z(r)}`}})}function m(){return Ee("string",e=>typeof e=="string"||`Expected a string, but received: ${Z(e)}`)}function $o(e){const t=Object.keys(e);return new de({type:"type",schema:e,*entries(r){if(ce(r))for(const n of t)yield[n,r[n],e[n]]},validator(r){return ce(r)||`Expected an object, but received: ${Z(r)}`}})}function Y(e){const t=e.map(r=>r.type).join(" | ");return new de({type:"union",schema:null,coercer(r,n){return(e.find(o=>{const[a]=o.validate(r,{coerce:!0});return!a})||id()).coercer(r,n)},validator(r,n){const o=[];for(const a of e){const[...s]=Pr(r,a,n),[i]=s;if(i[0])for(const[c]of s)c&&o.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Z(r)}`,...o]}})}function id(){return Ee("unknown",()=>!0)}const Ir=T({package:m(),version:m(),exportName:m(),destructuring:b(me()),subName:b(m()),main:b(m())}),sd=B(Ir),cd=["CBlock","CContainer","CImage","CCanvas","CVideo","CAudio","CText","CNativeTag"];var re=(e=>(e.SLOT="SLOT",e.FUNCTION="FUNCTION",e.EXPRESSION="EXPRESSION",e))(re||{}),Fr=(e=>(e.DESIGN="design",e.SAVE="save",e))(Fr||{}),Lr=(e=>(e.FUNC="FUNC",e.COMP="COMP",e))(Lr||{});const ud=()=>Ee("normalObj",e=>!X(e)||[re.SLOT,re.EXPRESSION,re.FUNCTION].includes(e==null?void 0:e.type)?!1:(We(e,Ot(m(),Br)),!0)),Br=Y([m(),Mo(),me(),T({type:K(re.SLOT),renderType:kr([Lr.FUNC,Lr.COMP]),params:b(B(m())),value:He(()=>Y([Ye,B(Ye)]))}),T({type:K(re.EXPRESSION),value:m()}),T({type:K(re.FUNCTION),value:m()}),ud(),B(He(()=>Br))]),Po=T({type:K(re.EXPRESSION),value:m()}),Ye=T({id:b(m()),title:b(m()),componentName:m(),props:b(Ot(m(),Br)),stateName:b(m()),state:b(Ot(m(),V())),children:He(()=>b(B(Y([m(),Ye])))),configure:b(V()),css:b(V()),style:b(V()),classNames:b(B(V())),refId:b(m()),extra:b(Ot(V(),V())),condition:b(Y([me(),Po])),tempDevConfig:b(V()),loop:b(T({open:me(),data:Y([B(V()),Po]),args:b(B(m())),forName:b(m()),forIndex:b(m()),key:b(V()),name:b(m())}))}),zt=Y([m(),T({label:m(),tip:b(m())})]),ld=T({type:K("shape"),value:B(T({name:m(),title:zt,valueType:He(()=>Vt)}))}),fd=T({type:K("enums"),value:B(m())});T({type:K("array"),value:He(()=>Vt)});const dd=T({type:K("array"),value:He(()=>B(Vt))}),Vt=Y([kr(["array","boolean","number","object","string"]),kr(["component","expression","function"]),ld,fd,dd]),pd=Y([m(),T({componentName:m(),props:b(V()),initialValue:b(V()),component:b(V())})]),Ur=T({name:m(),title:zt,valueType:Vt,description:b(m()),defaultValue:V(),setters:b(B(pd)),condition:b(To())}),hd=Y([m(),To()]);var zr=(e=>(e.SINGLE="single",e.GROUP="group",e))(zr||{});Y([m(),T({name:m(),describe:b(m()),params:b(T({name:m(),description:m()})),template:m()})]);const vd=T({id:b(m()),title:m(),snapshot:Y([m(),V()]),snapshotText:b(m()),description:b(m()),tags:b(B(m())),groupName:b(m()),category:b(m()),schema:Dr(Ao(Ye,["id"]),T({componentName:b(m())}))}),yd=T({componentName:m(),title:m(),screenshot:b(m()),icon:b(m()),tags:b(B(m())),groupName:b(m()),category:b(m()),priority:b(Mo()),npm:b(Ir),snippets:B(vd),props:B(Y([Ur,T({title:b(zt),type:K("single"),content:Ur}),T({title:b(zt),type:K("group"),content:B(Ur)})])),fixedProps:b(V()),isContainer:b(Y([me(),T({placeholder:m(),width:m(),height:m()})])),isModal:b(Y([me(),T({visibleKey:m()})])),isSupportStyle:b(me()),isSupportDispatchNativeEvent:b(me()),isLayout:b(me()),rootSelector:b(m()),selectionToolBars:b(B(hd)),extra:b(Ot(V(),V()))}),md=e=>({data:t,message:r,throwError:n})=>{const o=e({data:t,message:r,throwError:n});if(o.isValidate)return o;if(n)throw o.message||r?new Error(`${o.message||r}
 originData: ${JSON.stringify(t)}`):new Error(`${JSON.stringify(t)} 
 data struct format is invalidate`);return o},Vr=e=>{const{data:t,message:r,throwError:n,dataStruct:o}=e;return md(({data:a})=>{try{return No(a,o),{isValidate:!0}}catch(s){let i=s;return s instanceof xo&&(i=s.failures().map(c=>`【${c.path.join(".")}】: ${c.message}
`)),{isValidate:!1,message:i,error:s}}})({data:t,message:r,throwError:n})};var Je=(e=>(e.ROOT_CONTAINER="RootContainer",e))(Je||{});const gd=T({type:K(re.FUNCTION),value:m()}),bd=Dr(Ao(Ye,["componentName"]),T({componentName:K("RootContainer")}));function _d(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(o){o(r)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,r)})}}}const St=_d(),jd=(e,t)=>{const r={...e,value:[]},n=e.value;let o=new Me([]);return t&&(o=t.materialsMode||new Me([])),n&&(L(n)?r.value=n.map(a=>new F(a,{parent:t,materials:o})):X(n)&&r.value.push(new F(n,{parent:t,materials:o}))),r};class qe{constructor(t,r){w(this,"nodeType","SLOT"),w(this,"rawData"),w(this,"parent"),w(this,"emitter",St),w(this,"data"),w(this,"id"),w(this,"materialsMode"),this.parent=(r==null?void 0:r.parent)||null,this.rawData=t;const n=(r==null?void 0:r.materials)||new Me([]);this.materialsMode=n,this.id=pe(),this.data=jd(t,this)}get value(){return this.data}export(t){const r=this.data,n=o=>{if(o instanceof F)return o.export(t);if(X(o)){const a={};return Object.keys(o||{}).forEach(s=>{a[s]=n(o[s])}),a}return L(o)?o.map(a=>n(a)):(t==="design"&&delete o.id,o)};return n(r)}}const Do=e=>{let t=[];return e.forEach(r=>{const n=r;n.type?n.type===zr.SINGLE?t.push(n.content):n.type===zr.GROUP&&(t=[...t,...Do(n.content)]):t.push(r)}),t},Gr=(e,t,r)=>{if(e.type)return e.type===re.SLOT?new qe(e,{parent:t,materials:r}):e;if(X(e)){const n={};return Object.keys(e).forEach(o=>{n[o]=Wr(e[o],t,r)}),n}else return Array.isArray(e)?e.map(n=>Gr(n,t,r)):e},Wr=(e,t,r)=>X(e)?Gr(e,t,r):L(e)?e.map(n=>Gr(n,t,r)):e;class Oe{constructor(t,r,n){w(this,"nodeType","PROP"),w(this,"rawData"),w(this,"parent"),w(this,"emitter",St),w(this,"data"),w(this,"name"),w(this,"materialsMode");const o=(n==null?void 0:n.materials)||new Me([]);this.materialsMode=o,this.parent=n==null?void 0:n.parent,this.rawData=r,this.name=t,this.data=Wr(r,this,o)}isIncludeSlot(){return!1}isIncludeExpression(){return!1}get value(){return this.data}updateValue(t){const r=this.data;this.data=Wr(t??r,this,this.materialsMode),this.emitter.emit("onPropChange",{value:this.data,preValue:r,node:this}),this.parent&&!(this.parent instanceof qe)&&this.emitter.emit("onNodeChange",{value:this.parent.value,preValue:this.parent.value,node:this.parent})}get material(){const t=this.parent;if(t instanceof F){const r=t.material;return Do((r==null?void 0:r.value.props)||[]).find(n=>n.name===this.name)}else return null}export(t){const r=this.data,n=o=>{if(o instanceof Oe||o instanceof qe||o instanceof F)return o.export(t);if(L(o))return o.map(a=>n(a));if(X(o)){const a={};return Object.keys(o||{}).forEach(s=>{a[s]=n(o[s])}),a}return o};return n(r)}}const Ed=e=>{if(typeof e=="string")return!0;Vr({data:e,dataStruct:Ye,throwError:!0})},ko=(e,t,r=new Me([]))=>{var n;if(typeof e=="string")return e;const o={...e,id:(n=e.id)!=null?n:pe(),children:[],props:{},configure:Co(e.configure||{},{propsSetter:{},advanceSetter:{}})},a=Object.keys(e.props||{});return a.length&&a.forEach(s=>{var i;const c=(i=e.props)==null?void 0:i[s];if(c instanceof Oe){o.props[s]=c;return}o.props[s]=new Oe(s,c||"",{parent:t,materials:r})}),e.children&&(Array.isArray(e.children)?o.children=e.children.map(s=>{if(s instanceof F)return s;if(X(s)){const i=s;return new F(i,{parent:t,materials:r})}else return s}):(e.children instanceof F&&(o.children=[e.children]),o.children=[new F(e.children,{parent:t,materials:r})])),o};class F{constructor(t,r){w(this,"nodeType","NODE"),w(this,"rawData"),w(this,"data"),w(this,"emitter",St),w(this,"parent"),w(this,"materialsModel"),w(this,"listenerHandle"),w(this,"onChangeCbQueue"),this.rawData=JSON.parse(JSON.stringify(t)),Ed(t);const n=(r==null?void 0:r.materials)||new Me([]);this.parent=(r==null?void 0:r.parent)||null,this.materialsModel=n,this.data=ko(t,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener()}registerListener(){const t=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",t),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",t)})}onChange(t){return this.onChangeCbQueue.push(t),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==t)}}destroy(){this.listenerHandle.forEach(t=>t())}get id(){return this.data.id}get value(){return this.data}clone(t){const r={...this.export("design"),id:t||pe()};return new F(r,{materials:this.materialsModel})}updateValue(t){const r=this.data,n={...this.data,...t};this.data=ko(n,this),this.emitter.emit("onNodeChange",{value:n,preValue:r,node:this})}contains(t){return Jr(this,t)}get props(){return this.data.props}get material(){const t=this.materialsModel;return t==null?void 0:t.findByComponentName(this.data.componentName)}getPlainProps(){const t=this.data,r={};return Object.keys(t.props||{}).forEach(n=>{r[n]=t.props[n].export("design")}),r}export(t){var r;const n=this.data;if(typeof n=="string")return n;const o={};Object.keys(n.props||{}).forEach(f=>{o[f]=n.props[f].export(t)});const a=(r=n.children)==null?void 0:r.map(f=>f instanceof F?f.export(t):f),s=n.configure||{},i=s.propsSetter||{},c={};Object.keys(i).forEach(f=>{const d=Un(i,f,!1);d&&(c[f]=d)}),s.propsSetter=c,this.material&&this.materialsModel.usedMaterials.push(this.material);let l={...n,configure:s,props:o,children:a};return t==="design"&&delete l.id,l=Yr(l),l}}const Io=(e,t,r)=>{const n={...e,id:pe(),props:{},componentName:Je.ROOT_CONTAINER,children:[],configure:Co(e.configure||{},{propsSetter:{},advanceSetter:{}})};let o=[];L(e.children)?o=e.children.map(s=>s instanceof F?s:X(s)?new F(s,{parent:t,materials:r}):s):e.children instanceof F?o.push(e.children):e.children&&X(e.children)&&o.push(new F(e.children,{parent:t,materials:r}));const a=Object.keys(e.props||{});return a.length&&a.forEach(s=>{var i;const c=(i=e.props)==null?void 0:i[s];c instanceof Oe?n.props[s]=c:n.props[s]=new Oe(s,c||"",{parent:t,materials:r})}),n.children=o,n};class Ct{constructor(t,{parent:r,materials:n}){w(this,"rawData"),w(this,"data"),w(this,"nodeType",Je.ROOT_CONTAINER),w(this,"emitter",St),w(this,"materialsModel"),w(this,"listenerHandle"),w(this,"onChangeCbQueue"),w(this,"parent"),this.materialsModel=n,this.rawData=JSON.parse(JSON.stringify(t)),this.data=Io(t,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener(),this.parent=r}registerListener(){const t=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",t),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",t)})}onChange(t){return this.onChangeCbQueue.push(t),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==t)}}get id(){return this.data.id}get value(){return this.data}get props(){return this.data.props}get material(){const t=this.materialsModel;return t==null?void 0:t.findByComponentName(this.data.componentName)}updateValue(t){const r=this.data,n={...this.data,...t};this.data=Io(n,this,this.materialsModel),this.emitter.emit("onNodeChange",{value:this.data,preValue:r,node:this})}contains(t){return Jr(this,t)}export(t=Fr.SAVE){var r;const n=this.data,o={};Object.keys(n.props||{}).forEach(c=>{o[c]=n.props[c].export(t)});const a=((r=n.children)==null?void 0:r.map(c=>{var l;return(l=c==null?void 0:c.export)==null?void 0:l.call(c,t)}))||[],s={...n,props:o,children:a.filter(c=>c)};let i=wo(s,["id"]);return i=Yr(i),i}getPlainProps(){const t=this.data,r={};return Object.keys(t.props||{}).forEach(n=>{r[n]=t.props[n].export("design")}),r}destroy(){this.listenerHandle.forEach(t=>t())}clone(t){const r={...this.export("design"),id:t||pe()};return new Ct(r,{materials:this.materialsModel,parent:null})}}const Te=e=>(e==null?void 0:e.type)===re.EXPRESSION,Od=e=>(e==null?void 0:e.type)==re.FUNCTION,pe=()=>Math.random().toString(32).slice(3,9),Sd=e=>(e==null?void 0:e.nodeType)==="NODE",Hr=e=>(e==null?void 0:e.nodeType)==="PROP",Cd=e=>(e==null?void 0:e.nodeType)==="SLOT",Yr=e=>Wf(e,t=>X(t)?!Object.keys(t).length:L(t)?!t.length:!t);function Jr(e,t){const r=[e];for(;r.length;){const n=r.shift();if((n==null?void 0:n.id)===t)return n;const o=(n==null?void 0:n.props)||{},a=i=>{if(i instanceof F){r.push(i);return}if(i instanceof qe&&a(i.value.value),i instanceof Oe){a(i.value);return}if(X(i)){const c=i;Object.keys(c).map(l=>{a(c[l])});return}if(L(i)){i.forEach(c=>{a(c)});return}};a(o);const s=(n==null?void 0:n.value.children.filter(i=>i instanceof F))||[];r.push(...s)}return null}const wd=e=>{const t=ho(e),r=t.snippets;return delete t.snippets,t.snippets=r.map(n=>({...t,...n,id:n.id||`${e.componentName}-${pe()}`,title:n.title||e.title,category:n.category||e.category,tags:[...n.tags||[],...e.tags||[]],groupName:n.groupName||e.groupName,snapshot:n.snapshot||e.icon,snapshotText:n.snapshotText,schema:{...n.schema,componentName:n.schema.componentName||e.componentName}})),t};class xd{constructor(t){w(this,"rawData"),w(this,"data"),this.rawData=t,this.data=wd(t)}get value(){return this.data}get rawValue(){return this.rawData}get componentName(){return this.data.componentName}get snippets(){return this.data.snippets}getSnippetById(t){return this.data.snippets.find(r=>r.id===t)}}const Rd=e=>{if(!L(e))throw new Error("Materials must be a array");return e.map(t=>new xd(t))},Nd=e=>{e==null||e.forEach(t=>{Vr({data:t,dataStruct:yd,throwError:!0})})};class Me{constructor(t){w(this,"rawData"),w(this,"data"),w(this,"usedMaterials",[]),this.rawData=t,Nd(t),this.data=Rd(t)}findByComponentName(t){return this.data.find(r=>r.componentName===t)}findSnippetById(t){const r=[...this.data];let n=null;for(;!n&&r.length;){const o=r.pop();n=o==null?void 0:o.getSnippetById(t)}return n}getAllSnippets(){let t=this.data.reduce((a,s)=>(a.push(...s.snippets),a),[]);const r=[],n={default:[]};t=t.sort((a,s)=>(a.category||"")>(s.category||"")?1:-1),t.forEach(a=>{const s=a.groupName||"default";r.includes(s)||(r.push(s),n[s]=[]),n[s].push(a)});const o=[];return r.forEach(a=>{const s=["default"],i={default:[]},c=n[a];if(c.length!==0){c.forEach(d=>{const p=d.category||"default";s.includes(p)||(s.push(p),i[p]=[]),i[p].push(d)});const l=[];s.forEach(d=>{i[d].length&&l.push({name:d,list:i[d]})});const f={name:a,list:l};o.push(f)}}),o}get value(){return this.data}get rawValue(){return this.rawData}}const Ad=T({version:m(),name:m(),css:b(m()),renderType:b(Y([K("COMPONENT"),K("PAGE")])),methods:b(B(gd)),componentsMeta:B(Dr(T({componentName:m()}),Ir)),thirdLibs:b(sd),componentsTree:bd,assets:b(B(V()))}),Fo=e=>(Vr({data:e,dataStruct:Ad,throwError:!0}),e),qr=(e,t,r)=>({...e,componentsTree:new Ct(e.componentsTree,{parent:t,materials:r})});class Gt{constructor(t,r){w(this,"nodeType","PAGE"),w(this,"rawData"),w(this,"emitter",St),w(this,"data"),w(this,"parent"),w(this,"materialsModel"),w(this,"assetPackagesList"),Fo(t),this.assetPackagesList=(r==null?void 0:r.assetPackagesList)||[],this.rawData=JSON.parse(JSON.stringify(t)),this.materialsModel=new Me((r==null?void 0:r.materials)||[]),this.data=qr(t,this,this.materialsModel)}updatePage(t){const r=this.data;this.rawData=JSON.parse(JSON.stringify(t)),this.data=qr(t,this,this.materialsModel),this.emitter.emit("onPageChange",{value:this.data,preValue:r,node:this})}reloadPage(t){const r=this.data;this.rawData=JSON.parse(JSON.stringify(t)),this.data=qr(t,this,this.materialsModel),this.emitter.emit("onReloadPage",{value:this.data,preValue:r,node:this})}get value(){return this.data}getNode(t){const r=this.data.componentsTree;return Jr(r,t)}addNode(t,r,n="AFTER"){var o,a,s;if(n==="AFTER"||n==="BEFORE"){const i=r.parent;if(i===null&&r instanceof Ct)return console.warn("Not found parent node"),!1;if(i instanceof Oe)return console.warn("CProp can not add node"),!1;if(i instanceof qe){const l=i.value.value,f=(o=l.findIndex(d=>d===r))!=null?o:-1;return f>=0?(n==="BEFORE"?l.splice(f,0,t):l.splice(f+1,0,t),t.parent=i,(a=i.parent)==null||a.updateValue(),!0):!1}if(i instanceof Gt)return!1;const c=(s=i==null?void 0:i.value.children.findIndex(l=>l===r))!=null?s:-1;return c>=0?(n==="BEFORE"?i==null||i.value.children.splice(c,0,t):i==null||i.value.children.splice(c+1,0,t),t.parent=i,i==null||i.updateValue(),!0):(console.warn("Not found target node"),!1)}if(n==="CHILD_START")return r.value.children.unshift(t),t.parent=r,r.updateValue(),!0;if(n==="CHILD_END")return r.value.children.push(t),t.parent=r,r.updateValue(),!0;if(X(n)){const i=n;if(i.type==="CHILD"){const c=i.pos,l=i.index||0;return c==="BEFORE"?r==null||r.value.children.splice(l,0,t):r==null||r.value.children.splice(l+1,0,t),t.parent=r,r.updateValue(),!0}else console.warn("Can not parse pos obj")}return!1}createNode(t){return delete t.id,new F(t,{parent:null,materials:this.materialsModel})}addNodeById(t,r,n="AFTER"){const o=this.getNode(r);return o?this.addNode(t,o,n):(console.warn(`Not find a node by ${r}, pls check it`),!1)}copyNode(t){const r=t.export("design");r.id=pe();const n=new F(r,{parent:t.parent,materials:this.materialsModel});return this.addNode(n,t,"AFTER"),n}copyNodeById(t){const r=this.getNode(t);return r&&r instanceof F?this.copyNode(r):!1}moveNode(t,r,n){this.deleteNode(t);let o=r;return["AFTER","BEFORE"].includes(n)&&(o=r.parent),t.parent=o,this.addNode(t,r,n)}moveNodeById(t,r,n){const o=this.getNode(t),a=this.getNode(r);return o&&a&&o instanceof F&&a instanceof F?this.moveNode(o,a,n):!1}deleteNode(t){var r;const n=t.parent;if(!n)throw new Error("parent node is null or undefined, pls check it");if(n instanceof qe){const o=n.value.value,a=o.findIndex(i=>i===t),s=o[a];return o.splice(a,1),(r=n.parent)==null||r.updateValue(),s}if(n instanceof F||n instanceof Ct){const o=n.value.children,a=o.findIndex(i=>i===t),s=o[a];return o.splice(a,1),n.updateValue(),s}}deleteNodeById(t){const r=this.getNode(t);if(r)return this.deleteNode(r)}export(t=Fr.SAVE){var r;const n=this.data.componentsTree.export(t),o=this.assetPackagesList,a=[],s=this.materialsModel.usedMaterials.map(c=>{const l=o.find(f=>{var d;return f.package===((d=c.value.npm)==null?void 0:d.package)});return l&&a.push(l),{componentName:c.componentName,...ho(c.value.npm||{})}}).filter(c=>{if(c.componentName&&c.package&&c.version)return!0});this.materialsModel.usedMaterials=[];let i={...this.data,componentsTree:Yr(n),componentsMeta:s,thirdLibs:this.data.thirdLibs,assets:[]};return(r=this.data.thirdLibs)==null||r.forEach(c=>{const l=o.find(f=>{f.package,f.package});l&&a.push(l)}),i.assets=Kf(a,c=>c.package),i=wo(i,["id"]),JSON.parse(JSON.stringify(i))}}Je.ROOT_CONTAINER;var Td=typeof global=="object"&&global&&global.Object===Object&&global;const Lo=Td;var Md=typeof self=="object"&&self&&self.Object===Object&&self,$d=Lo||Md||Function("return this")();const Qe=$d;var Pd=Qe.Symbol;const Xe=Pd;var Bo=Object.prototype,Dd=Bo.hasOwnProperty,kd=Bo.toString,wt=Xe?Xe.toStringTag:void 0;function Id(e){var t=Dd.call(e,wt),r=e[wt];try{e[wt]=void 0;var n=!0}catch{}var o=kd.call(e);return n&&(t?e[wt]=r:delete e[wt]),o}var Fd=Object.prototype,Ld=Fd.toString;function Bd(e){return Ld.call(e)}var Ud="[object Null]",zd="[object Undefined]",Uo=Xe?Xe.toStringTag:void 0;function xt(e){return e==null?e===void 0?zd:Ud:Uo&&Uo in Object(e)?Id(e):Bd(e)}function Ke(e){return e!=null&&typeof e=="object"}var Vd="[object Symbol]";function Gd(e){return typeof e=="symbol"||Ke(e)&&xt(e)==Vd}function Wd(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Hd=Array.isArray;const Ze=Hd;var Yd=1/0,zo=Xe?Xe.prototype:void 0,Vo=zo?zo.toString:void 0;function Go(e){if(typeof e=="string")return e;if(Ze(e))return Wd(e,Go)+"";if(Gd(e))return Vo?Vo.call(e):"";var t=e+"";return t=="0"&&1/e==-Yd?"-0":t}function $e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Wo(e){return e}var Jd="[object AsyncFunction]",qd="[object Function]",Qd="[object GeneratorFunction]",Xd="[object Proxy]";function Qr(e){if(!$e(e))return!1;var t=xt(e);return t==qd||t==Qd||t==Jd||t==Xd}var Kd=Qe["__core-js_shared__"];const Xr=Kd;var Ho=function(){var e=/[^.]+$/.exec(Xr&&Xr.keys&&Xr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Zd(e){return!!Ho&&Ho in e}var ep=Function.prototype,tp=ep.toString;function rp(e){if(e!=null){try{return tp.call(e)}catch{}try{return e+""}catch{}}return""}var np=/[\\^$.*+?()[\]{}|]/g,op=/^\[object .+?Constructor\]$/,ap=Function.prototype,ip=Object.prototype,sp=ap.toString,cp=ip.hasOwnProperty,up=RegExp("^"+sp.call(cp).replace(np,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lp(e){if(!$e(e)||Zd(e))return!1;var t=Qr(e)?up:op;return t.test(rp(e))}function fp(e,t){return e==null?void 0:e[t]}function Kr(e,t){var r=fp(e,t);return lp(r)?r:void 0}var Yo=Object.create,dp=function(){function e(){}return function(t){if(!$e(t))return{};if(Yo)return Yo(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const pp=dp;function hp(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function vp(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var yp=800,mp=16,gp=Date.now;function bp(e){var t=0,r=0;return function(){var n=gp(),o=mp-(n-r);if(r=n,o>0){if(++t>=yp)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function _p(e){return function(){return e}}var jp=function(){try{var e=Kr(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Wt=jp;var Ep=Wt?function(e,t){return Wt(e,"toString",{configurable:!0,enumerable:!1,value:_p(t),writable:!0})}:Wo,Op=bp(Ep);const Sp=Op;var Cp=9007199254740991,wp=/^(?:0|[1-9]\d*)$/;function Jo(e,t){var r=typeof e;return t=t??Cp,!!t&&(r=="number"||r!="symbol"&&wp.test(e))&&e>-1&&e%1==0&&e<t}function Zr(e,t,r){t=="__proto__"&&Wt?Wt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Ht(e,t){return e===t||e!==e&&t!==t}var xp=Object.prototype,Rp=xp.hasOwnProperty;function Np(e,t,r){var n=e[t];(!(Rp.call(e,t)&&Ht(n,r))||r===void 0&&!(t in e))&&Zr(e,t,r)}function Ap(e,t,r,n){var o=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var i=t[a],c=n?n(r[i],e[i],i,r,e):void 0;c===void 0&&(c=e[i]),o?Zr(r,i,c):Np(r,i,c)}return r}var qo=Math.max;function Tp(e,t,r){return t=qo(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=qo(n.length-t,0),s=Array(a);++o<a;)s[o]=n[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=n[o];return i[t]=r(s),hp(e,this,i)}}function Mp(e,t){return Sp(Tp(e,t,Wo),e+"")}var $p=9007199254740991;function Qo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=$p}function en(e){return e!=null&&Qo(e.length)&&!Qr(e)}function Pp(e,t,r){if(!$e(r))return!1;var n=typeof t;return(n=="number"?en(r)&&Jo(t,r.length):n=="string"&&t in r)?Ht(r[t],e):!1}function Dp(e){return Mp(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,s&&Pp(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var i=r[n];i&&e(t,i,n,a)}return t})}var kp=Object.prototype;function Xo(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||kp;return e===r}function Ip(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Fp="[object Arguments]";function Ko(e){return Ke(e)&&xt(e)==Fp}var Zo=Object.prototype,Lp=Zo.hasOwnProperty,Bp=Zo.propertyIsEnumerable,Up=Ko(function(){return arguments}())?Ko:function(e){return Ke(e)&&Lp.call(e,"callee")&&!Bp.call(e,"callee")};const tn=Up;function zp(){return!1}var ea=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ta=ea&&typeof module=="object"&&module&&!module.nodeType&&module,Vp=ta&&ta.exports===ea,ra=Vp?Qe.Buffer:void 0,Gp=ra?ra.isBuffer:void 0,Wp=Gp||zp;const na=Wp;var Hp="[object Arguments]",Yp="[object Array]",Jp="[object Boolean]",qp="[object Date]",Qp="[object Error]",Xp="[object Function]",Kp="[object Map]",Zp="[object Number]",eh="[object Object]",th="[object RegExp]",rh="[object Set]",nh="[object String]",oh="[object WeakMap]",ah="[object ArrayBuffer]",ih="[object DataView]",sh="[object Float32Array]",ch="[object Float64Array]",uh="[object Int8Array]",lh="[object Int16Array]",fh="[object Int32Array]",dh="[object Uint8Array]",ph="[object Uint8ClampedArray]",hh="[object Uint16Array]",vh="[object Uint32Array]",k={};k[sh]=k[ch]=k[uh]=k[lh]=k[fh]=k[dh]=k[ph]=k[hh]=k[vh]=!0,k[Hp]=k[Yp]=k[ah]=k[Jp]=k[ih]=k[qp]=k[Qp]=k[Xp]=k[Kp]=k[Zp]=k[eh]=k[th]=k[rh]=k[nh]=k[oh]=!1;function yh(e){return Ke(e)&&Qo(e.length)&&!!k[xt(e)]}function mh(e){return function(t){return e(t)}}var oa=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Rt=oa&&typeof module=="object"&&module&&!module.nodeType&&module,gh=Rt&&Rt.exports===oa,rn=gh&&Lo.process,bh=function(){try{var e=Rt&&Rt.require&&Rt.require("util").types;return e||rn&&rn.binding&&rn.binding("util")}catch{}}();const aa=bh;var ia=aa&&aa.isTypedArray,_h=ia?mh(ia):yh;const sa=_h;var jh=Object.prototype,Eh=jh.hasOwnProperty;function Oh(e,t){var r=Ze(e),n=!r&&tn(e),o=!r&&!n&&na(e),a=!r&&!n&&!o&&sa(e),s=r||n||o||a,i=s?Ip(e.length,String):[],c=i.length;for(var l in e)(t||Eh.call(e,l))&&!(s&&(l=="length"||o&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Jo(l,c)))&&i.push(l);return i}function Sh(e,t){return function(r){return e(t(r))}}function Ch(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var wh=Object.prototype,xh=wh.hasOwnProperty;function Rh(e){if(!$e(e))return Ch(e);var t=Xo(e),r=[];for(var n in e)n=="constructor"&&(t||!xh.call(e,n))||r.push(n);return r}function ca(e){return en(e)?Oh(e,!0):Rh(e)}var Nh=Kr(Object,"create");const Nt=Nh;function Ah(){this.__data__=Nt?Nt(null):{},this.size=0}function Th(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Mh="__lodash_hash_undefined__",$h=Object.prototype,Ph=$h.hasOwnProperty;function Dh(e){var t=this.__data__;if(Nt){var r=t[e];return r===Mh?void 0:r}return Ph.call(t,e)?t[e]:void 0}var kh=Object.prototype,Ih=kh.hasOwnProperty;function Fh(e){var t=this.__data__;return Nt?t[e]!==void 0:Ih.call(t,e)}var Lh="__lodash_hash_undefined__";function Bh(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Nt&&t===void 0?Lh:t,this}function Pe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Pe.prototype.clear=Ah,Pe.prototype.delete=Th,Pe.prototype.get=Dh,Pe.prototype.has=Fh,Pe.prototype.set=Bh;function Uh(){this.__data__=[],this.size=0}function Yt(e,t){for(var r=e.length;r--;)if(Ht(e[r][0],t))return r;return-1}var zh=Array.prototype,Vh=zh.splice;function Gh(e){var t=this.__data__,r=Yt(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Vh.call(t,r,1),--this.size,!0}function Wh(e){var t=this.__data__,r=Yt(t,e);return r<0?void 0:t[r][1]}function Hh(e){return Yt(this.__data__,e)>-1}function Yh(e,t){var r=this.__data__,n=Yt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ge(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ge.prototype.clear=Uh,ge.prototype.delete=Gh,ge.prototype.get=Wh,ge.prototype.has=Hh,ge.prototype.set=Yh;var Jh=Kr(Qe,"Map");const ua=Jh;function qh(){this.size=0,this.__data__={hash:new Pe,map:new(ua||ge),string:new Pe}}function Qh(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Jt(e,t){var r=e.__data__;return Qh(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Xh(e){var t=Jt(this,e).delete(e);return this.size-=t?1:0,t}function Kh(e){return Jt(this,e).get(e)}function Zh(e){return Jt(this,e).has(e)}function ev(e,t){var r=Jt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function et(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}et.prototype.clear=qh,et.prototype.delete=Xh,et.prototype.get=Kh,et.prototype.has=Zh,et.prototype.set=ev;function la(e){return e==null?"":Go(e)}var tv=Sh(Object.getPrototypeOf,Object);const fa=tv;var rv="[object Object]",nv=Function.prototype,ov=Object.prototype,da=nv.toString,av=ov.hasOwnProperty,iv=da.call(Object);function tt(e){if(!Ke(e)||xt(e)!=rv)return!1;var t=fa(e);if(t===null)return!0;var r=av.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&da.call(r)==iv}function sv(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}function cv(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:sv(e,t,r)}var uv="\\ud800-\\udfff",lv="\\u0300-\\u036f",fv="\\ufe20-\\ufe2f",dv="\\u20d0-\\u20ff",pv=lv+fv+dv,hv="\\ufe0e\\ufe0f",vv="\\u200d",yv=RegExp("["+vv+uv+pv+hv+"]");function pa(e){return yv.test(e)}function mv(e){return e.split("")}var ha="\\ud800-\\udfff",gv="\\u0300-\\u036f",bv="\\ufe20-\\ufe2f",_v="\\u20d0-\\u20ff",jv=gv+bv+_v,Ev="\\ufe0e\\ufe0f",Ov="["+ha+"]",nn="["+jv+"]",on="\\ud83c[\\udffb-\\udfff]",Sv="(?:"+nn+"|"+on+")",va="[^"+ha+"]",ya="(?:\\ud83c[\\udde6-\\uddff]){2}",ma="[\\ud800-\\udbff][\\udc00-\\udfff]",Cv="\\u200d",ga=Sv+"?",ba="["+Ev+"]?",wv="(?:"+Cv+"(?:"+[va,ya,ma].join("|")+")"+ba+ga+")*",xv=ba+ga+wv,Rv="(?:"+[va+nn+"?",nn,ya,ma,Ov].join("|")+")",Nv=RegExp(on+"(?="+on+")|"+Rv+xv,"g");function Av(e){return e.match(Nv)||[]}function Tv(e){return pa(e)?Av(e):mv(e)}function Mv(e){return function(t){t=la(t);var r=pa(t)?Tv(t):void 0,n=r?r[0]:t.charAt(0),o=r?cv(r,1).join(""):t.slice(1);return n[e]()+o}}var $v=Mv("toUpperCase");const Pv=$v;function Dv(e){return Pv(la(e).toLowerCase())}function kv(){this.__data__=new ge,this.size=0}function Iv(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Fv(e){return this.__data__.get(e)}function Lv(e){return this.__data__.has(e)}var Bv=200;function Uv(e,t){var r=this.__data__;if(r instanceof ge){var n=r.__data__;if(!ua||n.length<Bv-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new et(n)}return r.set(e,t),this.size=r.size,this}function rt(e){var t=this.__data__=new ge(e);this.size=t.size}rt.prototype.clear=kv,rt.prototype.delete=Iv,rt.prototype.get=Fv,rt.prototype.has=Lv,rt.prototype.set=Uv;var _a=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ja=_a&&typeof module=="object"&&module&&!module.nodeType&&module,zv=ja&&ja.exports===_a,Ea=zv?Qe.Buffer:void 0,Oa=Ea?Ea.allocUnsafe:void 0;function Vv(e,t){if(t)return e.slice();var r=e.length,n=Oa?Oa(r):new e.constructor(r);return e.copy(n),n}var Gv=Qe.Uint8Array;const Sa=Gv;function Wv(e){var t=new e.constructor(e.byteLength);return new Sa(t).set(new Sa(e)),t}function Hv(e,t){var r=t?Wv(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Yv(e){return typeof e.constructor=="function"&&!Xo(e)?pp(fa(e)):{}}function Jv(e){return function(t,r,n){for(var o=-1,a=Object(t),s=n(t),i=s.length;i--;){var c=s[e?i:++o];if(r(a[c],c,a)===!1)break}return t}}var qv=Jv();const Qv=qv;function an(e,t,r){(r!==void 0&&!Ht(e[t],r)||r===void 0&&!(t in e))&&Zr(e,t,r)}function Xv(e){return Ke(e)&&en(e)}function sn(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Kv(e){return Ap(e,ca(e))}function Zv(e,t,r,n,o,a,s){var i=sn(e,r),c=sn(t,r),l=s.get(c);if(l){an(e,r,l);return}var f=a?a(i,c,r+"",e,t,s):void 0,d=f===void 0;if(d){var p=Ze(c),v=!p&&na(c),g=!p&&!v&&sa(c);f=c,p||v||g?Ze(i)?f=i:Xv(i)?f=vp(i):v?(d=!1,f=Vv(c,!0)):g?(d=!1,f=Hv(c,!0)):f=[]:tt(c)||tn(c)?(f=i,tn(i)?f=Kv(i):(!$e(i)||Qr(i))&&(f=Yv(c))):d=!1}d&&(s.set(c,f),o(f,c,n,a,s),s.delete(c)),an(e,r,f)}function Ca(e,t,r,n,o){e!==t&&Qv(t,function(a,s){if(o||(o=new rt),$e(a))Zv(e,t,s,r,Ca,n,o);else{var i=n?n(sn(e,s),a,s+"",e,t,o):void 0;i===void 0&&(i=a),an(e,s,i)}},ca)}var ey=Dp(function(e,t,r){Ca(e,t,r)});const ty=ey;function ry(e){const t=e.prototype;return!!(t&&t.isReactComponent)}function ny(e){var t,r;const n=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.forward_ref"):60112;return(e==null?void 0:e.$$typeof)===n||((t=e==null?void 0:e.prototype)==null?void 0:t.isReactComponent)||((r=e==null?void 0:e.prototype)==null?void 0:r.setState)||e._forwardRef}function oy(e){class t extends x.Component{render(){return x.createElement(e,this.props)}}return t.displayName=e.displayName,t}const nt=(e,t)=>{const r=n=>{const o=`
    ${Object.keys(t).map(a=>`const ${a} = $$context['${a}'];`).join(`
`)}
    return ${n};
    `;return new Function("$$context",o)(t)};try{return r(e)}catch(n){console.warn(n);const o=`[${e}] expression run failed`;return console.warn(o),null}},ay=(e,t,r)=>function(...n){try{const o=`
        var f = ${e};
        var args = Array.from(arguments);
        var __$$storeManager__ = args.pop();
        var $$context = args.pop();
        $$context.stateManager = __$$storeManager__.getStateSnapshot();
        return f.apply(f, args)
      `;new Function(o)(...n,t,r)}catch(o){console.warn(o)}},wa=(e,t)=>{const r={};return t.forEach((n,o)=>{r[n]=e[o]}),r},xa=e=>{const t={};return Object.keys(e).forEach(r=>{let n=r.replace("-webkit","Webkit");n=n.replace("-ms","ms"),n=n.replace("-moz","Moz"),n=n.replace("-o","O");let o=n.split("-");o.length>=2&&(o=o.map((a,s)=>s!==0?Dv(a):a)),t[o.join("")]=e[r]}),t},Ra=e=>{let t="";return Object.keys(e).forEach(r=>{t+=`${r}:${e[r]};`}),t},qt="DYNAMIC",iy=["$$context","$$nodeModel"],Na=e=>{let t;const r=new Set,n=(s,i)=>{const c=typeof s=="function"?s(t):s;if(!Object.is(c,t)){const l=t;t=i??typeof c!="object"?c:Object.assign({},t,c),r.forEach(f=>f(t,l))}},o=()=>t,a={setState:n,getState:o,subscribe:s=>(r.add(s),()=>r.delete(s)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return t=e(n,o,a),a},sy=e=>e?Na(e):Na;var cy=e=>(({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'."),sy(e));class uy{constructor(){E(this,"storeMap",new Map)}addStore(t,r){const n=cy(r);return this.storeMap.set(t,n),n.name=t,n}setStore(t,r){this.storeMap.set(t,r)}removeStore(t){this.storeMap.delete(t)}getStore(t){return this.storeMap.get(t)}connect(t,r){const n=this.storeMap.get(t);return n?n.subscribe(r):(console.warn("store not exits"),()=>{})}getStateSnapshot(){const t={};return this.storeMap.forEach((r,n)=>{t[n]={state:r.getState(),updateState:o=>{r.setState(o)}}}),t}destroy(){this.storeMap.forEach(t=>{t.destroy()}),this.storeMap=new Map}}class Aa{constructor(){E(this,"renderMode","normal"),E(this,"components",{}),E(this,"storeManager",new uy),E(this,"runtimeComponentCache",new Map),E(this,"onGetRef"),E(this,"onGetComponent"),E(this,"onComponentMount"),E(this,"onComponentDestroy"),E(this,"processNodeConfigHook")}getComponent(t){var r;const n=t.value.componentName;let o=this.components[n]||(()=>`Component [${n}] not found`);return ny(o)||(o=oy(o),this.components[n]=o),this.onGetComponent&&(o=(r=this.onGetComponent)==null?void 0:r.call(this,o,t)),o}getContext(t={},r){let n=t;return r&&(n={...t},n.__proto__=r||null),n}pageRender(t,{components:r,onGetRef:n,$$context:o={},onGetComponent:a,onComponentMount:s,onComponentDestroy:i,renderMode:c,processNodeConfigHook:l}){this.renderMode=c,this.components=r,this.onGetRef=n,this.onGetComponent=a,this.onComponentMount=s,this.onComponentDestroy=i,this.processNodeConfigHook=l;const f=t.value.componentsTree,d=this.getComponent(f),p=this.convertModelToComponent(d,t.value.componentsTree),v={},g=f.props;return Object.keys(g).forEach(j=>{v[j]=g[j].value}),v.$$context=o,this.render(p,v)}transformProps(t={},{$$context:r}){const n=t,o=s=>{if(Array.isArray(s))return s.map(i=>o(i));if(Hr(s))return o(s.value);if(Cd(s)){const i=s.value,c=i.value;if(!c)return console.warn("slot value is null, this maybe cause some error, pls check it",t),()=>{};const l=f=>{const d=`${f.id}-${qt}`;if(this.runtimeComponentCache.get(f.id))return{key:d,component:this.runtimeComponentCache.get(f.id)};const p=this.getComponent(f),v=this.convertModelToComponent(p,f),g=i.params||[];return{component:(...j)=>{const _=wa(j,g),S=this.getContext({params:_},r);return this.render(v,{$$context:S,key:d})},key:d}};if(Array.isArray(c)){const f=c==null?void 0:c.map(d=>l(d));return(...d)=>f.map(p=>ry(p.component)?x.createElement(p.component,{$$context:r,key:p.key}):p.component(...d))}else return l(c).component}else{if(Te(s))return nt(s.value,r||{});if(Od(s))return ay(s.value,r,this.storeManager);if(tt(s)){let i=s;Hr(s)&&(i=s.value);const c=i,l={};return Object.keys(i).forEach(f=>{l[f]=o(c[f])}),l}else return s}},a={};return Object.keys(n).forEach(s=>{const i=n[s];a[s]=o(i)}),a}collectSpecialProps(t={},r){const n=[],o=(a,s)=>{let i=s;Hr(s)&&(i=s.value),r(i)?n.push({keyPath:a,val:i}):Ze(i)?i.forEach((c,l)=>{o([...a,String(l)],c)}):tt(i)&&Object.keys(i).forEach(c=>{o([...a,c],i[c])})};return o(["$root"],t),n}convertModelToComponent(t,r){const n=this;class o extends x.Component{constructor(s){super(s),E(this,"_CONDITION",!0),E(this,"_DESIGN_BOX",!1),E(this,"_NODE_MODEL",r),E(this,"_NODE_ID",r.id),E(this,"UNIQUE_ID",`${r.id}_${pe()}`),E(this,"targetComponentRef"),E(this,"listenerHandle",[]),E(this,"storeState"),E(this,"staticState",{}),E(this,"storeListenDisposeLint",[]),E(this,"domHeader"),E(this,"mediaStyleDomMap",{}),E(this,"updateState",l=>{this.storeState.setState(l),this.forceUpdate()}),E(this,"getStyleDomById",l=>{const f=this.mediaStyleDomMap;let d=f[l];return d||(d=document.createElement("style"),d.type="text/css",f[l]=d),d.id=l,d}),E(this,"addMediaCSS",()=>{var l;let f=this.domHeader;if(f||(f=(l=document.getElementsByTagName("head"))==null?void 0:l[0],this.domHeader=f),!this.domHeader)return;const d=this._NODE_MODEL.value.css;!d||d.value.forEach(p=>{var v;const g=`${this.UNIQUE_ID}_${p.state}`;let j=`.${d.class}`;if(p.state!=="normal"&&(j=`${j}:${p.state}`),Object.keys(p.style).length!==0){const _=this.getStyleDomById(g);_.innerText=`${j} { ${Ra(p.style)} }`,f==null||f.appendChild(_)}(v=p.media)!=null&&v.length&&p.media.forEach(_=>{const S=`${g}_${_.type}_${_.value}`,C=this.getStyleDomById(S);C.media=`screen and (${_.type}:${_.value}px)`,C.innerHTML=`${j} { ${Ra(_.style)} }`,f==null||f.appendChild(C)})})}),E(this,"removeMediaCSS",()=>{const l=this.mediaStyleDomMap;Object.keys(l).forEach(f=>{var d;(d=this.domHeader)==null||d.removeChild(l[f])})}),E(this,"rebuildNode",()=>{this.storeListenDisposeLint.forEach(l=>l()),this.removeMediaCSS(),this.connectStore(),this.addMediaCSS(),this.forceUpdate()}),this.targetComponentRef=x.createRef(),this.state=r.value.state||{};const i=r.value.stateName||r.id,c=n.storeManager.getStore(i);c?(this.storeState=c,c.setState({...r.value.state||{}})):this.storeState=n.storeManager.addStore(i,()=>({...r.value.state||{}})),this.storeState.subscribe(l=>{this.setState({...l})}),this.connectStore()}connectStore(){const s=n.collectSpecialProps(r.props,d=>!!Te(d)),i=n.collectSpecialProps({css:r.value.css,class:r.value.classNames},d=>!!Te(d)),c=[...s,...i].map(d=>{const p=d.val,v=/\$\$context.stateManager\.(.+?)\./gim.exec(p.value);return v!=null&&v.length?v[1]:""}).filter(Boolean),l=Array.from(new Set(c)),f=[];l.length&&l.forEach(d=>{n.storeManager.getStore(d)||(n.storeManager.addStore(d,()=>({})),console.log(n.storeManager,d,"not exits"));const p=n.storeManager.connect(d,()=>{this.forceUpdate()});f.push(p)}),this.storeListenDisposeLint=f}componentDidMount(){var s;this.addMediaCSS(),n.onGetRef&&n.onGetRef(this.targetComponentRef,r,this),(s=n.onComponentMount)==null||s.call(n,this,r);const i=()=>{n.storeManager.setStore(r.value.stateName||r.id,this.storeState),this.storeState.setState({...this.state,...r.value.state||{}}),this.rebuildNode()};r.onChange(i)}componentWillUnmount(){var s;this.storeListenDisposeLint.forEach(i=>i()),this.removeMediaCSS(),(s=n.onComponentDestroy)==null||s.call(n,this,r)}render(){var s,i,c;const{$$context:l,...f}=this.props,d={key:r.id,...r.props,...f},p={state:this.state||{},updateState:this.updateState,staticState:this.staticState};r.value.componentName===Je.ROOT_CONTAINER&&(p.globalState=this.state,p.updateGlobalState=this.updateState),p.stateManager=n.storeManager.getStateSnapshot();const v=n.getContext(p,l),g=r.value.loop;let j=[];if(g&&g.open){this.targetComponentRef.current=[];let q=g.data||[];if(Te(g.data)){const H=g.data;q=nt(H.value,v||{})}return j=q.map((...H)=>{var he,De;const ne=H[1],_e=[g.forName||"item",g.forIndex||"index"],ke=wa(H,_e);let ot="loopData";g.name&&(ot=`${ot}${g.name}`);const Se=n.getContext({[ot]:ke,staticState:this.staticState},v),ee=n.transformProps(d,{$$context:Se}),Qt=((he=r.value.classNames)==null?void 0:he.map(oe=>{var Ce;const Fe=oe.name;return Te(oe.status)&&nt(String(((Ce=oe.status)==null?void 0:Ce.value)||""),Se)?Fe:""}))||[];let at=`${(De=ee.className)!=null?De:""} ${Qt.join(" ")}`.trim();r.value.css&&(at=`${r.value.css.class} ${at}`.trim()),ee.className=at;const Xt=n.transformProps(r.value.style,{$$context:Se});r.value.style&&(ee.style=xa(Xt||{}));const{children:Ie}=ee;let it=[];if(Ie!==void 0)delete ee.children,it=Array.isArray(Ie)?Ie:[Ie];else{const oe=[];r.value.children.forEach((Ce,Fe)=>{const At=n.buildComponent(Ce,{$$context:Se,idx:Fe});oe.push(At)}),it=oe}if(ee.key=`${ee.key}-${ne}`,Te(g.key)){const oe=g.key,Ce=nt(oe.value,Se||{});ee.key+=`-${Ce}`}return ee.ref=oe=>{this.targetComponentRef.current=this.targetComponentRef.current||[],this.targetComponentRef.current[ne]=oe},n.render(t,ee,...it)}),j}const _=n.transformProps(d,{$$context:v}),{children:S}=_;let C=[];if(S!==void 0)delete _.children,C=Array.isArray(S)?S:[S];else{const q=[];r.value.children.forEach((H,he)=>{const De=n.buildComponent(H,{$$context:v,idx:he});q.push(De)}),C=q}_.ref=this.targetComponentRef;const G=((s=r.value.classNames)==null?void 0:s.map(q=>{var H;const he=q.name;return Te(q.status)&&nt(((H=q.status)==null?void 0:H.value)||"",v)?he:""}))||[];let I=`${(i=_.className)!=null?i:""} ${G.join(" ")}`.trim();r.value.css&&(I=`${r.value.css.class} ${I}`.trim()),_.className=I;const W=n.transformProps(r.value.style,{$$context:v});r.value.style&&(_.style=xa(W||{}));let J=(c=r.value.condition)!=null?c:!0;typeof J!="boolean"&&(J=nt(J.value,v||{}));let ue={condition:J,props:_};n.processNodeConfigHook&&(ue=n.processNodeConfigHook(ue,r));const M=n.render(t,ue.props,...C);return this._CONDITION=ue.condition,ue.condition?M:Le("div",{style:{display:"none"},children:M})}}return E(o,"__CP_TYPE__",qt),o.displayName=`${r.value.componentName}Dynamic`,o}buildComponent(t,{$$context:r={}}){const n=this.runtimeComponentCache;return typeof t=="string"?this.render(t):Sd(t)?(({currentNode:o})=>{const a=o.value.id;let s=null;if(n.get(a))s=n.get(a);else{const l=this.getComponent(o);s=this.convertModelToComponent(l,o)}!n.get(a)&&this.renderMode!=="design"&&n.set(a,s);const i=`${a}-${qt}`,c={$$context:r,$$nodeModel:t,key:i};return this.render(s,c)})({currentNode:t}):void 0}render(t,r={},...n){return typeof t=="string"||typeof t=="number"?String(t):(iy.forEach(o=>{o in r&&t.__CP_TYPE__!==qt&&delete r[o]}),x.createElement(t,r,...n))}clear(){this.runtimeComponentCache.clear(),this.storeManager.destroy()}}const ly=gn(new Aa),fy=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],be=e=>{const t={};return e.forEach(r=>{t[r.key]=r.value}),t},dy=[...fy,...cd],py=dy.reduce((e,t)=>(e[t]=({children:r,$$attributes:n=[],...o})=>{let a=r;return Array.isArray(r)||(a=[r]),x.createElement(t,{...o,...be(n)},...a)},e),{}),hy=({children:e,width:t,height:r,$$attributes:n=[],...o})=>{let a=e;Array.isArray(e)||(a=[e]),a=a.filter(l=>l!==void 0);const{style:s={},...i}=be(n),c={height:r,width:t,...s,...o.style||{}};return x.createElement("div",{...o,...i,style:c},...a)},vy=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),x.createElement("canvas",{...r,...be(t)},...n)},yy=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),x.createElement("img",{...r,...be(t)},...n)},my=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),x.createElement("video",{...r,...be(t)},...n)},gy=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),x.createElement("video",{...r,...be(t)},...n)},by=({children:e,$$attributes:t=[],content:r,...n})=>Le("span",{...n,...be(t),children:r}),_y=({children:e,$$attributes:t=[],afterMount:r,beforeDestroy:n,...o})=>{let a=e;return Array.isArray(e)||(a=[e]),x.useEffect(()=>(r==null||r(o),()=>{n==null||n(o)}),[]),x.createElement("div",{...o,...be(t)},...a)},jy=({children:e,$$attributes:t=[],htmlTag:r="div",...n})=>{let o=e;return Array.isArray(e)||(o=[e]),x.createElement(r,{...n,...be(t)},...o)},Ey={RootContainer:({children:e})=>e,...py,CContainer:_y,CVideo:my,CAudio:gy,CBlock:hy,CImage:yy,CText:by,CCanvas:vy,CNativeTag:jy};class Oy{constructor(){E(this,"refMap",new Map)}get(t){return this.refMap.get(t)}add(t,r){this.refMap.set(t,r)}remove(t){this.refMap.delete(t)}destroy(){this.refMap.clear()}}class Ta extends x.Component{constructor(t){super(t),E(this,"refManager"),E(this,"dynamicComponentInstanceMap",new Map),E(this,"onGetRef",(r,n,o)=>{var a,s;(s=(a=this.props).onGetRef)==null||s.call(a,r,n,o),this.dynamicComponentInstanceMap.set(n.id,o),this.refManager.add(n.value.refId||n.id,r)}),E(this,"rerender",r=>{if(this.props.adapter.clear(),(r==null?void 0:r.nodeType)==="PAGE"&&r)this.setState({pageModel:r});else if(tt(r)&&Fo(r)){const n=r;this.setState({pageModel:new Gt(n,{materials:this.state.pageModel.materialsModel.rawValue})})}}),this.state={pageModel:t.pageModel||new Gt(t.page)},this.refManager=new Oy}getPageModel(){return this.state.pageModel}componentDidMount(){const{render:t}=this.props;t&&(t.ref.current=this)}componentWillUnmount(){this.refManager.destroy()}render(){const{props:t}=this,{adapter:r,onGetComponent:n,onComponentDestroy:o,onComponentMount:a}=t,{pageModel:s}=this.state;if(!s)return console.warn("pageModel is null"),null;const i={...Ey,...t.components};return r.pageRender(s,{libs:{},components:i,onGetRef:this.onGetRef,onGetComponent:n,onComponentMount:a,onComponentDestroy:o,$$context:{refs:this.refManager},renderMode:t.renderMode,processNodeConfigHook:t.processNodeConfigHook})}}const Sy=()=>{const e=x.useRef(null);return{ref:e,rerender:function(...t){e.current&&e.current.rerender(...t)}}};class Cy extends x.Component{constructor(t){super(t),E(this,"onDoubleClick",()=>{this.setState({hasError:!1,error:null})}),this.state={hasError:!1,error:""}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){var n,o;(o=(n=this.props).onError)==null||o.call(n,r)}render(){if(this.state.hasError){const{onDoubleClick:t}=this,r=this.props.node.value;console.error(this.props.node,this.props.children);const n=yn("div",{style:{backgroundColor:"rgb(255 206 215 / 13%)",padding:"5px",color:"#ff0000b0",textAlign:"center",fontSize:"12px"},children:["Render error, node id: ",r.id,", node name：",r.title," component name：",r.title||r.componentName,yn("p",{children:["msg: ",String(this.state.error)]}),Le("button",{onDoubleClick:t,style:{border:"1px solid rgba(100,100,100,0.1)",backgroundColor:"#fff",padding:"5px 10px",borderRadius:"2px",color:"gray",cursor:"pointer",marginTop:"5px"},children:"double click to refresh"}),Le("div",{style:{display:"none"}})]});return x.createElement(this.props.targetComponent,{onlyRenderChild:!0},n)}return this.props.children}}class Ma{constructor(){E(this,"instanceMap",new Map)}get(t){return this.instanceMap.get(t)}add(t,r){const n=this.instanceMap.get(t);n?n.push(r):this.instanceMap.set(t,[r])}remove(t,r){const n=this.instanceMap.get(t);if(r!==void 0&&Array.isArray(n)){const o=n.filter(a=>a!==r);this.instanceMap.set(t,o)}else this.instanceMap.delete(t)}destroy(){this.instanceMap.clear()}}const $a=e=>{const{node:t}=e,r=x.useMemo(()=>{var i,c;const l=(c=(i=t.material)==null?void 0:i.value)==null?void 0:c.isContainer;return tt(l)?l:{placeholder:"Drag the component to place it",width:"100%",height:"100%",style:{}}},[e.node]),{placeholder:n,height:o,width:a,style:s}=r;return Le("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(200,200,200,0.1)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"2px",fontSize:"14px",color:"gray",cursor:"default",minWidth:"300px",minHeight:"50px",width:a,height:o,...s},children:n})};class wy extends x.Component{constructor(t){super(t),E(this,"instanceManager",new Ma),E(this,"renderRef"),E(this,"dropPlaceholder",$a),E(this,"onGetComponent",(r,n)=>{const o=this;class a extends x.Component{constructor(){super(...arguments),E(this,"_DESIGN_BOX",!0),E(this,"_NODE_MODEL",n),E(this,"_NODE_ID",n.id),E(this,"_UNIQUE_ID",`${n.id}_${pe()}`),E(this,"_STATUS")}componentDidMount(){o.instanceManager.add(n.id,this)}componentWillUnmount(){this._STATUS="DESTROY",o.instanceManager.remove(n.id,this)}render(){var i;const{children:c=[],onlyRenderChild:l,...f}=this.props;let d=c;return Ze(c)||(d=[c]),!d.filter(Boolean).length&&((i=n.material)!=null&&i.value.isContainer||n.value.componentName===Je.ROOT_CONTAINER)&&d.push(x.createElement(o.dropPlaceholder,{node:n})),l?d:x.createElement(r,f,...d)}}return x.forwardRef(function(s,i){return x.createElement(Cy,{node:n,targetComponent:a},x.createElement(a,{ref:i,...s}))})}),this.renderRef=x.createRef(),t.dropPlaceholder&&(this.dropPlaceholder=t.dropPlaceholder)}componentDidMount(){var t,r;(r=(t=this.props).onMount)==null||r.call(t,this)}getPageModel(){var t;return(t=this.renderRef.current)==null?void 0:t.state.pageModel}rerender(t){var r;return(r=this.renderRef.current)==null?void 0:r.rerender(t)}getInstancesById(t,r){let n=[...this.instanceManager.get(t)||[]];return r!==void 0&&(n=n.filter(o=>r===(o==null?void 0:o._UNIQUE_ID))),n}getInstanceByDom(t){const r=Pa(t);if(!r)return null;const n=Da(r);return(n==null?void 0:n.stateNode)||null}getDomsById(t,r){const n=this.getInstancesById(t),o=[];return n==null||n.forEach(a=>{if((a==null?void 0:a._STATUS)==="DESTROY")return;const s=Za.findDOMNode(a);if(s&&!(s instanceof Text))if(r){const i=Array.from(s.querySelectorAll(r));o.push(...i)}else o.push(s)}),o}getDomRectById(t,r){return this.getDomsById(t,r).map(n=>n==null?void 0:n.getBoundingClientRect()).filter(Boolean)}render(){const{props:t,onGetComponent:r}=this,{render:n,...o}=t;return n&&(n.ref.current=this),Le(Ta,{onGetComponent:r,...o,processNodeConfigHook:(a,s)=>{var i,c;if(s.nodeType!=="NODE")return a;const{props:l,condition:f}=a;let d={...l};const p=((i=s.value.configure)==null?void 0:i.devState)||{},v=(c=s.material)==null?void 0:c.value.fixedProps;if(v!==void 0){if(tt(v))d={...d,...v};else if(typeof v=="function"){const j=v(d);d={...d,...j}}}let g=f;return p.condition===!1&&(g=p.condition),{props:ty(d,p.props||{}),condition:g}},ref:this.renderRef})}}const Pa=e=>{if(!e)return null;const t=Object.keys(e).find(r=>r.startsWith("__reactInternalInstance$")||r.startsWith("__reactFiber$"))||"";return t?e[t]:Pa(e.parentElement)},Da=e=>{var t;return e?(t=e==null?void 0:e.stateNode)!=null&&t._DESIGN_BOX?e:Da(e.return):null},xy=()=>{const e=x.useRef(null);return{ref:e,rerender:function(...t){e.current&&e.current.rerender(...t)},getInstancesById(t,r){var n;return((n=e.current)==null?void 0:n.getInstancesById(t,r))||[]},getInstanceByDom(t){var r;return((r=e.current)==null?void 0:r.getInstanceByDom(t))||null},getDomsById(t,r){var n;return((n=e.current)==null?void 0:n.getDomsById(t,r))||[]},getDomRectById(t,r){var n;return((n=e.current)==null?void 0:n.getDomRectById(t,r))||[]}}};var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ka={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Ry,function(){var r=function(){},n={},o={},a={};function s(p,v){p=p.push?p:[p];var g=[],j=p.length,_=j,S,C,G,I;for(S=function(W,J){J.length&&g.push(W),_--,_||v(g)};j--;){if(C=p[j],G=o[C],G){S(C,G);continue}I=a[C]=a[C]||[],I.push(S)}}function i(p,v){if(p){var g=a[p];if(o[p]=v,!!g)for(;g.length;)g[0](p,v),g.splice(0,1)}}function c(p,v){p.call&&(p={success:p}),v.length?(p.error||r)(v):(p.success||r)(p)}function l(p,v,g,j){var _=document,S=g.async,C=(g.numRetries||0)+1,G=g.before||r,I=p.replace(/[\?|#].*$/,""),W=p.replace(/^(css|img|module|nomodule)!/,""),J,ue,M;if(j=j||0,/(^css!|\.css$)/.test(I))M=_.createElement("link"),M.rel="stylesheet",M.href=W,J="hideFocus"in M,J&&M.relList&&(J=0,M.rel="preload",M.as="style");else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(I))M=_.createElement("img"),M.src=W;else if(M=_.createElement("script"),M.src=W,M.async=S===void 0?!0:S,ue="noModule"in M,/^module!/.test(I)){if(!ue)return v(p,"l");M.type="module"}else if(/^nomodule!/.test(I)&&ue)return v(p,"l");M.onload=M.onerror=M.onbeforeload=function(q){var H=q.type[0];if(J)try{M.sheet.cssText.length||(H="e")}catch(he){he.code!=18&&(H="e")}if(H=="e"){if(j+=1,j<C)return l(p,v,g,j)}else if(M.rel=="preload"&&M.as=="style")return M.rel="stylesheet";v(p,H,q.defaultPrevented)},G(p,M)!==!1&&_.head.appendChild(M)}function f(p,v,g){p=p.push?p:[p];var j=p.length,_=j,S=[],C,G;for(C=function(I,W,J){if(W=="e"&&S.push(I),W=="b")if(J)S.push(I);else return;j--,j||v(S)},G=0;G<_;G++)l(p[G],C,g)}function d(p,v,g){var j,_;if(v&&v.trim&&(j=v),_=(j?g:v)||{},j){if(j in n)throw"LoadJS";n[j]=!0}function S(C,G){f(p,function(I){c(_,I),C&&c({success:C,error:G},I),i(j,I)},_)}if(_.returnPromise)return new Promise(S);S()}return d.ready=function(p,v){return s(p,function(g){c(v,g)}),d},d.done=function(p){i(p,[])},d.reset=function(){n={},o={},a={}},d.isDefined=function(p){return p in n},d})})(ka);const Ia=ka.exports;class Ny{constructor(t,r){E(this,"assets"),E(this,"loadStatus"),E(this,"win",window),E(this,"_onSuccessList",[]),E(this,"_onErrorList",[]),this.assets=t,this.loadStatus="INIT",r!=null&&r.window&&(this.win=r.window)}load(){const t=this.assets||[],r=[];for(let n=0;n<t.length;n++){const o=t[n];o.id||(o.id=pe()),r.push(o.id);const a=o.resources.map(s=>s.src);Ia(a,o.id,{async:!1,before:(s,i)=>(this.win.document.body.appendChild(i),!1)})}if(t.length===0){this._onSuccessList.forEach(n=>n());return}return setTimeout(()=>{Ia.ready(r,{success:()=>{this._onSuccessList.forEach(n=>n())},error:n=>{this._onErrorList.forEach(o=>o(n))}})},0),this}onSuccess(t){return this._onSuccessList.push(t),this}onError(t){return this._onErrorList.push(t),this}}return Object.freeze(Object.defineProperty({__proto__:null,AssetLoader:Ny,ComponentInstanceManager:Ma,DefaultDropPlaceholder:$a,DefineReactAdapter:Aa,DesignRender:wy,ReactAdapter:ly,Render:Ta,getAdapter:gn,useDesignRender:xy,useRender:Sy},Symbol.toStringTag,{value:"Module"}))});
//# sourceMappingURL=render.umd.js.map
