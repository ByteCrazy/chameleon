(function(R,at){typeof exports=="object"&&typeof module<"u"?module.exports=at(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],at):(R=typeof globalThis<"u"?globalThis:R||self,R.CRender=at(R.React,R.ReactDOM))})(this,function(R,at){"use strict";function ni(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const oi=ni(at);var Zt={exports:{}},it={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mn;function ai(){if(mn)return it;mn=1;var e=R,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(s,u,f){var l,d={},p=null,v=null;f!==void 0&&(p=""+f),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(v=u.ref);for(l in u)n.call(u,l)&&!a.hasOwnProperty(l)&&(d[l]=u[l]);if(s&&s.defaultProps)for(l in u=s.defaultProps,u)d[l]===void 0&&(d[l]=u[l]);return{$$typeof:t,type:s,key:p,ref:v,props:d,_owner:o.current}}return it.Fragment=r,it.jsx=i,it.jsxs=i,it}var st={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gn;function ii(){return gn||(gn=1,{}.NODE_ENV!=="production"&&function(){var e=R,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),b=Symbol.iterator,_="@@iterator";function O(c){if(c===null||typeof c!="object")return null;var h=b&&c[b]||c[_];return typeof h=="function"?h:null}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C(c){{for(var h=arguments.length,y=new Array(h>1?h-1:0),w=1;w<h;w++)y[w-1]=arguments[w];I("error",c,y)}}function I(c,h,y){{var w=j.ReactDebugCurrentFrame,T=w.getStackAddendum();T!==""&&(h+="%s",y=y.concat([T]));var $=y.map(function(A){return String(A)});$.unshift("Warning: "+h),Function.prototype.apply.call(console[c],console,$)}}var L=!1,G=!1,Y=!1,Oe=!1,x=!1,H;H=Symbol.for("react.module.reference");function Z(c){return!!(typeof c=="string"||typeof c=="function"||c===n||c===a||x||c===o||c===f||c===l||Oe||c===v||L||G||Y||typeof c=="object"&&c!==null&&(c.$$typeof===p||c.$$typeof===d||c.$$typeof===i||c.$$typeof===s||c.$$typeof===u||c.$$typeof===H||c.getModuleId!==void 0))}function we(c,h,y){var w=c.displayName;if(w)return w;var T=h.displayName||h.name||"";return T!==""?y+"("+T+")":y}function Wt(c){return c.displayName||"Context"}function ce(c){if(c==null)return null;if(typeof c.tag=="number"&&C("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case n:return"Fragment";case r:return"Portal";case a:return"Profiler";case o:return"StrictMode";case f:return"Suspense";case l:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case s:var h=c;return Wt(h)+".Consumer";case i:var y=c;return Wt(y._context)+".Provider";case u:return we(c,c.render,"ForwardRef");case d:var w=c.displayName||null;return w!==null?w:ce(c.type)||"Memo";case p:{var T=c,$=T._payload,A=T._init;try{return ce(A($))}catch{return null}}}return null}var ue=Object.assign,le=0,ee,Ht,tt,Yt,ke,rt,te;function be(){}be.__reactDisabledLog=!0;function Ct(){{if(le===0){ee=console.log,Ht=console.info,tt=console.warn,Yt=console.error,ke=console.group,rt=console.groupCollapsed,te=console.groupEnd;var c={configurable:!0,enumerable:!0,value:be,writable:!0};Object.defineProperties(console,{info:c,log:c,warn:c,error:c,group:c,groupCollapsed:c,groupEnd:c})}le++}}function cn(){{if(le--,le===0){var c={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ue({},c,{value:ee}),info:ue({},c,{value:Ht}),warn:ue({},c,{value:tt}),error:ue({},c,{value:Yt}),group:ue({},c,{value:ke}),groupCollapsed:ue({},c,{value:rt}),groupEnd:ue({},c,{value:te})})}le<0&&C("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var un=j.ReactCurrentDispatcher,ln;function Jt(c,h,y){{if(ln===void 0)try{throw Error()}catch(T){var w=T.stack.trim().match(/\n( *(at )?)/);ln=w&&w[1]||""}return`
`+ln+c}}var fn=!1,qt;{var ky=typeof WeakMap=="function"?WeakMap:Map;qt=new ky}function Va(c,h){if(!c||fn)return"";{var y=qt.get(c);if(y!==void 0)return y}var w;fn=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var $;$=un.current,un.current=null,Ct();try{if(h){var A=function(){throw Error()};if(Object.defineProperty(A.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(A,[])}catch(_e){w=_e}Reflect.construct(c,[],A)}else{try{A.call()}catch(_e){w=_e}c.call(A.prototype)}}else{try{throw Error()}catch(_e){w=_e}c()}}catch(_e){if(_e&&w&&typeof _e.stack=="string"){for(var N=_e.stack.split(`
`),q=w.stack.split(`
`),z=N.length-1,W=q.length-1;z>=1&&W>=0&&N[z]!==q[W];)W--;for(;z>=1&&W>=0;z--,W--)if(N[z]!==q[W]){if(z!==1||W!==1)do if(z--,W--,W<0||N[z]!==q[W]){var oe=`
`+N[z].replace(" at new "," at ");return c.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",c.displayName)),typeof c=="function"&&qt.set(c,oe),oe}while(z>=1&&W>=0);break}}}finally{fn=!1,un.current=$,cn(),Error.prepareStackTrace=T}var ot=c?c.displayName||c.name:"",ri=ot?Jt(ot):"";return typeof c=="function"&&qt.set(c,ri),ri}function Iy(c,h,y){return Va(c,!1)}function Fy(c){var h=c.prototype;return!!(h&&h.isReactComponent)}function Qt(c,h,y){if(c==null)return"";if(typeof c=="function")return Va(c,Fy(c));if(typeof c=="string")return Jt(c);switch(c){case f:return Jt("Suspense");case l:return Jt("SuspenseList")}if(typeof c=="object")switch(c.$$typeof){case u:return Iy(c.render);case d:return Qt(c.type,h,y);case p:{var w=c,T=w._payload,$=w._init;try{return Qt($(T),h,y)}catch{}}}return""}var Xt=Object.prototype.hasOwnProperty,Ga={},Wa=j.ReactDebugCurrentFrame;function Kt(c){if(c){var h=c._owner,y=Qt(c.type,c._source,h?h.type:null);Wa.setExtraStackFrame(y)}else Wa.setExtraStackFrame(null)}function Ly(c,h,y,w,T){{var $=Function.call.bind(Xt);for(var A in c)if($(c,A)){var N=void 0;try{if(typeof c[A]!="function"){var q=Error((w||"React class")+": "+y+" type `"+A+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[A]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw q.name="Invariant Violation",q}N=c[A](h,A,w,y,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(z){N=z}N&&!(N instanceof Error)&&(Kt(T),C("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",w||"React class",y,A,typeof N),Kt(null)),N instanceof Error&&!(N.message in Ga)&&(Ga[N.message]=!0,Kt(T),C("Failed %s type: %s",y,N.message),Kt(null))}}}var Uy=Array.isArray;function dn(c){return Uy(c)}function By(c){{var h=typeof Symbol=="function"&&Symbol.toStringTag,y=h&&c[Symbol.toStringTag]||c.constructor.name||"Object";return y}}function zy(c){try{return Ha(c),!1}catch{return!0}}function Ha(c){return""+c}function Ya(c){if(zy(c))return C("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",By(c)),Ha(c)}var xt=j.ReactCurrentOwner,Vy={key:!0,ref:!0,__self:!0,__source:!0},Ja,qa,pn;pn={};function Gy(c){if(Xt.call(c,"ref")){var h=Object.getOwnPropertyDescriptor(c,"ref").get;if(h&&h.isReactWarning)return!1}return c.ref!==void 0}function Wy(c){if(Xt.call(c,"key")){var h=Object.getOwnPropertyDescriptor(c,"key").get;if(h&&h.isReactWarning)return!1}return c.key!==void 0}function Hy(c,h){if(typeof c.ref=="string"&&xt.current&&h&&xt.current.stateNode!==h){var y=ce(xt.current.type);pn[y]||(C('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ce(xt.current.type),c.ref),pn[y]=!0)}}function Yy(c,h){{var y=function(){Ja||(Ja=!0,C("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};y.isReactWarning=!0,Object.defineProperty(c,"key",{get:y,configurable:!0})}}function Jy(c,h){{var y=function(){qa||(qa=!0,C("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};y.isReactWarning=!0,Object.defineProperty(c,"ref",{get:y,configurable:!0})}}var qy=function(c,h,y,w,T,$,A){var N={$$typeof:t,type:c,key:h,ref:y,props:A,_owner:$};return N._store={},Object.defineProperty(N._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(N,"_self",{configurable:!1,enumerable:!1,writable:!1,value:w}),Object.defineProperty(N,"_source",{configurable:!1,enumerable:!1,writable:!1,value:T}),Object.freeze&&(Object.freeze(N.props),Object.freeze(N)),N};function Qy(c,h,y,w,T){{var $,A={},N=null,q=null;y!==void 0&&(Ya(y),N=""+y),Wy(h)&&(Ya(h.key),N=""+h.key),Gy(h)&&(q=h.ref,Hy(h,T));for($ in h)Xt.call(h,$)&&!Vy.hasOwnProperty($)&&(A[$]=h[$]);if(c&&c.defaultProps){var z=c.defaultProps;for($ in z)A[$]===void 0&&(A[$]=z[$])}if(N||q){var W=typeof c=="function"?c.displayName||c.name||"Unknown":c;N&&Yy(A,W),q&&Jy(A,W)}return qy(c,N,q,T,w,xt.current,A)}}var hn=j.ReactCurrentOwner,Qa=j.ReactDebugCurrentFrame;function nt(c){if(c){var h=c._owner,y=Qt(c.type,c._source,h?h.type:null);Qa.setExtraStackFrame(y)}else Qa.setExtraStackFrame(null)}var vn;vn=!1;function yn(c){return typeof c=="object"&&c!==null&&c.$$typeof===t}function Xa(){{if(hn.current){var c=ce(hn.current.type);if(c)return`

Check the render method of \``+c+"`."}return""}}function Xy(c){{if(c!==void 0){var h=c.fileName.replace(/^.*[\\\/]/,""),y=c.lineNumber;return`

Check your code at `+h+":"+y+"."}return""}}var Ka={};function Ky(c){{var h=Xa();if(!h){var y=typeof c=="string"?c:c.displayName||c.name;y&&(h=`

Check the top-level render call using <`+y+">.")}return h}}function Za(c,h){{if(!c._store||c._store.validated||c.key!=null)return;c._store.validated=!0;var y=Ky(h);if(Ka[y])return;Ka[y]=!0;var w="";c&&c._owner&&c._owner!==hn.current&&(w=" It was passed a child from "+ce(c._owner.type)+"."),nt(c),C('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',y,w),nt(null)}}function ei(c,h){{if(typeof c!="object")return;if(dn(c))for(var y=0;y<c.length;y++){var w=c[y];yn(w)&&Za(w,h)}else if(yn(c))c._store&&(c._store.validated=!0);else if(c){var T=O(c);if(typeof T=="function"&&T!==c.entries)for(var $=T.call(c),A;!(A=$.next()).done;)yn(A.value)&&Za(A.value,h)}}}function Zy(c){{var h=c.type;if(h==null||typeof h=="string")return;var y;if(typeof h=="function")y=h.propTypes;else if(typeof h=="object"&&(h.$$typeof===u||h.$$typeof===d))y=h.propTypes;else return;if(y){var w=ce(h);Ly(y,c.props,"prop",w,c)}else if(h.PropTypes!==void 0&&!vn){vn=!0;var T=ce(h);C("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",T||"Unknown")}typeof h.getDefaultProps=="function"&&!h.getDefaultProps.isReactClassApproved&&C("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function em(c){{for(var h=Object.keys(c.props),y=0;y<h.length;y++){var w=h[y];if(w!=="children"&&w!=="key"){nt(c),C("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",w),nt(null);break}}c.ref!==null&&(nt(c),C("Invalid attribute `ref` supplied to `React.Fragment`."),nt(null))}}function ti(c,h,y,w,T,$){{var A=Z(c);if(!A){var N="";(c===void 0||typeof c=="object"&&c!==null&&Object.keys(c).length===0)&&(N+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var q=Xy(T);q?N+=q:N+=Xa();var z;c===null?z="null":dn(c)?z="array":c!==void 0&&c.$$typeof===t?(z="<"+(ce(c.type)||"Unknown")+" />",N=" Did you accidentally export a JSX literal instead of a component?"):z=typeof c,C("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",z,N)}var W=Qy(c,h,y,T,$);if(W==null)return W;if(A){var oe=h.children;if(oe!==void 0)if(w)if(dn(oe)){for(var ot=0;ot<oe.length;ot++)ei(oe[ot],c);Object.freeze&&Object.freeze(oe)}else C("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ei(oe,c)}return c===n?em(W):Zy(W),W}}function tm(c,h,y){return ti(c,h,y,!0)}function rm(c,h,y){return ti(c,h,y,!1)}var nm=rm,om=tm;st.Fragment=n,st.jsx=nm,st.jsxs=om}()),st}({}).NODE_ENV==="production"?Zt.exports=ai():Zt.exports=ii();var bn=Zt.exports;const Ie=bn.jsx,_n=bn.jsxs;var si=Object.defineProperty,ci=(e,t,r)=>t in e?si(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t,r)=>(ci(e,typeof t!="symbol"?t+"":t,r),r);const ui=e=>()=>{console.warn(`${e} need to be implement getComponent`)},li=["customPageRootRender"],En=["pageRender","render","convertModelToComponent","getComponent","getContext","getUtils","getDataLink","createDataLink","transformProps","transformData","transformGlobalData","errorCatch","clear"],jn=e=>[...En,...li].reduce((t,r)=>{var n;return e!=null&&e[r]?t[r]=(n=e[r])==null?void 0:n.bind(e):En.includes(r)&&(t[r]=ui),t},{});var fi=Object.defineProperty,di=(e,t,r)=>t in e?fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t,r)=>(di(e,typeof t!="symbol"?t+"":t,r),r),pi=typeof global=="object"&&global&&global.Object===Object&&global;const On=pi;var hi=typeof self=="object"&&self&&self.Object===Object&&self,vi=On||hi||Function("return this")();const fe=vi;var yi=fe.Symbol;const re=yi;var wn=Object.prototype,mi=wn.hasOwnProperty,gi=wn.toString,ct=re?re.toStringTag:void 0;function bi(e){var t=mi.call(e,ct),r=e[ct];try{e[ct]=void 0;var n=!0}catch{}var o=gi.call(e);return n&&(t?e[ct]=r:delete e[ct]),o}var _i=Object.prototype,Ei=_i.toString;function ji(e){return Ei.call(e)}var Oi="[object Null]",wi="[object Undefined]",Sn=re?re.toStringTag:void 0;function Se(e){return e==null?e===void 0?wi:Oi:Sn&&Sn in Object(e)?bi(e):ji(e)}function de(e){return e!=null&&typeof e=="object"}var Si="[object Symbol]";function er(e){return typeof e=="symbol"||de(e)&&Se(e)==Si}function tr(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Ci=Array.isArray;const B=Ci;var xi=1/0,Cn=re?re.prototype:void 0,xn=Cn?Cn.toString:void 0;function Rn(e){if(typeof e=="string")return e;if(B(e))return tr(e,Rn)+"";if(er(e))return xn?xn.call(e):"";var t=e+"";return t=="0"&&1/e==-xi?"-0":t}function ae(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function rr(e){return e}var Ri="[object AsyncFunction]",Ni="[object Function]",Ai="[object GeneratorFunction]",Ti="[object Proxy]";function nr(e){if(!ae(e))return!1;var t=Se(e);return t==Ni||t==Ai||t==Ri||t==Ti}var Mi=fe["__core-js_shared__"];const or=Mi;var Nn=function(){var e=/[^.]+$/.exec(or&&or.keys&&or.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function $i(e){return!!Nn&&Nn in e}var Pi=Function.prototype,Di=Pi.toString;function Ce(e){if(e!=null){try{return Di.call(e)}catch{}try{return e+""}catch{}}return""}var ki=/[\\^$.*+?()[\]{}|]/g,Ii=/^\[object .+?Constructor\]$/,Fi=Function.prototype,Li=Object.prototype,Ui=Fi.toString,Bi=Li.hasOwnProperty,zi=RegExp("^"+Ui.call(Bi).replace(ki,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vi(e){if(!ae(e)||$i(e))return!1;var t=nr(e)?zi:Ii;return t.test(Ce(e))}function Gi(e,t){return e==null?void 0:e[t]}function xe(e,t){var r=Gi(e,t);return Vi(r)?r:void 0}var Wi=xe(fe,"WeakMap");const ar=Wi;var An=Object.create,Hi=function(){function e(){}return function(t){if(!ae(t))return{};if(An)return An(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Yi=Hi;function Ji(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function qi(){}function Tn(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Qi=800,Xi=16,Ki=Date.now;function Zi(e){var t=0,r=0;return function(){var n=Ki(),o=Xi-(n-r);if(r=n,o>0){if(++t>=Qi)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function es(e){return function(){return e}}var ts=function(){try{var e=xe(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Rt=ts;var rs=Rt?function(e,t){return Rt(e,"toString",{configurable:!0,enumerable:!1,value:es(t),writable:!0})}:rr,ns=Zi(rs);const Mn=ns;function os(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function as(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function is(e){return e!==e}function ss(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function cs(e,t,r){return t===t?ss(e,t,r):as(e,is,r)}function us(e,t){var r=e==null?0:e.length;return!!r&&cs(e,t,0)>-1}var ls=9007199254740991,fs=/^(?:0|[1-9]\d*)$/;function Nt(e,t){var r=typeof e;return t=t??ls,!!t&&(r=="number"||r!="symbol"&&fs.test(e))&&e>-1&&e%1==0&&e<t}function ir(e,t,r){t=="__proto__"&&Rt?Rt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ut(e,t){return e===t||e!==e&&t!==t}var ds=Object.prototype,ps=ds.hasOwnProperty;function sr(e,t,r){var n=e[t];(!(ps.call(e,t)&&ut(n,r))||r===void 0&&!(t in e))&&ir(e,t,r)}function Fe(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;u===void 0&&(u=e[s]),o?ir(r,s,u):sr(r,s,u)}return r}var $n=Math.max;function Pn(e,t,r){return t=$n(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=$n(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(i),Ji(e,this,s)}}function Dn(e,t){return Mn(Pn(e,t,rr),e+"")}var hs=9007199254740991;function cr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=hs}function At(e){return e!=null&&cr(e.length)&&!nr(e)}function vs(e,t,r){if(!ae(r))return!1;var n=typeof t;return(n=="number"?At(r)&&Nt(t,r.length):n=="string"&&t in r)?ut(r[t],e):!1}function ys(e){return Dn(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,i&&vs(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,a)}return t})}var ms=Object.prototype;function ur(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ms;return e===r}function gs(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var bs="[object Arguments]";function kn(e){return de(e)&&Se(e)==bs}var In=Object.prototype,_s=In.hasOwnProperty,Es=In.propertyIsEnumerable,js=kn(function(){return arguments}())?kn:function(e){return de(e)&&_s.call(e,"callee")&&!Es.call(e,"callee")};const lt=js;function Os(){return!1}var Fn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ln=Fn&&typeof module=="object"&&module&&!module.nodeType&&module,ws=Ln&&Ln.exports===Fn,Un=ws?fe.Buffer:void 0,Ss=Un?Un.isBuffer:void 0,Cs=Ss||Os;const ft=Cs;var xs="[object Arguments]",Rs="[object Array]",Ns="[object Boolean]",As="[object Date]",Ts="[object Error]",Ms="[object Function]",$s="[object Map]",Ps="[object Number]",Ds="[object Object]",ks="[object RegExp]",Is="[object Set]",Fs="[object String]",Ls="[object WeakMap]",Us="[object ArrayBuffer]",Bs="[object DataView]",zs="[object Float32Array]",Vs="[object Float64Array]",Gs="[object Int8Array]",Ws="[object Int16Array]",Hs="[object Int32Array]",Ys="[object Uint8Array]",Js="[object Uint8ClampedArray]",qs="[object Uint16Array]",Qs="[object Uint32Array]",D={};D[zs]=D[Vs]=D[Gs]=D[Ws]=D[Hs]=D[Ys]=D[Js]=D[qs]=D[Qs]=!0,D[xs]=D[Rs]=D[Us]=D[Ns]=D[Bs]=D[As]=D[Ts]=D[Ms]=D[$s]=D[Ps]=D[Ds]=D[ks]=D[Is]=D[Fs]=D[Ls]=!1;function Xs(e){return de(e)&&cr(e.length)&&!!D[Se(e)]}function lr(e){return function(t){return e(t)}}var Bn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dt=Bn&&typeof module=="object"&&module&&!module.nodeType&&module,Ks=dt&&dt.exports===Bn,fr=Ks&&On.process,Zs=function(){try{var e=dt&&dt.require&&dt.require("util").types;return e||fr&&fr.binding&&fr.binding("util")}catch{}}();const Le=Zs;var zn=Le&&Le.isTypedArray,ec=zn?lr(zn):Xs;const dr=ec;var tc=Object.prototype,rc=tc.hasOwnProperty;function Vn(e,t){var r=B(e),n=!r&&lt(e),o=!r&&!n&&ft(e),a=!r&&!n&&!o&&dr(e),i=r||n||o||a,s=i?gs(e.length,String):[],u=s.length;for(var f in e)(t||rc.call(e,f))&&!(i&&(f=="length"||o&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Nt(f,u)))&&s.push(f);return s}function Gn(e,t){return function(r){return e(t(r))}}var nc=Gn(Object.keys,Object);const oc=nc;var ac=Object.prototype,ic=ac.hasOwnProperty;function sc(e){if(!ur(e))return oc(e);var t=[];for(var r in Object(e))ic.call(e,r)&&r!="constructor"&&t.push(r);return t}function Tt(e){return At(e)?Vn(e):sc(e)}function cc(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var uc=Object.prototype,lc=uc.hasOwnProperty;function fc(e){if(!ae(e))return cc(e);var t=ur(e),r=[];for(var n in e)n=="constructor"&&(t||!lc.call(e,n))||r.push(n);return r}function pt(e){return At(e)?Vn(e,!0):fc(e)}var dc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pc=/^\w*$/;function pr(e,t){if(B(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||er(e)?!0:pc.test(e)||!dc.test(e)||t!=null&&e in Object(t)}var hc=xe(Object,"create");const ht=hc;function vc(){this.__data__=ht?ht(null):{},this.size=0}function yc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var mc="__lodash_hash_undefined__",gc=Object.prototype,bc=gc.hasOwnProperty;function _c(e){var t=this.__data__;if(ht){var r=t[e];return r===mc?void 0:r}return bc.call(t,e)?t[e]:void 0}var Ec=Object.prototype,jc=Ec.hasOwnProperty;function Oc(e){var t=this.__data__;return ht?t[e]!==void 0:jc.call(t,e)}var wc="__lodash_hash_undefined__";function Sc(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ht&&t===void 0?wc:t,this}function Re(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Re.prototype.clear=vc,Re.prototype.delete=yc,Re.prototype.get=_c,Re.prototype.has=Oc,Re.prototype.set=Sc;function Cc(){this.__data__=[],this.size=0}function Mt(e,t){for(var r=e.length;r--;)if(ut(e[r][0],t))return r;return-1}var xc=Array.prototype,Rc=xc.splice;function Nc(e){var t=this.__data__,r=Mt(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Rc.call(t,r,1),--this.size,!0}function Ac(e){var t=this.__data__,r=Mt(t,e);return r<0?void 0:t[r][1]}function Tc(e){return Mt(this.__data__,e)>-1}function Mc(e,t){var r=this.__data__,n=Mt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ve(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ve.prototype.clear=Cc,ve.prototype.delete=Nc,ve.prototype.get=Ac,ve.prototype.has=Tc,ve.prototype.set=Mc;var $c=xe(fe,"Map");const vt=$c;function Pc(){this.size=0,this.__data__={hash:new Re,map:new(vt||ve),string:new Re}}function Dc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function $t(e,t){var r=e.__data__;return Dc(t)?r[typeof t=="string"?"string":"hash"]:r.map}function kc(e){var t=$t(this,e).delete(e);return this.size-=t?1:0,t}function Ic(e){return $t(this,e).get(e)}function Fc(e){return $t(this,e).has(e)}function Lc(e,t){var r=$t(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function ye(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ye.prototype.clear=Pc,ye.prototype.delete=kc,ye.prototype.get=Ic,ye.prototype.has=Fc,ye.prototype.set=Lc;var Uc="Expected a function";function hr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Uc);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(hr.Cache||ye),r}hr.Cache=ye;var Bc=500;function zc(e){var t=hr(e,function(n){return r.size===Bc&&r.clear(),n}),r=t.cache;return t}var Vc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gc=/\\(\\)?/g,Wc=zc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Vc,function(r,n,o,a){t.push(o?a.replace(Gc,"$1"):n||r)}),t});const Hc=Wc;function Yc(e){return e==null?"":Rn(e)}function Ue(e,t){return B(e)?e:pr(e,t)?[e]:Hc(Yc(e))}var Jc=1/0;function Be(e){if(typeof e=="string"||er(e))return e;var t=e+"";return t=="0"&&1/e==-Jc?"-0":t}function Pt(e,t){t=Ue(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Be(t[r++])];return r&&r==n?e:void 0}function Wn(e,t,r){var n=e==null?void 0:Pt(e,t);return n===void 0?r:n}function vr(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var Hn=re?re.isConcatSpreadable:void 0;function qc(e){return B(e)||lt(e)||!!(Hn&&e&&e[Hn])}function yr(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=qc),o||(o=[]);++a<i;){var s=e[a];t>0&&r(s)?t>1?yr(s,t-1,r,n,o):vr(o,s):n||(o[o.length]=s)}return o}function Qc(e){var t=e==null?0:e.length;return t?yr(e,1):[]}function Xc(e){return Mn(Pn(e,void 0,Qc),e+"")}var Kc=Gn(Object.getPrototypeOf,Object);const mr=Kc;var Zc="[object Object]",eu=Function.prototype,tu=Object.prototype,Yn=eu.toString,ru=tu.hasOwnProperty,nu=Yn.call(Object);function Q(e){if(!de(e)||Se(e)!=Zc)return!1;var t=mr(e);if(t===null)return!0;var r=ru.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Yn.call(r)==nu}function ou(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}function au(){this.__data__=new ve,this.size=0}function iu(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function su(e){return this.__data__.get(e)}function cu(e){return this.__data__.has(e)}var uu=200;function lu(e,t){var r=this.__data__;if(r instanceof ve){var n=r.__data__;if(!vt||n.length<uu-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ye(n)}return r.set(e,t),this.size=r.size,this}function ie(e){var t=this.__data__=new ve(e);this.size=t.size}ie.prototype.clear=au,ie.prototype.delete=iu,ie.prototype.get=su,ie.prototype.has=cu,ie.prototype.set=lu;function fu(e,t){return e&&Fe(t,Tt(t),e)}function du(e,t){return e&&Fe(t,pt(t),e)}var Jn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qn=Jn&&typeof module=="object"&&module&&!module.nodeType&&module,pu=qn&&qn.exports===Jn,Qn=pu?fe.Buffer:void 0,Xn=Qn?Qn.allocUnsafe:void 0;function Kn(e,t){if(t)return e.slice();var r=e.length,n=Xn?Xn(r):new e.constructor(r);return e.copy(n),n}function hu(e,t){for(var r=-1,n=e==null?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}function Zn(){return[]}var vu=Object.prototype,yu=vu.propertyIsEnumerable,eo=Object.getOwnPropertySymbols,mu=eo?function(e){return e==null?[]:(e=Object(e),hu(eo(e),function(t){return yu.call(e,t)}))}:Zn;const gr=mu;function gu(e,t){return Fe(e,gr(e),t)}var bu=Object.getOwnPropertySymbols,_u=bu?function(e){for(var t=[];e;)vr(t,gr(e)),e=mr(e);return t}:Zn;const to=_u;function Eu(e,t){return Fe(e,to(e),t)}function ro(e,t,r){var n=t(e);return B(e)?n:vr(n,r(e))}function br(e){return ro(e,Tt,gr)}function _r(e){return ro(e,pt,to)}var ju=xe(fe,"DataView");const Er=ju;var Ou=xe(fe,"Promise");const jr=Ou;var wu=xe(fe,"Set");const ze=wu;var no="[object Map]",Su="[object Object]",oo="[object Promise]",ao="[object Set]",io="[object WeakMap]",so="[object DataView]",Cu=Ce(Er),xu=Ce(vt),Ru=Ce(jr),Nu=Ce(ze),Au=Ce(ar),Ne=Se;(Er&&Ne(new Er(new ArrayBuffer(1)))!=so||vt&&Ne(new vt)!=no||jr&&Ne(jr.resolve())!=oo||ze&&Ne(new ze)!=ao||ar&&Ne(new ar)!=io)&&(Ne=function(e){var t=Se(e),r=t==Su?e.constructor:void 0,n=r?Ce(r):"";if(n)switch(n){case Cu:return so;case xu:return no;case Ru:return oo;case Nu:return ao;case Au:return io}return t});const yt=Ne;var Tu=Object.prototype,Mu=Tu.hasOwnProperty;function $u(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Mu.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Pu=fe.Uint8Array;const Dt=Pu;function Or(e){var t=new e.constructor(e.byteLength);return new Dt(t).set(new Dt(e)),t}function Du(e,t){var r=t?Or(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var ku=/\w*$/;function Iu(e){var t=new e.constructor(e.source,ku.exec(e));return t.lastIndex=e.lastIndex,t}var co=re?re.prototype:void 0,uo=co?co.valueOf:void 0;function Fu(e){return uo?Object(uo.call(e)):{}}function lo(e,t){var r=t?Or(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Lu="[object Boolean]",Uu="[object Date]",Bu="[object Map]",zu="[object Number]",Vu="[object RegExp]",Gu="[object Set]",Wu="[object String]",Hu="[object Symbol]",Yu="[object ArrayBuffer]",Ju="[object DataView]",qu="[object Float32Array]",Qu="[object Float64Array]",Xu="[object Int8Array]",Ku="[object Int16Array]",Zu="[object Int32Array]",el="[object Uint8Array]",tl="[object Uint8ClampedArray]",rl="[object Uint16Array]",nl="[object Uint32Array]";function ol(e,t,r){var n=e.constructor;switch(t){case Yu:return Or(e);case Lu:case Uu:return new n(+e);case Ju:return Du(e,r);case qu:case Qu:case Xu:case Ku:case Zu:case el:case tl:case rl:case nl:return lo(e,r);case Bu:return new n;case zu:case Wu:return new n(e);case Vu:return Iu(e);case Gu:return new n;case Hu:return Fu(e)}}function fo(e){return typeof e.constructor=="function"&&!ur(e)?Yi(mr(e)):{}}var al="[object Map]";function il(e){return de(e)&&yt(e)==al}var po=Le&&Le.isMap,sl=po?lr(po):il;const cl=sl;var ul="[object Set]";function ll(e){return de(e)&&yt(e)==ul}var ho=Le&&Le.isSet,fl=ho?lr(ho):ll;const dl=fl;var pl=1,hl=2,vl=4,vo="[object Arguments]",yl="[object Array]",ml="[object Boolean]",gl="[object Date]",bl="[object Error]",yo="[object Function]",_l="[object GeneratorFunction]",El="[object Map]",jl="[object Number]",mo="[object Object]",Ol="[object RegExp]",wl="[object Set]",Sl="[object String]",Cl="[object Symbol]",xl="[object WeakMap]",Rl="[object ArrayBuffer]",Nl="[object DataView]",Al="[object Float32Array]",Tl="[object Float64Array]",Ml="[object Int8Array]",$l="[object Int16Array]",Pl="[object Int32Array]",Dl="[object Uint8Array]",kl="[object Uint8ClampedArray]",Il="[object Uint16Array]",Fl="[object Uint32Array]",P={};P[vo]=P[yl]=P[Rl]=P[Nl]=P[ml]=P[gl]=P[Al]=P[Tl]=P[Ml]=P[$l]=P[Pl]=P[El]=P[jl]=P[mo]=P[Ol]=P[wl]=P[Sl]=P[Cl]=P[Dl]=P[kl]=P[Il]=P[Fl]=!0,P[bl]=P[yo]=P[xl]=!1;function mt(e,t,r,n,o,a){var i,s=t&pl,u=t&hl,f=t&vl;if(r&&(i=o?r(e,n,o,a):r(e)),i!==void 0)return i;if(!ae(e))return e;var l=B(e);if(l){if(i=$u(e),!s)return Tn(e,i)}else{var d=yt(e),p=d==yo||d==_l;if(ft(e))return Kn(e,s);if(d==mo||d==vo||p&&!o){if(i=u||p?{}:fo(e),!s)return u?Eu(e,du(i,e)):gu(e,fu(i,e))}else{if(!P[d])return o?e:{};i=ol(e,d,s)}}a||(a=new ie);var v=a.get(e);if(v)return v;a.set(e,i),dl(e)?e.forEach(function(O){i.add(mt(O,t,r,O,e,a))}):cl(e)&&e.forEach(function(O,j){i.set(j,mt(O,t,r,j,e,a))});var b=f?u?_r:br:u?pt:Tt,_=l?void 0:b(e);return os(_||e,function(O,j){_&&(j=O,O=e[j]),sr(i,j,mt(O,t,r,j,e,a))}),i}var Ll=1,Ul=4;function go(e){return mt(e,Ll|Ul)}var Bl="__lodash_hash_undefined__";function zl(e){return this.__data__.set(e,Bl),this}function Vl(e){return this.__data__.has(e)}function gt(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ye;++t<r;)this.add(e[t])}gt.prototype.add=gt.prototype.push=zl,gt.prototype.has=Vl;function Gl(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function bo(e,t){return e.has(t)}var Wl=1,Hl=2;function _o(e,t,r,n,o,a){var i=r&Wl,s=e.length,u=t.length;if(s!=u&&!(i&&u>s))return!1;var f=a.get(e),l=a.get(t);if(f&&l)return f==t&&l==e;var d=-1,p=!0,v=r&Hl?new gt:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var b=e[d],_=t[d];if(n)var O=i?n(_,b,d,t,e,a):n(b,_,d,e,t,a);if(O!==void 0){if(O)continue;p=!1;break}if(v){if(!Gl(t,function(j,C){if(!bo(v,C)&&(b===j||o(b,j,r,n,a)))return v.push(C)})){p=!1;break}}else if(!(b===_||o(b,_,r,n,a))){p=!1;break}}return a.delete(e),a.delete(t),p}function Yl(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}function wr(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Jl=1,ql=2,Ql="[object Boolean]",Xl="[object Date]",Kl="[object Error]",Zl="[object Map]",ef="[object Number]",tf="[object RegExp]",rf="[object Set]",nf="[object String]",of="[object Symbol]",af="[object ArrayBuffer]",sf="[object DataView]",Eo=re?re.prototype:void 0,Sr=Eo?Eo.valueOf:void 0;function cf(e,t,r,n,o,a,i){switch(r){case sf:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case af:return!(e.byteLength!=t.byteLength||!a(new Dt(e),new Dt(t)));case Ql:case Xl:case ef:return ut(+e,+t);case Kl:return e.name==t.name&&e.message==t.message;case tf:case nf:return e==t+"";case Zl:var s=Yl;case rf:var u=n&Jl;if(s||(s=wr),e.size!=t.size&&!u)return!1;var f=i.get(e);if(f)return f==t;n|=ql,i.set(e,t);var l=_o(s(e),s(t),n,o,a,i);return i.delete(e),l;case of:if(Sr)return Sr.call(e)==Sr.call(t)}return!1}var uf=1,lf=Object.prototype,ff=lf.hasOwnProperty;function df(e,t,r,n,o,a){var i=r&uf,s=br(e),u=s.length,f=br(t),l=f.length;if(u!=l&&!i)return!1;for(var d=u;d--;){var p=s[d];if(!(i?p in t:ff.call(t,p)))return!1}var v=a.get(e),b=a.get(t);if(v&&b)return v==t&&b==e;var _=!0;a.set(e,t),a.set(t,e);for(var O=i;++d<u;){p=s[d];var j=e[p],C=t[p];if(n)var I=i?n(C,j,p,t,e,a):n(j,C,p,e,t,a);if(!(I===void 0?j===C||o(j,C,r,n,a):I)){_=!1;break}O||(O=p=="constructor")}if(_&&!O){var L=e.constructor,G=t.constructor;L!=G&&"constructor"in e&&"constructor"in t&&!(typeof L=="function"&&L instanceof L&&typeof G=="function"&&G instanceof G)&&(_=!1)}return a.delete(e),a.delete(t),_}var pf=1,jo="[object Arguments]",Oo="[object Array]",kt="[object Object]",hf=Object.prototype,wo=hf.hasOwnProperty;function vf(e,t,r,n,o,a){var i=B(e),s=B(t),u=i?Oo:yt(e),f=s?Oo:yt(t);u=u==jo?kt:u,f=f==jo?kt:f;var l=u==kt,d=f==kt,p=u==f;if(p&&ft(e)){if(!ft(t))return!1;i=!0,l=!1}if(p&&!l)return a||(a=new ie),i||dr(e)?_o(e,t,r,n,o,a):cf(e,t,u,r,n,o,a);if(!(r&pf)){var v=l&&wo.call(e,"__wrapped__"),b=d&&wo.call(t,"__wrapped__");if(v||b){var _=v?e.value():e,O=b?t.value():t;return a||(a=new ie),o(_,O,r,n,a)}}return p?(a||(a=new ie),df(e,t,r,n,o,a)):!1}function Cr(e,t,r,n,o){return e===t?!0:e==null||t==null||!de(e)&&!de(t)?e!==e&&t!==t:vf(e,t,r,n,Cr,o)}var yf=1,mf=2;function gf(e,t,r,n){var o=r.length,a=o,i=!n;if(e==null)return!a;for(e=Object(e);o--;){var s=r[o];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<a;){s=r[o];var u=s[0],f=e[u],l=s[1];if(i&&s[2]){if(f===void 0&&!(u in e))return!1}else{var d=new ie;if(n)var p=n(f,l,u,e,t,d);if(!(p===void 0?Cr(l,f,yf|mf,n,d):p))return!1}}return!0}function So(e){return e===e&&!ae(e)}function bf(e){for(var t=Tt(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,So(o)]}return t}function Co(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function _f(e){var t=bf(e);return t.length==1&&t[0][2]?Co(t[0][0],t[0][1]):function(r){return r===e||gf(r,e,t)}}function Ef(e,t){return e!=null&&t in Object(e)}function jf(e,t,r){t=Ue(t,e);for(var n=-1,o=t.length,a=!1;++n<o;){var i=Be(t[n]);if(!(a=e!=null&&r(e,i)))break;e=e[i]}return a||++n!=o?a:(o=e==null?0:e.length,!!o&&cr(o)&&Nt(i,o)&&(B(e)||lt(e)))}function Of(e,t){return e!=null&&jf(e,t,Ef)}var wf=1,Sf=2;function Cf(e,t){return pr(e)&&So(t)?Co(Be(e),t):function(r){var n=Wn(r,e);return n===void 0&&n===t?Of(r,e):Cr(t,n,wf|Sf)}}function xf(e){return function(t){return t==null?void 0:t[e]}}function Rf(e){return function(t){return Pt(t,e)}}function Nf(e){return pr(e)?xf(Be(e)):Rf(e)}function xr(e){return typeof e=="function"?e:e==null?rr:typeof e=="object"?B(e)?Cf(e[0],e[1]):_f(e):Nf(e)}function Af(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),s=i.length;s--;){var u=i[e?s:++o];if(r(a[u],u,a)===!1)break}return t}}var Tf=Af();const Mf=Tf;function Rr(e,t,r){(r!==void 0&&!ut(e[t],r)||r===void 0&&!(t in e))&&ir(e,t,r)}function Nr(e){return de(e)&&At(e)}function Ar(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function $f(e){return Fe(e,pt(e))}function Pf(e,t,r,n,o,a,i){var s=Ar(e,r),u=Ar(t,r),f=i.get(u);if(f){Rr(e,r,f);return}var l=a?a(s,u,r+"",e,t,i):void 0,d=l===void 0;if(d){var p=B(u),v=!p&&ft(u),b=!p&&!v&&dr(u);l=u,p||v||b?B(s)?l=s:Nr(s)?l=Tn(s):v?(d=!1,l=Kn(u,!0)):b?(d=!1,l=lo(u,!0)):l=[]:Q(u)||lt(u)?(l=s,lt(s)?l=$f(s):(!ae(s)||nr(s))&&(l=fo(u))):d=!1}d&&(i.set(u,l),o(l,u,n,a,i),i.delete(u)),Rr(e,r,l)}function xo(e,t,r,n,o){e!==t&&Mf(t,function(a,i){if(o||(o=new ie),ae(a))Pf(e,t,i,r,xo,n,o);else{var s=n?n(Ar(e,i),a,i+"",e,t,o):void 0;s===void 0&&(s=a),Rr(e,i,s)}},pt)}function Df(e,t,r){for(var n=-1,o=e==null?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}function Ro(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function kf(e,t){return t.length<2?e:Pt(e,ou(t,0,-1))}var If=ys(function(e,t,r){xo(e,t,r)});const No=If;var Ff="Expected a function";function Lf(e){if(typeof e!="function")throw new TypeError(Ff);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Uf(e,t){return t=Ue(t,e),e=kf(e,t),e==null||delete e[Be(Ro(t))]}function Bf(e){return Q(e)?void 0:e}var zf=1,Vf=2,Gf=4,Wf=Xc(function(e,t){var r={};if(e==null)return r;var n=!1;t=tr(t,function(a){return a=Ue(a,e),n||(n=a.length>1),a}),Fe(e,_r(e),r),n&&(r=mt(r,zf|Vf|Gf,Bf));for(var o=t.length;o--;)Uf(r,t[o]);return r});const Ao=Wf;function Hf(e,t,r,n){if(!ae(e))return e;t=Ue(t,e);for(var o=-1,a=t.length,i=a-1,s=e;s!=null&&++o<a;){var u=Be(t[o]),f=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(o!=i){var l=s[u];f=n?n(l,u,s):void 0,f===void 0&&(f=ae(l)?l:Nt(t[o+1])?[]:{})}sr(s,u,f),s=s[u]}return e}function Yf(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=Pt(e,i);r(s,i)&&Hf(a,Ue(i,e),s)}return a}function Jf(e,t){if(e==null)return{};var r=tr(_r(e),function(n){return[n]});return t=xr(t),Yf(e,r,function(n,o){return t(n,o[0])})}function qf(e,t){return Jf(e,Lf(xr(t)))}var Qf=1/0,Xf=ze&&1/wr(new ze([,-0]))[1]==Qf?function(e){return new ze(e)}:qi;const Kf=Xf;var Zf=200;function ed(e,t,r){var n=-1,o=us,a=e.length,i=!0,s=[],u=s;if(r)i=!1,o=Df;else if(a>=Zf){var f=t?null:Kf(e);if(f)return wr(f);i=!1,o=bo,u=new gt}else u=t?[]:s;e:for(;++n<a;){var l=e[n],d=t?t(l):l;if(l=r||l!==0?l:0,i&&d===d){for(var p=u.length;p--;)if(u[p]===d)continue e;t&&u.push(d),s.push(l)}else o(u,d,r)||(u!==s&&u.push(d),s.push(l))}return s}var td=Dn(function(e){var t=Ro(e);return Nr(t)&&(t=void 0),ed(yr(e,1,Nr,!0),xr(t))});const rd=td;class To extends TypeError{constructor(t,r){let n;const{message:o,...a}=t,{path:i}=t,s=i.length===0?o:`At path: ${i.join(".")} -- ${o}`;super(s),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...r()])}}function nd(e){return se(e)&&typeof e[Symbol.iterator]=="function"}function se(e){return typeof e=="object"&&e!=null}function K(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function od(e){const{done:t,value:r}=e.next();return t?void 0:r}function ad(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:o,branch:a}=t,{type:i}=r,{refinement:s,message:u=`Expected a value of type \`${i}\`${s?` with refinement \`${s}\``:""}, but received: \`${K(n)}\``}=e;return{value:n,type:i,refinement:s,key:o[o.length-1],path:o,branch:a,...e,message:u}}function*Mo(e,t,r,n){nd(e)||(e=[e]);for(const o of e){const a=ad(o,t,r,n);a&&(yield a)}}function*Tr(e,t,r){r===void 0&&(r={});const{path:n=[],branch:o=[e],coerce:a=!1,mask:i=!1}=r,s={path:n,branch:o};if(a&&(e=t.coercer(e,s),i&&t.type!=="type"&&se(t.schema)&&se(e)&&!Array.isArray(e)))for(const f in e)t.schema[f]===void 0&&delete e[f];let u="valid";for(const f of t.validator(e,s))u="not_valid",yield[f,void 0];for(let[f,l,d]of t.entries(e,s)){const p=Tr(l,d,{path:f===void 0?n:[...n,f],branch:f===void 0?o:[...o,l],coerce:a,mask:i});for(const v of p)v[0]?(u=v[0].refinement!=null?"not_refined":"not_valid",yield[v[0],void 0]):a&&(l=v[1],f===void 0?e=l:e instanceof Map?e.set(f,l):e instanceof Set?e.add(l):se(e)&&(l!==void 0||f in e)&&(e[f]=l))}if(u!=="not_valid")for(const f of t.refiner(e,s))u="not_refined",yield[f,void 0];u==="valid"&&(yield[void 0,e])}class pe{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:r,schema:n,validator:o,refiner:a,coercer:i=u=>u,entries:s=function*(){}}=t;this.type=r,this.schema=n,this.entries=s,this.coercer=i,o?this.validator=(u,f)=>{const l=o(u,f);return Mo(l,f,this,u)}:this.validator=()=>[],a?this.refiner=(u,f)=>{const l=a(u,f);return Mo(l,f,this,u)}:this.refiner=()=>[]}assert(t){return $o(t,this)}create(t){return id(t,this)}is(t){return cd(t,this)}mask(t){return sd(t,this)}validate(t,r){return r===void 0&&(r={}),Ve(t,this,r)}}function $o(e,t){const r=Ve(e,t);if(r[0])throw r[0]}function id(e,t){const r=Ve(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function sd(e,t){const r=Ve(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function cd(e,t){return!Ve(e,t)[0]}function Ve(e,t,r){r===void 0&&(r={});const n=Tr(e,t,r),o=od(n);return o[0]?[new To(o[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function Mr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t[0].type==="type",o=t.map(i=>i.schema),a=Object.assign({},...o);return n?Io(a):M(a)}function Ee(e,t){return new pe({type:e,schema:null,validator:t})}function Ge(e){return new pe({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)},refiner(t,r){return e(t,r).refiner(t,r)}})}function Po(e,t){const{schema:r}=e,n={...r};for(const o of t)delete n[o];switch(e.type){case"type":return Io(n);default:return M(n)}}function V(){return Ee("any",()=>!0)}function U(e){return new pe({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${K(t)}`}})}function Ae(){return Ee("boolean",e=>typeof e=="boolean")}function $r(e){const t={},r=e.map(n=>K(n)).join();for(const n of e)t[n]=n;return new pe({type:"enums",schema:t,validator(n){return e.includes(n)||`Expected one of \`${r}\`, but received: ${K(n)}`}})}function Do(){return Ee("func",e=>typeof e=="function"||`Expected a function, but received: ${K(e)}`)}function X(e){const t=K(e),r=typeof e;return new pe({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||`Expected the literal \`${t}\`, but received: ${K(n)}`}})}function ud(){return Ee("never",()=>!1)}function ko(){return Ee("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${K(e)}`)}function M(e){const t=e?Object.keys(e):[],r=ud();return new pe({type:"object",schema:e||null,*entries(n){if(e&&se(n)){const o=new Set(Object.keys(n));for(const a of t)o.delete(a),yield[a,n[a],e[a]];for(const a of o)yield[a,n[a],r]}},validator(n){return se(n)||`Expected an object, but received: ${K(n)}`},coercer(n){return se(n)?{...n}:n}})}function g(e){return new pe({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function bt(e,t){return new pe({type:"record",schema:null,*entries(r){if(se(r))for(const n in r){const o=r[n];yield[n,n,e],yield[n,o,t]}},validator(r){return se(r)||`Expected an object, but received: ${K(r)}`}})}function m(){return Ee("string",e=>typeof e=="string"||`Expected a string, but received: ${K(e)}`)}function Io(e){const t=Object.keys(e);return new pe({type:"type",schema:e,*entries(r){if(se(r))for(const n of t)yield[n,r[n],e[n]]},validator(r){return se(r)||`Expected an object, but received: ${K(r)}`}})}function J(e){const t=e.map(r=>r.type).join(" | ");return new pe({type:"union",schema:null,coercer(r,n){return(e.find(o=>{const[a]=o.validate(r,{coerce:!0});return!a})||ld()).coercer(r,n)},validator(r,n){const o=[];for(const a of e){const[...i]=Tr(r,a,n),[s]=i;if(s[0])for(const[u]of i)u&&o.push(u);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${K(r)}`,...o]}})}function ld(){return Ee("unknown",()=>!0)}const Pr=M({package:m(),version:m(),exportName:m(),destructuring:g(Ae()),subName:g(m()),main:g(m())}),fd=U(Pr),dd=["CBlock","CContainer","CImage","CCanvas","CVideo","CAudio","CText","CNativeTag"];var ne=(e=>(e.SLOT="SLOT",e.FUNCTION="FUNCTION",e.EXPRESSION="EXPRESSION",e))(ne||{}),Dr=(e=>(e.DESIGN="design",e.SAVE="save",e))(Dr||{}),kr=(e=>(e.FUNC="FUNC",e.COMP="COMP",e))(kr||{});const pd=()=>Ee("normalObj",e=>!Q(e)||[ne.SLOT,ne.EXPRESSION,ne.FUNCTION].includes(e==null?void 0:e.type)?!1:(Ve(e,bt(m(),Ir)),!0)),Ir=J([m(),ko(),Ae(),M({type:X(ne.SLOT),renderType:$r([kr.FUNC,kr.COMP]),params:g(U(m())),value:Ge(()=>J([We,U(We)]))}),M({type:X(ne.EXPRESSION),value:m()}),M({type:X(ne.FUNCTION),value:m()}),pd(),U(Ge(()=>Ir))]),Fo=M({type:X(ne.EXPRESSION),value:m()}),We=M({id:g(m()),title:g(m()),componentName:m(),props:g(bt(m(),Ir)),nodeName:g(m()),state:g(bt(m(),V())),children:Ge(()=>g(U(J([m(),We])))),configure:g(V()),css:g(V()),style:g(V()),classNames:g(U(V())),refId:g(m()),extra:g(bt(V(),V())),condition:g(J([Ae(),Fo])),loop:g(M({open:Ae(),data:J([U(V()),Fo]),args:g(U(m())),forName:g(m()),forIndex:g(m()),key:g(V()),name:g(m())})),methods:g(U(V()))}),It=J([m(),M({label:m(),tip:g(m())})]),hd=M({type:X("shape"),value:U(M({name:m(),title:It,valueType:Ge(()=>Ft)}))}),vd=M({type:X("enums"),value:U(m())});M({type:X("array"),value:Ge(()=>Ft)});const yd=M({type:X("array"),value:Ge(()=>U(Ft))}),Ft=J([$r(["array","boolean","number","object","string"]),$r(["component","expression","function"]),hd,vd,yd]),md=J([m(),M({componentName:m(),props:g(V()),initialValue:g(V()),component:g(V())})]),Fr=M({name:m(),title:It,valueType:Ft,description:g(m()),defaultValue:V(),setters:g(U(md)),condition:g(Do())});J([m(),Do()]);var Lr=(e=>(e.SINGLE="single",e.GROUP="group",e))(Lr||{});J([m(),M({name:m(),describe:g(m()),params:g(M({name:m(),description:m()})),template:m()})]);const gd=M({id:g(m()),title:m(),snapshot:J([m(),V()]),snapshotText:g(m()),description:g(m()),tags:g(U(m())),groupName:g(m()),category:g(m()),schema:Mr(Po(We,["id"]),M({componentName:g(m())}))}),bd=M({componentName:m(),title:m(),screenshot:g(m()),icon:g(m()),tags:g(U(m())),groupName:g(m()),category:g(m()),priority:g(ko()),npm:g(Pr),snippets:U(gd),props:U(J([Fr,M({title:g(It),type:X("single"),content:Fr}),M({title:g(It),type:X("group"),content:U(Fr)})])),fixedProps:g(V()),isContainer:g(J([Ae(),M({placeholder:m(),width:m(),height:m()})])),supportDispatchNativeEvent:g(J([Ae(),U(m())])),isLayout:g(Ae()),rootSelector:g(m()),advanceCustom:g(V()),extra:g(bt(V(),V()))}),_d=e=>({data:t,message:r,throwError:n})=>{const o=e({data:t,message:r,throwError:n});if(o.isValidate)return o;if(n)throw o.message||r?new Error(`${o.message||r}
 originData: ${JSON.stringify(t)}`):new Error(`${JSON.stringify(t)} 
 data struct format is invalidate`);return o.message||r?console.warn(`${o.message||r}
 originData: ${JSON.stringify(t)}`):console.warn(`${JSON.stringify(t)} 
 data struct format is invalidate`),o},Ur=e=>{const{data:t,message:r,throwError:n,dataStruct:o}=e;return _d(({data:a})=>{try{return $o(a,o),{isValidate:!0}}catch(i){let s=i;return i instanceof To&&(s=i.failures().map(u=>`【${u.path.join(".")}】: ${u.message}
`)),{isValidate:!1,message:s,error:i}}})({data:t,message:r,throwError:n})};var He=(e=>(e.ROOT_CONTAINER="RootContainer",e))(He||{});const Ed=M({type:X(ne.FUNCTION),value:m()}),jd=Mr(Po(We,["componentName"]),M({componentName:X("RootContainer")}));function Od(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(o){o(r)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,r)})}}}const _t=Od(),wd=(e,t)=>{const r={...e,value:[]},n=e.value;let o=new Me([]);return t&&(o=t.materialsMode||new Me([])),n&&(B(n)?r.value=n.map(a=>new F(a,{parent:t,materials:o})):Q(n)&&r.value.push(new F(n,{parent:t,materials:o}))),r};class Ye{constructor(t,r){S(this,"nodeType","SLOT"),S(this,"rawData"),S(this,"parent"),S(this,"emitter",_t),S(this,"data"),S(this,"id"),S(this,"materialsMode"),this.parent=(r==null?void 0:r.parent)||null,this.rawData=t;const n=(r==null?void 0:r.materials)||new Me([]);this.materialsMode=n,this.id=he(),this.data=wd(t,this)}get value(){return this.data}export(t){const r=this.data,n=o=>{if(o instanceof F)return o.export(t);if(Q(o)){const a={};return Object.keys(o||{}).forEach(i=>{a[i]=n(o[i])}),a}return B(o)?o.map(a=>n(a)):(t==="design"&&delete o.id,o)};return n(r)}}const Lo=e=>{let t=[];return e.forEach(r=>{const n=r;n.type?n.type===Lr.SINGLE?t.push(n.content):n.type===Lr.GROUP&&(t=[...t,...Lo(n.content)]):t.push(r)}),t},Br=(e,t,r)=>{if(e.type)return e.type===ne.SLOT?new Ye(e,{parent:t,materials:r}):e;if(Q(e)){const n={};return Object.keys(e).forEach(o=>{n[o]=zr(e[o],t,r)}),n}else return Array.isArray(e)?e.map(n=>Br(n,t,r)):e},zr=(e,t,r)=>Q(e)?Br(e,t,r):B(e)?e.map(n=>Br(n,t,r)):e;class je{constructor(t,r,n){S(this,"nodeType","PROP"),S(this,"rawData"),S(this,"parent"),S(this,"emitter",_t),S(this,"data"),S(this,"name"),S(this,"materialsMode");const o=(n==null?void 0:n.materials)||new Me([]);this.materialsMode=o,this.parent=n==null?void 0:n.parent,this.rawData=r,this.name=t,this.data=zr(r,this,o)}isIncludeSlot(){return!1}isIncludeExpression(){return!1}get value(){return this.data}updateValue(t){const r=this.data;this.data=zr(t??r,this,this.materialsMode),this.emitter.emit("onPropChange",{value:this.data,preValue:r,node:this}),this.parent&&!(this.parent instanceof Ye)&&this.emitter.emit("onNodeChange",{value:this.parent.value,preValue:this.parent.value,node:this.parent})}get material(){const t=this.parent;if(t instanceof F){const r=t.material;return Lo((r==null?void 0:r.value.props)||[]).find(n=>n.name===this.name)}else return null}export(t){const r=this.data,n=o=>{if(o instanceof je||o instanceof Ye||o instanceof F)return o.export(t);if(B(o))return o.map(a=>n(a));if(Q(o)){const a={};return Object.keys(o||{}).forEach(i=>{a[i]=n(o[i])}),a}return o};return n(r)}}const Sd=e=>{if(typeof e=="string")return!0;Ur({data:e,dataStruct:We,throwError:!1})},Uo=(e,t,r=new Me([]))=>{if(typeof e=="string")return e;const n={...e,id:e.id??he(),children:[],props:{},methods:e.methods||[],configure:No(e.configure||{},{propsSetter:{},advanceSetter:{}})},o=Object.keys(e.props||{});return o.length&&o.forEach(a=>{var i;const s=(i=e.props)==null?void 0:i[a];if(s instanceof je){n.props[a]=s;return}n.props[a]=new je(a,s||"",{parent:t,materials:r})}),e.children&&(Array.isArray(e.children)?n.children=e.children.map(a=>{if(a instanceof F)return a;if(Q(a)){const i=a;return new F(i,{parent:t,materials:r})}else return a}):(e.children instanceof F&&(n.children=[e.children]),n.children=[new F(e.children,{parent:t,materials:r})])),n};class F{constructor(t,r){S(this,"nodeType","NODE"),S(this,"rawData"),S(this,"data"),S(this,"emitter",_t),S(this,"parent"),S(this,"materialsModel"),S(this,"listenerHandle"),S(this,"onChangeCbQueue"),this.rawData=JSON.parse(JSON.stringify(t)),Sd(t);const n=(r==null?void 0:r.materials)||new Me([]);this.parent=(r==null?void 0:r.parent)||null,this.materialsModel=n,this.data=Uo(t,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener()}registerListener(){const t=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",t),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",t)})}onChange(t){return this.onChangeCbQueue.push(t),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==t)}}destroy(){this.listenerHandle.forEach(t=>t())}get id(){return this.data.id}get value(){return this.data}clone(t){const r={...this.export("design"),id:t||he()};return new F(r,{materials:this.materialsModel})}updateValue(t){const r=this.data,n={...this.data,...t};this.data=Uo(n,this),this.emitter.emit("onNodeChange",{value:n,preValue:r,node:this})}contains(t){return Wr(this,t)}get props(){return this.data.props}get material(){const t=this.materialsModel;return t==null?void 0:t.findByComponentName(this.data.componentName)}getPlainProps(){const t=this.data,r={};return Object.keys(t.props||{}).forEach(n=>{r[n]=t.props[n].export("design")}),r}getNodeConfig(t){var r;return this.data.configure[t]!==void 0?this.data.configure.isContainer:(r=this.material)==null?void 0:r.value.isContainer}isContainer(){return this.getNodeConfig("isContainer")}export(t){var r;const n=this.data;if(typeof n=="string")return n;const o={};Object.keys(n.props||{}).forEach(l=>{o[l]=n.props[l].export(t)});const a=(r=n.children)==null?void 0:r.map(l=>l instanceof F?l.export(t):l),i=n.configure||{},s=i.propsSetter||{},u={};Object.keys(s).forEach(l=>{const d=Wn(s,l,!1);d&&(u[l]=d)}),i.propsSetter=u,this.material&&this.materialsModel.usedMaterials.push(this.material);let f={...n,configure:i,props:o,children:a};return t==="design"&&delete f.id,f=Gr(f),f}}const Bo=(e,t,r)=>{const n={...e,id:he(),props:{},componentName:He.ROOT_CONTAINER,children:[],methods:e.methods||[],configure:No(e.configure||{},{propsSetter:{},advanceSetter:{}})};let o=[];B(e.children)?o=e.children.map(i=>i instanceof F?i:Q(i)?new F(i,{parent:t,materials:r}):i):e.children instanceof F?o.push(e.children):e.children&&Q(e.children)&&o.push(new F(e.children,{parent:t,materials:r}));const a=Object.keys(e.props||{});return a.length&&a.forEach(i=>{var s;const u=(s=e.props)==null?void 0:s[i];u instanceof je?n.props[i]=u:n.props[i]=new je(i,u||"",{parent:t,materials:r})}),n.children=o,n};class Et{constructor(t,{parent:r,materials:n}){S(this,"rawData"),S(this,"data"),S(this,"nodeType",He.ROOT_CONTAINER),S(this,"emitter",_t),S(this,"materialsModel"),S(this,"listenerHandle"),S(this,"onChangeCbQueue"),S(this,"parent"),this.materialsModel=n,this.rawData=JSON.parse(JSON.stringify(t)),this.data=Bo(t,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener(),this.parent=r}registerListener(){const t=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",t),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",t)})}onChange(t){return this.onChangeCbQueue.push(t),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==t)}}get id(){return this.data.id}get value(){return this.data}get props(){return this.data.props}get material(){const t=this.materialsModel;return t==null?void 0:t.findByComponentName(this.data.componentName)}updateValue(t){const r=this.data,n={...this.data,...t};this.data=Bo(n,this,this.materialsModel),this.emitter.emit("onNodeChange",{value:this.data,preValue:r,node:this})}contains(t){return Wr(this,t)}getMaterialConfig(t){var r;return this.data.configure[t]!==void 0?this.data.configure.isContainer:(r=this.material)==null?void 0:r.value.isContainer}isContainer(){return this.getMaterialConfig("isContainer")}export(t=Dr.SAVE){var r;const n=this.data,o={};Object.keys(n.props||{}).forEach(u=>{o[u]=n.props[u].export(t)});const a=((r=n.children)==null?void 0:r.map(u=>{var f;return(f=u==null?void 0:u.export)==null?void 0:f.call(u,t)}))||[],i={...n,props:o,children:a.filter(u=>u)};let s=Ao(i,["id"]);return s=Gr(s),s}getPlainProps(){const t=this.data,r={};return Object.keys(t.props||{}).forEach(n=>{r[n]=t.props[n].export("design")}),r}destroy(){this.listenerHandle.forEach(t=>t())}clone(t){const r={...this.export("design"),id:t||he()};return new Et(r,{materials:this.materialsModel,parent:null})}}const Te=e=>(e==null?void 0:e.type)===ne.EXPRESSION,Cd=e=>(e==null?void 0:e.type)===ne.FUNCTION,he=()=>Math.random().toString(32).slice(3,9),xd=e=>(e==null?void 0:e.nodeType)==="NODE",Vr=e=>(e==null?void 0:e.nodeType)==="PROP",Rd=e=>(e==null?void 0:e.nodeType)==="SLOT",Gr=e=>qf(e,t=>Q(t)?!Object.keys(t).length:B(t)?!t.length:!t);function Nd(e,t){const r=[e];for(;r.length;){const n=r.shift();if(n&&t(n))return n;const o=(n==null?void 0:n.props)||{},a=s=>{if(s instanceof F){r.push(s);return}if(s instanceof Ye&&a(s.value.value),s instanceof je){a(s.value);return}if(Q(s)){const u=s;Object.keys(u).forEach(f=>{a(u[f])});return}if(B(s)){s.forEach(u=>{a(u)});return}};a(o);const i=(n==null?void 0:n.value.children.filter(s=>s instanceof F))||[];r.push(...i)}}function Wr(e,t){return Nd(e,r=>r.id===t)}const Ad=e=>{const t=go(e),r=t.snippets;return delete t.snippets,t.snippets=r.map(n=>({...t,...n,id:n.id||`${e.componentName}-${he()}`,title:n.title||e.title,category:n.category||e.category,tags:[...n.tags||[],...e.tags||[]],groupName:n.groupName||e.groupName,snapshot:n.snapshot||e.icon,snapshotText:n.snapshotText,schema:{...n.schema,componentName:n.schema.componentName||e.componentName}})),t};class Td{constructor(t){S(this,"rawData"),S(this,"data"),this.rawData=t,this.data=Ad(t)}get value(){return this.data}get rawValue(){return this.rawData}get componentName(){return this.data.componentName}get snippets(){return this.data.snippets}getSnippetById(t){return this.data.snippets.find(r=>r.id===t)}}const Md=e=>{if(!B(e))throw new Error("Materials must be a array");return e.map(t=>new Td(t))},$d=e=>{e==null||e.forEach(t=>{Ur({data:t,dataStruct:bd,throwError:!1})})};class Me{constructor(t){S(this,"rawData"),S(this,"data"),S(this,"usedMaterials",[]),this.rawData=t,$d(t),this.data=Md(t)}findByComponentName(t){return this.data.find(r=>r.componentName===t)}findSnippetById(t){const r=[...this.data];let n=null;for(;!n&&r.length;){const o=r.pop();n=o==null?void 0:o.getSnippetById(t)}return n}getAllSnippets(){let t=this.data.reduce((a,i)=>(a.push(...i.snippets),a),[]);const r=[],n={default:[]};t=t.sort((a,i)=>(a.category||"")>(i.category||"")?1:-1),t.forEach(a=>{const i=a.groupName||"default";r.includes(i)||(r.push(i),n[i]=[]),n[i].push(a)});const o=[];return r.forEach(a=>{const i=["default"],s={default:[]},u=n[a];if(u.length!==0){u.forEach(d=>{const p=d.category||"default";i.includes(p)||(i.push(p),s[p]=[]),s[p].push(d)});const f=[];i.forEach(d=>{s[d].length&&f.push({name:d,list:s[d]})});const l={name:a,list:f};o.push(l)}}),o}get value(){return this.data}get rawValue(){return this.rawData}}const Pd=M({version:m(),name:m(),css:g(m()),renderType:g(J([X("COMPONENT"),X("PAGE")])),methods:g(U(Ed)),componentsMeta:U(Mr(M({componentName:m()}),Pr)),thirdLibs:g(fd),componentsTree:jd,assets:g(U(V()))}),zo=e=>(Ur({data:e,dataStruct:Pd,throwError:!1}),e),Hr=(e,t,r)=>({...e,componentsTree:new Et(e.componentsTree,{parent:t,materials:r})});class Lt{constructor(t,r){S(this,"nodeType","PAGE"),S(this,"rawData"),S(this,"emitter",_t),S(this,"data"),S(this,"parent"),S(this,"materialsModel"),S(this,"assetPackagesList"),zo(t),this.assetPackagesList=(r==null?void 0:r.assetPackagesList)||[],this.rawData=JSON.parse(JSON.stringify(t)),this.materialsModel=new Me((r==null?void 0:r.materials)||[]),this.data=Hr(t,this,this.materialsModel)}updatePage(t){const r=this.data;this.rawData=JSON.parse(JSON.stringify(t)),this.data=Hr(t,this,this.materialsModel),this.emitter.emit("onPageChange",{value:this.data,preValue:r,node:this})}reloadPage(t){const r=this.data;this.rawData=JSON.parse(JSON.stringify(t)),this.data=Hr(t,this,this.materialsModel),this.emitter.emit("onReloadPage",{value:this.data,preValue:r,node:this})}get value(){return this.data}getNode(t){if(!t)return;const r=this.data.componentsTree;return Wr(r,t)}addNode(t,r,n="AFTER"){var o;if(n==="AFTER"||n==="BEFORE"){const a=r.parent;if(a===null&&r instanceof Et)return console.warn("Not found parent node"),!1;if(a instanceof je)return console.warn("CProp can not add node"),!1;if(a instanceof Ye){const s=a.value.value,u=s.findIndex(f=>f===r)??-1;return u>=0?(n==="BEFORE"?s.splice(u,0,t):s.splice(u+1,0,t),t.parent=a,(o=a.parent)==null||o.updateValue(),!0):!1}if(a instanceof Lt)return!1;const i=(a==null?void 0:a.value.children.findIndex(s=>s===r))??-1;return i>=0?(n==="BEFORE"?a==null||a.value.children.splice(i,0,t):a==null||a.value.children.splice(i+1,0,t),t.parent=a,a==null||a.updateValue(),!0):(console.warn("Not found target node"),!1)}if(n==="CHILD_START")return r.value.children.unshift(t),t.parent=r,r.updateValue(),!0;if(n==="CHILD_END")return r.value.children.push(t),t.parent=r,r.updateValue(),!0;if(Q(n)){const a=n;if(a.type==="CHILD"){const i=a.pos,s=a.index||0;return i==="BEFORE"?r==null||r.value.children.splice(s,0,t):r==null||r.value.children.splice(s+1,0,t),t.parent=r,r.updateValue(),!0}else console.warn("Can not parse pos obj")}return!1}createNode(t){return delete t.id,new F(t,{parent:null,materials:this.materialsModel})}addNodeById(t,r,n="AFTER"){const o=this.getNode(r);return o?this.addNode(t,o,n):(console.warn(`Not find a node by ${r}, pls check it`),!1)}copyNode(t){const r=t.export("design");r.id=he();const n=new F(r,{parent:t.parent,materials:this.materialsModel});return this.addNode(n,t,"AFTER"),n}copyNodeById(t){const r=this.getNode(t);return r&&r instanceof F?this.copyNode(r):!1}moveNode(t,r,n){this.deleteNode(t);let o=r;return["AFTER","BEFORE"].includes(n)&&(o=r.parent),t.parent=o,this.addNode(t,r,n)}moveNodeById(t,r,n){const o=this.getNode(t),a=this.getNode(r);return o&&a&&o instanceof F&&a instanceof F?this.moveNode(o,a,n):!1}deleteNode(t){var r;const n=t.parent;if(!n)throw new Error("parent node is null or undefined, pls check it");if(n instanceof Ye){const o=n.value.value,a=o.findIndex(s=>s===t),i=o[a];return o.splice(a,1),(r=n.parent)==null||r.updateValue(),i}if(n instanceof F||n instanceof Et){const o=n.value.children,a=o.findIndex(s=>s===t),i=o[a];return o.splice(a,1),n.updateValue(),i}}deleteNodeById(t){const r=this.getNode(t);if(r)return this.deleteNode(r)}export(t=Dr.SAVE){var r;const n=this.data.componentsTree.export(t),o=this.assetPackagesList,a=[],i=this.materialsModel.usedMaterials.map(u=>{const f=o.find(l=>{var d;return l.package===((d=u.value.npm)==null?void 0:d.package)});return f&&a.push(f),{componentName:u.componentName,...go(u.value.npm||{})}}).filter(u=>!!(u.componentName&&u.package&&u.version));this.materialsModel.usedMaterials=[];let s={...this.data,componentsTree:Gr(n),componentsMeta:i,thirdLibs:this.data.thirdLibs,assets:[]};return(r=this.data.thirdLibs)==null||r.forEach(u=>{const f=o.find(l=>u.package===l.package);f&&a.push(f)}),s.assets=rd(a,u=>u.package),s=Ao(s,["id"]),JSON.parse(JSON.stringify(s))}getRootNode(){return this.data.componentsTree}}He.ROOT_CONTAINER;var Dd=typeof global=="object"&&global&&global.Object===Object&&global;const Vo=Dd;var kd=typeof self=="object"&&self&&self.Object===Object&&self,Id=Vo||kd||Function("return this")();const Je=Id;var Fd=Je.Symbol;const qe=Fd;var Go=Object.prototype,Ld=Go.hasOwnProperty,Ud=Go.toString,jt=qe?qe.toStringTag:void 0;function Bd(e){var t=Ld.call(e,jt),r=e[jt];try{e[jt]=void 0;var n=!0}catch{}var o=Ud.call(e);return n&&(t?e[jt]=r:delete e[jt]),o}var zd=Object.prototype,Vd=zd.toString;function Gd(e){return Vd.call(e)}var Wd="[object Null]",Hd="[object Undefined]",Wo=qe?qe.toStringTag:void 0;function Ot(e){return e==null?e===void 0?Hd:Wd:Wo&&Wo in Object(e)?Bd(e):Gd(e)}function Qe(e){return e!=null&&typeof e=="object"}var Yd="[object Symbol]";function Jd(e){return typeof e=="symbol"||Qe(e)&&Ot(e)==Yd}function qd(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Qd=Array.isArray;const Xe=Qd;var Xd=1/0,Ho=qe?qe.prototype:void 0,Yo=Ho?Ho.toString:void 0;function Jo(e){if(typeof e=="string")return e;if(Xe(e))return qd(e,Jo)+"";if(Jd(e))return Yo?Yo.call(e):"";var t=e+"";return t=="0"&&1/e==-Xd?"-0":t}function $e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function qo(e){return e}var Kd="[object AsyncFunction]",Zd="[object Function]",ep="[object GeneratorFunction]",tp="[object Proxy]";function Yr(e){if(!$e(e))return!1;var t=Ot(e);return t==Zd||t==ep||t==Kd||t==tp}var rp=Je["__core-js_shared__"];const Jr=rp;var Qo=function(){var e=/[^.]+$/.exec(Jr&&Jr.keys&&Jr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function np(e){return!!Qo&&Qo in e}var op=Function.prototype,ap=op.toString;function ip(e){if(e!=null){try{return ap.call(e)}catch{}try{return e+""}catch{}}return""}var sp=/[\\^$.*+?()[\]{}|]/g,cp=/^\[object .+?Constructor\]$/,up=Function.prototype,lp=Object.prototype,fp=up.toString,dp=lp.hasOwnProperty,pp=RegExp("^"+fp.call(dp).replace(sp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hp(e){if(!$e(e)||np(e))return!1;var t=Yr(e)?pp:cp;return t.test(ip(e))}function vp(e,t){return e==null?void 0:e[t]}function qr(e,t){var r=vp(e,t);return hp(r)?r:void 0}var Xo=Object.create,yp=function(){function e(){}return function(t){if(!$e(t))return{};if(Xo)return Xo(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const mp=yp;function gp(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function bp(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var _p=800,Ep=16,jp=Date.now;function Op(e){var t=0,r=0;return function(){var n=jp(),o=Ep-(n-r);if(r=n,o>0){if(++t>=_p)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function wp(e){return function(){return e}}var Sp=function(){try{var e=qr(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Ut=Sp;var Cp=Ut?function(e,t){return Ut(e,"toString",{configurable:!0,enumerable:!1,value:wp(t),writable:!0})}:qo,xp=Op(Cp);const Rp=xp;var Np=9007199254740991,Ap=/^(?:0|[1-9]\d*)$/;function Ko(e,t){var r=typeof e;return t=t??Np,!!t&&(r=="number"||r!="symbol"&&Ap.test(e))&&e>-1&&e%1==0&&e<t}function Qr(e,t,r){t=="__proto__"&&Ut?Ut(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Bt(e,t){return e===t||e!==e&&t!==t}var Tp=Object.prototype,Mp=Tp.hasOwnProperty;function $p(e,t,r){var n=e[t];(!(Mp.call(e,t)&&Bt(n,r))||r===void 0&&!(t in e))&&Qr(e,t,r)}function Pp(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;u===void 0&&(u=e[s]),o?Qr(r,s,u):$p(r,s,u)}return r}var Zo=Math.max;function Dp(e,t,r){return t=Zo(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=Zo(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(i),gp(e,this,s)}}function kp(e,t){return Rp(Dp(e,t,qo),e+"")}var Ip=9007199254740991;function ea(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ip}function Xr(e){return e!=null&&ea(e.length)&&!Yr(e)}function Fp(e,t,r){if(!$e(r))return!1;var n=typeof t;return(n=="number"?Xr(r)&&Ko(t,r.length):n=="string"&&t in r)?Bt(r[t],e):!1}function Lp(e){return kp(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,i&&Fp(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,a)}return t})}var Up=Object.prototype;function ta(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Up;return e===r}function Bp(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var zp="[object Arguments]";function ra(e){return Qe(e)&&Ot(e)==zp}var na=Object.prototype,Vp=na.hasOwnProperty,Gp=na.propertyIsEnumerable,Wp=ra(function(){return arguments}())?ra:function(e){return Qe(e)&&Vp.call(e,"callee")&&!Gp.call(e,"callee")};const Kr=Wp;function Hp(){return!1}var oa=typeof exports=="object"&&exports&&!exports.nodeType&&exports,aa=oa&&typeof module=="object"&&module&&!module.nodeType&&module,Yp=aa&&aa.exports===oa,ia=Yp?Je.Buffer:void 0,Jp=ia?ia.isBuffer:void 0,qp=Jp||Hp;const sa=qp;var Qp="[object Arguments]",Xp="[object Array]",Kp="[object Boolean]",Zp="[object Date]",eh="[object Error]",th="[object Function]",rh="[object Map]",nh="[object Number]",oh="[object Object]",ah="[object RegExp]",ih="[object Set]",sh="[object String]",ch="[object WeakMap]",uh="[object ArrayBuffer]",lh="[object DataView]",fh="[object Float32Array]",dh="[object Float64Array]",ph="[object Int8Array]",hh="[object Int16Array]",vh="[object Int32Array]",yh="[object Uint8Array]",mh="[object Uint8ClampedArray]",gh="[object Uint16Array]",bh="[object Uint32Array]",k={};k[fh]=k[dh]=k[ph]=k[hh]=k[vh]=k[yh]=k[mh]=k[gh]=k[bh]=!0,k[Qp]=k[Xp]=k[uh]=k[Kp]=k[lh]=k[Zp]=k[eh]=k[th]=k[rh]=k[nh]=k[oh]=k[ah]=k[ih]=k[sh]=k[ch]=!1;function _h(e){return Qe(e)&&ea(e.length)&&!!k[Ot(e)]}function Eh(e){return function(t){return e(t)}}var ca=typeof exports=="object"&&exports&&!exports.nodeType&&exports,wt=ca&&typeof module=="object"&&module&&!module.nodeType&&module,jh=wt&&wt.exports===ca,Zr=jh&&Vo.process,Oh=function(){try{var e=wt&&wt.require&&wt.require("util").types;return e||Zr&&Zr.binding&&Zr.binding("util")}catch{}}();const ua=Oh;var la=ua&&ua.isTypedArray,wh=la?Eh(la):_h;const fa=wh;var Sh=Object.prototype,Ch=Sh.hasOwnProperty;function xh(e,t){var r=Xe(e),n=!r&&Kr(e),o=!r&&!n&&sa(e),a=!r&&!n&&!o&&fa(e),i=r||n||o||a,s=i?Bp(e.length,String):[],u=s.length;for(var f in e)(t||Ch.call(e,f))&&!(i&&(f=="length"||o&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Ko(f,u)))&&s.push(f);return s}function Rh(e,t){return function(r){return e(t(r))}}function Nh(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Ah=Object.prototype,Th=Ah.hasOwnProperty;function Mh(e){if(!$e(e))return Nh(e);var t=ta(e),r=[];for(var n in e)n=="constructor"&&(t||!Th.call(e,n))||r.push(n);return r}function da(e){return Xr(e)?xh(e,!0):Mh(e)}var $h=qr(Object,"create");const St=$h;function Ph(){this.__data__=St?St(null):{},this.size=0}function Dh(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var kh="__lodash_hash_undefined__",Ih=Object.prototype,Fh=Ih.hasOwnProperty;function Lh(e){var t=this.__data__;if(St){var r=t[e];return r===kh?void 0:r}return Fh.call(t,e)?t[e]:void 0}var Uh=Object.prototype,Bh=Uh.hasOwnProperty;function zh(e){var t=this.__data__;return St?t[e]!==void 0:Bh.call(t,e)}var Vh="__lodash_hash_undefined__";function Gh(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=St&&t===void 0?Vh:t,this}function Pe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Pe.prototype.clear=Ph,Pe.prototype.delete=Dh,Pe.prototype.get=Lh,Pe.prototype.has=zh,Pe.prototype.set=Gh;function Wh(){this.__data__=[],this.size=0}function zt(e,t){for(var r=e.length;r--;)if(Bt(e[r][0],t))return r;return-1}var Hh=Array.prototype,Yh=Hh.splice;function Jh(e){var t=this.__data__,r=zt(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Yh.call(t,r,1),--this.size,!0}function qh(e){var t=this.__data__,r=zt(t,e);return r<0?void 0:t[r][1]}function Qh(e){return zt(this.__data__,e)>-1}function Xh(e,t){var r=this.__data__,n=zt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function me(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}me.prototype.clear=Wh,me.prototype.delete=Jh,me.prototype.get=qh,me.prototype.has=Qh,me.prototype.set=Xh;var Kh=qr(Je,"Map");const pa=Kh;function Zh(){this.size=0,this.__data__={hash:new Pe,map:new(pa||me),string:new Pe}}function ev(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Vt(e,t){var r=e.__data__;return ev(t)?r[typeof t=="string"?"string":"hash"]:r.map}function tv(e){var t=Vt(this,e).delete(e);return this.size-=t?1:0,t}function rv(e){return Vt(this,e).get(e)}function nv(e){return Vt(this,e).has(e)}function ov(e,t){var r=Vt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Ke(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ke.prototype.clear=Zh,Ke.prototype.delete=tv,Ke.prototype.get=rv,Ke.prototype.has=nv,Ke.prototype.set=ov;function ha(e){return e==null?"":Jo(e)}var av=Rh(Object.getPrototypeOf,Object);const va=av;var iv="[object Object]",sv=Function.prototype,cv=Object.prototype,ya=sv.toString,uv=cv.hasOwnProperty,lv=ya.call(Object);function Ze(e){if(!Qe(e)||Ot(e)!=iv)return!1;var t=va(e);if(t===null)return!0;var r=uv.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ya.call(r)==lv}function fv(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}function dv(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:fv(e,t,r)}var pv="\\ud800-\\udfff",hv="\\u0300-\\u036f",vv="\\ufe20-\\ufe2f",yv="\\u20d0-\\u20ff",mv=hv+vv+yv,gv="\\ufe0e\\ufe0f",bv="\\u200d",_v=RegExp("["+bv+pv+mv+gv+"]");function ma(e){return _v.test(e)}function Ev(e){return e.split("")}var ga="\\ud800-\\udfff",jv="\\u0300-\\u036f",Ov="\\ufe20-\\ufe2f",wv="\\u20d0-\\u20ff",Sv=jv+Ov+wv,Cv="\\ufe0e\\ufe0f",xv="["+ga+"]",en="["+Sv+"]",tn="\\ud83c[\\udffb-\\udfff]",Rv="(?:"+en+"|"+tn+")",ba="[^"+ga+"]",_a="(?:\\ud83c[\\udde6-\\uddff]){2}",Ea="[\\ud800-\\udbff][\\udc00-\\udfff]",Nv="\\u200d",ja=Rv+"?",Oa="["+Cv+"]?",Av="(?:"+Nv+"(?:"+[ba,_a,Ea].join("|")+")"+Oa+ja+")*",Tv=Oa+ja+Av,Mv="(?:"+[ba+en+"?",en,_a,Ea,xv].join("|")+")",$v=RegExp(tn+"(?="+tn+")|"+Mv+Tv,"g");function Pv(e){return e.match($v)||[]}function Dv(e){return ma(e)?Pv(e):Ev(e)}function kv(e){return function(t){t=ha(t);var r=ma(t)?Dv(t):void 0,n=r?r[0]:t.charAt(0),o=r?dv(r,1).join(""):t.slice(1);return n[e]()+o}}var Iv=kv("toUpperCase");const Fv=Iv;function Lv(e){return Fv(ha(e).toLowerCase())}function Uv(){this.__data__=new me,this.size=0}function Bv(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function zv(e){return this.__data__.get(e)}function Vv(e){return this.__data__.has(e)}var Gv=200;function Wv(e,t){var r=this.__data__;if(r instanceof me){var n=r.__data__;if(!pa||n.length<Gv-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ke(n)}return r.set(e,t),this.size=r.size,this}function et(e){var t=this.__data__=new me(e);this.size=t.size}et.prototype.clear=Uv,et.prototype.delete=Bv,et.prototype.get=zv,et.prototype.has=Vv,et.prototype.set=Wv;var wa=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Sa=wa&&typeof module=="object"&&module&&!module.nodeType&&module,Hv=Sa&&Sa.exports===wa,Ca=Hv?Je.Buffer:void 0,xa=Ca?Ca.allocUnsafe:void 0;function Yv(e,t){if(t)return e.slice();var r=e.length,n=xa?xa(r):new e.constructor(r);return e.copy(n),n}var Jv=Je.Uint8Array;const Ra=Jv;function qv(e){var t=new e.constructor(e.byteLength);return new Ra(t).set(new Ra(e)),t}function Qv(e,t){var r=t?qv(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Xv(e){return typeof e.constructor=="function"&&!ta(e)?mp(va(e)):{}}function Kv(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),s=i.length;s--;){var u=i[e?s:++o];if(r(a[u],u,a)===!1)break}return t}}var Zv=Kv();const ey=Zv;function rn(e,t,r){(r!==void 0&&!Bt(e[t],r)||r===void 0&&!(t in e))&&Qr(e,t,r)}function ty(e){return Qe(e)&&Xr(e)}function nn(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function ry(e){return Pp(e,da(e))}function ny(e,t,r,n,o,a,i){var s=nn(e,r),u=nn(t,r),f=i.get(u);if(f){rn(e,r,f);return}var l=a?a(s,u,r+"",e,t,i):void 0,d=l===void 0;if(d){var p=Xe(u),v=!p&&sa(u),b=!p&&!v&&fa(u);l=u,p||v||b?Xe(s)?l=s:ty(s)?l=bp(s):v?(d=!1,l=Yv(u,!0)):b?(d=!1,l=Qv(u,!0)):l=[]:Ze(u)||Kr(u)?(l=s,Kr(s)?l=ry(s):(!$e(s)||Yr(s))&&(l=Xv(u))):d=!1}d&&(i.set(u,l),o(l,u,n,a,i),i.delete(u)),rn(e,r,l)}function Na(e,t,r,n,o){e!==t&&ey(t,function(a,i){if(o||(o=new et),$e(a))ny(e,t,i,r,Na,n,o);else{var s=n?n(nn(e,i),a,i+"",e,t,o):void 0;s===void 0&&(s=a),rn(e,i,s)}},da)}var oy=Lp(function(e,t,r){Na(e,t,r)});const ay=oy,iy=function(e){return!(!e||typeof e!="function"||!e.prototype)};function Aa(e){const t=e.prototype;return!!(t&&t.isReactComponent)}function Ta(e){var t,r;const n=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.forward_ref"):60112;return(e==null?void 0:e.$$typeof)===n||((t=e==null?void 0:e.prototype)==null?void 0:t.isReactComponent)||((r=e==null?void 0:e.prototype)==null?void 0:r.setState)||e._forwardRef}function Ma(e){class t extends R.Component{render(){return R.createElement(e,this.props)}}return t.displayName=e.displayName,t}const De=(e,t)=>{const r=n=>{const o=`
    ${Object.keys(t).map(a=>`const ${a} = $$context['${a}'];`).join(`
`)}
    return ${n};
    `;return new Function("$$context",o)(t)};try{return r(e)}catch(n){console.warn(n);const o=`[${e}] expression run failed`;return console.warn(o),null}},$a=(e,t,r)=>function(...n){try{const o=`
        var f = ${e};
        var args = Array.from(arguments);
        var __$$storeManager__ = args.pop();
        var $$context = args.pop();
        $$context.stateManager = __$$storeManager__.getStateSnapshot();
        return f.apply(f, args)
      `;new Function(o)(...n,t,r)}catch(o){console.warn(o)}},on=(e,t)=>{const r={};return t.forEach((n,o)=>{r[n]=e[o]}),r},an=e=>{const t={};return Object.keys(e).forEach(r=>{let n=r.replace("-webkit","Webkit");n=n.replace("-ms","ms"),n=n.replace("-moz","Moz"),n=n.replace("-o","O");let o=n.split("-");o.length>=2&&(o=o.map((a,i)=>i!==0?Lv(a):a)),t[o.join("")]=e[r]}),t},sn=e=>{let t="";return Object.keys(e).forEach(r=>{t+=`${r}:${e[r]};`}),t},sy=(e,t)=>{const r={};return e.forEach(n=>{if(n.globalName){const o=t[n.globalName];o&&(r[n.globalName]=o)}}),r},cy=(e,t=1)=>{let r=0,n=e,o={},a={};for(;r<t;)Object.keys(n).forEach(i=>{o={...o,...n[i]}}),a=o,n=o,o={},r+=1;return a},Gt="DYNAMIC",uy=["$$context","$$nodeModel"],Pa=e=>{let t;const r=new Set,n=(i,s)=>{const u=typeof i=="function"?i(t):i;if(!Object.is(u,t)){const f=t;t=s??typeof u!="object"?u:Object.assign({},t,u),r.forEach(l=>l(t,f))}},o=()=>t,a={setState:n,getState:o,subscribe:i=>(r.add(i),()=>r.delete(i)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return t=e(n,o,a),a},ly=e=>e?Pa(e):Pa;var fy=e=>(({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'."),ly(e));class dy{constructor(){E(this,"storeMap",new Map)}addStore(t,r){const n=fy(r);return this.storeMap.set(t,n),n.name=t,n}setStore(t,r){this.storeMap.set(t,r)}removeStore(t){this.storeMap.delete(t)}getStore(t){return this.storeMap.get(t)}connect(t,r){const n=this.storeMap.get(t);return n?n.subscribe(r):(console.warn("store not exits"),()=>{})}getStateSnapshot(){const t={};return this.storeMap.forEach((r,n)=>{t[n]={state:r.getState(),updateState:o=>{r.setState(o)}}}),t}destroy(){this.storeMap.forEach(t=>{t.destroy()}),this.storeMap=new Map}}class py{constructor(){E(this,"varSpace",new Map)}get(t){return this.varSpace.get(t)}add(t,r){this.varSpace.set(t,r)}remove(t){this.varSpace.delete(t)}destroy(){this.varSpace.clear()}getStateSnapshot(){const t={};return this.varSpace.forEach((r,n)=>{t[n]=r}),t}}class Da{constructor(){E(this,"renderMode","normal"),E(this,"components",{}),E(this,"storeManager",new dy),E(this,"variableManager",new py),E(this,"runtimeComponentCache",new Map),E(this,"onGetRef"),E(this,"onGetComponent"),E(this,"onComponentMount"),E(this,"onComponentDestroy"),E(this,"processNodeConfigHook")}getComponent(t){var r;const n=t.value.componentName;let o=this.components[n]||(()=>`Component [${n}] not found`);return Ta(o)||(o=Ma(o),this.components[n]=o),this.onGetComponent&&(o=(r=this.onGetComponent)==null?void 0:r.call(this,o,t)),o}getContext(t={},r){let n=t;return r&&(n={variableSpace:{},...t},n.__proto__=r||null),n}pageRender(t,{components:r,onGetRef:n,$$context:o={},onGetComponent:a,onComponentMount:i,onComponentDestroy:s,renderMode:u,processNodeConfigHook:f}){this.renderMode=u,this.components=r,this.onGetRef=n,this.onGetComponent=a,this.onComponentMount=i,this.onComponentDestroy=s,this.processNodeConfigHook=f;const l=t.value.componentsTree,d=this.getComponent(l),p=this.convertModelToComponent(d,t.value.componentsTree),v={},b=l.props;return Object.keys(b).forEach(_=>{v[_]=b[_].value}),v.$$context=o,this.render(p,v)}transformProps(t={},{$$context:r}){const n=t,o=i=>{if(Array.isArray(i))return i.map(s=>o(s));if(Vr(i))return o(i.value);if(Rd(i)){const s=i.value,u=s.value;if(!u)return console.warn("slot value is null, this maybe cause some error, pls check it",t),()=>{};const f=l=>{const d=`${l.id}-${Gt}`;if(this.runtimeComponentCache.get(l.id))return{key:d,component:this.runtimeComponentCache.get(l.id)};const p=this.getComponent(l),v=this.convertModelToComponent(p,l),b=s.params||[];return{component:(..._)=>{const O=on(_,b),j=this.getContext({params:O},r);return this.render(v,{$$context:j,key:d})},key:d}};if(Array.isArray(u)){const l=u==null?void 0:u.map(d=>f(d));return(...d)=>l.map(p=>Aa(p.component)?R.createElement(p.component,{$$context:r,key:p.key}):p.component(...d))}else return f(u).component}else{if(Te(i))return De(i.value,r||{});if(Cd(i))return $a(i.value,r,this.storeManager);if(Ze(i)){let s=i;Vr(i)&&(s=i.value);const u=s,f={};return Object.keys(s).forEach(l=>{f[l]=o(u[l])}),f}else return i}},a={};return Object.keys(n).forEach(i=>{const s=n[i];a[i]=o(s)}),a}collectSpecialProps(t={},r){const n=[],o=(a,i)=>{let s=i;Vr(i)&&(s=i.value),r(s)?n.push({keyPath:a,val:s}):Xe(s)?s.forEach((u,f)=>{o([...a,String(f)],u)}):Ze(s)&&Object.keys(s).forEach(u=>{o([...a,u],s[u])})};return o(["$root"],t),n}convertModelToComponent(t,r){const n=this;class o extends R.Component{constructor(i){super(i),E(this,"_CONDITION",!0),E(this,"_DESIGN_BOX",!1),E(this,"_NODE_MODEL",r),E(this,"_NODE_ID",r.id),E(this,"UNIQUE_ID",`${r.id}_${he()}`),E(this,"targetComponentRef"),E(this,"listenerHandle",[]),E(this,"storeState"),E(this,"staticState",{}),E(this,"storeListenDisposeLint",[]),E(this,"domHeader"),E(this,"mediaStyleDomMap",{}),E(this,"variableSpace"),E(this,"nodeName"),E(this,"updateState",l=>{this.storeState.setState(l),this.forceUpdate()}),E(this,"getStyleDomById",l=>{const d=this.mediaStyleDomMap;let p=d[l];return p||(p=document.createElement("style"),p.type="text/css",d[l]=p),p.id=l,p}),E(this,"addMediaCSS",()=>{var l;let d=this.domHeader;if(d||(d=(l=document.getElementsByTagName("head"))==null?void 0:l[0],this.domHeader=d),!this.domHeader)return;const p=this._NODE_MODEL.value.css;p&&p.value.forEach(v=>{var b;const _=`${this.UNIQUE_ID}_${v.state}`;let O=`.${p.class}`;if(v.state!=="normal"&&(O=`${O}:${v.state}`),Object.keys(v.style).length!==0){const j=this.getStyleDomById(_);j.innerText=`${O} { ${sn(v.style)} }`,d==null||d.appendChild(j)}(b=v.media)!=null&&b.length&&v.media.forEach(j=>{const C=`${_}_${j.type}_${j.value}`,I=this.getStyleDomById(C);I.media=`screen and (${j.type}:${j.value}px)`,I.innerHTML=`${O} { ${sn(j.style)} }`,d==null||d.appendChild(I)})})}),E(this,"removeMediaCSS",()=>{const l=this.mediaStyleDomMap;Object.keys(l).forEach(d=>{var p;(p=this.domHeader)==null||p.removeChild(l[d])})}),E(this,"rebuildNode",()=>{this.storeListenDisposeLint.forEach(l=>l()),this.removeMediaCSS(),this.connectStore(),this.addMediaCSS(),this.forceUpdate()}),this.targetComponentRef=R.createRef(),this.state=r.value.state||{};const s=r.value.nodeName||r.id;this.nodeName=s;const u=n.storeManager.getStore(s);u?(this.storeState=u,u.setState({...r.value.state||{}})):this.storeState=n.storeManager.addStore(s,()=>({...r.value.state||{}})),this.storeState.subscribe(l=>{this.setState({...l})}),this.connectStore();const f=n.variableManager.get(s);f?this.variableSpace=f:(this.variableSpace={},n.variableManager.add(s,this.variableSpace))}connectStore(){const i=n.collectSpecialProps(r.props,d=>!!Te(d)),s=n.collectSpecialProps({css:r.value.css,class:r.value.classNames},d=>!!Te(d)),u=[...i,...s].map(d=>{const p=d.val,v=/\$\$context.stateManager\.(.+?)\./gim.exec(p.value);return v!=null&&v.length?v[1]:""}).filter(Boolean),f=Array.from(new Set(u)),l=[];f.length&&f.forEach(d=>{n.storeManager.getStore(d)||(n.storeManager.addStore(d,()=>({})),console.log(n.storeManager,d,"not exits"));const p=n.storeManager.connect(d,()=>{this.forceUpdate()});l.push(p)}),this.storeListenDisposeLint=l}componentDidMount(){var i;this.addMediaCSS(),n.onGetRef&&n.onGetRef(this.targetComponentRef,r,this),(i=n.onComponentMount)==null||i.call(n,this,r);const s=()=>{n.storeManager.setStore(r.value.nodeName||r.id,this.storeState),this.storeState.setState({...this.state,...r.value.state||{}}),this.rebuildNode()};r.onChange(s)}componentWillUnmount(){var i;this.storeListenDisposeLint.forEach(s=>s()),this.removeMediaCSS(),(i=n.onComponentDestroy)==null||i.call(n,this,r)}render(){var i;const{$$context:s,...u}=this.props,f={key:r.id,...r.props,...u},l={state:this.state||{},variableSpace:this.variableSpace,updateState:this.updateState,staticState:this.staticState};r.value.componentName===He.ROOT_CONTAINER&&(l.globalState=this.state,l.updateGlobalState=this.updateState),l.stateManager=n.storeManager.getStateSnapshot(),l.variableSpace=n.variableManager.get(this.nodeName),l.variableManager=n.variableManager.getStateSnapshot();const d=n.getContext(l,s),p=n.transformProps({methods:r.value.methods},{$$context:d}).methods.reduce((x,H)=>(x[H.name]=H.define,x),{});d.methods=p,d.variableSpace||(d.variableSpace={}),d.variableSpace.methods=p;const v=r.value.loop;let b=[];if(v&&v.open){this.targetComponentRef.current=[];let x=v.data||[];if(Te(v.data)){const H=v.data;x=De(H.value,d||{})}return b=x.map((...H)=>{var Z;const we=H[1],Wt=[v.forName||"item",v.forIndex||"index"],ce=on(H,Wt);let ue="loopData";v.name&&(ue=`${ue}${v.name}`);const le=n.getContext({[ue]:ce,staticState:this.staticState},d),ee=n.transformProps(f,{$$context:le}),Ht=((Z=r.value.classNames)==null?void 0:Z.map(te=>{var be;const Ct=te.name;return Te(te.status)&&De(String(((be=te.status)==null?void 0:be.value)||""),le)?Ct:""}))||[];let tt=`${ee.className??""} ${Ht.join(" ")}`.trim();r.value.css&&(tt=`${r.value.css.class} ${tt}`.trim()),ee.className=tt;const Yt=n.transformProps(r.value.style,{$$context:le});r.value.style&&(ee.style=an(Yt||{}));const{children:ke}=ee;let rt=[];if(ke!==void 0)delete ee.children,rt=Array.isArray(ke)?ke:[ke];else{const te=[];r.value.children.forEach((be,Ct)=>{const cn=n.buildComponent(be,{$$context:le,idx:Ct});te.push(cn)}),rt=te}if(ee.key=`${ee.key}-${we}`,Te(v.key)){const te=v.key,be=De(te.value,le||{});ee.key+=`-${be}`}return ee.ref=te=>{this.targetComponentRef.current=this.targetComponentRef.current||[],this.targetComponentRef.current[we]=te},n.render(t,ee,...rt)}),b}const _=n.transformProps(f,{$$context:d}),{children:O}=_;let j=[];if(O!==void 0)delete _.children,j=Array.isArray(O)?O:[O];else{const x=[];r.value.children.forEach((H,Z)=>{const we=n.buildComponent(H,{$$context:d,idx:Z});x.push(we)}),j=x}_.ref=this.targetComponentRef;const C=((i=r.value.classNames)==null?void 0:i.map(x=>{var H;const Z=x.name;return Te(x.status)&&De(((H=x.status)==null?void 0:H.value)||"",d)?Z:""}))||[];let I=`${_.className??""} ${C.join(" ")}`.trim();r.value.css&&(I=`${r.value.css.class} ${I}`.trim()),_.className=I;const L=n.transformProps(r.value.style,{$$context:d});r.value.style&&(_.style=an(L||{}));let G=r.value.condition??!0;typeof G!="boolean"&&(G=De(G.value,d||{}));let Y={condition:G,props:_};n.processNodeConfigHook&&(Y=n.processNodeConfigHook(Y,r));const Oe=n.render(t,Y.props,...j);return this._CONDITION=Y.condition,Y.condition?Oe:Ie("div",{style:{display:"none"},children:Oe})}}return E(o,"__CP_TYPE__",Gt),o.displayName=`${r.value.componentName}Dynamic`,o}buildComponent(t,{$$context:r={}}){const n=this.runtimeComponentCache;return typeof t=="string"?this.render(t):xd(t)?(({currentNode:o})=>{const a=o.value.id;let i=null;if(n.get(a))i=n.get(a);else{const f=this.getComponent(o);i=this.convertModelToComponent(f,o)}!n.get(a)&&this.renderMode!=="design"&&n.set(a,i);const s=`${a}-${Gt}`,u={$$context:r,$$nodeModel:t,key:s};return this.render(i,u)})({currentNode:t}):void 0}render(t,r={},...n){return typeof t=="string"||typeof t=="number"?String(t):(uy.forEach(o=>{o in r&&t.__CP_TYPE__!==Gt&&delete r[o]}),R.createElement(t,r,...n))}clear(){this.runtimeComponentCache.clear(),this.storeManager.destroy()}}const hy=jn(new Da),vy=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],ge=e=>{const t={};return e.forEach(r=>{t[r.key]=r.value}),t},yy=[...vy,...dd],my=yy.reduce((e,t)=>(e[t]=({children:r,$$attributes:n=[],...o})=>{let a=r;return Array.isArray(r)||(a=[r]),R.createElement(t,{...o,...ge(n)},...a)},e),{}),gy=({children:e,width:t,height:r,$$attributes:n=[],...o})=>{let a=e;Array.isArray(e)||(a=[e]),a=a.filter(f=>f!==void 0);const{style:i={},...s}=ge(n),u={height:r,width:t,...i,...o.style||{}};return R.createElement("div",{...o,...s,style:u},...a)},by=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),R.createElement("canvas",{...r,...ge(t)},...n)},_y=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),R.createElement("img",{...r,...ge(t)},...n)},Ey=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),R.createElement("video",{...r,...ge(t)},...n)},jy=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),R.createElement("audio",{...r,...ge(t)},...n)},Oy=({$$attributes:e=[],content:t,...r})=>Ie("span",{...r,...ge(e),children:t}),wy=({children:e,$$attributes:t=[],afterMount:r,beforeDestroy:n,...o})=>{let a=e;return Array.isArray(e)||(a=[e]),R.useEffect(()=>(r==null||r(o),()=>{n==null||n(o)}),[]),R.createElement("div",{...o,...ge(t)},...a)},Sy=({children:e,$$attributes:t=[],htmlTag:r="div",...n})=>{let o=e;Array.isArray(e)||(o=[e]);const{style:a={},...i}=ge(t),s={...a,...n.style||{}};return R.createElement(r,{...n,...i,style:s},...o)},Cy={RootContainer:({children:e})=>e,...my,CContainer:wy,CVideo:Ey,CAudio:jy,CBlock:gy,CImage:_y,CText:Oy,CCanvas:by,CNativeTag:Sy};class xy{constructor(){E(this,"refMap",new Map)}get(t){return this.refMap.get(t)}add(t,r){this.refMap.set(t,r)}remove(t){this.refMap.delete(t)}destroy(){this.refMap.clear()}}class ka extends R.Component{constructor(t){super(t),E(this,"refManager"),E(this,"dynamicComponentInstanceMap",new Map),E(this,"onGetRef",(r,n,o)=>{var a,i;(i=(a=this.props).onGetRef)==null||i.call(a,r,n,o),this.dynamicComponentInstanceMap.set(n.id,o),this.refManager.add(n.value.refId||n.id,r)}),E(this,"rerender",r=>{if(this.props.adapter.clear(),(r==null?void 0:r.nodeType)==="PAGE"&&r)this.setState({pageModel:r});else if(Ze(r)&&zo(r)){const n=r;this.setState({pageModel:new Lt(n,{materials:this.state.pageModel.materialsModel.rawValue})})}}),this.state={pageModel:t.pageModel||new Lt(t.page)},this.refManager=new xy}getPageModel(){return this.state.pageModel}componentDidMount(){const{render:t}=this.props;t&&(t.ref.current=this)}componentWillUnmount(){this.refManager.destroy()}render(){const{props:t}=this,{adapter:r,onGetComponent:n,onComponentDestroy:o,onComponentMount:a}=t,{pageModel:i}=this.state;if(!i)return console.warn("pageModel is null"),null;const s={...Cy,...t.components};return r.pageRender(i,{libs:{},components:s,onGetRef:this.onGetRef,onGetComponent:n,onComponentMount:a,onComponentDestroy:o,$$context:{refs:this.refManager},renderMode:t.renderMode,processNodeConfigHook:t.processNodeConfigHook})}}const Ry=()=>{const e=R.useRef(null);return{ref:e,rerender:function(...t){e.current&&e.current.rerender(...t)}}};class Ny extends R.Component{constructor(t){super(t),E(this,"onDoubleClick",()=>{this.setState({hasError:!1,error:null})}),this.state={hasError:!1,error:""}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){var n,o;(o=(n=this.props).onError)==null||o.call(n,r)}render(){if(this.state.hasError){const{onDoubleClick:t}=this,r=this.props.node.value;console.error(this.props.node,this.props.children);const n=_n("div",{style:{backgroundColor:"rgb(255 206 215 / 13%)",padding:"5px",color:"#ff0000b0",textAlign:"center",fontSize:"12px"},children:["Render error, node id: ",r.id,", node name：",r.title," component name：",r.title||r.componentName,_n("p",{children:["msg: ",String(this.state.error)]}),Ie("button",{onDoubleClick:t,style:{border:"1px solid rgba(100,100,100,0.1)",backgroundColor:"#fff",padding:"5px 10px",borderRadius:"2px",color:"gray",cursor:"pointer",marginTop:"5px"},children:"double click to refresh"}),Ie("div",{style:{display:"none"}})]});return R.createElement(this.props.targetComponent,{onlyRenderChild:!0},n)}return this.props.children}}class Ia{constructor(){E(this,"instanceMap",new Map)}get(t){return this.instanceMap.get(t)}add(t,r){const n=this.instanceMap.get(t);n?n.push(r):this.instanceMap.set(t,[r])}remove(t,r){const n=this.instanceMap.get(t);if(r!==void 0&&Array.isArray(n)){const o=n.filter(a=>a!==r);this.instanceMap.set(t,o)}else this.instanceMap.delete(t)}destroy(){this.instanceMap.clear()}}const Fa=e=>{const{node:t}=e,r=R.useMemo(()=>{const s=t.isContainer();return Ze(s)?s:{placeholder:"Drag the component to place it",width:"100%",height:"100%",style:{}}},[e.node]),{placeholder:n,height:o,width:a,style:i}=r;return Ie("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(200,200,200,0.1)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"2px",fontSize:"14px",color:"gray",cursor:"default",minWidth:"300px",minHeight:"50px",width:a,height:o,...i},children:n})};class Ay extends R.Component{constructor(t){super(t),E(this,"instanceManager",new Ia),E(this,"renderRef"),E(this,"dropPlaceholder",Fa),E(this,"onGetComponent",(r,n)=>{const o=this;class a extends R.Component{constructor(){super(...arguments),E(this,"_DESIGN_BOX",!0),E(this,"_NODE_MODEL",n),E(this,"_NODE_ID",n.id),E(this,"_UNIQUE_ID",`${n.id}_${he()}`),E(this,"_STATUS")}componentDidMount(){o.instanceManager.add(n.id,this)}componentWillUnmount(){this._STATUS="DESTROY",o.instanceManager.remove(n.id,this)}render(){const{children:s=[],onlyRenderChild:u,...f}=this.props;let l=s;return Xe(s)||(l=[s]),!l.filter(Boolean).length&&(n.isContainer()||n.value.componentName===He.ROOT_CONTAINER)&&l.push(R.createElement(o.dropPlaceholder,{node:n})),u?l:R.createElement(r,f,...l)}}return R.forwardRef(function(i,s){return R.createElement(Ny,{node:n,targetComponent:a},R.createElement(a,{ref:s,...i}))})}),this.renderRef=R.createRef(),t.dropPlaceholder&&(this.dropPlaceholder=t.dropPlaceholder)}componentDidMount(){var t,r;(r=(t=this.props).onMount)==null||r.call(t,this)}getPageModel(){var t;return(t=this.renderRef.current)==null?void 0:t.state.pageModel}rerender(t){var r;return(r=this.renderRef.current)==null?void 0:r.rerender(t)}getInstancesById(t,r){let n=[...this.instanceManager.get(t)||[]];return r!==void 0&&(n=n.filter(o=>r===(o==null?void 0:o._UNIQUE_ID))),n}getInstanceByDom(t){const r=La(t);if(!r)return null;const n=Ua(r);return(n==null?void 0:n.stateNode)||null}getDomsById(t,r){const n=this.getInstancesById(t),o=[];return n==null||n.forEach(a=>{if((a==null?void 0:a._STATUS)==="DESTROY")return;const i=oi.findDOMNode(a);if(i&&!(i instanceof Text))if(r){const s=Array.from(i.querySelectorAll(r));o.push(...s)}else o.push(i)}),o}getDomRectById(t,r){return this.getDomsById(t,r).map(n=>n==null?void 0:n.getBoundingClientRect()).filter(Boolean)}render(){const{props:t,onGetComponent:r}=this,{render:n,...o}=t;return n&&(n.ref.current=this),Ie(ka,{onGetComponent:r,...o,processNodeConfigHook:(a,i)=>{var s,u;if(i.nodeType!=="NODE")return a;const{props:f,condition:l}=a;let d={...f};const p=((s=i.value.configure)==null?void 0:s.devState)||{},v=(u=i.material)==null?void 0:u.value.fixedProps;if(v!==void 0){if(Ze(v))d={...d,...v};else if(typeof v=="function"){const _=v(d);d={...d,..._}}}let b=l;return p.condition===!1&&(b=p.condition),{props:ay(d,p.props||{}),condition:b}},ref:this.renderRef})}}const La=e=>{if(!e)return null;const t=Object.keys(e).find(r=>r.startsWith("__reactInternalInstance$")||r.startsWith("__reactFiber$"))||"";return t?e[t]:La(e.parentElement)},Ua=e=>{var t;return e?(t=e==null?void 0:e.stateNode)!=null&&t._DESIGN_BOX?e:Ua(e.return):null},Ty=()=>{const e=R.useRef(null);return{ref:e,rerender:function(...t){e.current&&e.current.rerender(...t)},getInstancesById(t,r){var n;return((n=e.current)==null?void 0:n.getInstancesById(t,r))||[]},getInstanceByDom(t){var r;return((r=e.current)==null?void 0:r.getInstanceByDom(t))||null},getDomsById(t,r){var n;return((n=e.current)==null?void 0:n.getDomsById(t,r))||[]},getDomRectById(t,r){var n;return((n=e.current)==null?void 0:n.getDomRectById(t,r))||[]}}};var My=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $y(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ba={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(My,function(){var r=function(){},n={},o={},a={};function i(p,v){p=p.push?p:[p];var b=[],_=p.length,O=_,j,C,I,L;for(j=function(G,Y){Y.length&&b.push(G),O--,O||v(b)};_--;){if(C=p[_],I=o[C],I){j(C,I);continue}L=a[C]=a[C]||[],L.push(j)}}function s(p,v){if(p){var b=a[p];if(o[p]=v,!!b)for(;b.length;)b[0](p,v),b.splice(0,1)}}function u(p,v){p.call&&(p={success:p}),v.length?(p.error||r)(v):(p.success||r)(p)}function f(p,v,b,_){var O=document,j=b.async,C=(b.numRetries||0)+1,I=b.before||r,L=p.replace(/[\?|#].*$/,""),G=p.replace(/^(css|img|module|nomodule)!/,""),Y,Oe,x;if(_=_||0,/(^css!|\.css$)/.test(L))x=O.createElement("link"),x.rel="stylesheet",x.href=G,Y="hideFocus"in x,Y&&x.relList&&(Y=0,x.rel="preload",x.as="style");else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(L))x=O.createElement("img"),x.src=G;else if(x=O.createElement("script"),x.src=G,x.async=j===void 0?!0:j,Oe="noModule"in x,/^module!/.test(L)){if(!Oe)return v(p,"l");x.type="module"}else if(/^nomodule!/.test(L)&&Oe)return v(p,"l");x.onload=x.onerror=x.onbeforeload=function(H){var Z=H.type[0];if(Y)try{x.sheet.cssText.length||(Z="e")}catch(we){we.code!=18&&(Z="e")}if(Z=="e"){if(_+=1,_<C)return f(p,v,b,_)}else if(x.rel=="preload"&&x.as=="style")return x.rel="stylesheet";v(p,Z,H.defaultPrevented)},I(p,x)!==!1&&O.head.appendChild(x)}function l(p,v,b){p=p.push?p:[p];var _=p.length,O=_,j=[],C,I;for(C=function(L,G,Y){if(G=="e"&&j.push(L),G=="b")if(Y)j.push(L);else return;_--,_||v(j)},I=0;I<O;I++)f(p[I],C,b)}function d(p,v,b){var _,O;if(v&&v.trim&&(_=v),O=(_?b:v)||{},_){if(_ in n)throw"LoadJS";n[_]=!0}function j(C,I){l(p,function(L){u(O,L),C&&u({success:C,error:I},L),s(_,L)},O)}if(O.returnPromise)return new Promise(j);j()}return d.ready=function(p,v){return i(p,function(b){u(v,b)}),d},d.done=function(p){s(p,[])},d.reset=function(){n={},o={},a={}},d.isDefined=function(p){return p in n},d})})(Ba);var Py=Ba.exports;const za=$y(Py);class Dy{constructor(t,r){E(this,"assets"),E(this,"loadStatus"),E(this,"win",window),E(this,"_onSuccessList",[]),E(this,"_onErrorList",[]),this.assets=t,this.loadStatus="INIT",r!=null&&r.window&&(this.win=r.window)}load(){const t=this.assets||[],r=[];for(let n=0;n<t.length;n++){const o=t[n];o.id||(o.id=he()),r.push(o.id);const a=o.resources.map(i=>i.src);za(a,o.id,{async:!1,before:(i,s)=>(this.win.document.body.appendChild(s),!1)})}if(t.length===0){this._onSuccessList.forEach(n=>n());return}return new Promise((n,o)=>{za.ready(r,{success:()=>{this._onSuccessList.forEach(a=>a()),n("")},error:a=>{this._onErrorList.forEach(i=>i(a)),o(a)}})})}onSuccess(t){return this._onSuccessList.push(t),this}onError(t){return this._onErrorList.push(t),this}}return Object.freeze(Object.defineProperty({__proto__:null,AssetLoader:Dy,ComponentInstanceManager:Ia,DefaultDropPlaceholder:Fa,DefineReactAdapter:Da,DesignRender:Ay,ReactAdapter:hy,Render:ka,canAcceptsRef:Ta,collectVariable:sy,compWrapper:Ma,convertCodeStringToFunction:$a,flatObject:cy,formatSourceStylePropertyName:an,getAdapter:jn,getCSSTextValue:sn,getObjFromArrayMap:on,isClass:iy,runExpression:De,shouldConstruct:Aa,useDesignRender:Ty,useRender:Ry},Symbol.toStringTag,{value:"Module"}))});
//# sourceMappingURL=render.umd.js.map
