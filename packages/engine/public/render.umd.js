(function(M,st){typeof exports=="object"&&typeof module<"u"?module.exports=st(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],st):(M=typeof globalThis<"u"?globalThis:M||self,M.CRender=st(M.React,M.ReactDOM))})(this,function(M,st){"use strict";function ai(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const ii=ai(st);var tr={exports:{}},ct={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yn;function si(){if(yn)return ct;yn=1;var e=M,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(s,u,f){var l,p={},d=null,v=null;f!==void 0&&(d=""+f),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(v=u.ref);for(l in u)n.call(u,l)&&!a.hasOwnProperty(l)&&(p[l]=u[l]);if(s&&s.defaultProps)for(l in u=s.defaultProps,u)p[l]===void 0&&(p[l]=u[l]);return{$$typeof:t,type:s,key:d,ref:v,props:p,_owner:o.current}}return ct.Fragment=r,ct.jsx=i,ct.jsxs=i,ct}var ut={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gn;function ci(){return gn||(gn=1,"{}".NODE_ENV!=="production"&&function(){var e=M,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),g=Symbol.iterator,E="@@iterator";function w(c){if(c===null||typeof c!="object")return null;var h=g&&c[g]||c[E];return typeof h=="function"?h:null}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function O(c){{for(var h=arguments.length,m=new Array(h>1?h-1:0),S=1;S<h;S++)m[S-1]=arguments[S];U("error",c,m)}}function U(c,h,m){{var S=j.ReactDebugCurrentFrame,N=S.getStackAddendum();N!==""&&(h+="%s",m=m.concat([N]));var $=m.map(function(R){return String(R)});$.unshift("Warning: "+h),Function.prototype.apply.call(console[c],console,$)}}var I=!1,Y=!1,q=!1,ce=!1,A=!1,L;L=Symbol.for("react.module.reference");function H(c){return!!(typeof c=="string"||typeof c=="function"||c===n||c===a||A||c===o||c===f||c===l||ce||c===v||I||Y||q||typeof c=="object"&&c!==null&&(c.$$typeof===d||c.$$typeof===p||c.$$typeof===i||c.$$typeof===s||c.$$typeof===u||c.$$typeof===L||c.getModuleId!==void 0))}function he(c,h,m){var S=c.displayName;if(S)return S;var N=h.displayName||h.name||"";return N!==""?m+"("+N+")":m}function Fe(c){return c.displayName||"Context"}function ue(c){if(c==null)return null;if(typeof c.tag=="number"&&O("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case n:return"Fragment";case r:return"Portal";case a:return"Profiler";case o:return"StrictMode";case f:return"Suspense";case l:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case s:var h=c;return Fe(h)+".Consumer";case i:var m=c;return Fe(m._context)+".Provider";case u:return he(c,c.render,"ForwardRef");case p:var S=c.displayName||null;return S!==null?S:ue(c.type)||"Memo";case d:{var N=c,$=N._payload,R=N._init;try{return ue(R($))}catch{return null}}}return null}var be=Object.assign,_e=0,Se,ee,Jt,nt,qt,Le,ot;function te(){}te.__reactDisabledLog=!0;function Oe(){{if(_e===0){Se=console.log,ee=console.info,Jt=console.warn,nt=console.error,qt=console.group,Le=console.groupCollapsed,ot=console.groupEnd;var c={configurable:!0,enumerable:!0,value:te,writable:!0};Object.defineProperties(console,{info:c,log:c,warn:c,error:c,group:c,groupCollapsed:c,groupEnd:c})}_e++}}function Rt(){{if(_e--,_e===0){var c={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:be({},c,{value:Se}),info:be({},c,{value:ee}),warn:be({},c,{value:Jt}),error:be({},c,{value:nt}),group:be({},c,{value:qt}),groupCollapsed:be({},c,{value:Le}),groupEnd:be({},c,{value:ot})})}_e<0&&O("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Nt=j.ReactCurrentDispatcher,ln;function Qt(c,h,m){{if(ln===void 0)try{throw Error()}catch(N){var S=N.stack.trim().match(/\n( *(at )?)/);ln=S&&S[1]||""}return`
`+ln+c}}var fn=!1,Xt;{var Lm=typeof WeakMap=="function"?WeakMap:Map;Xt=new Lm}function Wa(c,h){if(!c||fn)return"";{var m=Xt.get(c);if(m!==void 0)return m}var S;fn=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var $;$=Nt.current,Nt.current=null,Oe();try{if(h){var R=function(){throw Error()};if(Object.defineProperty(R.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(R,[])}catch(je){S=je}Reflect.construct(c,[],R)}else{try{R.call()}catch(je){S=je}c.call(R.prototype)}}else{try{throw Error()}catch(je){S=je}c()}}catch(je){if(je&&S&&typeof je.stack=="string"){for(var x=je.stack.split(`
`),Q=S.stack.split(`
`),z=x.length-1,W=Q.length-1;z>=1&&W>=0&&x[z]!==Q[W];)W--;for(;z>=1&&W>=0;z--,W--)if(x[z]!==Q[W]){if(z!==1||W!==1)do if(z--,W--,W<0||x[z]!==Q[W]){var oe=`
`+x[z].replace(" at new "," at ");return c.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",c.displayName)),typeof c=="function"&&Xt.set(c,oe),oe}while(z>=1&&W>=0);break}}}finally{fn=!1,Nt.current=$,Rt(),Error.prepareStackTrace=N}var it=c?c.displayName||c.name:"",oi=it?Qt(it):"";return typeof c=="function"&&Xt.set(c,oi),oi}function Bm(c,h,m){return Wa(c,!1)}function Um(c){var h=c.prototype;return!!(h&&h.isReactComponent)}function Kt(c,h,m){if(c==null)return"";if(typeof c=="function")return Wa(c,Um(c));if(typeof c=="string")return Qt(c);switch(c){case f:return Qt("Suspense");case l:return Qt("SuspenseList")}if(typeof c=="object")switch(c.$$typeof){case u:return Bm(c.render);case p:return Kt(c.type,h,m);case d:{var S=c,N=S._payload,$=S._init;try{return Kt($(N),h,m)}catch{}}}return""}var Zt=Object.prototype.hasOwnProperty,Ha={},Ya=j.ReactDebugCurrentFrame;function er(c){if(c){var h=c._owner,m=Kt(c.type,c._source,h?h.type:null);Ya.setExtraStackFrame(m)}else Ya.setExtraStackFrame(null)}function Vm(c,h,m,S,N){{var $=Function.call.bind(Zt);for(var R in c)if($(c,R)){var x=void 0;try{if(typeof c[R]!="function"){var Q=Error((S||"React class")+": "+m+" type `"+R+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[R]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Q.name="Invariant Violation",Q}x=c[R](h,R,S,m,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(z){x=z}x&&!(x instanceof Error)&&(er(N),O("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",S||"React class",m,R,typeof x),er(null)),x instanceof Error&&!(x.message in Ha)&&(Ha[x.message]=!0,er(N),O("Failed %s type: %s",m,x.message),er(null))}}}var zm=Array.isArray;function dn(c){return zm(c)}function Gm(c){{var h=typeof Symbol=="function"&&Symbol.toStringTag,m=h&&c[Symbol.toStringTag]||c.constructor.name||"Object";return m}}function Wm(c){try{return Ja(c),!1}catch{return!0}}function Ja(c){return""+c}function qa(c){if(Wm(c))return O("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Gm(c)),Ja(c)}var Mt=j.ReactCurrentOwner,Hm={key:!0,ref:!0,__self:!0,__source:!0},Qa,Xa,pn;pn={};function Ym(c){if(Zt.call(c,"ref")){var h=Object.getOwnPropertyDescriptor(c,"ref").get;if(h&&h.isReactWarning)return!1}return c.ref!==void 0}function Jm(c){if(Zt.call(c,"key")){var h=Object.getOwnPropertyDescriptor(c,"key").get;if(h&&h.isReactWarning)return!1}return c.key!==void 0}function qm(c,h){if(typeof c.ref=="string"&&Mt.current&&h&&Mt.current.stateNode!==h){var m=ue(Mt.current.type);pn[m]||(O('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ue(Mt.current.type),c.ref),pn[m]=!0)}}function Qm(c,h){{var m=function(){Qa||(Qa=!0,O("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};m.isReactWarning=!0,Object.defineProperty(c,"key",{get:m,configurable:!0})}}function Xm(c,h){{var m=function(){Xa||(Xa=!0,O("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};m.isReactWarning=!0,Object.defineProperty(c,"ref",{get:m,configurable:!0})}}var Km=function(c,h,m,S,N,$,R){var x={$$typeof:t,type:c,key:h,ref:m,props:R,_owner:$};return x._store={},Object.defineProperty(x._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(x,"_self",{configurable:!1,enumerable:!1,writable:!1,value:S}),Object.defineProperty(x,"_source",{configurable:!1,enumerable:!1,writable:!1,value:N}),Object.freeze&&(Object.freeze(x.props),Object.freeze(x)),x};function Zm(c,h,m,S,N){{var $,R={},x=null,Q=null;m!==void 0&&(qa(m),x=""+m),Jm(h)&&(qa(h.key),x=""+h.key),Ym(h)&&(Q=h.ref,qm(h,N));for($ in h)Zt.call(h,$)&&!Hm.hasOwnProperty($)&&(R[$]=h[$]);if(c&&c.defaultProps){var z=c.defaultProps;for($ in z)R[$]===void 0&&(R[$]=z[$])}if(x||Q){var W=typeof c=="function"?c.displayName||c.name||"Unknown":c;x&&Qm(R,W),Q&&Xm(R,W)}return Km(c,x,Q,N,S,Mt.current,R)}}var hn=j.ReactCurrentOwner,Ka=j.ReactDebugCurrentFrame;function at(c){if(c){var h=c._owner,m=Kt(c.type,c._source,h?h.type:null);Ka.setExtraStackFrame(m)}else Ka.setExtraStackFrame(null)}var vn;vn=!1;function mn(c){return typeof c=="object"&&c!==null&&c.$$typeof===t}function Za(){{if(hn.current){var c=ue(hn.current.type);if(c)return`

Check the render method of \``+c+"`."}return""}}function ey(c){{if(c!==void 0){var h=c.fileName.replace(/^.*[\\\/]/,""),m=c.lineNumber;return`

Check your code at `+h+":"+m+"."}return""}}var ei={};function ty(c){{var h=Za();if(!h){var m=typeof c=="string"?c:c.displayName||c.name;m&&(h=`

Check the top-level render call using <`+m+">.")}return h}}function ti(c,h){{if(!c._store||c._store.validated||c.key!=null)return;c._store.validated=!0;var m=ty(h);if(ei[m])return;ei[m]=!0;var S="";c&&c._owner&&c._owner!==hn.current&&(S=" It was passed a child from "+ue(c._owner.type)+"."),at(c),O('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',m,S),at(null)}}function ri(c,h){{if(typeof c!="object")return;if(dn(c))for(var m=0;m<c.length;m++){var S=c[m];mn(S)&&ti(S,h)}else if(mn(c))c._store&&(c._store.validated=!0);else if(c){var N=w(c);if(typeof N=="function"&&N!==c.entries)for(var $=N.call(c),R;!(R=$.next()).done;)mn(R.value)&&ti(R.value,h)}}}function ry(c){{var h=c.type;if(h==null||typeof h=="string")return;var m;if(typeof h=="function")m=h.propTypes;else if(typeof h=="object"&&(h.$$typeof===u||h.$$typeof===p))m=h.propTypes;else return;if(m){var S=ue(h);Vm(m,c.props,"prop",S,c)}else if(h.PropTypes!==void 0&&!vn){vn=!0;var N=ue(h);O("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",N||"Unknown")}typeof h.getDefaultProps=="function"&&!h.getDefaultProps.isReactClassApproved&&O("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function ny(c){{for(var h=Object.keys(c.props),m=0;m<h.length;m++){var S=h[m];if(S!=="children"&&S!=="key"){at(c),O("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",S),at(null);break}}c.ref!==null&&(at(c),O("Invalid attribute `ref` supplied to `React.Fragment`."),at(null))}}function ni(c,h,m,S,N,$){{var R=H(c);if(!R){var x="";(c===void 0||typeof c=="object"&&c!==null&&Object.keys(c).length===0)&&(x+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Q=ey(N);Q?x+=Q:x+=Za();var z;c===null?z="null":dn(c)?z="array":c!==void 0&&c.$$typeof===t?(z="<"+(ue(c.type)||"Unknown")+" />",x=" Did you accidentally export a JSX literal instead of a component?"):z=typeof c,O("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",z,x)}var W=Zm(c,h,m,N,$);if(W==null)return W;if(R){var oe=h.children;if(oe!==void 0)if(S)if(dn(oe)){for(var it=0;it<oe.length;it++)ri(oe[it],c);Object.freeze&&Object.freeze(oe)}else O("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ri(oe,c)}return c===n?ny(W):ry(W),W}}function oy(c,h,m){return ni(c,h,m,!0)}function ay(c,h,m){return ni(c,h,m,!1)}var iy=ay,sy=oy;ut.Fragment=n,ut.jsx=iy,ut.jsxs=sy}()),ut}"{}".NODE_ENV==="production"?tr.exports=si():tr.exports=ci();var bn=tr.exports;const Ce=bn.jsx,_n=bn.jsxs;var ui=Object.defineProperty,li=(e,t,r)=>t in e?ui(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t,r)=>(li(e,typeof t!="symbol"?t+"":t,r),r);const fi=e=>()=>{console.warn(`${e} need to be implement getComponent`)},di=["customPageRootRender"],jn=["pageRender","render","convertModelToComponent","getComponent","getContext","getUtils","getDataLink","createDataLink","transformProps","transformData","transformGlobalData","errorCatch","clear"],En=e=>[...jn,...di].reduce((t,r)=>{var n;return e!=null&&e[r]?t[r]=(n=e[r])==null?void 0:n.bind(e):jn.includes(r)&&(t[r]=fi),t},{});var pi=Object.defineProperty,hi=(e,t,r)=>t in e?pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t,r)=>(hi(e,typeof t!="symbol"?t+"":t,r),r),vi=typeof global=="object"&&global&&global.Object===Object&&global;const wn=vi;var mi=typeof self=="object"&&self&&self.Object===Object&&self,yi=wn||mi||Function("return this")();const le=yi;var gi=le.Symbol;const re=gi;var Sn=Object.prototype,bi=Sn.hasOwnProperty,_i=Sn.toString,lt=re?re.toStringTag:void 0;function ji(e){var t=bi.call(e,lt),r=e[lt];try{e[lt]=void 0;var n=!0}catch{}var o=_i.call(e);return n&&(t?e[lt]=r:delete e[lt]),o}var Ei=Object.prototype,wi=Ei.toString;function Si(e){return wi.call(e)}var Oi="[object Null]",Ci="[object Undefined]",On=re?re.toStringTag:void 0;function xe(e){return e==null?e===void 0?Ci:Oi:On&&On in Object(e)?ji(e):Si(e)}function fe(e){return e!=null&&typeof e=="object"}var xi="[object Symbol]";function rr(e){return typeof e=="symbol"||fe(e)&&xe(e)==xi}function nr(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Ri=Array.isArray;const V=Ri;var Ni=1/0,Cn=re?re.prototype:void 0,xn=Cn?Cn.toString:void 0;function Rn(e){if(typeof e=="string")return e;if(V(e))return nr(e,Rn)+"";if(rr(e))return xn?xn.call(e):"";var t=e+"";return t=="0"&&1/e==-Ni?"-0":t}function ae(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function or(e){return e}var Mi="[object AsyncFunction]",Ti="[object Function]",Ai="[object GeneratorFunction]",$i="[object Proxy]";function ar(e){if(!ae(e))return!1;var t=xe(e);return t==Ti||t==Ai||t==Mi||t==$i}var Pi=le["__core-js_shared__"];const ir=Pi;var Nn=function(){var e=/[^.]+$/.exec(ir&&ir.keys&&ir.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Di(e){return!!Nn&&Nn in e}var ki=Function.prototype,Ii=ki.toString;function Re(e){if(e!=null){try{return Ii.call(e)}catch{}try{return e+""}catch{}}return""}var Fi=/[\\^$.*+?()[\]{}|]/g,Li=/^\[object .+?Constructor\]$/,Bi=Function.prototype,Ui=Object.prototype,Vi=Bi.toString,zi=Ui.hasOwnProperty,Gi=RegExp("^"+Vi.call(zi).replace(Fi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wi(e){if(!ae(e)||Di(e))return!1;var t=ar(e)?Gi:Li;return t.test(Re(e))}function Hi(e,t){return e==null?void 0:e[t]}function Ne(e,t){var r=Hi(e,t);return Wi(r)?r:void 0}var Yi=Ne(le,"WeakMap");const sr=Yi;var Mn=Object.create,Ji=function(){function e(){}return function(t){if(!ae(t))return{};if(Mn)return Mn(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const qi=Ji;function Qi(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Xi(){}function Tn(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Ki=800,Zi=16,es=Date.now;function ts(e){var t=0,r=0;return function(){var n=es(),o=Zi-(n-r);if(r=n,o>0){if(++t>=Ki)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function rs(e){return function(){return e}}var ns=function(){try{var e=Ne(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Tt=ns;var os=Tt?function(e,t){return Tt(e,"toString",{configurable:!0,enumerable:!1,value:rs(t),writable:!0})}:or,as=ts(os);const An=as;function is(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function ss(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function cs(e){return e!==e}function us(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function ls(e,t,r){return t===t?us(e,t,r):ss(e,cs,r)}function fs(e,t){var r=e==null?0:e.length;return!!r&&ls(e,t,0)>-1}var ds=9007199254740991,ps=/^(?:0|[1-9]\d*)$/;function At(e,t){var r=typeof e;return t=t??ds,!!t&&(r=="number"||r!="symbol"&&ps.test(e))&&e>-1&&e%1==0&&e<t}function cr(e,t,r){t=="__proto__"&&Tt?Tt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ft(e,t){return e===t||e!==e&&t!==t}var hs=Object.prototype,vs=hs.hasOwnProperty;function ur(e,t,r){var n=e[t];(!(vs.call(e,t)&&ft(n,r))||r===void 0&&!(t in e))&&cr(e,t,r)}function Be(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;u===void 0&&(u=e[s]),o?cr(r,s,u):ur(r,s,u)}return r}var $n=Math.max;function Pn(e,t,r){return t=$n(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=$n(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(i),Qi(e,this,s)}}function Dn(e,t){return An(Pn(e,t,or),e+"")}var ms=9007199254740991;function lr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ms}function $t(e){return e!=null&&lr(e.length)&&!ar(e)}function ys(e,t,r){if(!ae(r))return!1;var n=typeof t;return(n=="number"?$t(r)&&At(t,r.length):n=="string"&&t in r)?ft(r[t],e):!1}function gs(e){return Dn(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,i&&ys(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,a)}return t})}var bs=Object.prototype;function fr(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||bs;return e===r}function _s(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var js="[object Arguments]";function kn(e){return fe(e)&&xe(e)==js}var In=Object.prototype,Es=In.hasOwnProperty,ws=In.propertyIsEnumerable,Ss=kn(function(){return arguments}())?kn:function(e){return fe(e)&&Es.call(e,"callee")&&!ws.call(e,"callee")};const dt=Ss;function Os(){return!1}var Fn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ln=Fn&&typeof module=="object"&&module&&!module.nodeType&&module,Cs=Ln&&Ln.exports===Fn,Bn=Cs?le.Buffer:void 0,xs=Bn?Bn.isBuffer:void 0,Rs=xs||Os;const pt=Rs;var Ns="[object Arguments]",Ms="[object Array]",Ts="[object Boolean]",As="[object Date]",$s="[object Error]",Ps="[object Function]",Ds="[object Map]",ks="[object Number]",Is="[object Object]",Fs="[object RegExp]",Ls="[object Set]",Bs="[object String]",Us="[object WeakMap]",Vs="[object ArrayBuffer]",zs="[object DataView]",Gs="[object Float32Array]",Ws="[object Float64Array]",Hs="[object Int8Array]",Ys="[object Int16Array]",Js="[object Int32Array]",qs="[object Uint8Array]",Qs="[object Uint8ClampedArray]",Xs="[object Uint16Array]",Ks="[object Uint32Array]",D={};D[Gs]=D[Ws]=D[Hs]=D[Ys]=D[Js]=D[qs]=D[Qs]=D[Xs]=D[Ks]=!0,D[Ns]=D[Ms]=D[Vs]=D[Ts]=D[zs]=D[As]=D[$s]=D[Ps]=D[Ds]=D[ks]=D[Is]=D[Fs]=D[Ls]=D[Bs]=D[Us]=!1;function Zs(e){return fe(e)&&lr(e.length)&&!!D[xe(e)]}function dr(e){return function(t){return e(t)}}var Un=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ht=Un&&typeof module=="object"&&module&&!module.nodeType&&module,ec=ht&&ht.exports===Un,pr=ec&&wn.process,tc=function(){try{var e=ht&&ht.require&&ht.require("util").types;return e||pr&&pr.binding&&pr.binding("util")}catch{}}();const Ue=tc;var Vn=Ue&&Ue.isTypedArray,rc=Vn?dr(Vn):Zs;const hr=rc;var nc=Object.prototype,oc=nc.hasOwnProperty;function zn(e,t){var r=V(e),n=!r&&dt(e),o=!r&&!n&&pt(e),a=!r&&!n&&!o&&hr(e),i=r||n||o||a,s=i?_s(e.length,String):[],u=s.length;for(var f in e)(t||oc.call(e,f))&&!(i&&(f=="length"||o&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||At(f,u)))&&s.push(f);return s}function Gn(e,t){return function(r){return e(t(r))}}var ac=Gn(Object.keys,Object);const ic=ac;var sc=Object.prototype,cc=sc.hasOwnProperty;function uc(e){if(!fr(e))return ic(e);var t=[];for(var r in Object(e))cc.call(e,r)&&r!="constructor"&&t.push(r);return t}function Pt(e){return $t(e)?zn(e):uc(e)}function lc(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var fc=Object.prototype,dc=fc.hasOwnProperty;function pc(e){if(!ae(e))return lc(e);var t=fr(e),r=[];for(var n in e)n=="constructor"&&(t||!dc.call(e,n))||r.push(n);return r}function vt(e){return $t(e)?zn(e,!0):pc(e)}var hc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vc=/^\w*$/;function vr(e,t){if(V(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||rr(e)?!0:vc.test(e)||!hc.test(e)||t!=null&&e in Object(t)}var mc=Ne(Object,"create");const mt=mc;function yc(){this.__data__=mt?mt(null):{},this.size=0}function gc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var bc="__lodash_hash_undefined__",_c=Object.prototype,jc=_c.hasOwnProperty;function Ec(e){var t=this.__data__;if(mt){var r=t[e];return r===bc?void 0:r}return jc.call(t,e)?t[e]:void 0}var wc=Object.prototype,Sc=wc.hasOwnProperty;function Oc(e){var t=this.__data__;return mt?t[e]!==void 0:Sc.call(t,e)}var Cc="__lodash_hash_undefined__";function xc(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=mt&&t===void 0?Cc:t,this}function Me(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Me.prototype.clear=yc,Me.prototype.delete=gc,Me.prototype.get=Ec,Me.prototype.has=Oc,Me.prototype.set=xc;function Rc(){this.__data__=[],this.size=0}function Dt(e,t){for(var r=e.length;r--;)if(ft(e[r][0],t))return r;return-1}var Nc=Array.prototype,Mc=Nc.splice;function Tc(e){var t=this.__data__,r=Dt(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Mc.call(t,r,1),--this.size,!0}function Ac(e){var t=this.__data__,r=Dt(t,e);return r<0?void 0:t[r][1]}function $c(e){return Dt(this.__data__,e)>-1}function Pc(e,t){var r=this.__data__,n=Dt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ve(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ve.prototype.clear=Rc,ve.prototype.delete=Tc,ve.prototype.get=Ac,ve.prototype.has=$c,ve.prototype.set=Pc;var Dc=Ne(le,"Map");const yt=Dc;function kc(){this.size=0,this.__data__={hash:new Me,map:new(yt||ve),string:new Me}}function Ic(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function kt(e,t){var r=e.__data__;return Ic(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Fc(e){var t=kt(this,e).delete(e);return this.size-=t?1:0,t}function Lc(e){return kt(this,e).get(e)}function Bc(e){return kt(this,e).has(e)}function Uc(e,t){var r=kt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function me(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}me.prototype.clear=kc,me.prototype.delete=Fc,me.prototype.get=Lc,me.prototype.has=Bc,me.prototype.set=Uc;var Vc="Expected a function";function mr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Vc);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(mr.Cache||me),r}mr.Cache=me;var zc=500;function Gc(e){var t=mr(e,function(n){return r.size===zc&&r.clear(),n}),r=t.cache;return t}var Wc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hc=/\\(\\)?/g,Yc=Gc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Wc,function(r,n,o,a){t.push(o?a.replace(Hc,"$1"):n||r)}),t});const Jc=Yc;function qc(e){return e==null?"":Rn(e)}function Ve(e,t){return V(e)?e:vr(e,t)?[e]:Jc(qc(e))}var Qc=1/0;function ze(e){if(typeof e=="string"||rr(e))return e;var t=e+"";return t=="0"&&1/e==-Qc?"-0":t}function It(e,t){t=Ve(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ze(t[r++])];return r&&r==n?e:void 0}function Wn(e,t,r){var n=e==null?void 0:It(e,t);return n===void 0?r:n}function yr(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var Hn=re?re.isConcatSpreadable:void 0;function Xc(e){return V(e)||dt(e)||!!(Hn&&e&&e[Hn])}function gr(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=Xc),o||(o=[]);++a<i;){var s=e[a];t>0&&r(s)?t>1?gr(s,t-1,r,n,o):yr(o,s):n||(o[o.length]=s)}return o}function Kc(e){var t=e==null?0:e.length;return t?gr(e,1):[]}function Zc(e){return An(Pn(e,void 0,Kc),e+"")}var eu=Gn(Object.getPrototypeOf,Object);const br=eu;var tu="[object Object]",ru=Function.prototype,nu=Object.prototype,Yn=ru.toString,ou=nu.hasOwnProperty,au=Yn.call(Object);function X(e){if(!fe(e)||xe(e)!=tu)return!1;var t=br(e);if(t===null)return!0;var r=ou.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Yn.call(r)==au}function iu(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}function su(){this.__data__=new ve,this.size=0}function cu(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function uu(e){return this.__data__.get(e)}function lu(e){return this.__data__.has(e)}var fu=200;function du(e,t){var r=this.__data__;if(r instanceof ve){var n=r.__data__;if(!yt||n.length<fu-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new me(n)}return r.set(e,t),this.size=r.size,this}function ie(e){var t=this.__data__=new ve(e);this.size=t.size}ie.prototype.clear=su,ie.prototype.delete=cu,ie.prototype.get=uu,ie.prototype.has=lu,ie.prototype.set=du;function pu(e,t){return e&&Be(t,Pt(t),e)}function hu(e,t){return e&&Be(t,vt(t),e)}var Jn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qn=Jn&&typeof module=="object"&&module&&!module.nodeType&&module,vu=qn&&qn.exports===Jn,Qn=vu?le.Buffer:void 0,Xn=Qn?Qn.allocUnsafe:void 0;function Kn(e,t){if(t)return e.slice();var r=e.length,n=Xn?Xn(r):new e.constructor(r);return e.copy(n),n}function mu(e,t){for(var r=-1,n=e==null?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}function Zn(){return[]}var yu=Object.prototype,gu=yu.propertyIsEnumerable,eo=Object.getOwnPropertySymbols,bu=eo?function(e){return e==null?[]:(e=Object(e),mu(eo(e),function(t){return gu.call(e,t)}))}:Zn;const _r=bu;function _u(e,t){return Be(e,_r(e),t)}var ju=Object.getOwnPropertySymbols,Eu=ju?function(e){for(var t=[];e;)yr(t,_r(e)),e=br(e);return t}:Zn;const to=Eu;function wu(e,t){return Be(e,to(e),t)}function ro(e,t,r){var n=t(e);return V(e)?n:yr(n,r(e))}function jr(e){return ro(e,Pt,_r)}function Er(e){return ro(e,vt,to)}var Su=Ne(le,"DataView");const wr=Su;var Ou=Ne(le,"Promise");const Sr=Ou;var Cu=Ne(le,"Set");const Ge=Cu;var no="[object Map]",xu="[object Object]",oo="[object Promise]",ao="[object Set]",io="[object WeakMap]",so="[object DataView]",Ru=Re(wr),Nu=Re(yt),Mu=Re(Sr),Tu=Re(Ge),Au=Re(sr),Te=xe;(wr&&Te(new wr(new ArrayBuffer(1)))!=so||yt&&Te(new yt)!=no||Sr&&Te(Sr.resolve())!=oo||Ge&&Te(new Ge)!=ao||sr&&Te(new sr)!=io)&&(Te=function(e){var t=xe(e),r=t==xu?e.constructor:void 0,n=r?Re(r):"";if(n)switch(n){case Ru:return so;case Nu:return no;case Mu:return oo;case Tu:return ao;case Au:return io}return t});const gt=Te;var $u=Object.prototype,Pu=$u.hasOwnProperty;function Du(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Pu.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var ku=le.Uint8Array;const Ft=ku;function Or(e){var t=new e.constructor(e.byteLength);return new Ft(t).set(new Ft(e)),t}function Iu(e,t){var r=t?Or(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Fu=/\w*$/;function Lu(e){var t=new e.constructor(e.source,Fu.exec(e));return t.lastIndex=e.lastIndex,t}var co=re?re.prototype:void 0,uo=co?co.valueOf:void 0;function Bu(e){return uo?Object(uo.call(e)):{}}function lo(e,t){var r=t?Or(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Uu="[object Boolean]",Vu="[object Date]",zu="[object Map]",Gu="[object Number]",Wu="[object RegExp]",Hu="[object Set]",Yu="[object String]",Ju="[object Symbol]",qu="[object ArrayBuffer]",Qu="[object DataView]",Xu="[object Float32Array]",Ku="[object Float64Array]",Zu="[object Int8Array]",el="[object Int16Array]",tl="[object Int32Array]",rl="[object Uint8Array]",nl="[object Uint8ClampedArray]",ol="[object Uint16Array]",al="[object Uint32Array]";function il(e,t,r){var n=e.constructor;switch(t){case qu:return Or(e);case Uu:case Vu:return new n(+e);case Qu:return Iu(e,r);case Xu:case Ku:case Zu:case el:case tl:case rl:case nl:case ol:case al:return lo(e,r);case zu:return new n;case Gu:case Yu:return new n(e);case Wu:return Lu(e);case Hu:return new n;case Ju:return Bu(e)}}function fo(e){return typeof e.constructor=="function"&&!fr(e)?qi(br(e)):{}}var sl="[object Map]";function cl(e){return fe(e)&&gt(e)==sl}var po=Ue&&Ue.isMap,ul=po?dr(po):cl;const ll=ul;var fl="[object Set]";function dl(e){return fe(e)&&gt(e)==fl}var ho=Ue&&Ue.isSet,pl=ho?dr(ho):dl;const hl=pl;var vl=1,ml=2,yl=4,vo="[object Arguments]",gl="[object Array]",bl="[object Boolean]",_l="[object Date]",jl="[object Error]",mo="[object Function]",El="[object GeneratorFunction]",wl="[object Map]",Sl="[object Number]",yo="[object Object]",Ol="[object RegExp]",Cl="[object Set]",xl="[object String]",Rl="[object Symbol]",Nl="[object WeakMap]",Ml="[object ArrayBuffer]",Tl="[object DataView]",Al="[object Float32Array]",$l="[object Float64Array]",Pl="[object Int8Array]",Dl="[object Int16Array]",kl="[object Int32Array]",Il="[object Uint8Array]",Fl="[object Uint8ClampedArray]",Ll="[object Uint16Array]",Bl="[object Uint32Array]",P={};P[vo]=P[gl]=P[Ml]=P[Tl]=P[bl]=P[_l]=P[Al]=P[$l]=P[Pl]=P[Dl]=P[kl]=P[wl]=P[Sl]=P[yo]=P[Ol]=P[Cl]=P[xl]=P[Rl]=P[Il]=P[Fl]=P[Ll]=P[Bl]=!0,P[jl]=P[mo]=P[Nl]=!1;function bt(e,t,r,n,o,a){var i,s=t&vl,u=t&ml,f=t&yl;if(r&&(i=o?r(e,n,o,a):r(e)),i!==void 0)return i;if(!ae(e))return e;var l=V(e);if(l){if(i=Du(e),!s)return Tn(e,i)}else{var p=gt(e),d=p==mo||p==El;if(pt(e))return Kn(e,s);if(p==yo||p==vo||d&&!o){if(i=u||d?{}:fo(e),!s)return u?wu(e,hu(i,e)):_u(e,pu(i,e))}else{if(!P[p])return o?e:{};i=il(e,p,s)}}a||(a=new ie);var v=a.get(e);if(v)return v;a.set(e,i),hl(e)?e.forEach(function(w){i.add(bt(w,t,r,w,e,a))}):ll(e)&&e.forEach(function(w,j){i.set(j,bt(w,t,r,j,e,a))});var g=f?u?Er:jr:u?vt:Pt,E=l?void 0:g(e);return is(E||e,function(w,j){E&&(j=w,w=e[j]),ur(i,j,bt(w,t,r,j,e,a))}),i}var Ul=1,Vl=4;function go(e){return bt(e,Ul|Vl)}var zl="__lodash_hash_undefined__";function Gl(e){return this.__data__.set(e,zl),this}function Wl(e){return this.__data__.has(e)}function _t(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new me;++t<r;)this.add(e[t])}_t.prototype.add=_t.prototype.push=Gl,_t.prototype.has=Wl;function Hl(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function bo(e,t){return e.has(t)}var Yl=1,Jl=2;function _o(e,t,r,n,o,a){var i=r&Yl,s=e.length,u=t.length;if(s!=u&&!(i&&u>s))return!1;var f=a.get(e),l=a.get(t);if(f&&l)return f==t&&l==e;var p=-1,d=!0,v=r&Jl?new _t:void 0;for(a.set(e,t),a.set(t,e);++p<s;){var g=e[p],E=t[p];if(n)var w=i?n(E,g,p,t,e,a):n(g,E,p,e,t,a);if(w!==void 0){if(w)continue;d=!1;break}if(v){if(!Hl(t,function(j,O){if(!bo(v,O)&&(g===j||o(g,j,r,n,a)))return v.push(O)})){d=!1;break}}else if(!(g===E||o(g,E,r,n,a))){d=!1;break}}return a.delete(e),a.delete(t),d}function ql(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}function Cr(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Ql=1,Xl=2,Kl="[object Boolean]",Zl="[object Date]",ef="[object Error]",tf="[object Map]",rf="[object Number]",nf="[object RegExp]",of="[object Set]",af="[object String]",sf="[object Symbol]",cf="[object ArrayBuffer]",uf="[object DataView]",jo=re?re.prototype:void 0,xr=jo?jo.valueOf:void 0;function lf(e,t,r,n,o,a,i){switch(r){case uf:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case cf:return!(e.byteLength!=t.byteLength||!a(new Ft(e),new Ft(t)));case Kl:case Zl:case rf:return ft(+e,+t);case ef:return e.name==t.name&&e.message==t.message;case nf:case af:return e==t+"";case tf:var s=ql;case of:var u=n&Ql;if(s||(s=Cr),e.size!=t.size&&!u)return!1;var f=i.get(e);if(f)return f==t;n|=Xl,i.set(e,t);var l=_o(s(e),s(t),n,o,a,i);return i.delete(e),l;case sf:if(xr)return xr.call(e)==xr.call(t)}return!1}var ff=1,df=Object.prototype,pf=df.hasOwnProperty;function hf(e,t,r,n,o,a){var i=r&ff,s=jr(e),u=s.length,f=jr(t),l=f.length;if(u!=l&&!i)return!1;for(var p=u;p--;){var d=s[p];if(!(i?d in t:pf.call(t,d)))return!1}var v=a.get(e),g=a.get(t);if(v&&g)return v==t&&g==e;var E=!0;a.set(e,t),a.set(t,e);for(var w=i;++p<u;){d=s[p];var j=e[d],O=t[d];if(n)var U=i?n(O,j,d,t,e,a):n(j,O,d,e,t,a);if(!(U===void 0?j===O||o(j,O,r,n,a):U)){E=!1;break}w||(w=d=="constructor")}if(E&&!w){var I=e.constructor,Y=t.constructor;I!=Y&&"constructor"in e&&"constructor"in t&&!(typeof I=="function"&&I instanceof I&&typeof Y=="function"&&Y instanceof Y)&&(E=!1)}return a.delete(e),a.delete(t),E}var vf=1,Eo="[object Arguments]",wo="[object Array]",Lt="[object Object]",mf=Object.prototype,So=mf.hasOwnProperty;function yf(e,t,r,n,o,a){var i=V(e),s=V(t),u=i?wo:gt(e),f=s?wo:gt(t);u=u==Eo?Lt:u,f=f==Eo?Lt:f;var l=u==Lt,p=f==Lt,d=u==f;if(d&&pt(e)){if(!pt(t))return!1;i=!0,l=!1}if(d&&!l)return a||(a=new ie),i||hr(e)?_o(e,t,r,n,o,a):lf(e,t,u,r,n,o,a);if(!(r&vf)){var v=l&&So.call(e,"__wrapped__"),g=p&&So.call(t,"__wrapped__");if(v||g){var E=v?e.value():e,w=g?t.value():t;return a||(a=new ie),o(E,w,r,n,a)}}return d?(a||(a=new ie),hf(e,t,r,n,o,a)):!1}function Rr(e,t,r,n,o){return e===t?!0:e==null||t==null||!fe(e)&&!fe(t)?e!==e&&t!==t:yf(e,t,r,n,Rr,o)}var gf=1,bf=2;function _f(e,t,r,n){var o=r.length,a=o,i=!n;if(e==null)return!a;for(e=Object(e);o--;){var s=r[o];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<a;){s=r[o];var u=s[0],f=e[u],l=s[1];if(i&&s[2]){if(f===void 0&&!(u in e))return!1}else{var p=new ie;if(n)var d=n(f,l,u,e,t,p);if(!(d===void 0?Rr(l,f,gf|bf,n,p):d))return!1}}return!0}function Oo(e){return e===e&&!ae(e)}function jf(e){for(var t=Pt(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Oo(o)]}return t}function Co(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function Ef(e){var t=jf(e);return t.length==1&&t[0][2]?Co(t[0][0],t[0][1]):function(r){return r===e||_f(r,e,t)}}function wf(e,t){return e!=null&&t in Object(e)}function Sf(e,t,r){t=Ve(t,e);for(var n=-1,o=t.length,a=!1;++n<o;){var i=ze(t[n]);if(!(a=e!=null&&r(e,i)))break;e=e[i]}return a||++n!=o?a:(o=e==null?0:e.length,!!o&&lr(o)&&At(i,o)&&(V(e)||dt(e)))}function Of(e,t){return e!=null&&Sf(e,t,wf)}var Cf=1,xf=2;function Rf(e,t){return vr(e)&&Oo(t)?Co(ze(e),t):function(r){var n=Wn(r,e);return n===void 0&&n===t?Of(r,e):Rr(t,n,Cf|xf)}}function Nf(e){return function(t){return t==null?void 0:t[e]}}function Mf(e){return function(t){return It(t,e)}}function Tf(e){return vr(e)?Nf(ze(e)):Mf(e)}function Nr(e){return typeof e=="function"?e:e==null?or:typeof e=="object"?V(e)?Rf(e[0],e[1]):Ef(e):Tf(e)}function Af(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),s=i.length;s--;){var u=i[e?s:++o];if(r(a[u],u,a)===!1)break}return t}}var $f=Af();const Pf=$f;function Mr(e,t,r){(r!==void 0&&!ft(e[t],r)||r===void 0&&!(t in e))&&cr(e,t,r)}function Tr(e){return fe(e)&&$t(e)}function Ar(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Df(e){return Be(e,vt(e))}function kf(e,t,r,n,o,a,i){var s=Ar(e,r),u=Ar(t,r),f=i.get(u);if(f){Mr(e,r,f);return}var l=a?a(s,u,r+"",e,t,i):void 0,p=l===void 0;if(p){var d=V(u),v=!d&&pt(u),g=!d&&!v&&hr(u);l=u,d||v||g?V(s)?l=s:Tr(s)?l=Tn(s):v?(p=!1,l=Kn(u,!0)):g?(p=!1,l=lo(u,!0)):l=[]:X(u)||dt(u)?(l=s,dt(s)?l=Df(s):(!ae(s)||ar(s))&&(l=fo(u))):p=!1}p&&(i.set(u,l),o(l,u,n,a,i),i.delete(u)),Mr(e,r,l)}function xo(e,t,r,n,o){e!==t&&Pf(t,function(a,i){if(o||(o=new ie),ae(a))kf(e,t,i,r,xo,n,o);else{var s=n?n(Ar(e,i),a,i+"",e,t,o):void 0;s===void 0&&(s=a),Mr(e,i,s)}},vt)}function If(e,t,r){for(var n=-1,o=e==null?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}function Ro(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function Ff(e,t){return t.length<2?e:It(e,iu(t,0,-1))}var Lf=gs(function(e,t,r){xo(e,t,r)});const No=Lf;var Bf="Expected a function";function Uf(e){if(typeof e!="function")throw new TypeError(Bf);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Vf(e,t){return t=Ve(t,e),e=Ff(e,t),e==null||delete e[ze(Ro(t))]}function zf(e){return X(e)?void 0:e}var Gf=1,Wf=2,Hf=4,Yf=Zc(function(e,t){var r={};if(e==null)return r;var n=!1;t=nr(t,function(a){return a=Ve(a,e),n||(n=a.length>1),a}),Be(e,Er(e),r),n&&(r=bt(r,Gf|Wf|Hf,zf));for(var o=t.length;o--;)Vf(r,t[o]);return r});const Mo=Yf;function Jf(e,t,r,n){if(!ae(e))return e;t=Ve(t,e);for(var o=-1,a=t.length,i=a-1,s=e;s!=null&&++o<a;){var u=ze(t[o]),f=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(o!=i){var l=s[u];f=n?n(l,u,s):void 0,f===void 0&&(f=ae(l)?l:At(t[o+1])?[]:{})}ur(s,u,f),s=s[u]}return e}function qf(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=It(e,i);r(s,i)&&Jf(a,Ve(i,e),s)}return a}function Qf(e,t){if(e==null)return{};var r=nr(Er(e),function(n){return[n]});return t=Nr(t),qf(e,r,function(n,o){return t(n,o[0])})}function Xf(e,t){return Qf(e,Uf(Nr(t)))}var Kf=1/0,Zf=Ge&&1/Cr(new Ge([,-0]))[1]==Kf?function(e){return new Ge(e)}:Xi;const ed=Zf;var td=200;function rd(e,t,r){var n=-1,o=fs,a=e.length,i=!0,s=[],u=s;if(r)i=!1,o=If;else if(a>=td){var f=t?null:ed(e);if(f)return Cr(f);i=!1,o=bo,u=new _t}else u=t?[]:s;e:for(;++n<a;){var l=e[n],p=t?t(l):l;if(l=r||l!==0?l:0,i&&p===p){for(var d=u.length;d--;)if(u[d]===p)continue e;t&&u.push(p),s.push(l)}else o(u,p,r)||(u!==s&&u.push(p),s.push(l))}return s}var nd=Dn(function(e){var t=Ro(e);return Tr(t)&&(t=void 0),rd(gr(e,1,Tr,!0),Nr(t))});const od=nd;class To extends TypeError{constructor(t,r){let n;const{message:o,...a}=t,{path:i}=t,s=i.length===0?o:"At path: "+i.join(".")+" -- "+o;super(s),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[t,...r()]}}}function ad(e){return se(e)&&typeof e[Symbol.iterator]=="function"}function se(e){return typeof e=="object"&&e!=null}function Z(e){return typeof e=="string"?JSON.stringify(e):""+e}function id(e){const{done:t,value:r}=e.next();return t?void 0:r}function sd(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:o,branch:a}=t,{type:i}=r,{refinement:s,message:u="Expected a value of type `"+i+"`"+(s?" with refinement `"+s+"`":"")+", but received: `"+Z(n)+"`"}=e;return{value:n,type:i,refinement:s,key:o[o.length-1],path:o,branch:a,...e,message:u}}function*Ao(e,t,r,n){ad(e)||(e=[e]);for(const o of e){const a=sd(o,t,r,n);a&&(yield a)}}function*$r(e,t,r){r===void 0&&(r={});const{path:n=[],branch:o=[e],coerce:a=!1,mask:i=!1}=r,s={path:n,branch:o};if(a&&(e=t.coercer(e,s),i&&t.type!=="type"&&se(t.schema)&&se(e)&&!Array.isArray(e)))for(const f in e)t.schema[f]===void 0&&delete e[f];let u="valid";for(const f of t.validator(e,s))u="not_valid",yield[f,void 0];for(let[f,l,p]of t.entries(e,s)){const d=$r(l,p,{path:f===void 0?n:[...n,f],branch:f===void 0?o:[...o,l],coerce:a,mask:i});for(const v of d)v[0]?(u=v[0].refinement!=null?"not_refined":"not_valid",yield[v[0],void 0]):a&&(l=v[1],f===void 0?e=l:e instanceof Map?e.set(f,l):e instanceof Set?e.add(l):se(e)&&(e[f]=l))}if(u!=="not_valid")for(const f of t.refiner(e,s))u="not_refined",yield[f,void 0];u==="valid"&&(yield[void 0,e])}class de{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:r,schema:n,validator:o,refiner:a,coercer:i=u=>u,entries:s=function*(){}}=t;this.type=r,this.schema=n,this.entries=s,this.coercer=i,o?this.validator=(u,f)=>{const l=o(u,f);return Ao(l,f,this,u)}:this.validator=()=>[],a?this.refiner=(u,f)=>{const l=a(u,f);return Ao(l,f,this,u)}:this.refiner=()=>[]}assert(t){return $o(t,this)}create(t){return cd(t,this)}is(t){return ld(t,this)}mask(t){return ud(t,this)}validate(t,r){return r===void 0&&(r={}),We(t,this,r)}}function $o(e,t){const r=We(e,t);if(r[0])throw r[0]}function cd(e,t){const r=We(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function ud(e,t){const r=We(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function ld(e,t){return!We(e,t)[0]}function We(e,t,r){r===void 0&&(r={});const n=$r(e,t,r),o=id(n);return o[0]?[new To(o[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function Pr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t[0].type==="type",o=t.map(i=>i.schema),a=Object.assign({},...o);return n?Io(a):T(a)}function Ee(e,t){return new de({type:e,schema:null,validator:t})}function He(e){return new de({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)},refiner(t,r){return e(t,r).refiner(t,r)}})}function Po(e,t){const{schema:r}=e,n={...r};for(const o of t)delete n[o];switch(e.type){case"type":return Io(n);default:return T(n)}}function G(){return Ee("any",()=>!0)}function B(e){return new de({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Z(t)}})}function Ae(){return Ee("boolean",e=>typeof e=="boolean")}function Dr(e){const t={},r=e.map(n=>Z(n)).join();for(const n of e)t[n]=n;return new de({type:"enums",schema:t,validator(n){return e.includes(n)||"Expected one of `"+r+"`, but received: "+Z(n)}})}function Do(){return Ee("func",e=>typeof e=="function"||"Expected a function, but received: "+Z(e))}function K(e){const t=Z(e),r=typeof e;return new de({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||"Expected the literal `"+t+"`, but received: "+Z(n)}})}function fd(){return Ee("never",()=>!1)}function ko(){return Ee("number",e=>typeof e=="number"&&!isNaN(e)||"Expected a number, but received: "+Z(e))}function T(e){const t=e?Object.keys(e):[],r=fd();return new de({type:"object",schema:e||null,*entries(n){if(e&&se(n)){const o=new Set(Object.keys(n));for(const a of t)o.delete(a),yield[a,n[a],e[a]];for(const a of o)yield[a,n[a],r]}},validator(n){return se(n)||"Expected an object, but received: "+Z(n)},coercer(n){return se(n)?{...n}:n}})}function b(e){return new de({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function jt(e,t){return new de({type:"record",schema:null,*entries(r){if(se(r))for(const n in r){const o=r[n];yield[n,n,e],yield[n,o,t]}},validator(r){return se(r)||"Expected an object, but received: "+Z(r)}})}function y(){return Ee("string",e=>typeof e=="string"||"Expected a string, but received: "+Z(e))}function Io(e){const t=Object.keys(e);return new de({type:"type",schema:e,*entries(r){if(se(r))for(const n of t)yield[n,r[n],e[n]]},validator(r){return se(r)||"Expected an object, but received: "+Z(r)}})}function J(e){const t=e.map(r=>r.type).join(" | ");return new de({type:"union",schema:null,coercer(r,n){return(e.find(o=>{const[a]=o.validate(r,{coerce:!0});return!a})||dd()).coercer(r,n)},validator(r,n){const o=[];for(const a of e){const[...i]=$r(r,a,n),[s]=i;if(s[0])for(const[u]of i)u&&o.push(u);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Z(r),...o]}})}function dd(){return Ee("unknown",()=>!0)}const kr=T({package:y(),version:y(),name:y(),exportName:b(y()),destructuring:b(Ae()),subName:b(y()),main:b(y()),cssPaths:b(B(y()))}),pd=B(kr),hd=["CBlock","CContainer","CImage","CCanvas","CVideo","CAudio","CText","CNativeTag"];var ne=(e=>(e.SLOT="SLOT",e.FUNCTION="FUNCTION",e.EXPRESSION="EXPRESSION",e))(ne||{}),Ir=(e=>(e.DESIGN="design",e.SAVE="save",e))(Ir||{}),Fr=(e=>(e.FUNC="FUNC",e.COMP="COMP",e))(Fr||{});const vd=()=>Ee("normalObj",e=>!X(e)||[ne.SLOT,ne.EXPRESSION,ne.FUNCTION].includes(e==null?void 0:e.type)?!1:(We(e,jt(y(),Lr)),!0)),Lr=J([y(),ko(),Ae(),T({type:K(ne.SLOT),renderType:Dr([Fr.FUNC,Fr.COMP]),params:b(B(y())),value:He(()=>J([Ye,B(Ye)]))}),T({type:K(ne.EXPRESSION),value:y()}),T({type:K(ne.FUNCTION),value:y()}),vd(),B(He(()=>Lr))]),Fo=T({type:K(ne.EXPRESSION),value:y()}),Ye=T({id:b(y()),title:b(y()),componentName:y(),props:b(jt(y(),Lr)),nodeName:b(y()),state:b(jt(y(),G())),children:He(()=>b(B(J([y(),Ye])))),configure:b(G()),css:b(G()),style:b(G()),classNames:b(B(G())),refId:b(y()),extra:b(jt(G(),G())),condition:b(J([Ae(),Fo])),loop:b(T({open:Ae(),data:J([B(G()),Fo]),args:b(B(y())),forName:b(y()),forIndex:b(y()),key:b(G()),name:b(y())})),methods:b(B(G()))}),Bt=J([y(),T({label:y(),tip:b(y())})]),md=T({type:K("shape"),value:B(T({name:y(),title:Bt,valueType:He(()=>Ut)}))}),yd=T({type:K("enums"),value:B(y())});T({type:K("array"),value:He(()=>Ut)});const gd=T({type:K("array"),value:He(()=>B(Ut))}),Ut=J([Dr(["array","boolean","number","object","string"]),Dr(["component","expression","function"]),md,yd,gd]),bd=J([y(),T({componentName:y(),props:b(G()),initialValue:b(G()),component:b(G())})]),Br=T({name:y(),title:Bt,valueType:Ut,description:b(y()),defaultValue:G(),setters:b(B(bd)),condition:b(Do())});J([y(),Do()]);var Ur=(e=>(e.SINGLE="single",e.GROUP="group",e))(Ur||{});J([y(),T({name:y(),describe:b(y()),params:b(T({name:y(),description:y()})),template:y()})]);const _d=T({id:b(y()),title:y(),snapshot:J([y(),G()]),snapshotText:b(y()),description:b(y()),tags:b(B(y())),groupName:b(y()),category:b(y()),schema:Pr(Po(Ye,["id"]),T({componentName:b(y())}))}),jd=T({componentName:y(),title:y(),screenshot:b(y()),icon:b(y()),tags:b(B(y())),groupName:b(y()),category:b(y()),priority:b(ko()),npm:b(kr),snippets:B(_d),props:B(J([Br,T({title:b(Bt),type:K("single"),content:Br}),T({title:b(Bt),type:K("group"),content:B(Br)})])),fixedProps:b(G()),isContainer:b(J([Ae(),T({placeholder:y(),width:y(),height:y()})])),supportDispatchNativeEvent:b(J([Ae(),B(y())])),isLayout:b(Ae()),rootSelector:b(y()),advanceCustom:b(G()),extra:b(jt(G(),G()))}),Ed=e=>({data:t,message:r,throwError:n})=>{const o=e({data:t,message:r,throwError:n});if(o.isValidate)return o;if(n)throw o.message||r?new Error(`${o.message||r}
 originData: ${JSON.stringify(t)}`):new Error(`${JSON.stringify(t)} 
 data struct format is invalidate`);return o.message||r?console.warn(`${o.message||r}
 originData: ${JSON.stringify(t)}`):console.warn(`${JSON.stringify(t)} 
 data struct format is invalidate`),o},Vr=e=>{const{data:t,message:r,throwError:n,dataStruct:o}=e;return Ed(({data:a})=>{try{return $o(a,o),{isValidate:!0}}catch(i){let s=i;return i instanceof To&&(s=i.failures().map(u=>`【${u.path.join(".")}】: ${u.message}
`)),{isValidate:!1,message:s,error:i}}})({data:t,message:r,throwError:n})};var Je=(e=>(e.ROOT_CONTAINER="RootContainer",e))(Je||{});const wd=T({type:K(ne.FUNCTION),value:y()}),Sd=Pr(Po(Ye,["componentName"]),T({componentName:K("RootContainer")}));function Od(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(o){o(r)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,r)})}}}const Et=Od(),Cd=(e,t)=>{const r={...e,value:[]},n=e.value;let o=new Pe([]);return t&&(o=t.materialsMode||new Pe([])),n&&(V(n)?r.value=n.map(a=>new F(a,{parent:t,materials:o})):X(n)&&r.value.push(new F(n,{parent:t,materials:o}))),r};class qe{constructor(t,r){C(this,"nodeType","SLOT"),C(this,"rawData"),C(this,"parent"),C(this,"emitter",Et),C(this,"data"),C(this,"id"),C(this,"materialsMode"),this.parent=(r==null?void 0:r.parent)||null,this.rawData=t;const n=(r==null?void 0:r.materials)||new Pe([]);this.materialsMode=n,this.id=pe(),this.data=Cd(t,this)}get value(){return this.data}export(t){const r=this.data,n=o=>{if(o instanceof F)return o.export(t);if(X(o)){const a={};return Object.keys(o||{}).forEach(i=>{a[i]=n(o[i])}),a}return V(o)?o.map(a=>n(a)):(t==="design"&&delete o.id,o)};return n(r)}}const Lo=e=>{let t=[];return e.forEach(r=>{const n=r;n.type?n.type===Ur.SINGLE?t.push(n.content):n.type===Ur.GROUP&&(t=[...t,...Lo(n.content)]):t.push(r)}),t},zr=(e,t,r)=>{if(e.type)return e.type===ne.SLOT?new qe(e,{parent:t,materials:r}):e;if(X(e)){const n={};return Object.keys(e).forEach(o=>{n[o]=Gr(e[o],t,r)}),n}else return Array.isArray(e)?e.map(n=>zr(n,t,r)):e},Gr=(e,t,r)=>X(e)?zr(e,t,r):V(e)?e.map(n=>zr(n,t,r)):e;class we{constructor(t,r,n){C(this,"nodeType","PROP"),C(this,"rawData"),C(this,"parent"),C(this,"emitter",Et),C(this,"data"),C(this,"name"),C(this,"materialsMode");const o=(n==null?void 0:n.materials)||new Pe([]);this.materialsMode=o,this.parent=n==null?void 0:n.parent,this.rawData=r,this.name=t,this.data=Gr(r,this,o)}isIncludeSlot(){return!1}isIncludeExpression(){return!1}get value(){return this.data}updateValue(t){const r=this.data;this.data=Gr(t??r,this,this.materialsMode),this.emitter.emit("onPropChange",{value:this.data,preValue:r,node:this}),this.parent&&!(this.parent instanceof qe)&&this.emitter.emit("onNodeChange",{value:this.parent.value,preValue:this.parent.value,node:this.parent})}get material(){const t=this.parent;if(t instanceof F){const r=t.material;return Lo((r==null?void 0:r.value.props)||[]).find(n=>n.name===this.name)}else return null}export(t){const r=this.data,n=o=>{if(o instanceof we||o instanceof qe||o instanceof F)return o.export(t);if(V(o))return o.map(a=>n(a));if(X(o)){const a={};return Object.keys(o||{}).forEach(i=>{a[i]=n(o[i])}),a}return o};return n(r)}}const xd=e=>{if(typeof e=="string")return!0;Vr({data:e,dataStruct:Ye,throwError:!1})},Bo=(e,t,r=new Pe([]))=>{if(typeof e=="string")return e;const n={...e,id:e.id??pe(),children:[],props:{},methods:e.methods||[],configure:No(e.configure||{},{propsSetter:{},advanceSetter:{}})},o=Object.keys(e.props||{});return o.length&&o.forEach(a=>{var i;const s=(i=e.props)==null?void 0:i[a];if(s instanceof we){n.props[a]=s;return}n.props[a]=new we(a,s||"",{parent:t,materials:r})}),e.children&&(Array.isArray(e.children)?n.children=e.children.map(a=>{if(a instanceof F)return a;if(X(a)){const i=a;return new F(i,{parent:t,materials:r})}else return a}):(e.children instanceof F&&(n.children=[e.children]),n.children=[new F(e.children,{parent:t,materials:r})])),n};class F{constructor(t,r){C(this,"nodeType","NODE"),C(this,"rawData"),C(this,"data"),C(this,"emitter",Et),C(this,"parent"),C(this,"materialsModel"),C(this,"listenerHandle"),C(this,"onChangeCbQueue"),this.rawData=JSON.parse(JSON.stringify(t)),xd(t);const n=(r==null?void 0:r.materials)||new Pe([]);this.parent=(r==null?void 0:r.parent)||null,this.materialsModel=n,this.data=Bo(t,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener()}registerListener(){const t=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",t),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",t)})}onChange(t){return this.onChangeCbQueue.push(t),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==t)}}destroy(){this.listenerHandle.forEach(t=>t())}get id(){return this.data.id}get value(){return this.data}clone(t){const r={...this.export("design"),id:t||pe()};return new F(r,{materials:this.materialsModel})}updateValue(t){const r=this.data,n={...this.data,...t};this.data=Bo(n,this),this.emitter.emit("onNodeChange",{value:n,preValue:r,node:this})}contains(t){return Yr(this,t)}get props(){return this.data.props}get material(){const t=this.materialsModel;return t==null?void 0:t.findByComponentName(this.data.componentName)}getPlainProps(){const t=this.data,r={};return Object.keys(t.props||{}).forEach(n=>{r[n]=t.props[n].export("design")}),r}getNodeConfig(t){var r;return this.data.configure[t]!==void 0?this.data.configure.isContainer:(r=this.material)==null?void 0:r.value.isContainer}isContainer(){return this.getNodeConfig("isContainer")}export(t){var r;const n=this.data;if(typeof n=="string")return n;const o={};Object.keys(n.props||{}).forEach(l=>{o[l]=n.props[l].export(t)});const a=(r=n.children)==null?void 0:r.map(l=>l instanceof F?l.export(t):l),i=n.configure||{},s=i.propsSetter||{},u={};Object.keys(s).forEach(l=>{const p=Wn(s,l,!1);p&&(u[l]=p)}),i.propsSetter=u,this.material&&this.materialsModel.usedMaterials.push(this.material);let f={...n,configure:i,props:o,children:a};return t==="design"&&delete f.id,f=Hr(f),f}}const Uo=(e,t,r)=>{const n={...e,id:pe(),props:{},componentName:Je.ROOT_CONTAINER,children:[],methods:e.methods||[],configure:No(e.configure||{},{propsSetter:{},advanceSetter:{}})};let o=[];V(e.children)?o=e.children.map(i=>i instanceof F?i:X(i)?new F(i,{parent:t,materials:r}):i):e.children instanceof F?o.push(e.children):e.children&&X(e.children)&&o.push(new F(e.children,{parent:t,materials:r}));const a=Object.keys(e.props||{});return a.length&&a.forEach(i=>{var s;const u=(s=e.props)==null?void 0:s[i];u instanceof we?n.props[i]=u:n.props[i]=new we(i,u||"",{parent:t,materials:r})}),n.children=o,n};class wt{constructor(t,{parent:r,materials:n}){C(this,"rawData"),C(this,"data"),C(this,"nodeType",Je.ROOT_CONTAINER),C(this,"emitter",Et),C(this,"materialsModel"),C(this,"listenerHandle"),C(this,"onChangeCbQueue"),C(this,"parent"),this.materialsModel=n,this.rawData=JSON.parse(JSON.stringify(t)),this.data=Uo(t,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener(),this.parent=r}registerListener(){const t=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",t),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",t)})}onChange(t){return this.onChangeCbQueue.push(t),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==t)}}get id(){return this.data.id}get value(){return this.data}get props(){return this.data.props}get material(){const t=this.materialsModel;return t==null?void 0:t.findByComponentName(this.data.componentName)}updateValue(t){const r=this.data,n={...this.data,...t};this.data=Uo(n,this,this.materialsModel),this.emitter.emit("onNodeChange",{value:this.data,preValue:r,node:this})}contains(t){return Yr(this,t)}getMaterialConfig(t){var r;return this.data.configure[t]!==void 0?this.data.configure.isContainer:(r=this.material)==null?void 0:r.value.isContainer}isContainer(){return this.getMaterialConfig("isContainer")}export(t=Ir.SAVE){var r;const n=this.data,o={};Object.keys(n.props||{}).forEach(u=>{o[u]=n.props[u].export(t)});const a=((r=n.children)==null?void 0:r.map(u=>{var f;return(f=u==null?void 0:u.export)==null?void 0:f.call(u,t)}))||[],i={...n,props:o,children:a.filter(u=>u)};let s=Mo(i,["id"]);return s=Hr(s),s}getPlainProps(){const t=this.data,r={};return Object.keys(t.props||{}).forEach(n=>{r[n]=t.props[n].export("design")}),r}destroy(){this.listenerHandle.forEach(t=>t())}clone(t){const r={...this.export("design"),id:t||pe()};return new wt(r,{materials:this.materialsModel,parent:null})}}const $e=e=>(e==null?void 0:e.type)===ne.EXPRESSION,Rd=e=>(e==null?void 0:e.type)===ne.FUNCTION,pe=()=>Math.random().toString(32).slice(3,9),Nd=e=>(e==null?void 0:e.nodeType)==="NODE",Wr=e=>(e==null?void 0:e.nodeType)==="PROP",Md=e=>(e==null?void 0:e.nodeType)==="SLOT",Hr=e=>Xf(e,t=>X(t)?!Object.keys(t).length:V(t)?!t.length:!t);function Td(e,t){const r=[e];for(;r.length;){const n=r.shift();if(n&&t(n))return n;const o=(n==null?void 0:n.props)||{},a=s=>{if(s instanceof F){r.push(s);return}if(s instanceof qe&&a(s.value.value),s instanceof we){a(s.value);return}if(X(s)){const u=s;Object.keys(u).forEach(f=>{a(u[f])});return}if(V(s)){s.forEach(u=>{a(u)});return}};a(o);const i=(n==null?void 0:n.value.children.filter(s=>s instanceof F))||[];r.push(...i)}}function Yr(e,t){return Td(e,r=>r.id===t)}const Ad=e=>{const t=go(e),r=t.snippets;return delete t.snippets,t.snippets=r.map(n=>({...t,...n,id:n.id||`${e.componentName}-${pe()}`,title:n.title||e.title,category:n.category||e.category,tags:[...n.tags||[],...e.tags||[]],groupName:n.groupName||e.groupName,snapshot:n.snapshot||e.icon,snapshotText:n.snapshotText,schema:{...n.schema,componentName:n.schema.componentName||e.componentName}})),t};class $d{constructor(t){C(this,"rawData"),C(this,"data"),this.rawData=t,this.data=Ad(t)}get value(){return this.data}get rawValue(){return this.rawData}get componentName(){return this.data.componentName}get snippets(){return this.data.snippets}getSnippetById(t){return this.data.snippets.find(r=>r.id===t)}}const Pd=e=>{if(!V(e))throw new Error("Materials must be a array");return e.map(t=>new $d(t))},Dd=e=>{e==null||e.forEach(t=>{Vr({data:t,dataStruct:jd,throwError:!1})})};class Pe{constructor(t){C(this,"rawData"),C(this,"data"),C(this,"usedMaterials",[]),this.rawData=t,Dd(t),this.data=Pd(t)}findByComponentName(t){return this.data.find(r=>r.componentName===t)}findSnippetById(t){const r=[...this.data];let n=null;for(;!n&&r.length;){const o=r.pop();n=o==null?void 0:o.getSnippetById(t)}return n}getAllSnippets(){let t=this.data.reduce((a,i)=>(a.push(...i.snippets),a),[]);const r=[],n={default:[]};t=t.sort((a,i)=>(a.category||"")>(i.category||"")?1:-1),t.forEach(a=>{const i=a.groupName||"default";r.includes(i)||(r.push(i),n[i]=[]),n[i].push(a)});const o=[];return r.forEach(a=>{const i=["default"],s={default:[]},u=n[a];if(u.length!==0){u.forEach(p=>{const d=p.category||"default";i.includes(d)||(i.push(d),s[d]=[]),s[d].push(p)});const f=[];i.forEach(p=>{s[p].length&&f.push({name:p,list:s[p]})});const l={name:a,list:f};o.push(l)}}),o}get value(){return this.data}get rawValue(){return this.rawData}}const kd=T({version:y(),name:y(),css:b(y()),renderType:b(J([K("COMPONENT"),K("PAGE")])),methods:b(B(wd)),componentsMeta:B(Pr(T({componentName:y()}),kr)),thirdLibs:b(pd),componentsTree:Sd,assets:b(B(G()))}),Vo=e=>(Vr({data:e,dataStruct:kd,throwError:!1}),e),Jr=(e,t,r)=>({...e,componentsTree:new wt(e.componentsTree,{parent:t,materials:r})});class Vt{constructor(t,r){C(this,"nodeType","PAGE"),C(this,"rawData"),C(this,"emitter",Et),C(this,"data"),C(this,"parent"),C(this,"materialsModel"),C(this,"assetPackagesList"),Vo(t),this.rawData=JSON.parse(JSON.stringify(t)),this.materialsModel=new Pe((r==null?void 0:r.materials)||[]),this.data=Jr(t,this,this.materialsModel),this.assetPackagesList=[...(r==null?void 0:r.assetPackagesList)||[],...this.data.assets||[]]}updatePage(t){const r=this.data;this.rawData=JSON.parse(JSON.stringify(t)),this.data=Jr(t,this,this.materialsModel),this.emitter.emit("onPageChange",{value:this.data,preValue:r,node:this})}reloadPage(t){const r=this.data;this.rawData=JSON.parse(JSON.stringify(t)),this.data=Jr(t,this,this.materialsModel),this.emitter.emit("onReloadPage",{value:this.data,preValue:r,node:this})}get value(){return this.data}getNode(t){if(!t)return;const r=this.data.componentsTree;return Yr(r,t)}addNode(t,r,n="AFTER"){var o;if(n==="AFTER"||n==="BEFORE"){const a=r.parent;if(a===null&&r instanceof wt)return console.warn("Not found parent node"),!1;if(a instanceof we)return console.warn("CProp can not add node"),!1;if(a instanceof qe){const s=a.value.value,u=s.findIndex(f=>f===r)??-1;return u>=0?(n==="BEFORE"?s.splice(u,0,t):s.splice(u+1,0,t),t.parent=a,(o=a.parent)==null||o.updateValue(),!0):!1}if(a instanceof Vt)return!1;const i=(a==null?void 0:a.value.children.findIndex(s=>s===r))??-1;return i>=0?(n==="BEFORE"?a==null||a.value.children.splice(i,0,t):a==null||a.value.children.splice(i+1,0,t),t.parent=a,a==null||a.updateValue(),!0):(console.warn("Not found target node"),!1)}if(n==="CHILD_START")return r.value.children.unshift(t),t.parent=r,r.updateValue(),!0;if(n==="CHILD_END")return r.value.children.push(t),t.parent=r,r.updateValue(),!0;if(X(n)){const a=n;if(a.type==="CHILD"){const i=a.pos,s=a.index||0;return i==="BEFORE"?r==null||r.value.children.splice(s,0,t):r==null||r.value.children.splice(s+1,0,t),t.parent=r,r.updateValue(),!0}else console.warn("Can not parse pos obj")}return!1}createNode(t){return delete t.id,new F(t,{parent:null,materials:this.materialsModel})}addNodeById(t,r,n="AFTER"){const o=this.getNode(r);return o?this.addNode(t,o,n):(console.warn(`Not find a node by ${r}, pls check it`),!1)}copyNode(t){const r=t.export("design");r.id=pe();const n=new F(r,{parent:t.parent,materials:this.materialsModel});return this.addNode(n,t,"AFTER"),n}copyNodeById(t){const r=this.getNode(t);return r&&r instanceof F?this.copyNode(r):!1}moveNode(t,r,n){this.deleteNode(t);let o=r;return["AFTER","BEFORE"].includes(n)&&(o=r.parent),t.parent=o,this.addNode(t,r,n)}moveNodeById(t,r,n){const o=this.getNode(t),a=this.getNode(r);return o&&a&&o instanceof F&&a instanceof F?this.moveNode(o,a,n):!1}deleteNode(t){var r;const n=t.parent;if(!n)throw new Error("parent node is null or undefined, pls check it");if(n instanceof qe){const o=n.value.value,a=o.findIndex(s=>s===t),i=o[a];return o.splice(a,1),(r=n.parent)==null||r.updateValue(),i}if(n instanceof F||n instanceof wt){const o=n.value.children,a=o.findIndex(s=>s===t),i=o[a];return o.splice(a,1),n.updateValue(),i}}deleteNodeById(t){const r=this.getNode(t);if(r)return this.deleteNode(r)}export(t=Ir.SAVE){var r;const n=this.data.componentsTree.export(t),o=this.assetPackagesList,a=[],i=this.materialsModel.usedMaterials.map(u=>{const f=o.find(l=>{var p;return l.package===((p=u.value.npm)==null?void 0:p.package)});return f&&a.push(f),{componentName:u.componentName,...go(u.value.npm||{})}}).filter(u=>!!(u.componentName&&u.package&&u.version));this.materialsModel.usedMaterials=[];let s={...this.data,componentsTree:Hr(n),componentsMeta:i,thirdLibs:this.data.thirdLibs,assets:[]};return(r=this.data.thirdLibs)==null||r.forEach(u=>{const f=o.find(l=>u.package===l.package);f&&a.push(f)}),s.assets=od(a,u=>u.package),s=Mo(s,["id"]),JSON.parse(JSON.stringify(s))}getRootNode(){return this.data.componentsTree}}Je.ROOT_CONTAINER;var Id=typeof global=="object"&&global&&global.Object===Object&&global;const zo=Id;var Fd=typeof self=="object"&&self&&self.Object===Object&&self,Ld=zo||Fd||Function("return this")();const Qe=Ld;var Bd=Qe.Symbol;const Xe=Bd;var Go=Object.prototype,Ud=Go.hasOwnProperty,Vd=Go.toString,St=Xe?Xe.toStringTag:void 0;function zd(e){var t=Ud.call(e,St),r=e[St];try{e[St]=void 0;var n=!0}catch{}var o=Vd.call(e);return n&&(t?e[St]=r:delete e[St]),o}var Gd=Object.prototype,Wd=Gd.toString;function Hd(e){return Wd.call(e)}var Yd="[object Null]",Jd="[object Undefined]",Wo=Xe?Xe.toStringTag:void 0;function Ot(e){return e==null?e===void 0?Jd:Yd:Wo&&Wo in Object(e)?zd(e):Hd(e)}function Ke(e){return e!=null&&typeof e=="object"}var qd="[object Symbol]";function Qd(e){return typeof e=="symbol"||Ke(e)&&Ot(e)==qd}function Xd(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Kd=Array.isArray;const Ze=Kd;var Zd=1/0,Ho=Xe?Xe.prototype:void 0,Yo=Ho?Ho.toString:void 0;function Jo(e){if(typeof e=="string")return e;if(Ze(e))return Xd(e,Jo)+"";if(Qd(e))return Yo?Yo.call(e):"";var t=e+"";return t=="0"&&1/e==-Zd?"-0":t}function De(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function qo(e){return e}var ep="[object AsyncFunction]",tp="[object Function]",rp="[object GeneratorFunction]",np="[object Proxy]";function qr(e){if(!De(e))return!1;var t=Ot(e);return t==tp||t==rp||t==ep||t==np}var op=Qe["__core-js_shared__"];const Qr=op;var Qo=function(){var e=/[^.]+$/.exec(Qr&&Qr.keys&&Qr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ap(e){return!!Qo&&Qo in e}var ip=Function.prototype,sp=ip.toString;function cp(e){if(e!=null){try{return sp.call(e)}catch{}try{return e+""}catch{}}return""}var up=/[\\^$.*+?()[\]{}|]/g,lp=/^\[object .+?Constructor\]$/,fp=Function.prototype,dp=Object.prototype,pp=fp.toString,hp=dp.hasOwnProperty,vp=RegExp("^"+pp.call(hp).replace(up,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mp(e){if(!De(e)||ap(e))return!1;var t=qr(e)?vp:lp;return t.test(cp(e))}function yp(e,t){return e==null?void 0:e[t]}function Xr(e,t){var r=yp(e,t);return mp(r)?r:void 0}var Xo=Object.create,gp=function(){function e(){}return function(t){if(!De(t))return{};if(Xo)return Xo(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const bp=gp;function _p(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function jp(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Ep=800,wp=16,Sp=Date.now;function Op(e){var t=0,r=0;return function(){var n=Sp(),o=wp-(n-r);if(r=n,o>0){if(++t>=Ep)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Cp(e){return function(){return e}}var xp=function(){try{var e=Xr(Object,"defineProperty");return e({},"",{}),e}catch{}}();const zt=xp;var Rp=zt?function(e,t){return zt(e,"toString",{configurable:!0,enumerable:!1,value:Cp(t),writable:!0})}:qo,Np=Op(Rp);const Mp=Np;var Tp=9007199254740991,Ap=/^(?:0|[1-9]\d*)$/;function Ko(e,t){var r=typeof e;return t=t??Tp,!!t&&(r=="number"||r!="symbol"&&Ap.test(e))&&e>-1&&e%1==0&&e<t}function Kr(e,t,r){t=="__proto__"&&zt?zt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Gt(e,t){return e===t||e!==e&&t!==t}var $p=Object.prototype,Pp=$p.hasOwnProperty;function Dp(e,t,r){var n=e[t];(!(Pp.call(e,t)&&Gt(n,r))||r===void 0&&!(t in e))&&Kr(e,t,r)}function kp(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;u===void 0&&(u=e[s]),o?Kr(r,s,u):Dp(r,s,u)}return r}var Zo=Math.max;function Ip(e,t,r){return t=Zo(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=Zo(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(i),_p(e,this,s)}}function Fp(e,t){return Mp(Ip(e,t,qo),e+"")}var Lp=9007199254740991;function ea(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Lp}function Zr(e){return e!=null&&ea(e.length)&&!qr(e)}function Bp(e,t,r){if(!De(r))return!1;var n=typeof t;return(n=="number"?Zr(r)&&Ko(t,r.length):n=="string"&&t in r)?Gt(r[t],e):!1}function Up(e){return Fp(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,i&&Bp(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,a)}return t})}var Vp=Object.prototype;function ta(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Vp;return e===r}function zp(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Gp="[object Arguments]";function ra(e){return Ke(e)&&Ot(e)==Gp}var na=Object.prototype,Wp=na.hasOwnProperty,Hp=na.propertyIsEnumerable,Yp=ra(function(){return arguments}())?ra:function(e){return Ke(e)&&Wp.call(e,"callee")&&!Hp.call(e,"callee")};const en=Yp;function Jp(){return!1}var oa=typeof exports=="object"&&exports&&!exports.nodeType&&exports,aa=oa&&typeof module=="object"&&module&&!module.nodeType&&module,qp=aa&&aa.exports===oa,ia=qp?Qe.Buffer:void 0,Qp=ia?ia.isBuffer:void 0,Xp=Qp||Jp;const sa=Xp;var Kp="[object Arguments]",Zp="[object Array]",eh="[object Boolean]",th="[object Date]",rh="[object Error]",nh="[object Function]",oh="[object Map]",ah="[object Number]",ih="[object Object]",sh="[object RegExp]",ch="[object Set]",uh="[object String]",lh="[object WeakMap]",fh="[object ArrayBuffer]",dh="[object DataView]",ph="[object Float32Array]",hh="[object Float64Array]",vh="[object Int8Array]",mh="[object Int16Array]",yh="[object Int32Array]",gh="[object Uint8Array]",bh="[object Uint8ClampedArray]",_h="[object Uint16Array]",jh="[object Uint32Array]",k={};k[ph]=k[hh]=k[vh]=k[mh]=k[yh]=k[gh]=k[bh]=k[_h]=k[jh]=!0,k[Kp]=k[Zp]=k[fh]=k[eh]=k[dh]=k[th]=k[rh]=k[nh]=k[oh]=k[ah]=k[ih]=k[sh]=k[ch]=k[uh]=k[lh]=!1;function Eh(e){return Ke(e)&&ea(e.length)&&!!k[Ot(e)]}function wh(e){return function(t){return e(t)}}var ca=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ct=ca&&typeof module=="object"&&module&&!module.nodeType&&module,Sh=Ct&&Ct.exports===ca,tn=Sh&&zo.process,Oh=function(){try{var e=Ct&&Ct.require&&Ct.require("util").types;return e||tn&&tn.binding&&tn.binding("util")}catch{}}();const ua=Oh;var la=ua&&ua.isTypedArray,Ch=la?wh(la):Eh;const fa=Ch;var xh=Object.prototype,Rh=xh.hasOwnProperty;function Nh(e,t){var r=Ze(e),n=!r&&en(e),o=!r&&!n&&sa(e),a=!r&&!n&&!o&&fa(e),i=r||n||o||a,s=i?zp(e.length,String):[],u=s.length;for(var f in e)(t||Rh.call(e,f))&&!(i&&(f=="length"||o&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Ko(f,u)))&&s.push(f);return s}function Mh(e,t){return function(r){return e(t(r))}}function Th(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Ah=Object.prototype,$h=Ah.hasOwnProperty;function Ph(e){if(!De(e))return Th(e);var t=ta(e),r=[];for(var n in e)n=="constructor"&&(t||!$h.call(e,n))||r.push(n);return r}function da(e){return Zr(e)?Nh(e,!0):Ph(e)}var Dh=Xr(Object,"create");const xt=Dh;function kh(){this.__data__=xt?xt(null):{},this.size=0}function Ih(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Fh="__lodash_hash_undefined__",Lh=Object.prototype,Bh=Lh.hasOwnProperty;function Uh(e){var t=this.__data__;if(xt){var r=t[e];return r===Fh?void 0:r}return Bh.call(t,e)?t[e]:void 0}var Vh=Object.prototype,zh=Vh.hasOwnProperty;function Gh(e){var t=this.__data__;return xt?t[e]!==void 0:zh.call(t,e)}var Wh="__lodash_hash_undefined__";function Hh(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=xt&&t===void 0?Wh:t,this}function ke(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ke.prototype.clear=kh,ke.prototype.delete=Ih,ke.prototype.get=Uh,ke.prototype.has=Gh,ke.prototype.set=Hh;function Yh(){this.__data__=[],this.size=0}function Wt(e,t){for(var r=e.length;r--;)if(Gt(e[r][0],t))return r;return-1}var Jh=Array.prototype,qh=Jh.splice;function Qh(e){var t=this.__data__,r=Wt(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():qh.call(t,r,1),--this.size,!0}function Xh(e){var t=this.__data__,r=Wt(t,e);return r<0?void 0:t[r][1]}function Kh(e){return Wt(this.__data__,e)>-1}function Zh(e,t){var r=this.__data__,n=Wt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ye(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ye.prototype.clear=Yh,ye.prototype.delete=Qh,ye.prototype.get=Xh,ye.prototype.has=Kh,ye.prototype.set=Zh;var ev=Xr(Qe,"Map");const pa=ev;function tv(){this.size=0,this.__data__={hash:new ke,map:new(pa||ye),string:new ke}}function rv(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ht(e,t){var r=e.__data__;return rv(t)?r[typeof t=="string"?"string":"hash"]:r.map}function nv(e){var t=Ht(this,e).delete(e);return this.size-=t?1:0,t}function ov(e){return Ht(this,e).get(e)}function av(e){return Ht(this,e).has(e)}function iv(e,t){var r=Ht(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function et(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}et.prototype.clear=tv,et.prototype.delete=nv,et.prototype.get=ov,et.prototype.has=av,et.prototype.set=iv;function ha(e){return e==null?"":Jo(e)}var sv=Mh(Object.getPrototypeOf,Object);const va=sv;var cv="[object Object]",uv=Function.prototype,lv=Object.prototype,ma=uv.toString,fv=lv.hasOwnProperty,dv=ma.call(Object);function tt(e){if(!Ke(e)||Ot(e)!=cv)return!1;var t=va(e);if(t===null)return!0;var r=fv.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ma.call(r)==dv}function pv(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}function hv(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:pv(e,t,r)}var vv="\\ud800-\\udfff",mv="\\u0300-\\u036f",yv="\\ufe20-\\ufe2f",gv="\\u20d0-\\u20ff",bv=mv+yv+gv,_v="\\ufe0e\\ufe0f",jv="\\u200d",Ev=RegExp("["+jv+vv+bv+_v+"]");function ya(e){return Ev.test(e)}function wv(e){return e.split("")}var ga="\\ud800-\\udfff",Sv="\\u0300-\\u036f",Ov="\\ufe20-\\ufe2f",Cv="\\u20d0-\\u20ff",xv=Sv+Ov+Cv,Rv="\\ufe0e\\ufe0f",Nv="["+ga+"]",rn="["+xv+"]",nn="\\ud83c[\\udffb-\\udfff]",Mv="(?:"+rn+"|"+nn+")",ba="[^"+ga+"]",_a="(?:\\ud83c[\\udde6-\\uddff]){2}",ja="[\\ud800-\\udbff][\\udc00-\\udfff]",Tv="\\u200d",Ea=Mv+"?",wa="["+Rv+"]?",Av="(?:"+Tv+"(?:"+[ba,_a,ja].join("|")+")"+wa+Ea+")*",$v=wa+Ea+Av,Pv="(?:"+[ba+rn+"?",rn,_a,ja,Nv].join("|")+")",Dv=RegExp(nn+"(?="+nn+")|"+Pv+$v,"g");function kv(e){return e.match(Dv)||[]}function Iv(e){return ya(e)?kv(e):wv(e)}function Fv(e){return function(t){t=ha(t);var r=ya(t)?Iv(t):void 0,n=r?r[0]:t.charAt(0),o=r?hv(r,1).join(""):t.slice(1);return n[e]()+o}}var Lv=Fv("toUpperCase");const Bv=Lv;function Uv(e){return Bv(ha(e).toLowerCase())}function Vv(){this.__data__=new ye,this.size=0}function zv(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Gv(e){return this.__data__.get(e)}function Wv(e){return this.__data__.has(e)}var Hv=200;function Yv(e,t){var r=this.__data__;if(r instanceof ye){var n=r.__data__;if(!pa||n.length<Hv-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new et(n)}return r.set(e,t),this.size=r.size,this}function rt(e){var t=this.__data__=new ye(e);this.size=t.size}rt.prototype.clear=Vv,rt.prototype.delete=zv,rt.prototype.get=Gv,rt.prototype.has=Wv,rt.prototype.set=Yv;var Sa=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Oa=Sa&&typeof module=="object"&&module&&!module.nodeType&&module,Jv=Oa&&Oa.exports===Sa,Ca=Jv?Qe.Buffer:void 0,xa=Ca?Ca.allocUnsafe:void 0;function qv(e,t){if(t)return e.slice();var r=e.length,n=xa?xa(r):new e.constructor(r);return e.copy(n),n}var Qv=Qe.Uint8Array;const Ra=Qv;function Xv(e){var t=new e.constructor(e.byteLength);return new Ra(t).set(new Ra(e)),t}function Kv(e,t){var r=t?Xv(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Zv(e){return typeof e.constructor=="function"&&!ta(e)?bp(va(e)):{}}function em(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),s=i.length;s--;){var u=i[e?s:++o];if(r(a[u],u,a)===!1)break}return t}}var tm=em();const rm=tm;function on(e,t,r){(r!==void 0&&!Gt(e[t],r)||r===void 0&&!(t in e))&&Kr(e,t,r)}function nm(e){return Ke(e)&&Zr(e)}function an(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function om(e){return kp(e,da(e))}function am(e,t,r,n,o,a,i){var s=an(e,r),u=an(t,r),f=i.get(u);if(f){on(e,r,f);return}var l=a?a(s,u,r+"",e,t,i):void 0,p=l===void 0;if(p){var d=Ze(u),v=!d&&sa(u),g=!d&&!v&&fa(u);l=u,d||v||g?Ze(s)?l=s:nm(s)?l=jp(s):v?(p=!1,l=qv(u,!0)):g?(p=!1,l=Kv(u,!0)):l=[]:tt(u)||en(u)?(l=s,en(s)?l=om(s):(!De(s)||qr(s))&&(l=Zv(u))):p=!1}p&&(i.set(u,l),o(l,u,n,a,i),i.delete(u)),on(e,r,l)}function Na(e,t,r,n,o){e!==t&&rm(t,function(a,i){if(o||(o=new rt),De(a))am(e,t,i,r,Na,n,o);else{var s=n?n(an(e,i),a,i+"",e,t,o):void 0;s===void 0&&(s=a),on(e,i,s)}},da)}var im=Up(function(e,t,r){Na(e,t,r)});const sm=im,cm=function(e){return!(!e||typeof e!="function"||!e.prototype)};function Ma(e){const t=e.prototype;return!!(t&&t.isReactComponent)}function Ta(e){var t,r;const n=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.forward_ref"):60112;return(e==null?void 0:e.$$typeof)===n||((t=e==null?void 0:e.prototype)==null?void 0:t.isReactComponent)||((r=e==null?void 0:e.prototype)==null?void 0:r.setState)||e._forwardRef}function Aa(e){class t extends M.Component{render(){return M.createElement(e,this.props)}}return t.displayName=e.displayName,t}const Ie=(e,t)=>{const r=n=>{const o=`
    ${Object.keys(t).map(a=>`const ${a} = $$context['${a}'];`).join(`
`)}
    return ${n};
    `;return new Function("$$context",o)(t)};try{return r(e)}catch(n){console.warn(n);const o=`[${e}] expression run failed`;return console.warn(o),null}},$a=(e,t,r)=>function(...n){try{const o=`
        var args = Array.from(arguments);
        function runTimeFunc() {
          var f = ${e};
          var __$$storeManager__ = args.pop();
          var $$context = args.pop();
          $$context.stateManager = __$$storeManager__.getStateSnapshot();
          return f.apply(f, args)
        }
        return runTimeFunc();
      `;new Function(o)(...n,t,r)}catch(o){console.warn(o)}},sn=(e,t)=>{const r={};return t.forEach((n,o)=>{r[n]=e[o]}),r},cn=e=>{const t={};return Object.keys(e).forEach(r=>{let n=r.replace("-webkit","Webkit");n=n.replace("-ms","ms"),n=n.replace("-moz","Moz"),n=n.replace("-o","O");let o=n.split("-");o.length>=2&&(o=o.map((a,i)=>i!==0?Uv(a):a)),t[o.join("")]=e[r]}),t},un=e=>{let t="";return Object.keys(e).forEach(r=>{t+=`${r}:${e[r]};`}),t},um=(e,t)=>{const r={};return e.forEach(n=>{if(n.globalName){const o=t[n.globalName];o&&(r[n.globalName]=o)}}),r},lm=(e,t=1)=>{let r=0,n=e,o={},a={};for(;r<t;)Object.keys(n).forEach(i=>{o={...o,...n[i]}}),a=o,n=o,o={},r+=1;return a},Pa=(e,t)=>{const r=[];return t.forEach(n=>{const o=n.exec(e);o!=null&&o.length&&r.push(o[1])}),r},Da=(e,t)=>{const r={};return t.forEach(n=>{e[n.name]&&(r[n.name]=e[n.name])}),r},fm=(e,t)=>Da(e,t),dm=(e,t)=>Da(e,t),Yt="DYNAMIC",pm=["$$context","$$nodeModel"],ka=e=>{let t;const r=new Set,n=(i,s)=>{const u=typeof i=="function"?i(t):i;if(!Object.is(u,t)){const f=t;t=s??typeof u!="object"?u:Object.assign({},t,u),r.forEach(l=>l(t,f))}},o=()=>t,a={setState:n,getState:o,subscribe:i=>(r.add(i),()=>r.delete(i)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return t=e(n,o,a),a},hm=e=>e?ka(e):ka;class vm{constructor(){_(this,"storeMap",new Map)}addStore(t,r){const n=hm(r);return this.storeMap.set(t,n),n.name=t,n}setStore(t,r){this.storeMap.set(t,r)}removeStore(t){this.storeMap.delete(t)}getStore(t){return this.storeMap.get(t)}getState(t){var r;return(r=this.storeMap.get(t))==null?void 0:r.getState()}getStateObj(t){return{state:this.getState(t),updateState:r=>{this.setState(t,r)}}}setState(t,r){var n;return(n=this.storeMap.get(t))==null?void 0:n.setState(r)}connect(t,r){const n=this.storeMap.get(t);return n?n.subscribe(r):(console.warn("store not exits"),()=>{})}getStateSnapshot(){const t={};return this.storeMap.forEach((r,n)=>{t[n]=this.getStateObj(n)}),t}destroy(){this.storeMap=new Map}}class mm{constructor(){_(this,"varSpace",new Map)}get(t){return this.varSpace.get(t)}add(t,r){this.varSpace.set(t,r)}remove(t){this.varSpace.delete(t)}destroy(){this.varSpace.clear()}getStateSnapshot(){const t={};return this.varSpace.forEach((r,n)=>{t[n]=r}),t}}class Ia{constructor(){_(this,"renderMode","normal"),_(this,"components",{}),_(this,"storeManager",new vm),_(this,"variableManager",new mm),_(this,"runtimeComponentCache",new Map),_(this,"onGetRef"),_(this,"onGetComponent"),_(this,"onComponentMount"),_(this,"onComponentDestroy"),_(this,"processNodeConfigHook")}getComponent(t){var r;const n=t.value.componentName;let o=this.components[n]||(()=>`Component [${n}] not found`);return Ta(o)||(o=Aa(o),this.components[n]=o),this.onGetComponent&&(o=(r=this.onGetComponent)==null?void 0:r.call(this,o,t)),o}getContext(t={},r){let n=t;return r&&(n={...t},n.__proto__=r||null),n}pageRender(t,{components:r,onGetRef:n,$$context:o={},onGetComponent:a,onComponentMount:i,onComponentDestroy:s,renderMode:u,processNodeConfigHook:f}){this.renderMode=u,this.components=r,this.onGetRef=n,this.onGetComponent=a,this.onComponentMount=i,this.onComponentDestroy=s,this.processNodeConfigHook=f;const l=t.value.componentsTree,p=this.getComponent(l),d=this.convertModelToComponent(p,t.value.componentsTree),v={},g=l.props;return Object.keys(g).forEach(E=>{v[E]=g[E].value}),v.$$context=o,this.render(d,v)}transformProps(t={},{$$context:r}){const n=t,o=i=>{if(Array.isArray(i))return i.map(s=>o(s));if(Wr(i))return o(i.value);if(Md(i)){const s=i.value,u=s.value;if(!u)return console.warn("slot value is null, this maybe cause some error, pls check it",t),()=>{};const f=l=>{const p=`${l.id}-${Yt}`;if(this.runtimeComponentCache.get(l.id))return{key:p,component:this.runtimeComponentCache.get(l.id)};const d=this.getComponent(l),v=this.convertModelToComponent(d,l),g=s.params||[];return{component:(...E)=>{const w=sn(E,g),j=this.getContext({params:w},r);return this.render(v,{$$context:j,key:p})},key:p}};if(Array.isArray(u)){const l=u==null?void 0:u.map(p=>f(p));return(...p)=>l.map(d=>Ma(d.component)?M.createElement(d.component,{$$context:r,key:d.key}):d.component(...p))}else return f(u).component}else{if($e(i))return Ie(i.value,r||{});if(Rd(i))return $a(i.value,r,this.storeManager);if(tt(i)){let s=i;Wr(i)&&(s=i.value);const u=s,f={};return Object.keys(s).forEach(l=>{f[l]=o(u[l])}),f}else return i}},a={};return Object.keys(n).forEach(i=>{const s=n[i];a[i]=o(s)}),a}collectSpecialProps(t={},r){const n=[],o=(a,i)=>{let s=i;Wr(i)&&(s=i.value),r(s)?n.push({keyPath:a,val:s}):Ze(s)?s.forEach((u,f)=>{o([...a,String(f)],u)}):tt(s)&&Object.keys(s).forEach(u=>{o([...a,u],s[u])})};return o(["$root"],t),n}convertModelToComponent(t,r){const n=this;class o extends M.Component{constructor(i){super(i),_(this,"_CONDITION",!0),_(this,"_DESIGN_BOX",!1),_(this,"_NODE_MODEL",r),_(this,"_NODE_ID",r.id),_(this,"UNIQUE_ID",`${r.id}_${pe()}`),_(this,"targetComponentRef"),_(this,"listenerHandle",[]),_(this,"storeState"),_(this,"storeListenDisposeList",[]),_(this,"domHeader"),_(this,"mediaStyleDomMap",{}),_(this,"variableSpace"),_(this,"nodeName"),_(this,"updateState",l=>{this.storeState.setState(l),this.forceUpdate()}),_(this,"getStyleDomById",l=>{const p=this.mediaStyleDomMap;let d=p[l];return d||(d=document.createElement("style"),p[l]=d),d.id=l,d}),_(this,"addMediaCSS",()=>{var l;let p=this.domHeader;if(p||(p=(l=document.getElementsByTagName("head"))==null?void 0:l[0],this.domHeader=p),!this.domHeader)return;const d=this._NODE_MODEL.value.css;d&&d.value.forEach(v=>{var g;const E=`${this.UNIQUE_ID}_${v.state}`;let w=`.${d.class}`;if(v.state!=="normal"&&(w=`${w}:${v.state}`),Object.keys(v.style).length!==0){const j=this.getStyleDomById(E);j.innerText=`${w} { ${un(v.style)} }`,p==null||p.appendChild(j)}(g=v.media)!=null&&g.length&&v.media.forEach(j=>{const O=`${E}_${j.type}_${j.value}`,U=this.getStyleDomById(O);U.media=`screen and (${j.type}:${j.value}px)`,U.innerHTML=`${w} { ${un(j.style)} }`,p==null||p.appendChild(U)})})}),_(this,"removeMediaCSS",()=>{const l=this.mediaStyleDomMap;Object.keys(l).forEach(p=>{var d;(d=this.domHeader)==null||d.removeChild(l[p])}),this.mediaStyleDomMap={}}),_(this,"rebuildNode",()=>{this.storeListenDisposeList.forEach(l=>l()),this.removeMediaCSS(),this.connectStore(),this.addMediaCSS(),this.forceUpdate()}),this.targetComponentRef=M.createRef(),this.state=r.value.state||{};const s=r.value.nodeName||r.id;this.nodeName=s;const u=n.storeManager.getStore(s);u?(this.storeState=u,u.setState({...r.value.state||{}})):this.storeState=n.storeManager.addStore(s,()=>({...r.value.state||{}})),this.storeState.subscribe(l=>{this.setState({...l})}),this.connectStore();const f=n.variableManager.get(s);f?this.variableSpace=f:(this.variableSpace={staticVar:{},methods:{}},n.variableManager.add(s,this.variableSpace))}connectStore(){const i=n.collectSpecialProps(r.props,p=>!!$e(p)),s=n.collectSpecialProps({css:r.value.css,class:r.value.classNames},p=>!!$e(p));let u=[];[...i,...s].map(p=>{const d=p.val,v=[/\$\$context.stateManager\.(.+?)\./gim,/\$\$context.stateManager\["(.+?)"\]/gim,/\$\$context.stateManager\['(.+?)'\]/gim,/getStateObj\('(.+?)'\)/gim,/getStateObj\("(.+?)"\)/gim,/getStateById\('(.+?)'\)/gim,/getStateById\("(.+?)"\)/gim],g=Pa(d.value,v);u=[...u,...g]}).filter(Boolean);const f=Array.from(new Set(u)),l=[];f.length&&f.forEach(p=>{n.storeManager.getStore(p)||(n.storeManager.addStore(p,()=>({})),console.warn(n.storeManager,p,"not exits"));const d=n.storeManager.connect(p,()=>{this.forceUpdate()});l.push(d)}),this.storeListenDisposeList=l}componentDidMount(){var i;this.addMediaCSS(),n.onGetRef&&n.onGetRef(this.targetComponentRef,r,this),(i=n.onComponentMount)==null||i.call(n,this,r);const s=()=>{n.storeManager.setStore(r.value.nodeName||r.id,this.storeState),this.storeState.setState({...this.state,...r.value.state||{}}),this.rebuildNode()};r.onChange(s)}componentWillUnmount(){var i;this.storeListenDisposeList.forEach(s=>s()),this.removeMediaCSS(),(i=n.onComponentDestroy)==null||i.call(n,this,r)}render(){var i;const{$$context:s,...u}=this.props,f=r.value.nodeName||r.id,l={key:r.id,...r.props,...u},p={state:this.state||{},staticVar:this.variableSpace.staticVar,updateState:this.updateState,storeManager:n.storeManager,getState:()=>n.storeManager.getStateObj(f),getStateObj:()=>n.storeManager.getStateObj(f),getStateObjById:L=>n.storeManager.getStateObj(L),stateManager:n.storeManager.getStateSnapshot(),getMethods:()=>n.variableManager.get(f).methods,getMethodsById:L=>n.variableManager.get(L).methods,getStaticVar:()=>n.variableManager.get(f).staticVar,getStaticVarById:L=>n.variableManager.get(L).staticVar};r.value.componentName===Je.ROOT_CONTAINER&&(p.globalState=this.state,p.updateGlobalState=this.updateState);const d=n.getContext(p,s),v=n.transformProps({methods:r.value.methods},{$$context:d}).methods.reduce((L,H)=>(L[H.name]=H.define,L),{});d.methods=v,this.variableSpace.methods=Object.assign(this.variableSpace.methods,v);const g=r.value.loop;let E=[];if(g&&g.open){this.targetComponentRef.current=[];let L=g.data||[];if($e(g.data)){const H=g.data;L=Ie(H.value,d||{})}return E=L.map((...H)=>{var he;const Fe=H[1],ue=[g.forName||"item",g.forIndex||"index"],be=sn(H,ue);let _e="loopData";g.name&&(_e=`${_e}${g.name}`);const Se=n.getContext({[_e]:be},d),ee=n.transformProps(l,{$$context:Se}),Jt=((he=r.value.classNames)==null?void 0:he.map(te=>{var Oe;const Rt=te.name;return $e(te.status)&&Ie(String(((Oe=te.status)==null?void 0:Oe.value)||""),Se)?Rt:""}))||[];let nt=`${ee.className??""} ${Jt.join(" ")}`.trim();r.value.css&&(nt=`${r.value.css.class} ${nt}`.trim()),ee.className=nt;const qt=n.transformProps(r.value.style,{$$context:Se});r.value.style&&(ee.style=cn(qt||{}));const{children:Le}=ee;let ot=[];if(Le!==void 0)delete ee.children,ot=Array.isArray(Le)?Le:[Le];else{const te=[];r.value.children.forEach((Oe,Rt)=>{const Nt=n.buildComponent(Oe,{$$context:Se,idx:Rt});te.push(Nt)}),ot=te}if(ee.key=`${ee.key}-${Fe}`,$e(g.key)){const te=g.key,Oe=Ie(te.value,Se||{});ee.key+=`-${Oe}`}return ee.ref=te=>{this.targetComponentRef.current=this.targetComponentRef.current||[],this.targetComponentRef.current[Fe]=te},n.render(t,ee,...ot)}),E}const w=n.transformProps(l,{$$context:d}),{children:j}=w;let O=[];if(j!==void 0)delete w.children,O=Array.isArray(j)?j:[j];else{const L=[];r.value.children.forEach((H,he)=>{const Fe=n.buildComponent(H,{$$context:d,idx:he});L.push(Fe)}),O=L}w.ref=this.targetComponentRef;const U=((i=r.value.classNames)==null?void 0:i.map(L=>{var H;const he=L.name;return $e(L.status)&&Ie(((H=L.status)==null?void 0:H.value)||"",d)?he:""}))||[];let I=`${w.className??""} ${U.join(" ")}`.trim();r.value.css&&(I=`${r.value.css.class} ${I}`.trim()),w.className=I;const Y=n.transformProps(r.value.style,{$$context:d});r.value.style&&(w.style=cn(Y||{}));let q=r.value.condition??!0;typeof q!="boolean"&&(q=Ie(q.value,d||{}));let ce={condition:q,props:w};n.processNodeConfigHook&&(ce=n.processNodeConfigHook(ce,r));const A=n.render(t,ce.props,...O);return this._CONDITION=ce.condition,ce.condition?A:Ce("div",{style:{display:"none"},children:A})}}return _(o,"__CP_TYPE__",Yt),o.displayName=`${r.value.componentName}Dynamic`,o}buildComponent(t,{$$context:r={}}){const n=this.runtimeComponentCache;return typeof t=="string"?this.render(t):Nd(t)?(({currentNode:o})=>{const a=o.value.id;let i=null;if(n.get(a))i=n.get(a);else{const f=this.getComponent(o);i=this.convertModelToComponent(f,o)}!n.get(a)&&this.renderMode!=="design"&&n.set(a,i);const s=`${a}-${Yt}`,u={$$context:r,$$nodeModel:t,key:s};return this.render(i,u)})({currentNode:t}):void 0}render(t,r={},...n){return typeof t=="string"||typeof t=="number"?String(t):(pm.forEach(o=>{o in r&&t.__CP_TYPE__!==Yt&&delete r[o]}),M.createElement(t,r,...n))}clear(){this.runtimeComponentCache.clear(),this.storeManager.destroy()}}const ym=En(new Ia),gm=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],ge=e=>{const t={};return e.forEach(r=>{t[r.key]=r.value}),t},bm=[...gm,...hd],_m=bm.reduce((e,t)=>(e[t]=({children:r,$$attributes:n=[],...o})=>{let a=r;return Array.isArray(r)||(a=[r]),M.createElement(t,{...o,...ge(n)},...a)},e),{}),jm=({children:e,width:t,height:r,$$attributes:n=[],...o})=>{let a=e;Array.isArray(e)||(a=[e]),a=a.filter(f=>f!==void 0);const{style:i={},...s}=ge(n),u={height:r,width:t,...i,...o.style||{}};return React.createElement("div",{...o,...s,style:u},...a)},Em=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),React.createElement("canvas",{...r,...ge(t)},...n)},wm=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),React.createElement("img",{...r,...ge(t)},...n)},Sm=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),React.createElement("video",{...r,...ge(t)},...n)},Om=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),React.createElement("audio",{...r,...ge(t)},...n)},Cm=({$$attributes:e=[],content:t,...r})=>Ce("span",{...r,...ge(e),children:t}),xm=({children:e,$$attributes:t=[],afterMount:r,beforeDestroy:n,...o})=>{let a=e;return Array.isArray(e)||(a=[e]),M.useEffect(()=>(r==null||r(o),()=>{n==null||n(o)}),[]),React.createElement("div",{...o,...ge(t)},...a)},Rm=({children:e,$$attributes:t=[],htmlTag:r="div",...n})=>{let o=e;Array.isArray(e)||(o=[e]);const{style:a={},...i}=ge(t),s={...a,...n.style||{}};return M.createElement(r,{...n,...i,style:s},...o)},Nm={RootContainer:({children:e})=>e,..._m,CContainer:xm,CVideo:Sm,CAudio:Om,CBlock:jm,CImage:wm,CText:Cm,CCanvas:Em,CNativeTag:Rm};class Mm{constructor(){_(this,"refMap",new Map)}get(t){return this.refMap.get(t)}add(t,r){this.refMap.set(t,r)}remove(t){this.refMap.delete(t)}destroy(){this.refMap.clear()}}class Fa extends M.Component{constructor(t){super(t),_(this,"refManager"),_(this,"dynamicComponentInstanceMap",new Map),_(this,"onGetRef",(r,n,o)=>{var a,i;(i=(a=this.props).onGetRef)==null||i.call(a,r,n,o),this.dynamicComponentInstanceMap.set(n.id,o),this.refManager.add(n.value.refId||n.id,r)}),_(this,"rerender",r=>{if(this.props.adapter.clear(),(r==null?void 0:r.nodeType)==="PAGE"&&r)this.setState({pageModel:r});else if(tt(r)&&Vo(r)){const n=r;this.setState({pageModel:new Vt(n,{materials:this.state.pageModel.materialsModel.rawValue})})}}),this.state={pageModel:t.pageModel||new Vt(t.page)},this.refManager=new Mm}getPageModel(){return this.state.pageModel}componentDidMount(){const{render:t}=this.props;t&&(t.ref.current=this)}componentWillUnmount(){this.refManager.destroy()}render(){const{props:t}=this,{adapter:r,onGetComponent:n,onComponentDestroy:o,onComponentMount:a}=t,{pageModel:i}=this.state;if(!i)return console.warn("pageModel is null"),null;const s={...Nm,...t.components},u=this.props.$$context??{};return u.refs=this.refManager,r.pageRender(i,{libs:{},components:s,onGetRef:this.onGetRef,onGetComponent:n,onComponentMount:a,onComponentDestroy:o,$$context:u,renderMode:t.renderMode,processNodeConfigHook:t.processNodeConfigHook})}}const Tm=()=>{const e=M.useRef(null);return{ref:e,rerender:function(...t){e.current&&e.current.rerender(...t)}}};class Am extends M.Component{constructor(t){super(t),_(this,"onDoubleClick",()=>{this.setState({hasError:!1,error:null})}),this.state={hasError:!1,error:""}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){var n,o;(o=(n=this.props).onError)==null||o.call(n,r)}render(){if(this.state.hasError){const{onDoubleClick:t}=this,r=this.props.node.value;console.error(this.props.node,this.props.children);const n=_n("div",{style:{backgroundColor:"rgb(255 206 215 / 13%)",padding:"5px",color:"#ff0000b0",textAlign:"center",fontSize:"12px"},children:["Render error, node id: ",r.id,", node name：",r.title," component name：",r.title||r.componentName,_n("p",{children:["msg: ",String(this.state.error)]}),Ce("button",{onDoubleClick:t,style:{border:"1px solid rgba(100,100,100,0.1)",backgroundColor:"#fff",padding:"5px 10px",borderRadius:"2px",color:"gray",cursor:"pointer",marginTop:"5px"},children:"double click to refresh"}),Ce("div",{style:{display:"none"}})]});return M.createElement(this.props.targetComponent,{onlyRenderChild:!0},n)}return this.props.children}}class La{constructor(){_(this,"instanceMap",new Map)}get(t){return this.instanceMap.get(t)}add(t,r){const n=this.instanceMap.get(t);n?n.push(r):this.instanceMap.set(t,[r])}remove(t,r){const n=this.instanceMap.get(t);if(r!==void 0&&Array.isArray(n)){const o=n.filter(a=>a!==r);this.instanceMap.set(t,o)}else this.instanceMap.delete(t)}destroy(){this.instanceMap.clear()}}const Ba=e=>{const{node:t}=e,r=M.useMemo(()=>{const s=t.isContainer();return tt(s)?s:{placeholder:"Drag the component to place it",width:"100%",height:"100%",style:{}}},[e.node]),{placeholder:n,height:o,width:a,style:i}=r;return Ce("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(200,200,200,0.1)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"2px",fontSize:"14px",color:"gray",cursor:"default",minWidth:"300px",minHeight:"50px",width:a,height:o,...i},children:n})};class $m extends M.Component{constructor(t){super(t),_(this,"instanceManager",new La),_(this,"renderRef"),_(this,"dropPlaceholder",Ba),_(this,"onGetComponent",(r,n)=>{const o=this;class a extends M.Component{constructor(){super(...arguments),_(this,"_DESIGN_BOX",!0),_(this,"_NODE_MODEL",n),_(this,"_NODE_ID",n.id),_(this,"_UNIQUE_ID",`${n.id}_${pe()}`),_(this,"_STATUS")}componentDidMount(){o.instanceManager.add(n.id,this)}componentWillUnmount(){this._STATUS="DESTROY",o.instanceManager.remove(n.id,this)}render(){const{children:s=[],onlyRenderChild:u,...f}=this.props;let l=s;return Ze(s)||(l=[s]),!l.filter(Boolean).length&&(n.isContainer()||n.value.componentName===Je.ROOT_CONTAINER)&&l.push(M.createElement(o.dropPlaceholder,{node:n})),u?l:M.createElement(r,f,...l)}}return M.forwardRef(function(i,s){return Ce(Am,{node:n,targetComponent:a,children:M.createElement(a,{ref:s,...i})})})}),this.renderRef=M.createRef(),t.dropPlaceholder&&(this.dropPlaceholder=t.dropPlaceholder)}componentDidMount(){var t,r;(r=(t=this.props).onMount)==null||r.call(t,this)}getPageModel(){var t;return(t=this.renderRef.current)==null?void 0:t.state.pageModel}rerender(t){var r;return(r=this.renderRef.current)==null?void 0:r.rerender(t)}getInstancesById(t,r){let n=[...this.instanceManager.get(t)||[]];return r!==void 0&&(n=n.filter(o=>r===(o==null?void 0:o._UNIQUE_ID))),n}getInstanceByDom(t){const r=Ua(t);if(!r)return null;const n=Va(r);return(n==null?void 0:n.stateNode)||null}getDomsById(t,r){const n=this.getInstancesById(t),o=[];return n==null||n.forEach(a=>{if((a==null?void 0:a._STATUS)==="DESTROY")return;const i=ii.findDOMNode(a);if(i&&!(i instanceof Text))if(r){const s=Array.from(i.querySelectorAll(r));o.push(...s)}else o.push(i)}),o}getDomRectById(t,r){return this.getDomsById(t,r).map(n=>n==null?void 0:n.getBoundingClientRect()).filter(Boolean)}render(){const{props:t,onGetComponent:r}=this,{render:n,...o}=t;return n&&(n.ref.current=this),Ce(Fa,{onGetComponent:r,...o,processNodeConfigHook:(a,i)=>{var s,u;if(i.nodeType!=="NODE")return a;const{props:f,condition:l}=a;let p={...f};const d=((s=i.value.configure)==null?void 0:s.devState)||{},v=(u=i.material)==null?void 0:u.value.fixedProps;if(v!==void 0){if(tt(v))p={...p,...v};else if(typeof v=="function"){const E=v(p);p={...p,...E}}}let g=l;return d.condition===!1&&(g=d.condition),{props:sm(p,d.props||{}),condition:g}},ref:this.renderRef})}}const Ua=e=>{if(!e)return null;const t=Object.keys(e).find(r=>r.startsWith("__reactInternalInstance$")||r.startsWith("__reactFiber$"))||"";return t?e[t]:Ua(e.parentElement)},Va=e=>{var t;return e?(t=e==null?void 0:e.stateNode)!=null&&t._DESIGN_BOX?e:Va(e.return):null},Pm=()=>{const e=M.useRef(null);return{ref:e,rerender:function(...t){e.current&&e.current.rerender(...t)},getInstancesById(t,r){var n;return((n=e.current)==null?void 0:n.getInstancesById(t,r))||[]},getInstanceByDom(t){var r;return((r=e.current)==null?void 0:r.getInstanceByDom(t))||null},getDomsById(t,r){var n;return((n=e.current)==null?void 0:n.getDomsById(t,r))||[]},getDomRectById(t,r){var n;return((n=e.current)==null?void 0:n.getDomRectById(t,r))||[]}}};var Dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function km(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var za={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Dm,function(){var r=function(){},n={},o={},a={};function i(d,v){d=d.push?d:[d];var g=[],E=d.length,w=E,j,O,U,I;for(j=function(Y,q){q.length&&g.push(Y),w--,w||v(g)};E--;){if(O=d[E],U=o[O],U){j(O,U);continue}I=a[O]=a[O]||[],I.push(j)}}function s(d,v){if(d){var g=a[d];if(o[d]=v,!!g)for(;g.length;)g[0](d,v),g.splice(0,1)}}function u(d,v){d.call&&(d={success:d}),v.length?(d.error||r)(v):(d.success||r)(d)}function f(d,v,g,E){var w=document,j=g.async,O=(g.numRetries||0)+1,U=g.before||r,I=d.replace(/[\?|#].*$/,""),Y=d.replace(/^(css|img|module|nomodule)!/,""),q,ce,A;if(E=E||0,/(^css!|\.css$)/.test(I))A=w.createElement("link"),A.rel="stylesheet",A.href=Y,q="hideFocus"in A,q&&A.relList&&(q=0,A.rel="preload",A.as="style");else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(I))A=w.createElement("img"),A.src=Y;else if(A=w.createElement("script"),A.src=Y,A.async=j===void 0?!0:j,ce="noModule"in A,/^module!/.test(I)){if(!ce)return v(d,"l");A.type="module"}else if(/^nomodule!/.test(I)&&ce)return v(d,"l");A.onload=A.onerror=A.onbeforeload=function(L){var H=L.type[0];if(q)try{A.sheet.cssText.length||(H="e")}catch(he){he.code!=18&&(H="e")}if(H=="e"){if(E+=1,E<O)return f(d,v,g,E)}else if(A.rel=="preload"&&A.as=="style")return A.rel="stylesheet";v(d,H,L.defaultPrevented)},U(d,A)!==!1&&w.head.appendChild(A)}function l(d,v,g){d=d.push?d:[d];var E=d.length,w=E,j=[],O,U;for(O=function(I,Y,q){if(Y=="e"&&j.push(I),Y=="b")if(q)j.push(I);else return;E--,E||v(j)},U=0;U<w;U++)f(d[U],O,g)}function p(d,v,g){var E,w;if(v&&v.trim&&(E=v),w=(E?g:v)||{},E){if(E in n)throw"LoadJS";n[E]=!0}function j(O,U){l(d,function(I){u(w,I),O&&u({success:O,error:U},I),s(E,I)},w)}if(w.returnPromise)return new Promise(j);j()}return p.ready=function(d,v){return i(d,function(g){u(v,g)}),p},p.done=function(d){s(d,[])},p.reset=function(){n={},o={},a={}},p.isDefined=function(d){return d in n},p})})(za);var Im=za.exports;const Ga=km(Im);class Fm{constructor(t,r){_(this,"assets"),_(this,"loadStatus"),_(this,"win",window),_(this,"_onSuccessList",[]),_(this,"_onErrorList",[]),this.assets=t,this.loadStatus="INIT",r!=null&&r.window&&(this.win=r.window)}load(){const t=this.assets||[],r=[];for(let n=0;n<t.length;n++){const o=t[n];o.id||(o.id=pe()),r.push(o.id);const a=o.resources.map(i=>i.src);Ga(a,o.id,{async:!1,before:(i,s)=>(this.win.document.body.appendChild(s),!1)})}if(t.length===0){this._onSuccessList.forEach(n=>n());return}return new Promise((n,o)=>{Ga.ready(r,{success:()=>{this._onSuccessList.forEach(a=>a()),n("")},error:a=>{this._onErrorList.forEach(i=>i(a)),o(a)}})})}onSuccess(t){return this._onSuccessList.push(t),this}onError(t){return this._onErrorList.push(t),this}}return Object.freeze(Object.defineProperty({__proto__:null,AssetLoader:Fm,ComponentInstanceManager:La,DefaultDropPlaceholder:Ba,DefineReactAdapter:Ia,DesignRender:$m,ReactAdapter:ym,Render:Fa,canAcceptsRef:Ta,collectVariable:um,compWrapper:Aa,convertCodeStringToFunction:$a,flatObject:lm,formatSourceStylePropertyName:cn,getAdapter:En,getCSSTextValue:un,getComponentsLibs:fm,getMatchVal:Pa,getObjFromArrayMap:sn,getThirdLibs:dm,isClass:cm,runExpression:Ie,shouldConstruct:Ma,useDesignRender:Pm,useRender:Tm},Symbol.toStringTag,{value:"Module"}))});
//# sourceMappingURL=render.umd.js.map
