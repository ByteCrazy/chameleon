(function(y,R){typeof exports=="object"&&typeof module<"u"?R(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],R):(y=typeof globalThis<"u"?globalThis:y||self,R(y.CRender={},y.React,y.ReactDOM))})(this,function(y,R,at){"use strict";var Uh=Object.defineProperty;var Bh=(y,R,at)=>R in y?Uh(y,R,{enumerable:!0,configurable:!0,writable:!0,value:at}):y[R]=at;var b=(y,R,at)=>(Bh(y,typeof R!="symbol"?R+"":R,at),at);const Mo=t=>t&&typeof t=="object"&&"default"in t?t:{default:t};function Po(t){if(t&&t.__esModule)return t;const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const A=Mo(R),xo=Po(at),Do=t=>()=>{console.warn(`${t} need to be implement getComponent`)},Ro=["customPageRootRender"],hr=["pageRender","render","convertModelToComponent","getComponent","getContext","getUtils","getDataLink","createDataLink","transformProps","transformData","transformGlobalData","errorCatch","clear"],vr=t=>[...hr,...Ro].reduce((r,n)=>{var o;return t!=null&&t[n]?r[n]=(o=t[n])==null?void 0:o.bind(t):hr.includes(n)&&(r[n]=Do),r},{});var Io=Object.defineProperty,Fo=(t,e,r)=>e in t?Io(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_=(t,e,r)=>(Fo(t,typeof e!="symbol"?e+"":e,r),r),Lo=typeof global=="object"&&global&&global.Object===Object&&global;const gr=Lo;var Uo=typeof self=="object"&&self&&self.Object===Object&&self,Bo=gr||Uo||Function("return this")();const W=Bo;var ko=W.Symbol;const G=ko;var mr=Object.prototype,zo=mr.hasOwnProperty,Go=mr.toString,At=G?G.toStringTag:void 0;function Ho(t){var e=zo.call(t,At),r=t[At];try{t[At]=void 0;var n=!0}catch{}var o=Go.call(t);return n&&(e?t[At]=r:delete t[At]),o}var Vo=Object.prototype,Wo=Vo.toString;function Jo(t){return Wo.call(t)}var qo="[object Null]",Qo="[object Undefined]",yr=G?G.toStringTag:void 0;function it(t){return t==null?t===void 0?Qo:qo:yr&&yr in Object(t)?Ho(t):Jo(t)}function Q(t){return t!=null&&typeof t=="object"}var Xo="[object Symbol]";function fe(t){return typeof t=="symbol"||Q(t)&&it(t)==Xo}function pe(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var Yo=Array.isArray;const x=Yo;var Ko=1/0,br=G?G.prototype:void 0,_r=br?br.toString:void 0;function jr(t){if(typeof t=="string")return t;if(x(t))return pe(t,jr)+"";if(fe(t))return _r?_r.call(t):"";var e=t+"";return e=="0"&&1/t==-Ko?"-0":e}function et(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function wr(t){return t}var Zo="[object AsyncFunction]",ta="[object Function]",ea="[object GeneratorFunction]",ra="[object Proxy]";function Or(t){if(!et(t))return!1;var e=it(t);return e==ta||e==ea||e==Zo||e==ra}var na=W["__core-js_shared__"];const de=na;var Sr=function(){var t=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function oa(t){return!!Sr&&Sr in t}var aa=Function.prototype,ia=aa.toString;function st(t){if(t!=null){try{return ia.call(t)}catch{}try{return t+""}catch{}}return""}var sa=/[\\^$.*+?()[\]{}|]/g,ca=/^\[object .+?Constructor\]$/,ua=Function.prototype,la=Object.prototype,fa=ua.toString,pa=la.hasOwnProperty,da=RegExp("^"+fa.call(pa).replace(sa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ha(t){if(!et(t)||oa(t))return!1;var e=Or(t)?da:ca;return e.test(st(t))}function va(t,e){return t==null?void 0:t[e]}function ct(t,e){var r=va(t,e);return ha(r)?r:void 0}var ga=ct(W,"WeakMap");const he=ga;var Cr=Object.create,ma=function(){function t(){}return function(e){if(!et(e))return{};if(Cr)return Cr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const ya=ma;function ba(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function _a(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var ja=800,wa=16,Oa=Date.now;function Sa(t){var e=0,r=0;return function(){var n=Oa(),o=wa-(n-r);if(r=n,o>0){if(++e>=ja)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Ca(t){return function(){return t}}var Ea=function(){try{var t=ct(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Vt=Ea;var $a=Vt?function(t,e){return Vt(t,"toString",{configurable:!0,enumerable:!1,value:Ca(e),writable:!0})}:wr,Na=Sa($a);const Ta=Na;function Aa(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var Ma=9007199254740991,Pa=/^(?:0|[1-9]\d*)$/;function ve(t,e){var r=typeof t;return e=e==null?Ma:e,!!e&&(r=="number"||r!="symbol"&&Pa.test(t))&&t>-1&&t%1==0&&t<e}function Er(t,e,r){e=="__proto__"&&Vt?Vt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function ge(t,e){return t===e||t!==t&&e!==e}var xa=Object.prototype,Da=xa.hasOwnProperty;function me(t,e,r){var n=t[e];(!(Da.call(t,e)&&ge(n,r))||r===void 0&&!(e in t))&&Er(t,e,r)}function Mt(t,e,r,n){var o=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var i=e[a],c=n?n(r[i],t[i],i,r,t):void 0;c===void 0&&(c=t[i]),o?Er(r,i,c):me(r,i,c)}return r}var $r=Math.max;function Ra(t,e,r){return e=$r(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=$r(n.length-e,0),s=Array(a);++o<a;)s[o]=n[e+o];o=-1;for(var i=Array(e+1);++o<e;)i[o]=n[o];return i[e]=r(s),ba(t,this,i)}}var Ia=9007199254740991;function ye(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ia}function Nr(t){return t!=null&&ye(t.length)&&!Or(t)}var Fa=Object.prototype;function be(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Fa;return t===r}function La(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Ua="[object Arguments]";function Tr(t){return Q(t)&&it(t)==Ua}var Ar=Object.prototype,Ba=Ar.hasOwnProperty,ka=Ar.propertyIsEnumerable,za=Tr(function(){return arguments}())?Tr:function(t){return Q(t)&&Ba.call(t,"callee")&&!ka.call(t,"callee")};const _e=za;function Ga(){return!1}var Mr=typeof y=="object"&&y&&!y.nodeType&&y,Pr=Mr&&typeof module=="object"&&module&&!module.nodeType&&module,Ha=Pr&&Pr.exports===Mr,xr=Ha?W.Buffer:void 0,Va=xr?xr.isBuffer:void 0,Wa=Va||Ga;const Wt=Wa;var Ja="[object Arguments]",qa="[object Array]",Qa="[object Boolean]",Xa="[object Date]",Ya="[object Error]",Ka="[object Function]",Za="[object Map]",ti="[object Number]",ei="[object Object]",ri="[object RegExp]",ni="[object Set]",oi="[object String]",ai="[object WeakMap]",ii="[object ArrayBuffer]",si="[object DataView]",ci="[object Float32Array]",ui="[object Float64Array]",li="[object Int8Array]",fi="[object Int16Array]",pi="[object Int32Array]",di="[object Uint8Array]",hi="[object Uint8ClampedArray]",vi="[object Uint16Array]",gi="[object Uint32Array]",$={};$[ci]=$[ui]=$[li]=$[fi]=$[pi]=$[di]=$[hi]=$[vi]=$[gi]=!0,$[Ja]=$[qa]=$[ii]=$[Qa]=$[si]=$[Xa]=$[Ya]=$[Ka]=$[Za]=$[ti]=$[ei]=$[ri]=$[ni]=$[oi]=$[ai]=!1;function mi(t){return Q(t)&&ye(t.length)&&!!$[it(t)]}function je(t){return function(e){return t(e)}}var Dr=typeof y=="object"&&y&&!y.nodeType&&y,Pt=Dr&&typeof module=="object"&&module&&!module.nodeType&&module,yi=Pt&&Pt.exports===Dr,we=yi&&gr.process,bi=function(){try{var t=Pt&&Pt.require&&Pt.require("util").types;return t||we&&we.binding&&we.binding("util")}catch{}}();const vt=bi;var Rr=vt&&vt.isTypedArray,_i=Rr?je(Rr):mi;const Ir=_i;var ji=Object.prototype,wi=ji.hasOwnProperty;function Fr(t,e){var r=x(t),n=!r&&_e(t),o=!r&&!n&&Wt(t),a=!r&&!n&&!o&&Ir(t),s=r||n||o||a,i=s?La(t.length,String):[],c=i.length;for(var u in t)(e||wi.call(t,u))&&!(s&&(u=="length"||o&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ve(u,c)))&&i.push(u);return i}function Lr(t,e){return function(r){return t(e(r))}}var Oi=Lr(Object.keys,Object);const Si=Oi;var Ci=Object.prototype,Ei=Ci.hasOwnProperty;function $i(t){if(!be(t))return Si(t);var e=[];for(var r in Object(t))Ei.call(t,r)&&r!="constructor"&&e.push(r);return e}function Jt(t){return Nr(t)?Fr(t):$i(t)}function Ni(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Ti=Object.prototype,Ai=Ti.hasOwnProperty;function Mi(t){if(!et(t))return Ni(t);var e=be(t),r=[];for(var n in t)n=="constructor"&&(e||!Ai.call(t,n))||r.push(n);return r}function Oe(t){return Nr(t)?Fr(t,!0):Mi(t)}var Pi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xi=/^\w*$/;function Se(t,e){if(x(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||fe(t)?!0:xi.test(t)||!Pi.test(t)||e!=null&&t in Object(e)}var Di=ct(Object,"create");const xt=Di;function Ri(){this.__data__=xt?xt(null):{},this.size=0}function Ii(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Fi="__lodash_hash_undefined__",Li=Object.prototype,Ui=Li.hasOwnProperty;function Bi(t){var e=this.__data__;if(xt){var r=e[t];return r===Fi?void 0:r}return Ui.call(e,t)?e[t]:void 0}var ki=Object.prototype,zi=ki.hasOwnProperty;function Gi(t){var e=this.__data__;return xt?e[t]!==void 0:zi.call(e,t)}var Hi="__lodash_hash_undefined__";function Vi(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=xt&&e===void 0?Hi:e,this}function ut(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ut.prototype.clear=Ri,ut.prototype.delete=Ii,ut.prototype.get=Bi,ut.prototype.has=Gi,ut.prototype.set=Vi;function Wi(){this.__data__=[],this.size=0}function qt(t,e){for(var r=t.length;r--;)if(ge(t[r][0],e))return r;return-1}var Ji=Array.prototype,qi=Ji.splice;function Qi(t){var e=this.__data__,r=qt(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():qi.call(e,r,1),--this.size,!0}function Xi(t){var e=this.__data__,r=qt(e,t);return r<0?void 0:e[r][1]}function Yi(t){return qt(this.__data__,t)>-1}function Ki(t,e){var r=this.__data__,n=qt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function X(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}X.prototype.clear=Wi,X.prototype.delete=Qi,X.prototype.get=Xi,X.prototype.has=Yi,X.prototype.set=Ki;var Zi=ct(W,"Map");const Dt=Zi;function ts(){this.size=0,this.__data__={hash:new ut,map:new(Dt||X),string:new ut}}function es(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Qt(t,e){var r=t.__data__;return es(e)?r[typeof e=="string"?"string":"hash"]:r.map}function rs(t){var e=Qt(this,t).delete(t);return this.size-=e?1:0,e}function ns(t){return Qt(this,t).get(t)}function os(t){return Qt(this,t).has(t)}function as(t,e){var r=Qt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function Y(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Y.prototype.clear=ts,Y.prototype.delete=rs,Y.prototype.get=ns,Y.prototype.has=os,Y.prototype.set=as;var is="Expected a function";function Ce(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(is);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var s=t.apply(this,n);return r.cache=a.set(o,s)||a,s};return r.cache=new(Ce.Cache||Y),r}Ce.Cache=Y;var ss=500;function cs(t){var e=Ce(t,function(n){return r.size===ss&&r.clear(),n}),r=e.cache;return e}var us=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ls=/\\(\\)?/g,fs=cs(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(us,function(r,n,o,a){e.push(o?a.replace(ls,"$1"):n||r)}),e});const ps=fs;function ds(t){return t==null?"":jr(t)}function gt(t,e){return x(t)?t:Se(t,e)?[t]:ps(ds(t))}var hs=1/0;function mt(t){if(typeof t=="string"||fe(t))return t;var e=t+"";return e=="0"&&1/t==-hs?"-0":e}function Xt(t,e){e=gt(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[mt(e[r++])];return r&&r==n?t:void 0}function Ur(t,e,r){var n=t==null?void 0:Xt(t,e);return n===void 0?r:n}function Ee(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var Br=G?G.isConcatSpreadable:void 0;function vs(t){return x(t)||_e(t)||!!(Br&&t&&t[Br])}function kr(t,e,r,n,o){var a=-1,s=t.length;for(r||(r=vs),o||(o=[]);++a<s;){var i=t[a];e>0&&r(i)?e>1?kr(i,e-1,r,n,o):Ee(o,i):n||(o[o.length]=i)}return o}function gs(t){var e=t==null?0:t.length;return e?kr(t,1):[]}function ms(t){return Ta(Ra(t,void 0,gs),t+"")}var ys=Lr(Object.getPrototypeOf,Object);const $e=ys;var bs="[object Object]",_s=Function.prototype,js=Object.prototype,zr=_s.toString,ws=js.hasOwnProperty,Os=zr.call(Object);function k(t){if(!Q(t)||it(t)!=bs)return!1;var e=$e(t);if(e===null)return!0;var r=ws.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&zr.call(r)==Os}function Ss(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a}function Cs(){this.__data__=new X,this.size=0}function Es(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function $s(t){return this.__data__.get(t)}function Ns(t){return this.__data__.has(t)}var Ts=200;function As(t,e){var r=this.__data__;if(r instanceof X){var n=r.__data__;if(!Dt||n.length<Ts-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Y(n)}return r.set(t,e),this.size=r.size,this}function J(t){var e=this.__data__=new X(t);this.size=e.size}J.prototype.clear=Cs,J.prototype.delete=Es,J.prototype.get=$s,J.prototype.has=Ns,J.prototype.set=As;function Ms(t,e){return t&&Mt(e,Jt(e),t)}function Ps(t,e){return t&&Mt(e,Oe(e),t)}var Gr=typeof y=="object"&&y&&!y.nodeType&&y,Hr=Gr&&typeof module=="object"&&module&&!module.nodeType&&module,xs=Hr&&Hr.exports===Gr,Vr=xs?W.Buffer:void 0,Wr=Vr?Vr.allocUnsafe:void 0;function Ds(t,e){if(e)return t.slice();var r=t.length,n=Wr?Wr(r):new t.constructor(r);return t.copy(n),n}function Rs(t,e){for(var r=-1,n=t==null?0:t.length,o=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[o++]=s)}return a}function Jr(){return[]}var Is=Object.prototype,Fs=Is.propertyIsEnumerable,qr=Object.getOwnPropertySymbols,Ls=qr?function(t){return t==null?[]:(t=Object(t),Rs(qr(t),function(e){return Fs.call(t,e)}))}:Jr;const Ne=Ls;function Us(t,e){return Mt(t,Ne(t),e)}var Bs=Object.getOwnPropertySymbols,ks=Bs?function(t){for(var e=[];t;)Ee(e,Ne(t)),t=$e(t);return e}:Jr;const Qr=ks;function zs(t,e){return Mt(t,Qr(t),e)}function Xr(t,e,r){var n=e(t);return x(t)?n:Ee(n,r(t))}function Te(t){return Xr(t,Jt,Ne)}function Ae(t){return Xr(t,Oe,Qr)}var Gs=ct(W,"DataView");const Me=Gs;var Hs=ct(W,"Promise");const Pe=Hs;var Vs=ct(W,"Set");const xe=Vs;var Yr="[object Map]",Ws="[object Object]",Kr="[object Promise]",Zr="[object Set]",tn="[object WeakMap]",en="[object DataView]",Js=st(Me),qs=st(Dt),Qs=st(Pe),Xs=st(xe),Ys=st(he),lt=it;(Me&&lt(new Me(new ArrayBuffer(1)))!=en||Dt&&lt(new Dt)!=Yr||Pe&&lt(Pe.resolve())!=Kr||xe&&lt(new xe)!=Zr||he&&lt(new he)!=tn)&&(lt=function(t){var e=it(t),r=e==Ws?t.constructor:void 0,n=r?st(r):"";if(n)switch(n){case Js:return en;case qs:return Yr;case Qs:return Kr;case Xs:return Zr;case Ys:return tn}return e});const Rt=lt;var Ks=Object.prototype,Zs=Ks.hasOwnProperty;function tc(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Zs.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var ec=W.Uint8Array;const Yt=ec;function De(t){var e=new t.constructor(t.byteLength);return new Yt(e).set(new Yt(t)),e}function rc(t,e){var r=e?De(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var nc=/\w*$/;function oc(t){var e=new t.constructor(t.source,nc.exec(t));return e.lastIndex=t.lastIndex,e}var rn=G?G.prototype:void 0,nn=rn?rn.valueOf:void 0;function ac(t){return nn?Object(nn.call(t)):{}}function ic(t,e){var r=e?De(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var sc="[object Boolean]",cc="[object Date]",uc="[object Map]",lc="[object Number]",fc="[object RegExp]",pc="[object Set]",dc="[object String]",hc="[object Symbol]",vc="[object ArrayBuffer]",gc="[object DataView]",mc="[object Float32Array]",yc="[object Float64Array]",bc="[object Int8Array]",_c="[object Int16Array]",jc="[object Int32Array]",wc="[object Uint8Array]",Oc="[object Uint8ClampedArray]",Sc="[object Uint16Array]",Cc="[object Uint32Array]";function Ec(t,e,r){var n=t.constructor;switch(e){case vc:return De(t);case sc:case cc:return new n(+t);case gc:return rc(t,r);case mc:case yc:case bc:case _c:case jc:case wc:case Oc:case Sc:case Cc:return ic(t,r);case uc:return new n;case lc:case dc:return new n(t);case fc:return oc(t);case pc:return new n;case hc:return ac(t)}}function $c(t){return typeof t.constructor=="function"&&!be(t)?ya($e(t)):{}}var Nc="[object Map]";function Tc(t){return Q(t)&&Rt(t)==Nc}var on=vt&&vt.isMap,Ac=on?je(on):Tc;const Mc=Ac;var Pc="[object Set]";function xc(t){return Q(t)&&Rt(t)==Pc}var an=vt&&vt.isSet,Dc=an?je(an):xc;const Rc=Dc;var Ic=1,Fc=2,Lc=4,sn="[object Arguments]",Uc="[object Array]",Bc="[object Boolean]",kc="[object Date]",zc="[object Error]",cn="[object Function]",Gc="[object GeneratorFunction]",Hc="[object Map]",Vc="[object Number]",un="[object Object]",Wc="[object RegExp]",Jc="[object Set]",qc="[object String]",Qc="[object Symbol]",Xc="[object WeakMap]",Yc="[object ArrayBuffer]",Kc="[object DataView]",Zc="[object Float32Array]",tu="[object Float64Array]",eu="[object Int8Array]",ru="[object Int16Array]",nu="[object Int32Array]",ou="[object Uint8Array]",au="[object Uint8ClampedArray]",iu="[object Uint16Array]",su="[object Uint32Array]",C={};C[sn]=C[Uc]=C[Yc]=C[Kc]=C[Bc]=C[kc]=C[Zc]=C[tu]=C[eu]=C[ru]=C[nu]=C[Hc]=C[Vc]=C[un]=C[Wc]=C[Jc]=C[qc]=C[Qc]=C[ou]=C[au]=C[iu]=C[su]=!0,C[zc]=C[cn]=C[Xc]=!1;function It(t,e,r,n,o,a){var s,i=e&Ic,c=e&Fc,u=e&Lc;if(r&&(s=o?r(t,n,o,a):r(t)),s!==void 0)return s;if(!et(t))return t;var f=x(t);if(f){if(s=tc(t),!i)return _a(t,s)}else{var p=Rt(t),l=p==cn||p==Gc;if(Wt(t))return Ds(t,i);if(p==un||p==sn||l&&!o){if(s=c||l?{}:$c(t),!i)return c?zs(t,Ps(s,t)):Us(t,Ms(s,t))}else{if(!C[p])return o?t:{};s=Ec(t,p,i)}}a||(a=new J);var h=a.get(t);if(h)return h;a.set(t,s),Rc(t)?t.forEach(function(j){s.add(It(j,e,r,j,t,a))}):Mc(t)&&t.forEach(function(j,w){s.set(w,It(j,e,r,w,t,a))});var g=u?c?Ae:Te:c?Oe:Jt,m=f?void 0:g(t);return Aa(m||t,function(j,w){m&&(w=j,j=t[w]),me(s,w,It(j,e,r,w,t,a))}),s}var cu=1,uu=4;function lu(t){return It(t,cu|uu)}var fu="__lodash_hash_undefined__";function pu(t){return this.__data__.set(t,fu),this}function du(t){return this.__data__.has(t)}function Kt(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Y;++e<r;)this.add(t[e])}Kt.prototype.add=Kt.prototype.push=pu,Kt.prototype.has=du;function hu(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function vu(t,e){return t.has(e)}var gu=1,mu=2;function ln(t,e,r,n,o,a){var s=r&gu,i=t.length,c=e.length;if(i!=c&&!(s&&c>i))return!1;var u=a.get(t),f=a.get(e);if(u&&f)return u==e&&f==t;var p=-1,l=!0,h=r&mu?new Kt:void 0;for(a.set(t,e),a.set(e,t);++p<i;){var g=t[p],m=e[p];if(n)var j=s?n(m,g,p,e,t,a):n(g,m,p,t,e,a);if(j!==void 0){if(j)continue;l=!1;break}if(h){if(!hu(e,function(w,S){if(!vu(h,S)&&(g===w||o(g,w,r,n,a)))return h.push(S)})){l=!1;break}}else if(!(g===m||o(g,m,r,n,a))){l=!1;break}}return a.delete(t),a.delete(e),l}function yu(t){var e=-1,r=Array(t.size);return t.forEach(function(n,o){r[++e]=[o,n]}),r}function bu(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var _u=1,ju=2,wu="[object Boolean]",Ou="[object Date]",Su="[object Error]",Cu="[object Map]",Eu="[object Number]",$u="[object RegExp]",Nu="[object Set]",Tu="[object String]",Au="[object Symbol]",Mu="[object ArrayBuffer]",Pu="[object DataView]",fn=G?G.prototype:void 0,Re=fn?fn.valueOf:void 0;function xu(t,e,r,n,o,a,s){switch(r){case Pu:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Mu:return!(t.byteLength!=e.byteLength||!a(new Yt(t),new Yt(e)));case wu:case Ou:case Eu:return ge(+t,+e);case Su:return t.name==e.name&&t.message==e.message;case $u:case Tu:return t==e+"";case Cu:var i=yu;case Nu:var c=n&_u;if(i||(i=bu),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;n|=ju,s.set(t,e);var f=ln(i(t),i(e),n,o,a,s);return s.delete(t),f;case Au:if(Re)return Re.call(t)==Re.call(e)}return!1}var Du=1,Ru=Object.prototype,Iu=Ru.hasOwnProperty;function Fu(t,e,r,n,o,a){var s=r&Du,i=Te(t),c=i.length,u=Te(e),f=u.length;if(c!=f&&!s)return!1;for(var p=c;p--;){var l=i[p];if(!(s?l in e:Iu.call(e,l)))return!1}var h=a.get(t),g=a.get(e);if(h&&g)return h==e&&g==t;var m=!0;a.set(t,e),a.set(e,t);for(var j=s;++p<c;){l=i[p];var w=t[l],S=e[l];if(n)var M=s?n(S,w,l,e,t,a):n(w,S,l,t,e,a);if(!(M===void 0?w===S||o(w,S,r,n,a):M)){m=!1;break}j||(j=l=="constructor")}if(m&&!j){var P=t.constructor,D=e.constructor;P!=D&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof D=="function"&&D instanceof D)&&(m=!1)}return a.delete(t),a.delete(e),m}var Lu=1,pn="[object Arguments]",dn="[object Array]",Zt="[object Object]",Uu=Object.prototype,hn=Uu.hasOwnProperty;function Bu(t,e,r,n,o,a){var s=x(t),i=x(e),c=s?dn:Rt(t),u=i?dn:Rt(e);c=c==pn?Zt:c,u=u==pn?Zt:u;var f=c==Zt,p=u==Zt,l=c==u;if(l&&Wt(t)){if(!Wt(e))return!1;s=!0,f=!1}if(l&&!f)return a||(a=new J),s||Ir(t)?ln(t,e,r,n,o,a):xu(t,e,c,r,n,o,a);if(!(r&Lu)){var h=f&&hn.call(t,"__wrapped__"),g=p&&hn.call(e,"__wrapped__");if(h||g){var m=h?t.value():t,j=g?e.value():e;return a||(a=new J),o(m,j,r,n,a)}}return l?(a||(a=new J),Fu(t,e,r,n,o,a)):!1}function Ie(t,e,r,n,o){return t===e?!0:t==null||e==null||!Q(t)&&!Q(e)?t!==t&&e!==e:Bu(t,e,r,n,Ie,o)}var ku=1,zu=2;function Gu(t,e,r,n){var o=r.length,a=o,s=!n;if(t==null)return!a;for(t=Object(t);o--;){var i=r[o];if(s&&i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++o<a;){i=r[o];var c=i[0],u=t[c],f=i[1];if(s&&i[2]){if(u===void 0&&!(c in t))return!1}else{var p=new J;if(n)var l=n(u,f,c,t,e,p);if(!(l===void 0?Ie(f,u,ku|zu,n,p):l))return!1}}return!0}function vn(t){return t===t&&!et(t)}function Hu(t){for(var e=Jt(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,vn(o)]}return e}function gn(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function Vu(t){var e=Hu(t);return e.length==1&&e[0][2]?gn(e[0][0],e[0][1]):function(r){return r===t||Gu(r,t,e)}}function Wu(t,e){return t!=null&&e in Object(t)}function Ju(t,e,r){e=gt(e,t);for(var n=-1,o=e.length,a=!1;++n<o;){var s=mt(e[n]);if(!(a=t!=null&&r(t,s)))break;t=t[s]}return a||++n!=o?a:(o=t==null?0:t.length,!!o&&ye(o)&&ve(s,o)&&(x(t)||_e(t)))}function qu(t,e){return t!=null&&Ju(t,e,Wu)}var Qu=1,Xu=2;function Yu(t,e){return Se(t)&&vn(e)?gn(mt(t),e):function(r){var n=Ur(r,t);return n===void 0&&n===e?qu(r,t):Ie(e,n,Qu|Xu)}}function Ku(t){return function(e){return e==null?void 0:e[t]}}function Zu(t){return function(e){return Xt(e,t)}}function tl(t){return Se(t)?Ku(mt(t)):Zu(t)}function mn(t){return typeof t=="function"?t:t==null?wr:typeof t=="object"?x(t)?Yu(t[0],t[1]):Vu(t):tl(t)}function el(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function rl(t,e){return e.length<2?t:Xt(t,Ss(e,0,-1))}var nl="Expected a function";function ol(t){if(typeof t!="function")throw new TypeError(nl);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function al(t,e){return e=gt(e,t),t=rl(t,e),t==null||delete t[mt(el(e))]}function il(t){return k(t)?void 0:t}var sl=1,cl=2,ul=4,ll=ms(function(t,e){var r={};if(t==null)return r;var n=!1;e=pe(e,function(a){return a=gt(a,t),n||(n=a.length>1),a}),Mt(t,Ae(t),r),n&&(r=It(r,sl|cl|ul,il));for(var o=e.length;o--;)al(r,e[o]);return r});const yn=ll;function fl(t,e,r,n){if(!et(t))return t;e=gt(e,t);for(var o=-1,a=e.length,s=a-1,i=t;i!=null&&++o<a;){var c=mt(e[o]),u=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(o!=s){var f=i[c];u=n?n(f,c,i):void 0,u===void 0&&(u=et(f)?f:ve(e[o+1])?[]:{})}me(i,c,u),i=i[c]}return t}function pl(t,e,r){for(var n=-1,o=e.length,a={};++n<o;){var s=e[n],i=Xt(t,s);r(i,s)&&fl(a,gt(s,t),i)}return a}function dl(t,e){if(t==null)return{};var r=pe(Ae(t),function(n){return[n]});return e=mn(e),pl(t,r,function(n,o){return e(n,o[0])})}function hl(t,e){return dl(t,ol(mn(e)))}class bn extends TypeError{constructor(e,r){let n;const{message:o,...a}=e,{path:s}=e,i=s.length===0?o:`At path: ${s.join(".")} -- ${o}`;super(i),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n!=null?n:n=[e,...r()]}}function vl(t){return H(t)&&typeof t[Symbol.iterator]=="function"}function H(t){return typeof t=="object"&&t!=null}function z(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function gl(t){const{done:e,value:r}=t.next();return e?void 0:r}function ml(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:o,branch:a}=e,{type:s}=r,{refinement:i,message:c=`Expected a value of type \`${s}\`${i?` with refinement \`${i}\``:""}, but received: \`${z(n)}\``}=t;return{value:n,type:s,refinement:i,key:o[o.length-1],path:o,branch:a,...t,message:c}}function*_n(t,e,r,n){vl(t)||(t=[t]);for(const o of t){const a=ml(o,e,r,n);a&&(yield a)}}function*Fe(t,e,r){r===void 0&&(r={});const{path:n=[],branch:o=[t],coerce:a=!1,mask:s=!1}=r,i={path:n,branch:o};if(a&&(t=e.coercer(t,i),s&&e.type!=="type"&&H(e.schema)&&H(t)&&!Array.isArray(t)))for(const u in t)e.schema[u]===void 0&&delete t[u];let c="valid";for(const u of e.validator(t,i))c="not_valid",yield[u,void 0];for(let[u,f,p]of e.entries(t,i)){const l=Fe(f,p,{path:u===void 0?n:[...n,u],branch:u===void 0?o:[...o,f],coerce:a,mask:s});for(const h of l)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):a&&(f=h[1],u===void 0?t=f:t instanceof Map?t.set(u,f):t instanceof Set?t.add(f):H(t)&&(f!==void 0||u in t)&&(t[u]=f))}if(c!=="not_valid")for(const u of e.refiner(t,i))c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,t])}class q{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:r,schema:n,validator:o,refiner:a,coercer:s=c=>c,entries:i=function*(){}}=e;this.type=r,this.schema=n,this.entries=i,this.coercer=s,o?this.validator=(c,u)=>{const f=o(c,u);return _n(f,u,this,c)}:this.validator=()=>[],a?this.refiner=(c,u)=>{const f=a(c,u);return _n(f,u,this,c)}:this.refiner=()=>[]}assert(e){return jn(e,this)}create(e){return yl(e,this)}is(e){return _l(e,this)}mask(e){return bl(e,this)}validate(e,r){return r===void 0&&(r={}),yt(e,this,r)}}function jn(t,e){const r=yt(t,e);if(r[0])throw r[0]}function yl(t,e){const r=yt(t,e,{coerce:!0});if(r[0])throw r[0];return r[1]}function bl(t,e){const r=yt(t,e,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function _l(t,e){return!yt(t,e)[0]}function yt(t,e,r){r===void 0&&(r={});const n=Fe(t,e,r),o=gl(n);return o[0]?[new bn(o[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function Le(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=e[0].type==="type",o=e.map(s=>s.schema),a=Object.assign({},...o);return n?Cn(a):O(a)}function rt(t,e){return new q({type:t,schema:null,validator:e})}function bt(t){return new q({type:"dynamic",schema:null,*entries(e,r){yield*t(e,r).entries(e,r)},validator(e,r){return t(e,r).validator(e,r)},coercer(e,r){return t(e,r).coercer(e,r)},refiner(e,r){return t(e,r).refiner(e,r)}})}function wn(t,e){const{schema:r}=t,n={...r};for(const o of e)delete n[o];switch(t.type){case"type":return Cn(n);default:return O(n)}}function L(){return rt("any",()=>!0)}function F(t){return new q({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${z(e)}`}})}function K(){return rt("boolean",t=>typeof t=="boolean")}function Ue(t){const e={},r=t.map(n=>z(n)).join();for(const n of t)e[n]=n;return new q({type:"enums",schema:e,validator(n){return t.includes(n)||`Expected one of \`${r}\`, but received: ${z(n)}`}})}function On(){return rt("func",t=>typeof t=="function"||`Expected a function, but received: ${z(t)}`)}function U(t){const e=z(t),r=typeof t;return new q({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${z(n)}`}})}function jl(){return rt("never",()=>!1)}function Sn(){return rt("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${z(t)}`)}function O(t){const e=t?Object.keys(t):[],r=jl();return new q({type:"object",schema:t||null,*entries(n){if(t&&H(n)){const o=new Set(Object.keys(n));for(const a of e)o.delete(a),yield[a,n[a],t[a]];for(const a of o)yield[a,n[a],r]}},validator(n){return H(n)||`Expected an object, but received: ${z(n)}`},coercer(n){return H(n)?{...n}:n}})}function v(t){return new q({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function Ft(t,e){return new q({type:"record",schema:null,*entries(r){if(H(r))for(const n in r){const o=r[n];yield[n,n,t],yield[n,o,e]}},validator(r){return H(r)||`Expected an object, but received: ${z(r)}`}})}function d(){return rt("string",t=>typeof t=="string"||`Expected a string, but received: ${z(t)}`)}function Cn(t){const e=Object.keys(t);return new q({type:"type",schema:t,*entries(r){if(H(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return H(r)||`Expected an object, but received: ${z(r)}`}})}function I(t){const e=t.map(r=>r.type).join(" | ");return new q({type:"union",schema:null,coercer(r,n){return(t.find(o=>{const[a]=o.validate(r,{coerce:!0});return!a})||wl()).coercer(r,n)},validator(r,n){const o=[];for(const a of t){const[...s]=Fe(r,a,n),[i]=s;if(i[0])for(const[c]of s)c&&o.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${z(r)}`,...o]}})}function wl(){return rt("unknown",()=>!0)}const Be=O({package:d(),version:d(),exportName:d(),destructuring:v(K()),subName:v(d()),main:v(d())}),Ol=I([O({globName:d(),type:U(["CDN"]),content:I([Be])}),O({globName:d(),type:U(["FUNCTION"]),content:I([d()])})]);var V=(t=>(t.SLOT="SLOT",t.FUNCTION="FUNCTION",t.EXPRESSION="EXPRESSION",t))(V||{}),ke=(t=>(t.DESIGN="design",t.SAVE="save",t))(ke||{}),ze=(t=>(t.FUNC="FUNC",t.COMP="COMP",t))(ze||{});const Sl=()=>rt("normalObj",t=>!k(t)||[V.SLOT,V.EXPRESSION,V.FUNCTION].includes(t==null?void 0:t.type)?!1:(yt(t,Ft(d(),Ge)),!0)),Ge=I([d(),Sn(),K(),O({type:U(V.SLOT),renderType:Ue([ze.FUNC,ze.COMP]),params:v(F(d())),value:bt(()=>I([_t,F(_t)]))}),O({type:U(V.EXPRESSION),value:d()}),O({type:U(V.FUNCTION),value:d()}),Sl(),F(bt(()=>Ge))]),En=O({type:U(V.EXPRESSION),value:d()}),_t=O({id:v(d()),title:v(d()),componentName:d(),props:v(Ft(d(),Ge)),stateName:v(d()),state:v(Ft(d(),L())),children:bt(()=>v(F(I([d(),_t])))),configure:v(L()),style:v(d()),className:v(d()),refId:v(d()),extra:v(Ft(L(),L())),condition:v(I([K(),En])),tempDevConfig:v(L()),loop:v(O({open:K(),data:I([F(L()),En]),args:v(F(d())),forName:v(d()),forIndex:v(d()),key:v(L()),name:v(d())}))}),te=I([d(),O({label:d(),tip:v(d())})]),Cl=O({type:U("shape"),value:F(O({name:d(),title:te,valueType:bt(()=>ee)}))}),El=O({type:U("enums"),value:F(d())});O({type:U("array"),value:bt(()=>ee)});const $l=O({type:U("array"),value:bt(()=>F(ee))}),ee=I([Ue(["array","boolean","number","object","string"]),Ue(["component","expression","function"]),Cl,El,$l]),Nl=I([d(),O({componentName:d(),props:v(L()),initialValue:v(L())})]),He=O({name:d(),title:te,valueType:ee,description:v(d()),defaultValue:L(),setters:v(F(Nl)),condition:v(On())}),Tl=I([d(),On()]);var Ve=(t=>(t.SINGLE="single",t.GROUP="group",t))(Ve||{});I([d(),O({name:d(),describe:v(d()),params:v(O({name:d(),description:d()})),template:d()})]);const Al=O({id:v(d()),title:d(),snapshot:I([d(),L()]),snapshotText:v(d()),description:v(d()),tags:v(F(d())),groupName:v(d()),category:v(d()),schema:Le(wn(_t,["id"]),O({componentName:v(d())}))}),Ml=O({componentName:d(),title:d(),screenshot:v(d()),icon:v(d()),tags:v(F(d())),groupName:v(d()),category:v(d()),priority:v(Sn()),npm:I([Be,U(!1)]),snippets:F(Al),props:F(I([He,O({title:v(te),type:U("single"),content:He}),O({title:v(te),type:U("group"),content:F(He)})])),fixedProps:v(L()),isContainer:v(I([K(),O({placeholder:d(),width:d(),height:d()})])),isModal:v(I([K(),O({visibleKey:d()})])),isSupportStyle:v(K()),isSupportDispatchNativeEvent:v(K()),isLayout:v(K()),rootSelector:v(d()),selectionToolBars:v(F(Tl)),extra:v(Ft(L(),L()))}),Pl=t=>({data:e,message:r,throwError:n})=>{const o=t({data:e,message:r,throwError:n});if(o.isValidate)return o;if(n)throw o.message||r?new Error(`${o.message||r}
 originData: ${JSON.stringify(e)}`):new Error(`${JSON.stringify(e)} 
 data struct format is invalidate`);return o},We=t=>{const{data:e,message:r,throwError:n,dataStruct:o}=t;return Pl(({data:a})=>{try{return jn(a,o),{isValidate:!0}}catch(s){let i=s;return s instanceof bn&&(i=s.failures().map(c=>`\u3010${c.path.join(".")}\u3011: ${c.message}
`)),{isValidate:!1,message:i,error:s}}})({data:e,message:r,throwError:n})};var Je=(t=>(t.PAGE="CPage",t))(Je||{});const xl=Le(wn(_t,["componentName"]),O({componentName:U("CPage")}));function Dl(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(o){o(r)}),(n=t.get("*"))&&n.slice().map(function(o){o(e,r)})}}}const Lt=Dl(),Rl=(t,e)=>{const r={...t,value:[]},n=t.value;let o=new ft([]);return e&&(o=e.materialsMode||new ft([])),n&&(x(n)?r.value=n.map(a=>new T(a,{parent:e,materials:o})):k(n)&&r.value.push(new T(n,{parent:e,materials:o}))),r};class jt{constructor(e,r){_(this,"nodeType","SLOT"),_(this,"rawData"),_(this,"parent"),_(this,"emitter",Lt),_(this,"data"),_(this,"id"),_(this,"materialsMode"),this.parent=(r==null?void 0:r.parent)||null,this.rawData=e;const n=(r==null?void 0:r.materials)||new ft([]);this.materialsMode=n,this.id=Z(),this.data=Rl(e,this)}get value(){return this.data}export(e){const r=this.data,n=o=>{if(o instanceof T)return o.export(e);if(k(o)){const a={};return Object.keys(o||{}).forEach(s=>{a[s]=n(o[s])}),a}return x(o)?o.map(a=>n(a)):o};return n(r)}}const $n=t=>{let e=[];return t.forEach(r=>{const n=r;n.type?n.type===Ve.SINGLE?e.push(n.content):n.type===Ve.GROUP&&(e=[...e,...$n(n.content)]):e.push(r)}),e},qe=(t,e,r)=>{if(t.type)return t.type===V.SLOT?new jt(t,{parent:e,materials:r}):t;if(k(t)){const n={};return Object.keys(t).forEach(o=>{n[o]=Qe(t[o],e,r)}),n}else return Array.isArray(t)?t.map(n=>qe(n,e,r)):t},Qe=(t,e,r)=>k(t)?qe(t,e,r):x(t)?t.map(n=>qe(n,e,r)):t;class nt{constructor(e,r,n){_(this,"nodeType","PROP"),_(this,"rawData"),_(this,"parent"),_(this,"emitter",Lt),_(this,"data"),_(this,"name"),_(this,"materialsMode");const o=(n==null?void 0:n.materials)||new ft([]);this.materialsMode=o,this.parent=n==null?void 0:n.parent,this.rawData=r,this.name=e,this.data=Qe(r,this,o)}isIncludeSlot(){return!1}isIncludeExpression(){return!1}get value(){return this.data}updateValue(e){const r=this.data;this.data=Qe(e!=null?e:r,this,this.materialsMode),this.emitter.emit("onPropChange",{value:this.data,preValue:r,node:this}),this.parent&&!(this.parent instanceof jt)&&this.emitter.emit("onNodeChange",{value:this.parent.value,preValue:this.parent.value,node:this.parent})}get material(){const e=this.parent;if(e instanceof T){const r=e.material;return $n((r==null?void 0:r.value.props)||[]).find(n=>n.name===this.name)}else return null}export(e){const r=this.data,n=o=>{if(o instanceof nt||o instanceof jt||o instanceof T)return o.export(e);if(x(o))return o.map(a=>n(a));if(k(o)){const a={};return Object.keys(o||{}).forEach(s=>{a[s]=n(o[s])}),a}return o};return n(r)}}const Il=t=>{if(typeof t=="string")return!0;We({data:t,dataStruct:_t,throwError:!0})},Nn=(t,e,r=new ft([]))=>{var n;if(typeof t=="string")return t;const o={...t,id:(n=t.id)!=null?n:Z(),children:[],props:{}},a=Object.keys(t.props||{});return a.length&&a.forEach(s=>{var i;const c=(i=t.props)==null?void 0:i[s];if(c instanceof nt){o.props[s]=c;return}o.props[s]=new nt(s,c||"",{parent:e,materials:r})}),t.children&&(Array.isArray(t.children)?o.children=t.children.map(s=>{if(s instanceof T)return s;if(k(s)){const i=s;return new T(i,{parent:e,materials:r})}else return s}):(t.children instanceof T&&(o.children=[t.children]),o.children=[new T(t.children,{parent:e,materials:r})])),o};class T{constructor(e,r){_(this,"nodeType","NODE"),_(this,"rawData"),_(this,"data"),_(this,"emitter",Lt),_(this,"parent"),_(this,"materialsModel"),_(this,"listenerHandle"),_(this,"onChangeCbQueue"),this.rawData=JSON.parse(JSON.stringify(e)),Il(e);const n=(r==null?void 0:r.materials)||new ft([]);this.parent=(r==null?void 0:r.parent)||null,this.materialsModel=n,this.data=Nn(e,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener()}registerListener(){const e=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",e),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",e)})}onChange(e){return this.onChangeCbQueue.push(e),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==e)}}destroy(){this.listenerHandle.forEach(e=>e())}get id(){return this.data.id}get value(){return this.data}clone(e){const r={...this.export("design"),id:e||Z()};return new T(r)}updateValue(e){const r=this.data,n={...this.data,...e};this.data=Nn(n,this),this.emitter.emit("onNodeChange",{value:n,preValue:r,node:this})}contains(e){return Ze(this,e)}get props(){return this.data.props}get material(){const e=this.materialsModel;return e==null?void 0:e.findByComponentName(this.data.componentName)}getPlainProps(){const e=this.data,r={};return Object.keys(e.props||{}).forEach(n=>{r[n]=e.props[n].export("design")}),r}export(e){var r;const n=this.data;if(typeof n=="string")return n;const o={};Object.keys(n.props||{}).forEach(f=>{o[f]=n.props[f].export(e)});const a=(r=n.children)==null?void 0:r.map(f=>f instanceof T?f.export(e):f),s=n.configure||{},i=s.propsSetter||{},c={};Object.keys(i).forEach(f=>{const p=Ur(i,f,!1);p&&(c[f]=p)}),s.propsSetter=c;let u={...n,configure:s,props:o,children:a};return u=Ke(u),u}}const Tn=(t,e,r)=>{const n={...t,id:Z(),props:{},componentName:Je.PAGE,children:[]};let o=[];x(t.children)?o=t.children.map(s=>s instanceof T?s:k(s)?new T(s,{parent:e,materials:r}):s):t.children instanceof T?o.push(t.children):t.children&&k(t.children)?o.push(new T(t.children,{parent:e,materials:r})):o.push(t.children,{parent:e});const a=Object.keys(t.props||{});return a.length&&a.forEach(s=>{var i;const c=(i=t.props)==null?void 0:i[s];c instanceof nt?n.props[s]=c:n.props[s]=new nt(s,c||"",{parent:e,materials:r})}),n.children=o,n};class Xe{constructor(e,{parent:r,materials:n}){_(this,"rawData"),_(this,"data"),_(this,"nodeType","SCHEMA"),_(this,"emitter",Lt),_(this,"materialsModel"),_(this,"listenerHandle"),_(this,"onChangeCbQueue"),_(this,"parent"),this.materialsModel=n,this.rawData=JSON.parse(JSON.stringify(e)),this.data=Tn(e,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener(),this.parent=r}registerListener(){const e=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",e),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",e)})}onChange(e){return this.onChangeCbQueue.push(e),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==e)}}get id(){return this.data.id}get value(){return this.data}get props(){return this.data.props}get material(){const e=this.materialsModel;return e==null?void 0:e.findByComponentName(this.data.componentName)}updateValue(e){const r=this.data,n={...this.data,...e};this.data=Tn(n,this,this.materialsModel),this.emitter.emit("onNodeChange",{value:this.data,preValue:r,node:this})}contains(e){return Ze(this,e)}export(e=ke.SAVE){var r;const n=this.data,o={};Object.keys(n.props||{}).forEach(c=>{o[c]=n.props[c].export(e)});const a=(r=n.children)==null?void 0:r.map(c=>c.export(e)),s={...n,props:o,children:a};let i=yn(s,["id"]);return i=Ke(i),i}}const re=t=>(t==null?void 0:t.type)===V.EXPRESSION,Fl=t=>(t==null?void 0:t.type)==V.FUNCTION,Z=()=>Math.random().toString(32).slice(3,9),Ll=t=>(t==null?void 0:t.nodeType)==="NODE",Ye=t=>(t==null?void 0:t.nodeType)==="PROP",Ul=t=>(t==null?void 0:t.nodeType)==="SLOT",Ke=t=>hl(t,e=>k(e)?!Object.keys(e).length:x(e)?!e.length:!e);function Ze(t,e){const r=[t];for(;r.length;){const n=r.shift();if((n==null?void 0:n.id)===e)return n;const o=(n==null?void 0:n.props)||{},a=i=>{if(i instanceof T){r.push(i);return}if(i instanceof jt&&a(i.value.value),i instanceof nt){a(i.value);return}if(k(i)){const c=i;Object.keys(c).map(u=>{a(c[u])});return}if(x(i)){i.forEach(c=>{a(c)});return}};a(o);const s=(n==null?void 0:n.value.children.filter(i=>i instanceof T))||[];r.push(...s)}return null}const Bl=t=>{const e=lu(t),r=e.snippets;return delete e.snippets,e.snippets=r.map(n=>({...e,...n,id:n.id||`${t.componentName}-${Z()}`,title:n.title||t.title,category:n.category||t.category,tags:[...n.tags||[],...t.tags||[]],groupName:n.groupName||t.groupName,snapshot:n.snapshot||t.icon,snapshotText:n.snapshotText,schema:{...n.schema,componentName:n.schema.componentName||t.componentName}})),e};class kl{constructor(e){_(this,"rawData"),_(this,"data"),this.rawData=e,this.data=Bl(e)}get value(){return this.data}get componentName(){return this.data.componentName}get snippets(){return this.data.snippets}getSnippetById(e){return this.data.snippets.find(r=>r.id===e)}}const zl=t=>{if(!x(t))throw new Error("Materials must be a array");return t.map(e=>new kl(e))},Gl=t=>{t==null||t.forEach(e=>{We({data:e,dataStruct:Ml,throwError:!0})})};class ft{constructor(e){_(this,"rowData"),_(this,"data"),this.rowData=e,Gl(e),this.data=zl(e)}findByComponentName(e){return this.data.find(r=>r.componentName===e)}findSnippetById(e){const r=[...this.data];let n=null;for(;!n&&r.length;){const o=r.pop();n=o==null?void 0:o.getSnippetById(e)}return n}getAllSnippets(){let e=this.data.reduce((a,s)=>(a.push(...s.snippets),a),[]);const r=["default"],n={default:[]};e=e.sort((a,s)=>(a.category||"")>(s.category||"")?1:-1),e.forEach(a=>{const s=a.groupName||"default";r.includes(s)||(r.push(s),n[s]=[]),n[s].push(a)});const o=[];return r.forEach(a=>{const s=["default"],i={default:[]},c=n[a];if(c.length!==0){c.forEach(p=>{const l=p.category||"default";s.includes(l)||(s.push(l),i[l]=[]),i[l].push(p)});const u=[];s.forEach(p=>{i[p].length&&u.push({name:p,list:i[p]})});const f={name:a,list:u};o.push(f)}}),o}get value(){return this.data}}const Hl=O({version:d(),pageName:d(),style:v(d()),css:v(d()),componentsMeta:F(Le(O({componentName:d()}),Be)),thirdLibs:v(Ol),componentsTree:xl}),Vl=t=>(We({data:t,dataStruct:Hl,throwError:!0}),t),Wl=(t,e,r)=>({...t,componentsTree:new Xe(t.componentsTree,{parent:e,materials:r})});class ne{constructor(e,r){_(this,"nodeType","PAGE"),_(this,"rawData"),_(this,"emitter",Lt),_(this,"data"),_(this,"parent"),_(this,"materialsModel"),Vl(e),this.rawData=JSON.parse(JSON.stringify(e)),this.materialsModel=new ft((r==null?void 0:r.materials)||[]),this.data=Wl(e,this,this.materialsModel)}get value(){return this.data}getNode(e){const r=this.data.componentsTree;return Ze(r,e)}addNode(e,r,n="AFTER"){var o,a,s;if(n==="AFTER"||n==="BEFORE"){const i=r.parent;if(i===null&&r instanceof Xe)return console.warn("Not found parent node"),!1;if(i instanceof nt)return console.warn("CProp can not add node"),!1;if(i instanceof jt){const u=i.value.value,f=(o=u.findIndex(p=>p===r))!=null?o:-1;return f>=0?(n==="BEFORE"?u.splice(f,0,e):u.splice(f+1,0,e),e.parent=i,(a=i.parent)==null||a.updateValue(),!0):!1}if(i instanceof ne)return!1;const c=(s=i==null?void 0:i.value.children.findIndex(u=>u===r))!=null?s:-1;return c>=0?(n==="BEFORE"?i==null||i.value.children.splice(c,0,e):i==null||i.value.children.splice(c+1,0,e),e.parent=i,i==null||i.updateValue(),!0):(console.warn("Not found target node"),!1)}if(n==="CHILD_START")return r.value.children.unshift(e),e.parent=r,r.updateValue(),!0;if(n==="CHILD_END")return r.value.children.push(e),e.parent=r,r.updateValue(),!0;if(k(n)){const i=n;if(i.type==="CHILD"){const c=i.pos,u=i.index||0;return c==="BEFORE"?r==null||r.value.children.splice(u,0,e):r==null||r.value.children.splice(u+1,0,e),e.parent=r,r.updateValue(),!0}else console.warn("Can not parse pos obj")}return!1}createNode(e){return delete e.id,new T(e,{parent:null,materials:this.materialsModel})}addNodeById(e,r,n="AFTER"){const o=this.getNode(r);return o?this.addNode(e,o,n):(console.warn(`Not find a node by ${r}, pls check it`),!1)}copyNode(e){const r=e.export("design");r.id=Z();const n=new T(r,{parent:e.parent,materials:this.materialsModel});return this.addNode(n,e,"AFTER"),n}copyNodeById(e){const r=this.getNode(e);return r&&r instanceof T?this.copyNode(r):!1}moveNode(e,r,n){this.deleteNode(e);let o=r;return["AFTER","BEFORE"].includes(n)&&(o=r.parent),e.parent=o,this.addNode(e,r,n)}moveNodeById(e,r,n){const o=this.getNode(e),a=this.getNode(r);return o&&a&&o instanceof T&&a instanceof T?this.moveNode(o,a,n):!1}deleteNode(e){var r;const n=e.parent;if(!n)throw new Error("parent node is null or undefined, pls check it");if(n instanceof jt){const o=n.value.value,a=o.findIndex(i=>i===e),s=o[a];return o.splice(a,1),(r=n.parent)==null||r.updateValue(),s}if(n instanceof T||n instanceof Xe){const o=n.value.children,a=o.findIndex(i=>i===e),s=o[a];return o.splice(a,1),n.updateValue(),s}}deleteNodeById(e){const r=this.getNode(e);if(r)return this.deleteNode(r)}export(e=ke.SAVE){const r=this.data.componentsTree.export(e);let n={...this.data,componentsTree:Ke(r)};return n=yn(n,["id"]),JSON.parse(JSON.stringify(n))}}var Jl=typeof global=="object"&&global&&global.Object===Object&&global;const An=Jl;var ql=typeof self=="object"&&self&&self.Object===Object&&self,Ql=An||ql||Function("return this")();const wt=Ql;var Xl=wt.Symbol;const Ot=Xl;var Mn=Object.prototype,Yl=Mn.hasOwnProperty,Kl=Mn.toString,Ut=Ot?Ot.toStringTag:void 0;function Zl(t){var e=Yl.call(t,Ut),r=t[Ut];try{t[Ut]=void 0;var n=!0}catch{}var o=Kl.call(t);return n&&(e?t[Ut]=r:delete t[Ut]),o}var tf=Object.prototype,ef=tf.toString;function rf(t){return ef.call(t)}var nf="[object Null]",of="[object Undefined]",Pn=Ot?Ot.toStringTag:void 0;function Bt(t){return t==null?t===void 0?of:nf:Pn&&Pn in Object(t)?Zl(t):rf(t)}function St(t){return t!=null&&typeof t=="object"}var af="[object Symbol]";function sf(t){return typeof t=="symbol"||St(t)&&Bt(t)==af}function cf(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var uf=Array.isArray;const Ct=uf;var lf=1/0,xn=Ot?Ot.prototype:void 0,Dn=xn?xn.toString:void 0;function Rn(t){if(typeof t=="string")return t;if(Ct(t))return cf(t,Rn)+"";if(sf(t))return Dn?Dn.call(t):"";var e=t+"";return e=="0"&&1/t==-lf?"-0":e}function pt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function In(t){return t}var ff="[object AsyncFunction]",pf="[object Function]",df="[object GeneratorFunction]",hf="[object Proxy]";function tr(t){if(!pt(t))return!1;var e=Bt(t);return e==pf||e==df||e==ff||e==hf}var vf=wt["__core-js_shared__"];const er=vf;var Fn=function(){var t=/[^.]+$/.exec(er&&er.keys&&er.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function gf(t){return!!Fn&&Fn in t}var mf=Function.prototype,yf=mf.toString;function bf(t){if(t!=null){try{return yf.call(t)}catch{}try{return t+""}catch{}}return""}var _f=/[\\^$.*+?()[\]{}|]/g,jf=/^\[object .+?Constructor\]$/,wf=Function.prototype,Of=Object.prototype,Sf=wf.toString,Cf=Of.hasOwnProperty,Ef=RegExp("^"+Sf.call(Cf).replace(_f,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $f(t){if(!pt(t)||gf(t))return!1;var e=tr(t)?Ef:jf;return e.test(bf(t))}function Nf(t,e){return t==null?void 0:t[e]}function rr(t,e){var r=Nf(t,e);return $f(r)?r:void 0}var Ln=Object.create,Tf=function(){function t(){}return function(e){if(!pt(e))return{};if(Ln)return Ln(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Af=Tf;function Mf(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Pf(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var xf=800,Df=16,Rf=Date.now;function If(t){var e=0,r=0;return function(){var n=Rf(),o=Df-(n-r);if(r=n,o>0){if(++e>=xf)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Ff(t){return function(){return t}}var Lf=function(){try{var t=rr(Object,"defineProperty");return t({},"",{}),t}catch{}}();const oe=Lf;var Uf=oe?function(t,e){return oe(t,"toString",{configurable:!0,enumerable:!1,value:Ff(e),writable:!0})}:In,Bf=If(Uf);const kf=Bf;var zf=9007199254740991,Gf=/^(?:0|[1-9]\d*)$/;function Un(t,e){var r=typeof t;return e=e==null?zf:e,!!e&&(r=="number"||r!="symbol"&&Gf.test(t))&&t>-1&&t%1==0&&t<e}function nr(t,e,r){e=="__proto__"&&oe?oe(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function ae(t,e){return t===e||t!==t&&e!==e}var Hf=Object.prototype,Vf=Hf.hasOwnProperty;function Wf(t,e,r){var n=t[e];(!(Vf.call(t,e)&&ae(n,r))||r===void 0&&!(e in t))&&nr(t,e,r)}function Jf(t,e,r,n){var o=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var i=e[a],c=n?n(r[i],t[i],i,r,t):void 0;c===void 0&&(c=t[i]),o?nr(r,i,c):Wf(r,i,c)}return r}var Bn=Math.max;function qf(t,e,r){return e=Bn(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=Bn(n.length-e,0),s=Array(a);++o<a;)s[o]=n[e+o];o=-1;for(var i=Array(e+1);++o<e;)i[o]=n[o];return i[e]=r(s),Mf(t,this,i)}}function Qf(t,e){return kf(qf(t,e,In),t+"")}var Xf=9007199254740991;function kn(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Xf}function or(t){return t!=null&&kn(t.length)&&!tr(t)}function Yf(t,e,r){if(!pt(r))return!1;var n=typeof e;return(n=="number"?or(r)&&Un(e,r.length):n=="string"&&e in r)?ae(r[e],t):!1}function Kf(t){return Qf(function(e,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(o--,a):void 0,s&&Yf(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var i=r[n];i&&t(e,i,n,a)}return e})}var Zf=Object.prototype;function zn(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Zf;return t===r}function tp(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var ep="[object Arguments]";function Gn(t){return St(t)&&Bt(t)==ep}var Hn=Object.prototype,rp=Hn.hasOwnProperty,np=Hn.propertyIsEnumerable,op=Gn(function(){return arguments}())?Gn:function(t){return St(t)&&rp.call(t,"callee")&&!np.call(t,"callee")};const ar=op;function ap(){return!1}var Vn=typeof y=="object"&&y&&!y.nodeType&&y,Wn=Vn&&typeof module=="object"&&module&&!module.nodeType&&module,ip=Wn&&Wn.exports===Vn,Jn=ip?wt.Buffer:void 0,sp=Jn?Jn.isBuffer:void 0,cp=sp||ap;const qn=cp;var up="[object Arguments]",lp="[object Array]",fp="[object Boolean]",pp="[object Date]",dp="[object Error]",hp="[object Function]",vp="[object Map]",gp="[object Number]",mp="[object Object]",yp="[object RegExp]",bp="[object Set]",_p="[object String]",jp="[object WeakMap]",wp="[object ArrayBuffer]",Op="[object DataView]",Sp="[object Float32Array]",Cp="[object Float64Array]",Ep="[object Int8Array]",$p="[object Int16Array]",Np="[object Int32Array]",Tp="[object Uint8Array]",Ap="[object Uint8ClampedArray]",Mp="[object Uint16Array]",Pp="[object Uint32Array]",N={};N[Sp]=N[Cp]=N[Ep]=N[$p]=N[Np]=N[Tp]=N[Ap]=N[Mp]=N[Pp]=!0,N[up]=N[lp]=N[wp]=N[fp]=N[Op]=N[pp]=N[dp]=N[hp]=N[vp]=N[gp]=N[mp]=N[yp]=N[bp]=N[_p]=N[jp]=!1;function xp(t){return St(t)&&kn(t.length)&&!!N[Bt(t)]}function Dp(t){return function(e){return t(e)}}var Qn=typeof y=="object"&&y&&!y.nodeType&&y,kt=Qn&&typeof module=="object"&&module&&!module.nodeType&&module,Rp=kt&&kt.exports===Qn,ir=Rp&&An.process,Ip=function(){try{var t=kt&&kt.require&&kt.require("util").types;return t||ir&&ir.binding&&ir.binding("util")}catch{}}();const Xn=Ip;var Yn=Xn&&Xn.isTypedArray,Fp=Yn?Dp(Yn):xp;const Kn=Fp;var Lp=Object.prototype,Up=Lp.hasOwnProperty;function Bp(t,e){var r=Ct(t),n=!r&&ar(t),o=!r&&!n&&qn(t),a=!r&&!n&&!o&&Kn(t),s=r||n||o||a,i=s?tp(t.length,String):[],c=i.length;for(var u in t)(e||Up.call(t,u))&&!(s&&(u=="length"||o&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Un(u,c)))&&i.push(u);return i}function kp(t,e){return function(r){return t(e(r))}}function zp(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Gp=Object.prototype,Hp=Gp.hasOwnProperty;function Vp(t){if(!pt(t))return zp(t);var e=zn(t),r=[];for(var n in t)n=="constructor"&&(e||!Hp.call(t,n))||r.push(n);return r}function Zn(t){return or(t)?Bp(t,!0):Vp(t)}var Wp=rr(Object,"create");const zt=Wp;function Jp(){this.__data__=zt?zt(null):{},this.size=0}function qp(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Qp="__lodash_hash_undefined__",Xp=Object.prototype,Yp=Xp.hasOwnProperty;function Kp(t){var e=this.__data__;if(zt){var r=e[t];return r===Qp?void 0:r}return Yp.call(e,t)?e[t]:void 0}var Zp=Object.prototype,td=Zp.hasOwnProperty;function ed(t){var e=this.__data__;return zt?e[t]!==void 0:td.call(e,t)}var rd="__lodash_hash_undefined__";function nd(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=zt&&e===void 0?rd:e,this}function dt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}dt.prototype.clear=Jp,dt.prototype.delete=qp,dt.prototype.get=Kp,dt.prototype.has=ed,dt.prototype.set=nd;function od(){this.__data__=[],this.size=0}function ie(t,e){for(var r=t.length;r--;)if(ae(t[r][0],e))return r;return-1}var ad=Array.prototype,id=ad.splice;function sd(t){var e=this.__data__,r=ie(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():id.call(e,r,1),--this.size,!0}function cd(t){var e=this.__data__,r=ie(e,t);return r<0?void 0:e[r][1]}function ud(t){return ie(this.__data__,t)>-1}function ld(t,e){var r=this.__data__,n=ie(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function tt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}tt.prototype.clear=od,tt.prototype.delete=sd,tt.prototype.get=cd,tt.prototype.has=ud,tt.prototype.set=ld;var fd=rr(wt,"Map");const to=fd;function pd(){this.size=0,this.__data__={hash:new dt,map:new(to||tt),string:new dt}}function dd(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function se(t,e){var r=t.__data__;return dd(e)?r[typeof e=="string"?"string":"hash"]:r.map}function hd(t){var e=se(this,t).delete(t);return this.size-=e?1:0,e}function vd(t){return se(this,t).get(t)}function gd(t){return se(this,t).has(t)}function md(t,e){var r=se(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function Et(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Et.prototype.clear=pd,Et.prototype.delete=hd,Et.prototype.get=vd,Et.prototype.has=gd,Et.prototype.set=md;function eo(t){return t==null?"":Rn(t)}var yd=kp(Object.getPrototypeOf,Object);const ro=yd;var bd="[object Object]",_d=Function.prototype,jd=Object.prototype,no=_d.toString,wd=jd.hasOwnProperty,Od=no.call(Object);function Gt(t){if(!St(t)||Bt(t)!=bd)return!1;var e=ro(t);if(e===null)return!0;var r=wd.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&no.call(r)==Od}function Sd(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a}function Cd(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Sd(t,e,r)}var Ed="\\ud800-\\udfff",$d="\\u0300-\\u036f",Nd="\\ufe20-\\ufe2f",Td="\\u20d0-\\u20ff",Ad=$d+Nd+Td,Md="\\ufe0e\\ufe0f",Pd="\\u200d",xd=RegExp("["+Pd+Ed+Ad+Md+"]");function oo(t){return xd.test(t)}function Dd(t){return t.split("")}var ao="\\ud800-\\udfff",Rd="\\u0300-\\u036f",Id="\\ufe20-\\ufe2f",Fd="\\u20d0-\\u20ff",Ld=Rd+Id+Fd,Ud="\\ufe0e\\ufe0f",Bd="["+ao+"]",sr="["+Ld+"]",cr="\\ud83c[\\udffb-\\udfff]",kd="(?:"+sr+"|"+cr+")",io="[^"+ao+"]",so="(?:\\ud83c[\\udde6-\\uddff]){2}",co="[\\ud800-\\udbff][\\udc00-\\udfff]",zd="\\u200d",uo=kd+"?",lo="["+Ud+"]?",Gd="(?:"+zd+"(?:"+[io,so,co].join("|")+")"+lo+uo+")*",Hd=lo+uo+Gd,Vd="(?:"+[io+sr+"?",sr,so,co,Bd].join("|")+")",Wd=RegExp(cr+"(?="+cr+")|"+Vd+Hd,"g");function Jd(t){return t.match(Wd)||[]}function qd(t){return oo(t)?Jd(t):Dd(t)}function Qd(t){return function(e){e=eo(e);var r=oo(e)?qd(e):void 0,n=r?r[0]:e.charAt(0),o=r?Cd(r,1).join(""):e.slice(1);return n[t]()+o}}var Xd=Qd("toUpperCase");const Yd=Xd;function ur(t){return Yd(eo(t).toLowerCase())}function Kd(){this.__data__=new tt,this.size=0}function Zd(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function th(t){return this.__data__.get(t)}function eh(t){return this.__data__.has(t)}var rh=200;function nh(t,e){var r=this.__data__;if(r instanceof tt){var n=r.__data__;if(!to||n.length<rh-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Et(n)}return r.set(t,e),this.size=r.size,this}function $t(t){var e=this.__data__=new tt(t);this.size=e.size}$t.prototype.clear=Kd,$t.prototype.delete=Zd,$t.prototype.get=th,$t.prototype.has=eh,$t.prototype.set=nh;var fo=typeof y=="object"&&y&&!y.nodeType&&y,po=fo&&typeof module=="object"&&module&&!module.nodeType&&module,oh=po&&po.exports===fo,ho=oh?wt.Buffer:void 0,vo=ho?ho.allocUnsafe:void 0;function ah(t,e){if(e)return t.slice();var r=t.length,n=vo?vo(r):new t.constructor(r);return t.copy(n),n}var ih=wt.Uint8Array;const go=ih;function sh(t){var e=new t.constructor(t.byteLength);return new go(e).set(new go(t)),e}function ch(t,e){var r=e?sh(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function uh(t){return typeof t.constructor=="function"&&!zn(t)?Af(ro(t)):{}}function lh(t){return function(e,r,n){for(var o=-1,a=Object(e),s=n(e),i=s.length;i--;){var c=s[t?i:++o];if(r(a[c],c,a)===!1)break}return e}}var fh=lh();const ph=fh;function lr(t,e,r){(r!==void 0&&!ae(t[e],r)||r===void 0&&!(e in t))&&nr(t,e,r)}function dh(t){return St(t)&&or(t)}function fr(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function hh(t){return Jf(t,Zn(t))}function vh(t,e,r,n,o,a,s){var i=fr(t,r),c=fr(e,r),u=s.get(c);if(u){lr(t,r,u);return}var f=a?a(i,c,r+"",t,e,s):void 0,p=f===void 0;if(p){var l=Ct(c),h=!l&&qn(c),g=!l&&!h&&Kn(c);f=c,l||h||g?Ct(i)?f=i:dh(i)?f=Pf(i):h?(p=!1,f=ah(c,!0)):g?(p=!1,f=ch(c,!0)):f=[]:Gt(c)||ar(c)?(f=i,ar(i)?f=hh(i):(!pt(i)||tr(i))&&(f=uh(c))):p=!1}p&&(s.set(c,f),o(f,c,n,a,s),s.delete(c)),lr(t,r,f)}function mo(t,e,r,n,o){t!==e&&ph(e,function(a,s){if(o||(o=new $t),pt(a))vh(t,e,s,r,mo,n,o);else{var i=n?n(fr(t,s),a,s+"",t,e,o):void 0;i===void 0&&(i=a),lr(t,s,i)}},Zn)}var gh=Kf(function(t,e,r){mo(t,e,r)});const mh=gh;function yh(t){const e=t.prototype;return!!(e&&e.isReactComponent)}function bh(t){var n,o;const r=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.forward_ref"):60112;return(t==null?void 0:t.$$typeof)===r||((n=t==null?void 0:t.prototype)==null?void 0:n.isReactComponent)||((o=t==null?void 0:t.prototype)==null?void 0:o.setState)||t._forwardRef}function _h(t){class e extends R.Component{render(){return R.createElement(t,this.props)}}return e.displayName=t.displayName,e}const ce=(t,e)=>{const r=n=>{const a=`
    ${Object.keys(e).map(s=>`const ${s} = $$context['${s}'];`).join(`
`)}
    return ${n};
    `;return new Function("$$context",a)(e)};try{return r(t)}catch(n){console.warn(n);const o=`[${t}] expression run failed`;return console.warn(o),null}},jh=(t,e,r)=>function(...o){try{const a=`
        var f = ${t};
        var args = Array.from(arguments);
        var __$$storeManager__ = args.pop();
        var $$context = args.pop();
        $$context.stateManager = __$$storeManager__.getStateSnapshot();
        return f.apply(f, args)
      `;new Function(a)(...o,e,r)}catch(a){console.warn(a)}},yo=(t,e)=>{const r={};return e.forEach((n,o)=>{r[n]=t[o]}),r},wh=t=>{const e={};return Object.keys(t).forEach(r=>{let n=r.split("-");n.length>=2&&(n=n.map((o,a)=>a!==0?ur(o):o)),e[n.join("")]=t[r]}),e},ue="DYNAMIC",Oh=["$$context","$$nodeModel"],bo=t=>{let e;const r=new Set,n=(c,u)=>{const f=typeof c=="function"?c(e):c;if(!Object.is(f,e)){const p=e;e=(u!=null?u:typeof f!="object")?f:Object.assign({},e,f),r.forEach(l=>l(e,p))}},o=()=>e,i={setState:n,getState:o,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>r.clear()};return e=t(n,o,i),i},Sh=t=>t?bo(t):bo;class Ch{constructor(){b(this,"storeMap",new Map)}addStore(e,r){const n=Sh(r);return this.storeMap.set(e,n),n.name=e,n}setStore(e,r){this.storeMap.set(e,r)}removeStore(e){this.storeMap.delete(e)}getStore(e){return this.storeMap.get(e)}connect(e,r){const n=this.storeMap.get(e);n?n.subscribe(r):console.warn("store not exits")}getStateSnapshot(){const e={};return this.storeMap.forEach((r,n)=>{e[n]={state:r.getState(),updateState:o=>{r.setState(o)}}}),e}destroy(){this.storeMap.forEach(e=>{e.destroy()}),this.storeMap=new Map}}class _o{constructor(){b(this,"renderMode","normal");b(this,"components",{});b(this,"storeManager",new Ch);b(this,"runtimeComponentCache",new Map);b(this,"onGetRef");b(this,"onGetComponent");b(this,"onComponentMount");b(this,"onComponentDestroy");b(this,"processNodeConfigHook")}getComponent(e){var o;const r=e.value.componentName;let n=this.components[r]||(()=>"Component not found");return bh(n)||(n=_h(n),this.components[r]=n),this.onGetComponent&&(n=(o=this.onGetComponent)==null?void 0:o.call(this,n,e)),n}getContext(e={},r){let n=e;return r&&(n={...e},n.__proto__=r||null),n}pageRender(e,{components:r,onGetRef:n,$$context:o={},onGetComponent:a,onComponentMount:s,onComponentDestroy:i,renderMode:c,processNodeConfigHook:u}){this.renderMode=c,this.components=r,this.onGetRef=n,this.onGetComponent=a,this.onComponentMount=s,this.onComponentDestroy=i,this.processNodeConfigHook=u;const f=e.value.componentsTree,p=this.getComponent(f),l=this.convertModelToComponent(p,e.value.componentsTree),h={},g=f.props;return Object.keys(g).forEach(m=>{h[m]=g[m].value}),h.$$context=o,this.render(l,h)}transformProps(e={},{$$context:r}){const n=e,o=s=>{if(Array.isArray(s))return s.map(i=>o(i));if(Ye(s))return o(s.value);if(Ul(s)){const i=s.value,c=i.value;if(!c)return console.warn("slot value is null, this maybe cause some error, pls check it",e),()=>{};const u=f=>{const p=`${f.id}-${ue}`;if(this.runtimeComponentCache.get(f.id))return{key:p,component:this.runtimeComponentCache.get(f.id)};const l=this.getComponent(f),h=this.convertModelToComponent(l,f),g=i.params||[];return{component:(...w)=>{const S=yo(w,g),M=this.getContext({params:S},r);return this.render(h,{$$context:M,key:p})},key:p}};if(Array.isArray(c)){const f=c==null?void 0:c.map(p=>u(p));return(...p)=>f.map(l=>yh(l.component)?A.default.createElement(l.component,{$$context:r,key:l.key}):l.component(...p))}else return u(c).component}else{if(re(s))return ce(s.value,r||{});if(Fl(s))return jh(s.value,r,this.storeManager);if(Gt(s)){let i=s;Ye(s)&&(i=s.value);const c=i,u={};return Object.keys(i).forEach(f=>{u[f]=o(c[f])}),u}else return s}},a={};return Object.keys(n).forEach(s=>{const i=n[s];a[s]=o(i)}),a}collectSpecialProps(e={},r){const n=[],o=(a,s)=>{let i=s;Ye(s)&&(i=s.value),r(i)?n.push({keyPath:a,val:i}):Ct(i)?i.forEach((c,u)=>{o([...a,String(u)],c)}):Gt(i)&&Object.keys(i).forEach(c=>{o([...a,c],i[c])})};return o(["$root"],e),n}convertModelToComponent(e,r){const n=this;class o extends A.default.Component{constructor(i){super(i);b(this,"_CONDITION",!0);b(this,"_DESIGN_BOX",!1);b(this,"_NODE_MODEL",r);b(this,"_NODE_ID",r.id);b(this,"UNIQUE_ID",`${r.id}_${Z()}`);b(this,"targetComponentRef");b(this,"listenerHandle",[]);b(this,"storeState");b(this,"updateState",i=>{this.storeState.setState(i),this.forceUpdate()});this.targetComponentRef=A.default.createRef(),this.state=r.value.state||{};const c=r.value.stateName||r.id,u=n.storeManager.getStore(c);u?(this.storeState=u,u.setState({...r.value.state||{}})):this.storeState=n.storeManager.addStore(c,()=>({...r.value.state||{}})),this.storeState.subscribe(f=>{this.setState({...f})}),this.connectStore()}connectStore(){const c=n.collectSpecialProps(r.props,u=>!!re(u)).map(u=>{const f=u.val,l=/\$\$context.stateManager\.(.+?)\./gim.exec(f.value);return l!=null&&l.length?l[1]:""}).filter(Boolean);c.length&&c.forEach(u=>{n.storeManager.getStore(u)||n.storeManager.addStore(u,()=>({})),n.storeManager.connect(u,()=>{this.forceUpdate()})})}componentDidMount(){var c;n.onGetRef&&n.onGetRef(this.targetComponentRef,r,this),(c=n.onComponentMount)==null||c.call(n,this,r);const i=()=>{n.storeManager.setStore(r.value.stateName||r.id,this.storeState),this.storeState.setState({...this.state,...r.value.state||{}}),this.forceUpdate()};r.onChange(i)}componentWillUnmount(){var i;(i=n.onComponentDestroy)==null||i.call(n,this,r)}render(){var P;const{$$context:i,...c}=this.props,u={key:r.id,...r.props,...c},f={state:this.state||{},updateState:this.updateState};r.value.componentName===Je.PAGE&&(f.globalState=this.state,f.updateGlobalState=this.updateState),f.stateManager=n.storeManager.getStateSnapshot();const p=n.getContext(f,i),l=r.value.loop;let h=[];if(l&&l.open){this.targetComponentRef.current=[];let D=l.data||[];if(re(l.data)){const B=l.data;D=ce(B.value,p||{})}return h=D.map((...B)=>{const E=B[1],Nt=[l.forName||"item",l.forIndex||"index"],ot=yo(B,Nt);let Ht="loopData";l.name&&(Ht=`${Ht}${l.name}`);const To=n.getContext({[Ht]:ot},p),ht=n.transformProps(u,{$$context:To}),{children:le}=ht;let dr=[];if(le!==void 0)delete ht.children,dr=Array.isArray(le)?le:[le];else{const Tt=[];r.value.children.forEach((Ih,Fh)=>{const Lh=n.buildComponent(Ih,{$$context:p,idx:Fh});Tt.push(Lh)}),dr=Tt}if(ht.key=`${ht.key}-${E}`,re(l.key)){const Tt=l.key,Ao=ce(Tt.value,To||{});ht.key+=`-${Ao}`}return ht.ref=Tt=>{this.targetComponentRef.current=this.targetComponentRef.current||[],this.targetComponentRef.current[E]=Tt},n.render(e,ht,...dr)}),h}const g=n.transformProps(u,{$$context:p}),{children:m}=g;let j=[];if(m!==void 0)delete g.children,j=Array.isArray(m)?m:[m];else{const D=[];r.value.children.forEach((E,Nt)=>{const ot=n.buildComponent(E,{$$context:p,idx:Nt});D.push(ot)}),j=D}g.ref=this.targetComponentRef,g.style&&(g.style=wh(g.style));let w=(P=r.value.condition)!=null?P:!0;typeof w!="boolean"&&(w=ce(w.value,p||{}));let S={condition:w,props:g};n.processNodeConfigHook&&(S=n.processNodeConfigHook(S,r));const M=n.render(e,S.props,...j);return this._CONDITION=S.condition,S.condition?M:A.default.createElement("div",{style:{display:"none"}},M)}}return b(o,"__CP_TYPE__",ue),o.displayName=`${r.value.componentName}Dynamic`,o}buildComponent(e,{$$context:r={}}){const n=this.runtimeComponentCache;return typeof e=="string"?this.render(e):Ll(e)?(({currentNode:a})=>{const s=a.value.id;let i=null;if(n.get(s))i=n.get(s);else{const f=this.getComponent(a);i=this.convertModelToComponent(f,a)}!n.get(s)&&this.renderMode!=="design"&&n.set(s,i);const c=`${s}-${ue}`,u={$$context:r,$$nodeModel:e,key:c};return this.render(i,u)})({currentNode:e}):void 0}render(e,r={},...n){return typeof e=="string"||typeof e=="number"?String(e):(Oh.forEach(a=>{a in r&&e.__CP_TYPE__!==ue&&delete r[a]}),A.default.createElement(e,r,...n))}clear(){this.runtimeComponentCache.clear(),this.storeManager.destroy()}}const Eh=vr(new _o),jo=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],$h=jo.reduce((t,e)=>(t[e]=({children:r,...n})=>{let o=r;return Array.isArray(r)||(o=[r]),A.default.createElement(e,n,...o)},t),{});jo.map(t=>({title:ur(t),componentName:t,npm:!1,icon:"",props:[{name:"style",title:"\u6837\u5F0F",valueType:"object",setters:["JSONSetter"]},{name:"className",title:"\u7C7B\u540D",valueType:"string",setters:["StringSetter"]}],snippets:[{title:`${ur(t)}`,snapshotText:t,category:"HTML \u5143\u7D20",schema:{props:{},children:[`I am a ${t}`]}}]}));const Nh={CPage:({children:t})=>t,...$h};class Th{constructor(){b(this,"refMap",new Map)}get(e){return this.refMap.get(e)}add(e,r){this.refMap.set(e,r)}remove(e){this.refMap.delete(e)}destroy(){this.refMap.clear()}}class wo extends A.default.Component{constructor(r){super(r);b(this,"refManager");b(this,"dynamicComponentInstanceMap",new Map);b(this,"onGetRef",(r,n,o)=>{var a,s;(s=(a=this.props).onGetRef)==null||s.call(a,r,n,o),this.dynamicComponentInstanceMap.set(n.id,o),this.refManager.add(n.value.refId||n.id,r)});b(this,"rerender",r=>{var n;this.props.adapter.clear(),this.setState({pageModel:new ne(r)}),(n=this.state.pageModel)==null||n.emitter.emit("onNodeChange",{value:r,preValue:this.state.pageModel,node:this.state.pageModel})});this.state={pageModel:r.pageModel||new ne(r.page)},this.refManager=new Th}getPageModel(){return this.state.pageModel}componentDidMount(){const{render:r}=this.props;r&&(r.ref.current=this)}componentWillUnmount(){this.refManager.destroy()}render(){const{props:r}=this,{adapter:n,onGetComponent:o,onComponentDestroy:a,onComponentMount:s}=r,{pageModel:i}=this.state;if(!i)return console.warn("pageModel is null"),null;const c={...Nh,...r.components};return n.pageRender(i,{libs:{},components:c,onGetRef:this.onGetRef,onGetComponent:o,onComponentMount:s,onComponentDestroy:a,$$context:{refs:this.refManager},renderMode:r.renderMode,processNodeConfigHook:r.processNodeConfigHook})}}const Ah=()=>{const t=R.useRef(null);return{ref:t,rerender:function(...e){t.current&&t.current.rerender(...e)}}};class Mh extends A.default.Component{constructor(r){super(r);b(this,"onDoubleClick",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:""}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){var o,a;(a=(o=this.props).onError)==null||a.call(o,n)}render(){if(this.state.hasError){const{onDoubleClick:r}=this,n=this.props.node.value;console.error(this.props.node,this.props.children);const o=A.default.createElement("div",{style:{backgroundColor:"rgb(255 206 215 / 13%)",padding:"5px",color:"#ff0000b0",textAlign:"center",fontSize:"12px"}},"Render error, node id: ",n.id,", node name\uFF1A",n.title," component name\uFF1A",n.title||n.componentName,A.default.createElement("p",null,"msg: ",String(this.state.error)),A.default.createElement("button",{onDoubleClick:r,style:{border:"1px solid rgba(100,100,100,0.1)",backgroundColor:"#fff",padding:"5px 10px",borderRadius:"2px",color:"gray",cursor:"pointer",marginTop:"5px"}},"double click to refresh"),A.default.createElement("div",{style:{display:"none"}}));return A.default.createElement(this.props.targetComponent,{onlyRenderChild:!0},o)}return this.props.children}}class Oo{constructor(){b(this,"instanceMap",new Map)}get(e){return this.instanceMap.get(e)}add(e,r){const n=this.instanceMap.get(e);n?n.push(r):this.instanceMap.set(e,[r])}remove(e,r){const n=this.instanceMap.get(e);if(r!==void 0&&Array.isArray(n)){const o=n.filter(a=>a!==r);this.instanceMap.set(e,o)}else this.instanceMap.delete(e)}destroy(){this.instanceMap.clear()}}const So=t=>{const{node:e}=t,r=R.useMemo(()=>{var c,u;const i=(u=(c=e.material)==null?void 0:c.value)==null?void 0:u.isContainer;return Gt(i)?i:{placeholder:"Drag the component to place it",width:"100%",height:"100%",style:{}}},[t.node]),{placeholder:n,height:o,width:a,style:s}=r;return A.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(200,200,200,0.1)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"2px",fontSize:"14px",color:"gray",cursor:"default",minWidth:"300px",minHeight:"50px",width:a,height:o,...s}},n)};class Ph extends A.default.Component{constructor(r){super(r);b(this,"instanceManager",new Oo);b(this,"renderRef");b(this,"dropPlaceholder",So);b(this,"onGetComponent",(r,n)=>{const o=this;class a extends A.default.Component{constructor(){super(...arguments);b(this,"_DESIGN_BOX",!0);b(this,"_NODE_MODEL",n);b(this,"_NODE_ID",n.id);b(this,"_UNIQUE_ID",`${n.id}_${Z()}`);b(this,"_STATUS")}componentDidMount(){o.instanceManager.add(n.id,this)}componentWillUnmount(){this._STATUS="DESTROY",o.instanceManager.remove(n.id,this)}render(){var h;const{children:c=[],onlyRenderChild:u,...f}=this.props;let p=c;return Ct(c)||(p=[c]),!Boolean(p.filter(Boolean).length)&&(((h=n.material)==null?void 0:h.value.isContainer)||n.value.componentName==="CPage")&&p.push(A.default.createElement(o.dropPlaceholder,{node:n})),u?p:A.default.createElement(r,f,...p)}}return A.default.forwardRef(function(i,c){return A.default.createElement(Mh,{node:n,targetComponent:a},A.default.createElement(a,{ref:c,...i}))})});this.renderRef=A.default.createRef(),r.dropPlaceholder&&(this.dropPlaceholder=r.dropPlaceholder)}componentDidMount(){var r,n;(n=(r=this.props).onMount)==null||n.call(r,this)}getPageModel(){var r;return(r=this.renderRef.current)==null?void 0:r.state.pageModel}rerender(r){var n;return(n=this.renderRef.current)==null?void 0:n.rerender(r)}getInstancesById(r,n){let o=[...this.instanceManager.get(r)||[]];return n!==void 0&&(o=o.filter(a=>n===(a==null?void 0:a._UNIQUE_ID))),o}getInstanceByDom(r){const n=Co(r);if(!n)return null;const o=Eo(n);return(o==null?void 0:o.stateNode)||null}getDomsById(r,n){const o=this.getInstancesById(r),a=[];return o==null||o.forEach(s=>{if((s==null?void 0:s._STATUS)==="DESTROY")return;const i=xo.findDOMNode(s);if(i&&!(i instanceof Text))if(n){const c=Array.from(i.querySelectorAll(n));a.push(...c)}else a.push(i)}),a}getDomRectById(r,n){return this.getDomsById(r,n).map(s=>s==null?void 0:s.getBoundingClientRect()).filter(Boolean)}render(){const{props:r,onGetComponent:n}=this,{render:o,...a}=r;return o&&(o.ref.current=this),A.default.createElement(wo,{onGetComponent:n,...a,processNodeConfigHook:(s,i)=>{var g,m;if(i.nodeType!=="NODE")return s;const{props:c,condition:u}=s;let f={...c};const p=((g=i.value.configure)==null?void 0:g.devState)||{},l=(m=i.material)==null?void 0:m.value.fixedProps;if(l!==void 0){if(Gt(l))f={...f,...l};else if(typeof l=="function"){const j=l(f);f={...f,...j}}}let h=u;return p.condition===!1&&(h=p.condition),{props:mh(f,p.props||{}),condition:h}},renderMode:"design",ref:this.renderRef})}}const Co=t=>{if(!t)return null;const e=Object.keys(t).find(r=>r.startsWith("__reactInternalInstance$")||r.startsWith("__reactFiber$"))||"";return e?t[e]:Co(t.parentElement)},Eo=t=>{var e;return t?(e=t==null?void 0:t.stateNode)!=null&&e._DESIGN_BOX?t:Eo(t.return):null},xh=()=>{const t=R.useRef(null);return{ref:t,rerender:function(...e){t.current&&t.current.rerender(...e)},getInstancesById(e,r){var n;return((n=t.current)==null?void 0:n.getInstancesById(e,r))||[]},getInstanceByDom(e){var r;return((r=t.current)==null?void 0:r.getInstanceByDom(e))||null},getDomsById(e,r){var n;return((n=t.current)==null?void 0:n.getDomsById(e,r))||[]},getDomRectById(e,r){var n;return((n=t.current)==null?void 0:n.getDomRectById(e,r))||[]}}};var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$o={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Dh,function(){var r=function(){},n={},o={},a={};function s(l,h){l=l.push?l:[l];var g=[],m=l.length,j=m,w,S,M,P;for(w=function(D,B){B.length&&g.push(D),j--,j||h(g)};m--;){if(S=l[m],M=o[S],M){w(S,M);continue}P=a[S]=a[S]||[],P.push(w)}}function i(l,h){if(!!l){var g=a[l];if(o[l]=h,!!g)for(;g.length;)g[0](l,h),g.splice(0,1)}}function c(l,h){l.call&&(l={success:l}),h.length?(l.error||r)(h):(l.success||r)(l)}function u(l,h,g,m){var j=document,w=g.async,S=(g.numRetries||0)+1,M=g.before||r,P=l.replace(/[\?|#].*$/,""),D=l.replace(/^(css|img)!/,""),B,E;m=m||0,/(^css!|\.css$)/.test(P)?(E=j.createElement("link"),E.rel="stylesheet",E.href=D,B="hideFocus"in E,B&&E.relList&&(B=0,E.rel="preload",E.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(P)?(E=j.createElement("img"),E.src=D):(E=j.createElement("script"),E.src=l,E.async=w===void 0?!0:w),E.onload=E.onerror=E.onbeforeload=function(Nt){var ot=Nt.type[0];if(B)try{E.sheet.cssText.length||(ot="e")}catch(Ht){Ht.code!=18&&(ot="e")}if(ot=="e"){if(m+=1,m<S)return u(l,h,g,m)}else if(E.rel=="preload"&&E.as=="style")return E.rel="stylesheet";h(l,ot,Nt.defaultPrevented)},M(l,E)!==!1&&j.head.appendChild(E)}function f(l,h,g){l=l.push?l:[l];var m=l.length,j=m,w=[],S,M;for(S=function(P,D,B){if(D=="e"&&w.push(P),D=="b")if(B)w.push(P);else return;m--,m||h(w)},M=0;M<j;M++)u(l[M],S,g)}function p(l,h,g){var m,j;if(h&&h.trim&&(m=h),j=(m?g:h)||{},m){if(m in n)throw"LoadJS";n[m]=!0}function w(S,M){f(l,function(P){c(j,P),S&&c({success:S,error:M},P),i(m,P)},j)}if(j.returnPromise)return new Promise(w);w()}return p.ready=function(h,g){return s(h,function(m){c(g,m)}),p},p.done=function(h){i(h,[])},p.reset=function(){n={},o={},a={}},p.isDefined=function(h){return h in n},p})})($o);const pr=$o.exports,No=t=>!!((t==null?void 0:t.name)&&(t==null?void 0:t.assets));class Rh{constructor(e){b(this,"assets");b(this,"loadStatus");b(this,"_onSuccessList",[]);b(this,"_onErrorList",[]);this.assets=e,this.loadStatus="INIT"}load(){const e=this.assets||[],r=[];for(let n=0;n<e.length;n++){const o=e[n];if(o.id||(o.id=Z()),r.push(o.id),No(o)){const a=o.assets.map(s=>s.src);pr(a,o.id)}else pr(o.src,o.id)}return setTimeout(()=>{pr.ready(r,{success:()=>{this._onSuccessList.forEach(n=>n())},error:n=>{this._onErrorList.forEach(o=>o(n))}})},0),this}onSuccess(e){return this._onSuccessList.push(e),this}onError(e){return this._onErrorList.push(e),this}}y.AssetLoader=Rh,y.ComponentInstanceManager=Oo,y.DefaultDropPlaceholder=So,y.DefineReactAdapter=_o,y.DesignRender=Ph,y.ReactAdapter=Eh,y.Render=wo,y.getAdapter=vr,y.isAssetPackage=No,y.useDesignRender=xh,y.useRender=Ah,Object.defineProperties(y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
