(function(x,nt){typeof exports=="object"&&typeof module<"u"?module.exports=nt(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],nt):(x=typeof globalThis<"u"?globalThis:x||self,x.CRender=nt(x.React,x.ReactDOM))})(this,function(x,nt){"use strict";function ri(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const ni=ri(nt);var Kt={exports:{}},ot={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yn;function oi(){if(yn)return ot;yn=1;var e=x,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(s,u,f){var l,p={},d=null,v=null;f!==void 0&&(d=""+f),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(v=u.ref);for(l in u)n.call(u,l)&&!a.hasOwnProperty(l)&&(p[l]=u[l]);if(s&&s.defaultProps)for(l in u=s.defaultProps,u)p[l]===void 0&&(p[l]=u[l]);return{$$typeof:t,type:s,key:d,ref:v,props:p,_owner:o.current}}return ot.Fragment=r,ot.jsx=i,ot.jsxs=i,ot}var at={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mn;function ai(){return mn||(mn=1,{}.NODE_ENV!=="production"&&function(){var e=x,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),b=Symbol.iterator,E="@@iterator";function S(c){if(c===null||typeof c!="object")return null;var h=b&&c[b]||c[E];return typeof h=="function"?h:null}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function w(c){{for(var h=arguments.length,y=new Array(h>1?h-1:0),O=1;O<h;O++)y[O-1]=arguments[O];L("error",c,y)}}function L(c,h,y){{var O=j.ReactDebugCurrentFrame,A=O.getStackAddendum();A!==""&&(h+="%s",y=y.concat([A]));var $=y.map(function(M){return String(M)});$.unshift("Warning: "+h),Function.prototype.apply.call(console[c],console,$)}}var D=!1,z=!1,Z=!1,J=!1,N=!1,ae;ae=Symbol.for("react.module.reference");function le(c){return!!(typeof c=="string"||typeof c=="function"||c===n||c===a||N||c===o||c===f||c===l||J||c===v||D||z||Z||typeof c=="object"&&c!==null&&(c.$$typeof===d||c.$$typeof===p||c.$$typeof===i||c.$$typeof===s||c.$$typeof===u||c.$$typeof===ae||c.getModuleId!==void 0))}function wt(c,h,y){var O=c.displayName;if(O)return O;var A=h.displayName||h.name||"";return A!==""?y+"("+A+")":y}function Gt(c){return c.displayName||"Context"}function ee(c){if(c==null)return null;if(typeof c.tag=="number"&&w("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case n:return"Fragment";case r:return"Portal";case a:return"Profiler";case o:return"StrictMode";case f:return"Suspense";case l:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case s:var h=c;return Gt(h)+".Consumer";case i:var y=c;return Gt(y._context)+".Provider";case u:return wt(c,c.render,"ForwardRef");case p:var O=c.displayName||null;return O!==null?O:ee(c.type)||"Memo";case d:{var A=c,$=A._payload,M=A._init;try{return ee(M($))}catch{return null}}}return null}var te=Object.assign,H=0,Wt,Ke,Ht,Pe,Ze,re,be;function et(){}et.__reactDisabledLog=!0;function sn(){{if(H===0){Wt=console.log,Ke=console.info,Ht=console.warn,Pe=console.error,Ze=console.group,re=console.groupCollapsed,be=console.groupEnd;var c={configurable:!0,enumerable:!0,value:et,writable:!0};Object.defineProperties(console,{info:c,log:c,warn:c,error:c,group:c,groupCollapsed:c,groupEnd:c})}H++}}function Dy(){{if(H--,H===0){var c={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:te({},c,{value:Wt}),info:te({},c,{value:Ke}),warn:te({},c,{value:Ht}),error:te({},c,{value:Pe}),group:te({},c,{value:Ze}),groupCollapsed:te({},c,{value:re}),groupEnd:te({},c,{value:be})})}H<0&&w("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var cn=j.ReactCurrentDispatcher,un;function Yt(c,h,y){{if(un===void 0)try{throw Error()}catch(A){var O=A.stack.trim().match(/\n( *(at )?)/);un=O&&O[1]||""}return`
`+un+c}}var ln=!1,Jt;{var ky=typeof WeakMap=="function"?WeakMap:Map;Jt=new ky}function za(c,h){if(!c||ln)return"";{var y=Jt.get(c);if(y!==void 0)return y}var O;ln=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var $;$=cn.current,cn.current=null,sn();try{if(h){var M=function(){throw Error()};if(Object.defineProperty(M.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(M,[])}catch(_e){O=_e}Reflect.construct(c,[],M)}else{try{M.call()}catch(_e){O=_e}c.call(M.prototype)}}else{try{throw Error()}catch(_e){O=_e}c()}}catch(_e){if(_e&&O&&typeof _e.stack=="string"){for(var R=_e.stack.split(`
`),Q=O.stack.split(`
`),V=R.length-1,W=Q.length-1;V>=1&&W>=0&&R[V]!==Q[W];)W--;for(;V>=1&&W>=0;V--,W--)if(R[V]!==Q[W]){if(V!==1||W!==1)do if(V--,W--,W<0||R[V]!==Q[W]){var ie=`
`+R[V].replace(" at new "," at ");return c.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",c.displayName)),typeof c=="function"&&Jt.set(c,ie),ie}while(V>=1&&W>=0);break}}}finally{ln=!1,cn.current=$,Dy(),Error.prepareStackTrace=A}var rt=c?c.displayName||c.name:"",ti=rt?Yt(rt):"";return typeof c=="function"&&Jt.set(c,ti),ti}function Iy(c,h,y){return za(c,!1)}function Fy(c){var h=c.prototype;return!!(h&&h.isReactComponent)}function Qt(c,h,y){if(c==null)return"";if(typeof c=="function")return za(c,Fy(c));if(typeof c=="string")return Yt(c);switch(c){case f:return Yt("Suspense");case l:return Yt("SuspenseList")}if(typeof c=="object")switch(c.$$typeof){case u:return Iy(c.render);case p:return Qt(c.type,h,y);case d:{var O=c,A=O._payload,$=O._init;try{return Qt($(A),h,y)}catch{}}}return""}var qt=Object.prototype.hasOwnProperty,Va={},Ga=j.ReactDebugCurrentFrame;function Xt(c){if(c){var h=c._owner,y=Qt(c.type,c._source,h?h.type:null);Ga.setExtraStackFrame(y)}else Ga.setExtraStackFrame(null)}function Ly(c,h,y,O,A){{var $=Function.call.bind(qt);for(var M in c)if($(c,M)){var R=void 0;try{if(typeof c[M]!="function"){var Q=Error((O||"React class")+": "+y+" type `"+M+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[M]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Q.name="Invariant Violation",Q}R=c[M](h,M,O,y,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(V){R=V}R&&!(R instanceof Error)&&(Xt(A),w("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",O||"React class",y,M,typeof R),Xt(null)),R instanceof Error&&!(R.message in Va)&&(Va[R.message]=!0,Xt(A),w("Failed %s type: %s",y,R.message),Xt(null))}}}var By=Array.isArray;function fn(c){return By(c)}function Uy(c){{var h=typeof Symbol=="function"&&Symbol.toStringTag,y=h&&c[Symbol.toStringTag]||c.constructor.name||"Object";return y}}function zy(c){try{return Wa(c),!1}catch{return!0}}function Wa(c){return""+c}function Ha(c){if(zy(c))return w("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Uy(c)),Wa(c)}var Ct=j.ReactCurrentOwner,Vy={key:!0,ref:!0,__self:!0,__source:!0},Ya,Ja,dn;dn={};function Gy(c){if(qt.call(c,"ref")){var h=Object.getOwnPropertyDescriptor(c,"ref").get;if(h&&h.isReactWarning)return!1}return c.ref!==void 0}function Wy(c){if(qt.call(c,"key")){var h=Object.getOwnPropertyDescriptor(c,"key").get;if(h&&h.isReactWarning)return!1}return c.key!==void 0}function Hy(c,h){if(typeof c.ref=="string"&&Ct.current&&h&&Ct.current.stateNode!==h){var y=ee(Ct.current.type);dn[y]||(w('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ee(Ct.current.type),c.ref),dn[y]=!0)}}function Yy(c,h){{var y=function(){Ya||(Ya=!0,w("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};y.isReactWarning=!0,Object.defineProperty(c,"key",{get:y,configurable:!0})}}function Jy(c,h){{var y=function(){Ja||(Ja=!0,w("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};y.isReactWarning=!0,Object.defineProperty(c,"ref",{get:y,configurable:!0})}}var Qy=function(c,h,y,O,A,$,M){var R={$$typeof:t,type:c,key:h,ref:y,props:M,_owner:$};return R._store={},Object.defineProperty(R._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(R,"_self",{configurable:!1,enumerable:!1,writable:!1,value:O}),Object.defineProperty(R,"_source",{configurable:!1,enumerable:!1,writable:!1,value:A}),Object.freeze&&(Object.freeze(R.props),Object.freeze(R)),R};function qy(c,h,y,O,A){{var $,M={},R=null,Q=null;y!==void 0&&(Ha(y),R=""+y),Wy(h)&&(Ha(h.key),R=""+h.key),Gy(h)&&(Q=h.ref,Hy(h,A));for($ in h)qt.call(h,$)&&!Vy.hasOwnProperty($)&&(M[$]=h[$]);if(c&&c.defaultProps){var V=c.defaultProps;for($ in V)M[$]===void 0&&(M[$]=V[$])}if(R||Q){var W=typeof c=="function"?c.displayName||c.name||"Unknown":c;R&&Yy(M,W),Q&&Jy(M,W)}return Qy(c,R,Q,A,O,Ct.current,M)}}var pn=j.ReactCurrentOwner,Qa=j.ReactDebugCurrentFrame;function tt(c){if(c){var h=c._owner,y=Qt(c.type,c._source,h?h.type:null);Qa.setExtraStackFrame(y)}else Qa.setExtraStackFrame(null)}var hn;hn=!1;function vn(c){return typeof c=="object"&&c!==null&&c.$$typeof===t}function qa(){{if(pn.current){var c=ee(pn.current.type);if(c)return`

Check the render method of \``+c+"`."}return""}}function Xy(c){{if(c!==void 0){var h=c.fileName.replace(/^.*[\\\/]/,""),y=c.lineNumber;return`

Check your code at `+h+":"+y+"."}return""}}var Xa={};function Ky(c){{var h=qa();if(!h){var y=typeof c=="string"?c:c.displayName||c.name;y&&(h=`

Check the top-level render call using <`+y+">.")}return h}}function Ka(c,h){{if(!c._store||c._store.validated||c.key!=null)return;c._store.validated=!0;var y=Ky(h);if(Xa[y])return;Xa[y]=!0;var O="";c&&c._owner&&c._owner!==pn.current&&(O=" It was passed a child from "+ee(c._owner.type)+"."),tt(c),w('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',y,O),tt(null)}}function Za(c,h){{if(typeof c!="object")return;if(fn(c))for(var y=0;y<c.length;y++){var O=c[y];vn(O)&&Ka(O,h)}else if(vn(c))c._store&&(c._store.validated=!0);else if(c){var A=S(c);if(typeof A=="function"&&A!==c.entries)for(var $=A.call(c),M;!(M=$.next()).done;)vn(M.value)&&Ka(M.value,h)}}}function Zy(c){{var h=c.type;if(h==null||typeof h=="string")return;var y;if(typeof h=="function")y=h.propTypes;else if(typeof h=="object"&&(h.$$typeof===u||h.$$typeof===p))y=h.propTypes;else return;if(y){var O=ee(h);Ly(y,c.props,"prop",O,c)}else if(h.PropTypes!==void 0&&!hn){hn=!0;var A=ee(h);w("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",A||"Unknown")}typeof h.getDefaultProps=="function"&&!h.getDefaultProps.isReactClassApproved&&w("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function em(c){{for(var h=Object.keys(c.props),y=0;y<h.length;y++){var O=h[y];if(O!=="children"&&O!=="key"){tt(c),w("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",O),tt(null);break}}c.ref!==null&&(tt(c),w("Invalid attribute `ref` supplied to `React.Fragment`."),tt(null))}}function ei(c,h,y,O,A,$){{var M=le(c);if(!M){var R="";(c===void 0||typeof c=="object"&&c!==null&&Object.keys(c).length===0)&&(R+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Q=Xy(A);Q?R+=Q:R+=qa();var V;c===null?V="null":fn(c)?V="array":c!==void 0&&c.$$typeof===t?(V="<"+(ee(c.type)||"Unknown")+" />",R=" Did you accidentally export a JSX literal instead of a component?"):V=typeof c,w("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",V,R)}var W=qy(c,h,y,A,$);if(W==null)return W;if(M){var ie=h.children;if(ie!==void 0)if(O)if(fn(ie)){for(var rt=0;rt<ie.length;rt++)Za(ie[rt],c);Object.freeze&&Object.freeze(ie)}else w("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Za(ie,c)}return c===n?em(W):Zy(W),W}}function tm(c,h,y){return ei(c,h,y,!0)}function rm(c,h,y){return ei(c,h,y,!1)}var nm=rm,om=tm;at.Fragment=n,at.jsx=nm,at.jsxs=om}()),at}({}).NODE_ENV==="production"?Kt.exports=oi():Kt.exports=ai();var gn=Kt.exports;const it=gn.jsx,bn=gn.jsxs;var ii=Object.defineProperty,si=(e,t,r)=>t in e?ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t,r)=>(si(e,typeof t!="symbol"?t+"":t,r),r);const ci=e=>()=>{console.warn(`${e} need to be implement getComponent`)},ui=["customPageRootRender"],_n=["pageRender","render","convertModelToComponent","getComponent","getContext","getUtils","getDataLink","createDataLink","transformProps","transformData","transformGlobalData","errorCatch","clear"],En=e=>[..._n,...ui].reduce((t,r)=>{var n;return e!=null&&e[r]?t[r]=(n=e[r])==null?void 0:n.bind(e):_n.includes(r)&&(t[r]=ci),t},{});var li=Object.defineProperty,fi=(e,t,r)=>t in e?li(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t,r)=>(fi(e,typeof t!="symbol"?t+"":t,r),r),di=typeof global=="object"&&global&&global.Object===Object&&global;const jn=di;var pi=typeof self=="object"&&self&&self.Object===Object&&self,hi=jn||pi||Function("return this")();const fe=hi;var vi=fe.Symbol;const ne=vi;var On=Object.prototype,yi=On.hasOwnProperty,mi=On.toString,st=ne?ne.toStringTag:void 0;function gi(e){var t=yi.call(e,st),r=e[st];try{e[st]=void 0;var n=!0}catch{}var o=mi.call(e);return n&&(t?e[st]=r:delete e[st]),o}var bi=Object.prototype,_i=bi.toString;function Ei(e){return _i.call(e)}var ji="[object Null]",Oi="[object Undefined]",Sn=ne?ne.toStringTag:void 0;function Oe(e){return e==null?e===void 0?Oi:ji:Sn&&Sn in Object(e)?gi(e):Ei(e)}function de(e){return e!=null&&typeof e=="object"}var Si="[object Symbol]";function Zt(e){return typeof e=="symbol"||de(e)&&Oe(e)==Si}function er(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var wi=Array.isArray;const U=wi;var Ci=1/0,wn=ne?ne.prototype:void 0,Cn=wn?wn.toString:void 0;function xn(e){if(typeof e=="string")return e;if(U(e))return er(e,xn)+"";if(Zt(e))return Cn?Cn.call(e):"";var t=e+"";return t=="0"&&1/e==-Ci?"-0":t}function se(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function tr(e){return e}var xi="[object AsyncFunction]",Ri="[object Function]",Ni="[object GeneratorFunction]",Mi="[object Proxy]";function rr(e){if(!se(e))return!1;var t=Oe(e);return t==Ri||t==Ni||t==xi||t==Mi}var Ai=fe["__core-js_shared__"];const nr=Ai;var Rn=function(){var e=/[^.]+$/.exec(nr&&nr.keys&&nr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ti(e){return!!Rn&&Rn in e}var $i=Function.prototype,Pi=$i.toString;function Se(e){if(e!=null){try{return Pi.call(e)}catch{}try{return e+""}catch{}}return""}var Di=/[\\^$.*+?()[\]{}|]/g,ki=/^\[object .+?Constructor\]$/,Ii=Function.prototype,Fi=Object.prototype,Li=Ii.toString,Bi=Fi.hasOwnProperty,Ui=RegExp("^"+Li.call(Bi).replace(Di,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zi(e){if(!se(e)||Ti(e))return!1;var t=rr(e)?Ui:ki;return t.test(Se(e))}function Vi(e,t){return e==null?void 0:e[t]}function we(e,t){var r=Vi(e,t);return zi(r)?r:void 0}var Gi=we(fe,"WeakMap");const or=Gi;var Nn=Object.create,Wi=function(){function e(){}return function(t){if(!se(t))return{};if(Nn)return Nn(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Hi=Wi;function Yi(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Ji(){}function Mn(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Qi=800,qi=16,Xi=Date.now;function Ki(e){var t=0,r=0;return function(){var n=Xi(),o=qi-(n-r);if(r=n,o>0){if(++t>=Qi)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Zi(e){return function(){return e}}var es=function(){try{var e=we(Object,"defineProperty");return e({},"",{}),e}catch{}}();const xt=es;var ts=xt?function(e,t){return xt(e,"toString",{configurable:!0,enumerable:!1,value:Zi(t),writable:!0})}:tr,rs=Ki(ts);const An=rs;function ns(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function os(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function as(e){return e!==e}function is(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function ss(e,t,r){return t===t?is(e,t,r):os(e,as,r)}function cs(e,t){var r=e==null?0:e.length;return!!r&&ss(e,t,0)>-1}var us=9007199254740991,ls=/^(?:0|[1-9]\d*)$/;function Rt(e,t){var r=typeof e;return t=t??us,!!t&&(r=="number"||r!="symbol"&&ls.test(e))&&e>-1&&e%1==0&&e<t}function ar(e,t,r){t=="__proto__"&&xt?xt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ct(e,t){return e===t||e!==e&&t!==t}var fs=Object.prototype,ds=fs.hasOwnProperty;function ir(e,t,r){var n=e[t];(!(ds.call(e,t)&&ct(n,r))||r===void 0&&!(t in e))&&ar(e,t,r)}function De(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;u===void 0&&(u=e[s]),o?ar(r,s,u):ir(r,s,u)}return r}var Tn=Math.max;function $n(e,t,r){return t=Tn(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=Tn(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(i),Yi(e,this,s)}}function Pn(e,t){return An($n(e,t,tr),e+"")}var ps=9007199254740991;function sr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ps}function Nt(e){return e!=null&&sr(e.length)&&!rr(e)}function hs(e,t,r){if(!se(r))return!1;var n=typeof t;return(n=="number"?Nt(r)&&Rt(t,r.length):n=="string"&&t in r)?ct(r[t],e):!1}function vs(e){return Pn(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,i&&hs(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,a)}return t})}var ys=Object.prototype;function cr(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ys;return e===r}function ms(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var gs="[object Arguments]";function Dn(e){return de(e)&&Oe(e)==gs}var kn=Object.prototype,bs=kn.hasOwnProperty,_s=kn.propertyIsEnumerable,Es=Dn(function(){return arguments}())?Dn:function(e){return de(e)&&bs.call(e,"callee")&&!_s.call(e,"callee")};const ut=Es;function js(){return!1}var In=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Fn=In&&typeof module=="object"&&module&&!module.nodeType&&module,Os=Fn&&Fn.exports===In,Ln=Os?fe.Buffer:void 0,Ss=Ln?Ln.isBuffer:void 0,ws=Ss||js;const lt=ws;var Cs="[object Arguments]",xs="[object Array]",Rs="[object Boolean]",Ns="[object Date]",Ms="[object Error]",As="[object Function]",Ts="[object Map]",$s="[object Number]",Ps="[object Object]",Ds="[object RegExp]",ks="[object Set]",Is="[object String]",Fs="[object WeakMap]",Ls="[object ArrayBuffer]",Bs="[object DataView]",Us="[object Float32Array]",zs="[object Float64Array]",Vs="[object Int8Array]",Gs="[object Int16Array]",Ws="[object Int32Array]",Hs="[object Uint8Array]",Ys="[object Uint8ClampedArray]",Js="[object Uint16Array]",Qs="[object Uint32Array]",k={};k[Us]=k[zs]=k[Vs]=k[Gs]=k[Ws]=k[Hs]=k[Ys]=k[Js]=k[Qs]=!0,k[Cs]=k[xs]=k[Ls]=k[Rs]=k[Bs]=k[Ns]=k[Ms]=k[As]=k[Ts]=k[$s]=k[Ps]=k[Ds]=k[ks]=k[Is]=k[Fs]=!1;function qs(e){return de(e)&&sr(e.length)&&!!k[Oe(e)]}function ur(e){return function(t){return e(t)}}var Bn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ft=Bn&&typeof module=="object"&&module&&!module.nodeType&&module,Xs=ft&&ft.exports===Bn,lr=Xs&&jn.process,Ks=function(){try{var e=ft&&ft.require&&ft.require("util").types;return e||lr&&lr.binding&&lr.binding("util")}catch{}}();const ke=Ks;var Un=ke&&ke.isTypedArray,Zs=Un?ur(Un):qs;const fr=Zs;var ec=Object.prototype,tc=ec.hasOwnProperty;function zn(e,t){var r=U(e),n=!r&&ut(e),o=!r&&!n&&lt(e),a=!r&&!n&&!o&&fr(e),i=r||n||o||a,s=i?ms(e.length,String):[],u=s.length;for(var f in e)(t||tc.call(e,f))&&!(i&&(f=="length"||o&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Rt(f,u)))&&s.push(f);return s}function Vn(e,t){return function(r){return e(t(r))}}var rc=Vn(Object.keys,Object);const nc=rc;var oc=Object.prototype,ac=oc.hasOwnProperty;function ic(e){if(!cr(e))return nc(e);var t=[];for(var r in Object(e))ac.call(e,r)&&r!="constructor"&&t.push(r);return t}function Mt(e){return Nt(e)?zn(e):ic(e)}function sc(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var cc=Object.prototype,uc=cc.hasOwnProperty;function lc(e){if(!se(e))return sc(e);var t=cr(e),r=[];for(var n in e)n=="constructor"&&(t||!uc.call(e,n))||r.push(n);return r}function dt(e){return Nt(e)?zn(e,!0):lc(e)}var fc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dc=/^\w*$/;function dr(e,t){if(U(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Zt(e)?!0:dc.test(e)||!fc.test(e)||t!=null&&e in Object(t)}var pc=we(Object,"create");const pt=pc;function hc(){this.__data__=pt?pt(null):{},this.size=0}function vc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var yc="__lodash_hash_undefined__",mc=Object.prototype,gc=mc.hasOwnProperty;function bc(e){var t=this.__data__;if(pt){var r=t[e];return r===yc?void 0:r}return gc.call(t,e)?t[e]:void 0}var _c=Object.prototype,Ec=_c.hasOwnProperty;function jc(e){var t=this.__data__;return pt?t[e]!==void 0:Ec.call(t,e)}var Oc="__lodash_hash_undefined__";function Sc(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=pt&&t===void 0?Oc:t,this}function Ce(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ce.prototype.clear=hc,Ce.prototype.delete=vc,Ce.prototype.get=bc,Ce.prototype.has=jc,Ce.prototype.set=Sc;function wc(){this.__data__=[],this.size=0}function At(e,t){for(var r=e.length;r--;)if(ct(e[r][0],t))return r;return-1}var Cc=Array.prototype,xc=Cc.splice;function Rc(e){var t=this.__data__,r=At(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():xc.call(t,r,1),--this.size,!0}function Nc(e){var t=this.__data__,r=At(t,e);return r<0?void 0:t[r][1]}function Mc(e){return At(this.__data__,e)>-1}function Ac(e,t){var r=this.__data__,n=At(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ve(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ve.prototype.clear=wc,ve.prototype.delete=Rc,ve.prototype.get=Nc,ve.prototype.has=Mc,ve.prototype.set=Ac;var Tc=we(fe,"Map");const ht=Tc;function $c(){this.size=0,this.__data__={hash:new Ce,map:new(ht||ve),string:new Ce}}function Pc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Tt(e,t){var r=e.__data__;return Pc(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Dc(e){var t=Tt(this,e).delete(e);return this.size-=t?1:0,t}function kc(e){return Tt(this,e).get(e)}function Ic(e){return Tt(this,e).has(e)}function Fc(e,t){var r=Tt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function ye(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ye.prototype.clear=$c,ye.prototype.delete=Dc,ye.prototype.get=kc,ye.prototype.has=Ic,ye.prototype.set=Fc;var Lc="Expected a function";function pr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Lc);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(pr.Cache||ye),r}pr.Cache=ye;var Bc=500;function Uc(e){var t=pr(e,function(n){return r.size===Bc&&r.clear(),n}),r=t.cache;return t}var zc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vc=/\\(\\)?/g,Gc=Uc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(zc,function(r,n,o,a){t.push(o?a.replace(Vc,"$1"):n||r)}),t});const Wc=Gc;function Hc(e){return e==null?"":xn(e)}function Ie(e,t){return U(e)?e:dr(e,t)?[e]:Wc(Hc(e))}var Yc=1/0;function Fe(e){if(typeof e=="string"||Zt(e))return e;var t=e+"";return t=="0"&&1/e==-Yc?"-0":t}function $t(e,t){t=Ie(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Fe(t[r++])];return r&&r==n?e:void 0}function Gn(e,t,r){var n=e==null?void 0:$t(e,t);return n===void 0?r:n}function hr(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var Wn=ne?ne.isConcatSpreadable:void 0;function Jc(e){return U(e)||ut(e)||!!(Wn&&e&&e[Wn])}function vr(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=Jc),o||(o=[]);++a<i;){var s=e[a];t>0&&r(s)?t>1?vr(s,t-1,r,n,o):hr(o,s):n||(o[o.length]=s)}return o}function Qc(e){var t=e==null?0:e.length;return t?vr(e,1):[]}function qc(e){return An($n(e,void 0,Qc),e+"")}var Xc=Vn(Object.getPrototypeOf,Object);const yr=Xc;var Kc="[object Object]",Zc=Function.prototype,eu=Object.prototype,Hn=Zc.toString,tu=eu.hasOwnProperty,ru=Hn.call(Object);function q(e){if(!de(e)||Oe(e)!=Kc)return!1;var t=yr(e);if(t===null)return!0;var r=tu.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Hn.call(r)==ru}function nu(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}function ou(){this.__data__=new ve,this.size=0}function au(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function iu(e){return this.__data__.get(e)}function su(e){return this.__data__.has(e)}var cu=200;function uu(e,t){var r=this.__data__;if(r instanceof ve){var n=r.__data__;if(!ht||n.length<cu-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ye(n)}return r.set(e,t),this.size=r.size,this}function ce(e){var t=this.__data__=new ve(e);this.size=t.size}ce.prototype.clear=ou,ce.prototype.delete=au,ce.prototype.get=iu,ce.prototype.has=su,ce.prototype.set=uu;function lu(e,t){return e&&De(t,Mt(t),e)}function fu(e,t){return e&&De(t,dt(t),e)}var Yn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Jn=Yn&&typeof module=="object"&&module&&!module.nodeType&&module,du=Jn&&Jn.exports===Yn,Qn=du?fe.Buffer:void 0,qn=Qn?Qn.allocUnsafe:void 0;function Xn(e,t){if(t)return e.slice();var r=e.length,n=qn?qn(r):new e.constructor(r);return e.copy(n),n}function pu(e,t){for(var r=-1,n=e==null?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}function Kn(){return[]}var hu=Object.prototype,vu=hu.propertyIsEnumerable,Zn=Object.getOwnPropertySymbols,yu=Zn?function(e){return e==null?[]:(e=Object(e),pu(Zn(e),function(t){return vu.call(e,t)}))}:Kn;const mr=yu;function mu(e,t){return De(e,mr(e),t)}var gu=Object.getOwnPropertySymbols,bu=gu?function(e){for(var t=[];e;)hr(t,mr(e)),e=yr(e);return t}:Kn;const eo=bu;function _u(e,t){return De(e,eo(e),t)}function to(e,t,r){var n=t(e);return U(e)?n:hr(n,r(e))}function gr(e){return to(e,Mt,mr)}function br(e){return to(e,dt,eo)}var Eu=we(fe,"DataView");const _r=Eu;var ju=we(fe,"Promise");const Er=ju;var Ou=we(fe,"Set");const Le=Ou;var ro="[object Map]",Su="[object Object]",no="[object Promise]",oo="[object Set]",ao="[object WeakMap]",io="[object DataView]",wu=Se(_r),Cu=Se(ht),xu=Se(Er),Ru=Se(Le),Nu=Se(or),xe=Oe;(_r&&xe(new _r(new ArrayBuffer(1)))!=io||ht&&xe(new ht)!=ro||Er&&xe(Er.resolve())!=no||Le&&xe(new Le)!=oo||or&&xe(new or)!=ao)&&(xe=function(e){var t=Oe(e),r=t==Su?e.constructor:void 0,n=r?Se(r):"";if(n)switch(n){case wu:return io;case Cu:return ro;case xu:return no;case Ru:return oo;case Nu:return ao}return t});const vt=xe;var Mu=Object.prototype,Au=Mu.hasOwnProperty;function Tu(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Au.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var $u=fe.Uint8Array;const Pt=$u;function jr(e){var t=new e.constructor(e.byteLength);return new Pt(t).set(new Pt(e)),t}function Pu(e,t){var r=t?jr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Du=/\w*$/;function ku(e){var t=new e.constructor(e.source,Du.exec(e));return t.lastIndex=e.lastIndex,t}var so=ne?ne.prototype:void 0,co=so?so.valueOf:void 0;function Iu(e){return co?Object(co.call(e)):{}}function uo(e,t){var r=t?jr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Fu="[object Boolean]",Lu="[object Date]",Bu="[object Map]",Uu="[object Number]",zu="[object RegExp]",Vu="[object Set]",Gu="[object String]",Wu="[object Symbol]",Hu="[object ArrayBuffer]",Yu="[object DataView]",Ju="[object Float32Array]",Qu="[object Float64Array]",qu="[object Int8Array]",Xu="[object Int16Array]",Ku="[object Int32Array]",Zu="[object Uint8Array]",el="[object Uint8ClampedArray]",tl="[object Uint16Array]",rl="[object Uint32Array]";function nl(e,t,r){var n=e.constructor;switch(t){case Hu:return jr(e);case Fu:case Lu:return new n(+e);case Yu:return Pu(e,r);case Ju:case Qu:case qu:case Xu:case Ku:case Zu:case el:case tl:case rl:return uo(e,r);case Bu:return new n;case Uu:case Gu:return new n(e);case zu:return ku(e);case Vu:return new n;case Wu:return Iu(e)}}function lo(e){return typeof e.constructor=="function"&&!cr(e)?Hi(yr(e)):{}}var ol="[object Map]";function al(e){return de(e)&&vt(e)==ol}var fo=ke&&ke.isMap,il=fo?ur(fo):al;const sl=il;var cl="[object Set]";function ul(e){return de(e)&&vt(e)==cl}var po=ke&&ke.isSet,ll=po?ur(po):ul;const fl=ll;var dl=1,pl=2,hl=4,ho="[object Arguments]",vl="[object Array]",yl="[object Boolean]",ml="[object Date]",gl="[object Error]",vo="[object Function]",bl="[object GeneratorFunction]",_l="[object Map]",El="[object Number]",yo="[object Object]",jl="[object RegExp]",Ol="[object Set]",Sl="[object String]",wl="[object Symbol]",Cl="[object WeakMap]",xl="[object ArrayBuffer]",Rl="[object DataView]",Nl="[object Float32Array]",Ml="[object Float64Array]",Al="[object Int8Array]",Tl="[object Int16Array]",$l="[object Int32Array]",Pl="[object Uint8Array]",Dl="[object Uint8ClampedArray]",kl="[object Uint16Array]",Il="[object Uint32Array]",P={};P[ho]=P[vl]=P[xl]=P[Rl]=P[yl]=P[ml]=P[Nl]=P[Ml]=P[Al]=P[Tl]=P[$l]=P[_l]=P[El]=P[yo]=P[jl]=P[Ol]=P[Sl]=P[wl]=P[Pl]=P[Dl]=P[kl]=P[Il]=!0,P[gl]=P[vo]=P[Cl]=!1;function yt(e,t,r,n,o,a){var i,s=t&dl,u=t&pl,f=t&hl;if(r&&(i=o?r(e,n,o,a):r(e)),i!==void 0)return i;if(!se(e))return e;var l=U(e);if(l){if(i=Tu(e),!s)return Mn(e,i)}else{var p=vt(e),d=p==vo||p==bl;if(lt(e))return Xn(e,s);if(p==yo||p==ho||d&&!o){if(i=u||d?{}:lo(e),!s)return u?_u(e,fu(i,e)):mu(e,lu(i,e))}else{if(!P[p])return o?e:{};i=nl(e,p,s)}}a||(a=new ce);var v=a.get(e);if(v)return v;a.set(e,i),fl(e)?e.forEach(function(S){i.add(yt(S,t,r,S,e,a))}):sl(e)&&e.forEach(function(S,j){i.set(j,yt(S,t,r,j,e,a))});var b=f?u?br:gr:u?dt:Mt,E=l?void 0:b(e);return ns(E||e,function(S,j){E&&(j=S,S=e[j]),ir(i,j,yt(S,t,r,j,e,a))}),i}var Fl=1,Ll=4;function mo(e){return yt(e,Fl|Ll)}var Bl="__lodash_hash_undefined__";function Ul(e){return this.__data__.set(e,Bl),this}function zl(e){return this.__data__.has(e)}function mt(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ye;++t<r;)this.add(e[t])}mt.prototype.add=mt.prototype.push=Ul,mt.prototype.has=zl;function Vl(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function go(e,t){return e.has(t)}var Gl=1,Wl=2;function bo(e,t,r,n,o,a){var i=r&Gl,s=e.length,u=t.length;if(s!=u&&!(i&&u>s))return!1;var f=a.get(e),l=a.get(t);if(f&&l)return f==t&&l==e;var p=-1,d=!0,v=r&Wl?new mt:void 0;for(a.set(e,t),a.set(t,e);++p<s;){var b=e[p],E=t[p];if(n)var S=i?n(E,b,p,t,e,a):n(b,E,p,e,t,a);if(S!==void 0){if(S)continue;d=!1;break}if(v){if(!Vl(t,function(j,w){if(!go(v,w)&&(b===j||o(b,j,r,n,a)))return v.push(w)})){d=!1;break}}else if(!(b===E||o(b,E,r,n,a))){d=!1;break}}return a.delete(e),a.delete(t),d}function Hl(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}function Or(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Yl=1,Jl=2,Ql="[object Boolean]",ql="[object Date]",Xl="[object Error]",Kl="[object Map]",Zl="[object Number]",ef="[object RegExp]",tf="[object Set]",rf="[object String]",nf="[object Symbol]",of="[object ArrayBuffer]",af="[object DataView]",_o=ne?ne.prototype:void 0,Sr=_o?_o.valueOf:void 0;function sf(e,t,r,n,o,a,i){switch(r){case af:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case of:return!(e.byteLength!=t.byteLength||!a(new Pt(e),new Pt(t)));case Ql:case ql:case Zl:return ct(+e,+t);case Xl:return e.name==t.name&&e.message==t.message;case ef:case rf:return e==t+"";case Kl:var s=Hl;case tf:var u=n&Yl;if(s||(s=Or),e.size!=t.size&&!u)return!1;var f=i.get(e);if(f)return f==t;n|=Jl,i.set(e,t);var l=bo(s(e),s(t),n,o,a,i);return i.delete(e),l;case nf:if(Sr)return Sr.call(e)==Sr.call(t)}return!1}var cf=1,uf=Object.prototype,lf=uf.hasOwnProperty;function ff(e,t,r,n,o,a){var i=r&cf,s=gr(e),u=s.length,f=gr(t),l=f.length;if(u!=l&&!i)return!1;for(var p=u;p--;){var d=s[p];if(!(i?d in t:lf.call(t,d)))return!1}var v=a.get(e),b=a.get(t);if(v&&b)return v==t&&b==e;var E=!0;a.set(e,t),a.set(t,e);for(var S=i;++p<u;){d=s[p];var j=e[d],w=t[d];if(n)var L=i?n(w,j,d,t,e,a):n(j,w,d,e,t,a);if(!(L===void 0?j===w||o(j,w,r,n,a):L)){E=!1;break}S||(S=d=="constructor")}if(E&&!S){var D=e.constructor,z=t.constructor;D!=z&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof z=="function"&&z instanceof z)&&(E=!1)}return a.delete(e),a.delete(t),E}var df=1,Eo="[object Arguments]",jo="[object Array]",Dt="[object Object]",pf=Object.prototype,Oo=pf.hasOwnProperty;function hf(e,t,r,n,o,a){var i=U(e),s=U(t),u=i?jo:vt(e),f=s?jo:vt(t);u=u==Eo?Dt:u,f=f==Eo?Dt:f;var l=u==Dt,p=f==Dt,d=u==f;if(d&&lt(e)){if(!lt(t))return!1;i=!0,l=!1}if(d&&!l)return a||(a=new ce),i||fr(e)?bo(e,t,r,n,o,a):sf(e,t,u,r,n,o,a);if(!(r&df)){var v=l&&Oo.call(e,"__wrapped__"),b=p&&Oo.call(t,"__wrapped__");if(v||b){var E=v?e.value():e,S=b?t.value():t;return a||(a=new ce),o(E,S,r,n,a)}}return d?(a||(a=new ce),ff(e,t,r,n,o,a)):!1}function wr(e,t,r,n,o){return e===t?!0:e==null||t==null||!de(e)&&!de(t)?e!==e&&t!==t:hf(e,t,r,n,wr,o)}var vf=1,yf=2;function mf(e,t,r,n){var o=r.length,a=o,i=!n;if(e==null)return!a;for(e=Object(e);o--;){var s=r[o];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<a;){s=r[o];var u=s[0],f=e[u],l=s[1];if(i&&s[2]){if(f===void 0&&!(u in e))return!1}else{var p=new ce;if(n)var d=n(f,l,u,e,t,p);if(!(d===void 0?wr(l,f,vf|yf,n,p):d))return!1}}return!0}function So(e){return e===e&&!se(e)}function gf(e){for(var t=Mt(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,So(o)]}return t}function wo(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function bf(e){var t=gf(e);return t.length==1&&t[0][2]?wo(t[0][0],t[0][1]):function(r){return r===e||mf(r,e,t)}}function _f(e,t){return e!=null&&t in Object(e)}function Ef(e,t,r){t=Ie(t,e);for(var n=-1,o=t.length,a=!1;++n<o;){var i=Fe(t[n]);if(!(a=e!=null&&r(e,i)))break;e=e[i]}return a||++n!=o?a:(o=e==null?0:e.length,!!o&&sr(o)&&Rt(i,o)&&(U(e)||ut(e)))}function jf(e,t){return e!=null&&Ef(e,t,_f)}var Of=1,Sf=2;function wf(e,t){return dr(e)&&So(t)?wo(Fe(e),t):function(r){var n=Gn(r,e);return n===void 0&&n===t?jf(r,e):wr(t,n,Of|Sf)}}function Cf(e){return function(t){return t==null?void 0:t[e]}}function xf(e){return function(t){return $t(t,e)}}function Rf(e){return dr(e)?Cf(Fe(e)):xf(e)}function Cr(e){return typeof e=="function"?e:e==null?tr:typeof e=="object"?U(e)?wf(e[0],e[1]):bf(e):Rf(e)}function Nf(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),s=i.length;s--;){var u=i[e?s:++o];if(r(a[u],u,a)===!1)break}return t}}var Mf=Nf();const Af=Mf;function xr(e,t,r){(r!==void 0&&!ct(e[t],r)||r===void 0&&!(t in e))&&ar(e,t,r)}function Rr(e){return de(e)&&Nt(e)}function Nr(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Tf(e){return De(e,dt(e))}function $f(e,t,r,n,o,a,i){var s=Nr(e,r),u=Nr(t,r),f=i.get(u);if(f){xr(e,r,f);return}var l=a?a(s,u,r+"",e,t,i):void 0,p=l===void 0;if(p){var d=U(u),v=!d&&lt(u),b=!d&&!v&&fr(u);l=u,d||v||b?U(s)?l=s:Rr(s)?l=Mn(s):v?(p=!1,l=Xn(u,!0)):b?(p=!1,l=uo(u,!0)):l=[]:q(u)||ut(u)?(l=s,ut(s)?l=Tf(s):(!se(s)||rr(s))&&(l=lo(u))):p=!1}p&&(i.set(u,l),o(l,u,n,a,i),i.delete(u)),xr(e,r,l)}function Co(e,t,r,n,o){e!==t&&Af(t,function(a,i){if(o||(o=new ce),se(a))$f(e,t,i,r,Co,n,o);else{var s=n?n(Nr(e,i),a,i+"",e,t,o):void 0;s===void 0&&(s=a),xr(e,i,s)}},dt)}function Pf(e,t,r){for(var n=-1,o=e==null?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}function xo(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function Df(e,t){return t.length<2?e:$t(e,nu(t,0,-1))}var kf=vs(function(e,t,r){Co(e,t,r)});const Ro=kf;var If="Expected a function";function Ff(e){if(typeof e!="function")throw new TypeError(If);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Lf(e,t){return t=Ie(t,e),e=Df(e,t),e==null||delete e[Fe(xo(t))]}function Bf(e){return q(e)?void 0:e}var Uf=1,zf=2,Vf=4,Gf=qc(function(e,t){var r={};if(e==null)return r;var n=!1;t=er(t,function(a){return a=Ie(a,e),n||(n=a.length>1),a}),De(e,br(e),r),n&&(r=yt(r,Uf|zf|Vf,Bf));for(var o=t.length;o--;)Lf(r,t[o]);return r});const No=Gf;function Wf(e,t,r,n){if(!se(e))return e;t=Ie(t,e);for(var o=-1,a=t.length,i=a-1,s=e;s!=null&&++o<a;){var u=Fe(t[o]),f=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(o!=i){var l=s[u];f=n?n(l,u,s):void 0,f===void 0&&(f=se(l)?l:Rt(t[o+1])?[]:{})}ir(s,u,f),s=s[u]}return e}function Hf(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=$t(e,i);r(s,i)&&Wf(a,Ie(i,e),s)}return a}function Yf(e,t){if(e==null)return{};var r=er(br(e),function(n){return[n]});return t=Cr(t),Hf(e,r,function(n,o){return t(n,o[0])})}function Jf(e,t){return Yf(e,Ff(Cr(t)))}var Qf=1/0,qf=Le&&1/Or(new Le([,-0]))[1]==Qf?function(e){return new Le(e)}:Ji;const Xf=qf;var Kf=200;function Zf(e,t,r){var n=-1,o=cs,a=e.length,i=!0,s=[],u=s;if(r)i=!1,o=Pf;else if(a>=Kf){var f=t?null:Xf(e);if(f)return Or(f);i=!1,o=go,u=new mt}else u=t?[]:s;e:for(;++n<a;){var l=e[n],p=t?t(l):l;if(l=r||l!==0?l:0,i&&p===p){for(var d=u.length;d--;)if(u[d]===p)continue e;t&&u.push(p),s.push(l)}else o(u,p,r)||(u!==s&&u.push(p),s.push(l))}return s}var ed=Pn(function(e){var t=xo(e);return Rr(t)&&(t=void 0),Zf(vr(e,1,Rr,!0),Cr(t))});const td=ed;class Mo extends TypeError{constructor(t,r){let n;const{message:o,...a}=t,{path:i}=t,s=i.length===0?o:`At path: ${i.join(".")} -- ${o}`;super(s),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...r()])}}function rd(e){return ue(e)&&typeof e[Symbol.iterator]=="function"}function ue(e){return typeof e=="object"&&e!=null}function K(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function nd(e){const{done:t,value:r}=e.next();return t?void 0:r}function od(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:o,branch:a}=t,{type:i}=r,{refinement:s,message:u=`Expected a value of type \`${i}\`${s?` with refinement \`${s}\``:""}, but received: \`${K(n)}\``}=e;return{value:n,type:i,refinement:s,key:o[o.length-1],path:o,branch:a,...e,message:u}}function*Ao(e,t,r,n){rd(e)||(e=[e]);for(const o of e){const a=od(o,t,r,n);a&&(yield a)}}function*Mr(e,t,r){r===void 0&&(r={});const{path:n=[],branch:o=[e],coerce:a=!1,mask:i=!1}=r,s={path:n,branch:o};if(a&&(e=t.coercer(e,s),i&&t.type!=="type"&&ue(t.schema)&&ue(e)&&!Array.isArray(e)))for(const f in e)t.schema[f]===void 0&&delete e[f];let u="valid";for(const f of t.validator(e,s))u="not_valid",yield[f,void 0];for(let[f,l,p]of t.entries(e,s)){const d=Mr(l,p,{path:f===void 0?n:[...n,f],branch:f===void 0?o:[...o,l],coerce:a,mask:i});for(const v of d)v[0]?(u=v[0].refinement!=null?"not_refined":"not_valid",yield[v[0],void 0]):a&&(l=v[1],f===void 0?e=l:e instanceof Map?e.set(f,l):e instanceof Set?e.add(l):ue(e)&&(l!==void 0||f in e)&&(e[f]=l))}if(u!=="not_valid")for(const f of t.refiner(e,s))u="not_refined",yield[f,void 0];u==="valid"&&(yield[void 0,e])}class pe{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:r,schema:n,validator:o,refiner:a,coercer:i=u=>u,entries:s=function*(){}}=t;this.type=r,this.schema=n,this.entries=s,this.coercer=i,o?this.validator=(u,f)=>{const l=o(u,f);return Ao(l,f,this,u)}:this.validator=()=>[],a?this.refiner=(u,f)=>{const l=a(u,f);return Ao(l,f,this,u)}:this.refiner=()=>[]}assert(t){return To(t,this)}create(t){return ad(t,this)}is(t){return sd(t,this)}mask(t){return id(t,this)}validate(t,r){return r===void 0&&(r={}),Be(t,this,r)}}function To(e,t){const r=Be(e,t);if(r[0])throw r[0]}function ad(e,t){const r=Be(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function id(e,t){const r=Be(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function sd(e,t){return!Be(e,t)[0]}function Be(e,t,r){r===void 0&&(r={});const n=Mr(e,t,r),o=nd(n);return o[0]?[new Mo(o[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function Ar(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t[0].type==="type",o=t.map(i=>i.schema),a=Object.assign({},...o);return n?ko(a):T(a)}function Ee(e,t){return new pe({type:e,schema:null,validator:t})}function Ue(e){return new pe({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)},refiner(t,r){return e(t,r).refiner(t,r)}})}function $o(e,t){const{schema:r}=e,n={...r};for(const o of t)delete n[o];switch(e.type){case"type":return ko(n);default:return T(n)}}function G(){return Ee("any",()=>!0)}function B(e){return new pe({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${K(t)}`}})}function Re(){return Ee("boolean",e=>typeof e=="boolean")}function Tr(e){const t={},r=e.map(n=>K(n)).join();for(const n of e)t[n]=n;return new pe({type:"enums",schema:t,validator(n){return e.includes(n)||`Expected one of \`${r}\`, but received: ${K(n)}`}})}function Po(){return Ee("func",e=>typeof e=="function"||`Expected a function, but received: ${K(e)}`)}function X(e){const t=K(e),r=typeof e;return new pe({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||`Expected the literal \`${t}\`, but received: ${K(n)}`}})}function cd(){return Ee("never",()=>!1)}function Do(){return Ee("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${K(e)}`)}function T(e){const t=e?Object.keys(e):[],r=cd();return new pe({type:"object",schema:e||null,*entries(n){if(e&&ue(n)){const o=new Set(Object.keys(n));for(const a of t)o.delete(a),yield[a,n[a],e[a]];for(const a of o)yield[a,n[a],r]}},validator(n){return ue(n)||`Expected an object, but received: ${K(n)}`},coercer(n){return ue(n)?{...n}:n}})}function g(e){return new pe({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function gt(e,t){return new pe({type:"record",schema:null,*entries(r){if(ue(r))for(const n in r){const o=r[n];yield[n,n,e],yield[n,o,t]}},validator(r){return ue(r)||`Expected an object, but received: ${K(r)}`}})}function m(){return Ee("string",e=>typeof e=="string"||`Expected a string, but received: ${K(e)}`)}function ko(e){const t=Object.keys(e);return new pe({type:"type",schema:e,*entries(r){if(ue(r))for(const n of t)yield[n,r[n],e[n]]},validator(r){return ue(r)||`Expected an object, but received: ${K(r)}`}})}function Y(e){const t=e.map(r=>r.type).join(" | ");return new pe({type:"union",schema:null,coercer(r,n){return(e.find(o=>{const[a]=o.validate(r,{coerce:!0});return!a})||ud()).coercer(r,n)},validator(r,n){const o=[];for(const a of e){const[...i]=Mr(r,a,n),[s]=i;if(s[0])for(const[u]of i)u&&o.push(u);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${K(r)}`,...o]}})}function ud(){return Ee("unknown",()=>!0)}const $r=T({package:m(),version:m(),exportName:m(),destructuring:g(Re()),subName:g(m()),main:g(m())}),ld=B($r),fd=["CBlock","CContainer","CImage","CCanvas","CVideo","CAudio","CText","CNativeTag"];var oe=(e=>(e.SLOT="SLOT",e.FUNCTION="FUNCTION",e.EXPRESSION="EXPRESSION",e))(oe||{}),Pr=(e=>(e.DESIGN="design",e.SAVE="save",e))(Pr||{}),Dr=(e=>(e.FUNC="FUNC",e.COMP="COMP",e))(Dr||{});const dd=()=>Ee("normalObj",e=>!q(e)||[oe.SLOT,oe.EXPRESSION,oe.FUNCTION].includes(e==null?void 0:e.type)?!1:(Be(e,gt(m(),kr)),!0)),kr=Y([m(),Do(),Re(),T({type:X(oe.SLOT),renderType:Tr([Dr.FUNC,Dr.COMP]),params:g(B(m())),value:Ue(()=>Y([ze,B(ze)]))}),T({type:X(oe.EXPRESSION),value:m()}),T({type:X(oe.FUNCTION),value:m()}),dd(),B(Ue(()=>kr))]),Io=T({type:X(oe.EXPRESSION),value:m()}),ze=T({id:g(m()),title:g(m()),componentName:m(),props:g(gt(m(),kr)),nodeName:g(m()),state:g(gt(m(),G())),children:Ue(()=>g(B(Y([m(),ze])))),configure:g(G()),css:g(G()),style:g(G()),classNames:g(B(G())),refId:g(m()),extra:g(gt(G(),G())),condition:g(Y([Re(),Io])),loop:g(T({open:Re(),data:Y([B(G()),Io]),args:g(B(m())),forName:g(m()),forIndex:g(m()),key:g(G()),name:g(m())})),methods:g(B(G()))}),kt=Y([m(),T({label:m(),tip:g(m())})]),pd=T({type:X("shape"),value:B(T({name:m(),title:kt,valueType:Ue(()=>It)}))}),hd=T({type:X("enums"),value:B(m())});T({type:X("array"),value:Ue(()=>It)});const vd=T({type:X("array"),value:Ue(()=>B(It))}),It=Y([Tr(["array","boolean","number","object","string"]),Tr(["component","expression","function"]),pd,hd,vd]),yd=Y([m(),T({componentName:m(),props:g(G()),initialValue:g(G()),component:g(G())})]),Ir=T({name:m(),title:kt,valueType:It,description:g(m()),defaultValue:G(),setters:g(B(yd)),condition:g(Po())});Y([m(),Po()]);var Fr=(e=>(e.SINGLE="single",e.GROUP="group",e))(Fr||{});Y([m(),T({name:m(),describe:g(m()),params:g(T({name:m(),description:m()})),template:m()})]);const md=T({id:g(m()),title:m(),snapshot:Y([m(),G()]),snapshotText:g(m()),description:g(m()),tags:g(B(m())),groupName:g(m()),category:g(m()),schema:Ar($o(ze,["id"]),T({componentName:g(m())}))}),gd=T({componentName:m(),title:m(),screenshot:g(m()),icon:g(m()),tags:g(B(m())),groupName:g(m()),category:g(m()),priority:g(Do()),npm:g($r),snippets:B(md),props:B(Y([Ir,T({title:g(kt),type:X("single"),content:Ir}),T({title:g(kt),type:X("group"),content:B(Ir)})])),fixedProps:g(G()),isContainer:g(Y([Re(),T({placeholder:m(),width:m(),height:m()})])),supportDispatchNativeEvent:g(Y([Re(),B(m())])),isLayout:g(Re()),rootSelector:g(m()),advanceCustom:g(G()),extra:g(gt(G(),G()))}),bd=e=>({data:t,message:r,throwError:n})=>{const o=e({data:t,message:r,throwError:n});if(o.isValidate)return o;if(n)throw o.message||r?new Error(`${o.message||r}
 originData: ${JSON.stringify(t)}`):new Error(`${JSON.stringify(t)} 
 data struct format is invalidate`);return o.message||r?console.warn(`${o.message||r}
 originData: ${JSON.stringify(t)}`):console.warn(`${JSON.stringify(t)} 
 data struct format is invalidate`),o},Lr=e=>{const{data:t,message:r,throwError:n,dataStruct:o}=e;return bd(({data:a})=>{try{return To(a,o),{isValidate:!0}}catch(i){let s=i;return i instanceof Mo&&(s=i.failures().map(u=>`【${u.path.join(".")}】: ${u.message}
`)),{isValidate:!1,message:s,error:i}}})({data:t,message:r,throwError:n})};var Ve=(e=>(e.ROOT_CONTAINER="RootContainer",e))(Ve||{});const _d=T({type:X(oe.FUNCTION),value:m()}),Ed=Ar($o(ze,["componentName"]),T({componentName:X("RootContainer")}));function jd(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(o){o(r)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,r)})}}}const bt=jd(),Od=(e,t)=>{const r={...e,value:[]},n=e.value;let o=new Me([]);return t&&(o=t.materialsMode||new Me([])),n&&(U(n)?r.value=n.map(a=>new F(a,{parent:t,materials:o})):q(n)&&r.value.push(new F(n,{parent:t,materials:o}))),r};class Ge{constructor(t,r){C(this,"nodeType","SLOT"),C(this,"rawData"),C(this,"parent"),C(this,"emitter",bt),C(this,"data"),C(this,"id"),C(this,"materialsMode"),this.parent=(r==null?void 0:r.parent)||null,this.rawData=t;const n=(r==null?void 0:r.materials)||new Me([]);this.materialsMode=n,this.id=he(),this.data=Od(t,this)}get value(){return this.data}export(t){const r=this.data,n=o=>{if(o instanceof F)return o.export(t);if(q(o)){const a={};return Object.keys(o||{}).forEach(i=>{a[i]=n(o[i])}),a}return U(o)?o.map(a=>n(a)):(t==="design"&&delete o.id,o)};return n(r)}}const Fo=e=>{let t=[];return e.forEach(r=>{const n=r;n.type?n.type===Fr.SINGLE?t.push(n.content):n.type===Fr.GROUP&&(t=[...t,...Fo(n.content)]):t.push(r)}),t},Br=(e,t,r)=>{if(e.type)return e.type===oe.SLOT?new Ge(e,{parent:t,materials:r}):e;if(q(e)){const n={};return Object.keys(e).forEach(o=>{n[o]=Ur(e[o],t,r)}),n}else return Array.isArray(e)?e.map(n=>Br(n,t,r)):e},Ur=(e,t,r)=>q(e)?Br(e,t,r):U(e)?e.map(n=>Br(n,t,r)):e;class je{constructor(t,r,n){C(this,"nodeType","PROP"),C(this,"rawData"),C(this,"parent"),C(this,"emitter",bt),C(this,"data"),C(this,"name"),C(this,"materialsMode");const o=(n==null?void 0:n.materials)||new Me([]);this.materialsMode=o,this.parent=n==null?void 0:n.parent,this.rawData=r,this.name=t,this.data=Ur(r,this,o)}isIncludeSlot(){return!1}isIncludeExpression(){return!1}get value(){return this.data}updateValue(t){const r=this.data;this.data=Ur(t??r,this,this.materialsMode),this.emitter.emit("onPropChange",{value:this.data,preValue:r,node:this}),this.parent&&!(this.parent instanceof Ge)&&this.emitter.emit("onNodeChange",{value:this.parent.value,preValue:this.parent.value,node:this.parent})}get material(){const t=this.parent;if(t instanceof F){const r=t.material;return Fo((r==null?void 0:r.value.props)||[]).find(n=>n.name===this.name)}else return null}export(t){const r=this.data,n=o=>{if(o instanceof je||o instanceof Ge||o instanceof F)return o.export(t);if(U(o))return o.map(a=>n(a));if(q(o)){const a={};return Object.keys(o||{}).forEach(i=>{a[i]=n(o[i])}),a}return o};return n(r)}}const Sd=e=>{if(typeof e=="string")return!0;Lr({data:e,dataStruct:ze,throwError:!1})},Lo=(e,t,r=new Me([]))=>{if(typeof e=="string")return e;const n={...e,id:e.id??he(),children:[],props:{},configure:Ro(e.configure||{},{propsSetter:{},advanceSetter:{}})},o=Object.keys(e.props||{});return o.length&&o.forEach(a=>{var i;const s=(i=e.props)==null?void 0:i[a];if(s instanceof je){n.props[a]=s;return}n.props[a]=new je(a,s||"",{parent:t,materials:r})}),e.children&&(Array.isArray(e.children)?n.children=e.children.map(a=>{if(a instanceof F)return a;if(q(a)){const i=a;return new F(i,{parent:t,materials:r})}else return a}):(e.children instanceof F&&(n.children=[e.children]),n.children=[new F(e.children,{parent:t,materials:r})])),n};class F{constructor(t,r){C(this,"nodeType","NODE"),C(this,"rawData"),C(this,"data"),C(this,"emitter",bt),C(this,"parent"),C(this,"materialsModel"),C(this,"listenerHandle"),C(this,"onChangeCbQueue"),this.rawData=JSON.parse(JSON.stringify(t)),Sd(t);const n=(r==null?void 0:r.materials)||new Me([]);this.parent=(r==null?void 0:r.parent)||null,this.materialsModel=n,this.data=Lo(t,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener()}registerListener(){const t=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",t),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",t)})}onChange(t){return this.onChangeCbQueue.push(t),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==t)}}destroy(){this.listenerHandle.forEach(t=>t())}get id(){return this.data.id}get value(){return this.data}clone(t){const r={...this.export("design"),id:t||he()};return new F(r,{materials:this.materialsModel})}updateValue(t){const r=this.data,n={...this.data,...t};this.data=Lo(n,this),this.emitter.emit("onNodeChange",{value:n,preValue:r,node:this})}contains(t){return Gr(this,t)}get props(){return this.data.props}get material(){const t=this.materialsModel;return t==null?void 0:t.findByComponentName(this.data.componentName)}getPlainProps(){const t=this.data,r={};return Object.keys(t.props||{}).forEach(n=>{r[n]=t.props[n].export("design")}),r}getNodeConfig(t){var r;return this.data.configure[t]!==void 0?this.data.configure.isContainer:(r=this.material)==null?void 0:r.value.isContainer}isContainer(){return this.getNodeConfig("isContainer")}export(t){var r;const n=this.data;if(typeof n=="string")return n;const o={};Object.keys(n.props||{}).forEach(l=>{o[l]=n.props[l].export(t)});const a=(r=n.children)==null?void 0:r.map(l=>l instanceof F?l.export(t):l),i=n.configure||{},s=i.propsSetter||{},u={};Object.keys(s).forEach(l=>{const p=Gn(s,l,!1);p&&(u[l]=p)}),i.propsSetter=u,this.material&&this.materialsModel.usedMaterials.push(this.material);let f={...n,configure:i,props:o,children:a};return t==="design"&&delete f.id,f=Vr(f),f}}const Bo=(e,t,r)=>{const n={...e,id:he(),props:{},componentName:Ve.ROOT_CONTAINER,children:[],configure:Ro(e.configure||{},{propsSetter:{},advanceSetter:{}})};let o=[];U(e.children)?o=e.children.map(i=>i instanceof F?i:q(i)?new F(i,{parent:t,materials:r}):i):e.children instanceof F?o.push(e.children):e.children&&q(e.children)&&o.push(new F(e.children,{parent:t,materials:r}));const a=Object.keys(e.props||{});return a.length&&a.forEach(i=>{var s;const u=(s=e.props)==null?void 0:s[i];u instanceof je?n.props[i]=u:n.props[i]=new je(i,u||"",{parent:t,materials:r})}),n.children=o,n};class _t{constructor(t,{parent:r,materials:n}){C(this,"rawData"),C(this,"data"),C(this,"nodeType",Ve.ROOT_CONTAINER),C(this,"emitter",bt),C(this,"materialsModel"),C(this,"listenerHandle"),C(this,"onChangeCbQueue"),C(this,"parent"),this.materialsModel=n,this.rawData=JSON.parse(JSON.stringify(t)),this.data=Bo(t,this,n),this.listenerHandle=[],this.onChangeCbQueue=[],this.registerListener(),this.parent=r}registerListener(){const t=r=>{const{node:n}=r;n===this&&n.id===this.id&&this.onChangeCbQueue.forEach(o=>o(r))};this.emitter.on("onNodeChange",t),this.listenerHandle.push(()=>{this.emitter.off("onNodeChange",t)})}onChange(t){return this.onChangeCbQueue.push(t),()=>{this.onChangeCbQueue=this.onChangeCbQueue.filter(r=>r!==t)}}get id(){return this.data.id}get value(){return this.data}get props(){return this.data.props}get material(){const t=this.materialsModel;return t==null?void 0:t.findByComponentName(this.data.componentName)}updateValue(t){const r=this.data,n={...this.data,...t};this.data=Bo(n,this,this.materialsModel),this.emitter.emit("onNodeChange",{value:this.data,preValue:r,node:this})}contains(t){return Gr(this,t)}getMaterialConfig(t){var r;return this.data.configure[t]!==void 0?this.data.configure.isContainer:(r=this.material)==null?void 0:r.value.isContainer}isContainer(){return this.getMaterialConfig("isContainer")}export(t=Pr.SAVE){var r;const n=this.data,o={};Object.keys(n.props||{}).forEach(u=>{o[u]=n.props[u].export(t)});const a=((r=n.children)==null?void 0:r.map(u=>{var f;return(f=u==null?void 0:u.export)==null?void 0:f.call(u,t)}))||[],i={...n,props:o,children:a.filter(u=>u)};let s=No(i,["id"]);return s=Vr(s),s}getPlainProps(){const t=this.data,r={};return Object.keys(t.props||{}).forEach(n=>{r[n]=t.props[n].export("design")}),r}destroy(){this.listenerHandle.forEach(t=>t())}clone(t){const r={...this.export("design"),id:t||he()};return new _t(r,{materials:this.materialsModel,parent:null})}}const Ne=e=>(e==null?void 0:e.type)===oe.EXPRESSION,wd=e=>(e==null?void 0:e.type)===oe.FUNCTION,he=()=>Math.random().toString(32).slice(3,9),Cd=e=>(e==null?void 0:e.nodeType)==="NODE",zr=e=>(e==null?void 0:e.nodeType)==="PROP",xd=e=>(e==null?void 0:e.nodeType)==="SLOT",Vr=e=>Jf(e,t=>q(t)?!Object.keys(t).length:U(t)?!t.length:!t);function Rd(e,t){const r=[e];for(;r.length;){const n=r.shift();if(n&&t(n))return n;const o=(n==null?void 0:n.props)||{},a=s=>{if(s instanceof F){r.push(s);return}if(s instanceof Ge&&a(s.value.value),s instanceof je){a(s.value);return}if(q(s)){const u=s;Object.keys(u).forEach(f=>{a(u[f])});return}if(U(s)){s.forEach(u=>{a(u)});return}};a(o);const i=(n==null?void 0:n.value.children.filter(s=>s instanceof F))||[];r.push(...i)}}function Gr(e,t){return Rd(e,r=>r.id===t)}const Nd=e=>{const t=mo(e),r=t.snippets;return delete t.snippets,t.snippets=r.map(n=>({...t,...n,id:n.id||`${e.componentName}-${he()}`,title:n.title||e.title,category:n.category||e.category,tags:[...n.tags||[],...e.tags||[]],groupName:n.groupName||e.groupName,snapshot:n.snapshot||e.icon,snapshotText:n.snapshotText,schema:{...n.schema,componentName:n.schema.componentName||e.componentName}})),t};class Md{constructor(t){C(this,"rawData"),C(this,"data"),this.rawData=t,this.data=Nd(t)}get value(){return this.data}get rawValue(){return this.rawData}get componentName(){return this.data.componentName}get snippets(){return this.data.snippets}getSnippetById(t){return this.data.snippets.find(r=>r.id===t)}}const Ad=e=>{if(!U(e))throw new Error("Materials must be a array");return e.map(t=>new Md(t))},Td=e=>{e==null||e.forEach(t=>{Lr({data:t,dataStruct:gd,throwError:!1})})};class Me{constructor(t){C(this,"rawData"),C(this,"data"),C(this,"usedMaterials",[]),this.rawData=t,Td(t),this.data=Ad(t)}findByComponentName(t){return this.data.find(r=>r.componentName===t)}findSnippetById(t){const r=[...this.data];let n=null;for(;!n&&r.length;){const o=r.pop();n=o==null?void 0:o.getSnippetById(t)}return n}getAllSnippets(){let t=this.data.reduce((a,i)=>(a.push(...i.snippets),a),[]);const r=[],n={default:[]};t=t.sort((a,i)=>(a.category||"")>(i.category||"")?1:-1),t.forEach(a=>{const i=a.groupName||"default";r.includes(i)||(r.push(i),n[i]=[]),n[i].push(a)});const o=[];return r.forEach(a=>{const i=["default"],s={default:[]},u=n[a];if(u.length!==0){u.forEach(p=>{const d=p.category||"default";i.includes(d)||(i.push(d),s[d]=[]),s[d].push(p)});const f=[];i.forEach(p=>{s[p].length&&f.push({name:p,list:s[p]})});const l={name:a,list:f};o.push(l)}}),o}get value(){return this.data}get rawValue(){return this.rawData}}const $d=T({version:m(),name:m(),css:g(m()),renderType:g(Y([X("COMPONENT"),X("PAGE")])),methods:g(B(_d)),componentsMeta:B(Ar(T({componentName:m()}),$r)),thirdLibs:g(ld),componentsTree:Ed,assets:g(B(G()))}),Uo=e=>(Lr({data:e,dataStruct:$d,throwError:!1}),e),Wr=(e,t,r)=>({...e,componentsTree:new _t(e.componentsTree,{parent:t,materials:r})});class Ft{constructor(t,r){C(this,"nodeType","PAGE"),C(this,"rawData"),C(this,"emitter",bt),C(this,"data"),C(this,"parent"),C(this,"materialsModel"),C(this,"assetPackagesList"),Uo(t),this.assetPackagesList=(r==null?void 0:r.assetPackagesList)||[],this.rawData=JSON.parse(JSON.stringify(t)),this.materialsModel=new Me((r==null?void 0:r.materials)||[]),this.data=Wr(t,this,this.materialsModel)}updatePage(t){const r=this.data;this.rawData=JSON.parse(JSON.stringify(t)),this.data=Wr(t,this,this.materialsModel),this.emitter.emit("onPageChange",{value:this.data,preValue:r,node:this})}reloadPage(t){const r=this.data;this.rawData=JSON.parse(JSON.stringify(t)),this.data=Wr(t,this,this.materialsModel),this.emitter.emit("onReloadPage",{value:this.data,preValue:r,node:this})}get value(){return this.data}getNode(t){if(!t)return;const r=this.data.componentsTree;return Gr(r,t)}addNode(t,r,n="AFTER"){var o;if(n==="AFTER"||n==="BEFORE"){const a=r.parent;if(a===null&&r instanceof _t)return console.warn("Not found parent node"),!1;if(a instanceof je)return console.warn("CProp can not add node"),!1;if(a instanceof Ge){const s=a.value.value,u=s.findIndex(f=>f===r)??-1;return u>=0?(n==="BEFORE"?s.splice(u,0,t):s.splice(u+1,0,t),t.parent=a,(o=a.parent)==null||o.updateValue(),!0):!1}if(a instanceof Ft)return!1;const i=(a==null?void 0:a.value.children.findIndex(s=>s===r))??-1;return i>=0?(n==="BEFORE"?a==null||a.value.children.splice(i,0,t):a==null||a.value.children.splice(i+1,0,t),t.parent=a,a==null||a.updateValue(),!0):(console.warn("Not found target node"),!1)}if(n==="CHILD_START")return r.value.children.unshift(t),t.parent=r,r.updateValue(),!0;if(n==="CHILD_END")return r.value.children.push(t),t.parent=r,r.updateValue(),!0;if(q(n)){const a=n;if(a.type==="CHILD"){const i=a.pos,s=a.index||0;return i==="BEFORE"?r==null||r.value.children.splice(s,0,t):r==null||r.value.children.splice(s+1,0,t),t.parent=r,r.updateValue(),!0}else console.warn("Can not parse pos obj")}return!1}createNode(t){return delete t.id,new F(t,{parent:null,materials:this.materialsModel})}addNodeById(t,r,n="AFTER"){const o=this.getNode(r);return o?this.addNode(t,o,n):(console.warn(`Not find a node by ${r}, pls check it`),!1)}copyNode(t){const r=t.export("design");r.id=he();const n=new F(r,{parent:t.parent,materials:this.materialsModel});return this.addNode(n,t,"AFTER"),n}copyNodeById(t){const r=this.getNode(t);return r&&r instanceof F?this.copyNode(r):!1}moveNode(t,r,n){this.deleteNode(t);let o=r;return["AFTER","BEFORE"].includes(n)&&(o=r.parent),t.parent=o,this.addNode(t,r,n)}moveNodeById(t,r,n){const o=this.getNode(t),a=this.getNode(r);return o&&a&&o instanceof F&&a instanceof F?this.moveNode(o,a,n):!1}deleteNode(t){var r;const n=t.parent;if(!n)throw new Error("parent node is null or undefined, pls check it");if(n instanceof Ge){const o=n.value.value,a=o.findIndex(s=>s===t),i=o[a];return o.splice(a,1),(r=n.parent)==null||r.updateValue(),i}if(n instanceof F||n instanceof _t){const o=n.value.children,a=o.findIndex(s=>s===t),i=o[a];return o.splice(a,1),n.updateValue(),i}}deleteNodeById(t){const r=this.getNode(t);if(r)return this.deleteNode(r)}export(t=Pr.SAVE){var r;const n=this.data.componentsTree.export(t),o=this.assetPackagesList,a=[],i=this.materialsModel.usedMaterials.map(u=>{const f=o.find(l=>{var p;return l.package===((p=u.value.npm)==null?void 0:p.package)});return f&&a.push(f),{componentName:u.componentName,...mo(u.value.npm||{})}}).filter(u=>!!(u.componentName&&u.package&&u.version));this.materialsModel.usedMaterials=[];let s={...this.data,componentsTree:Vr(n),componentsMeta:i,thirdLibs:this.data.thirdLibs,assets:[]};return(r=this.data.thirdLibs)==null||r.forEach(u=>{const f=o.find(l=>u.package===l.package);f&&a.push(f)}),s.assets=td(a,u=>u.package),s=No(s,["id"]),JSON.parse(JSON.stringify(s))}getRootNode(){return this.data.componentsTree}}Ve.ROOT_CONTAINER;var Pd=typeof global=="object"&&global&&global.Object===Object&&global;const zo=Pd;var Dd=typeof self=="object"&&self&&self.Object===Object&&self,kd=zo||Dd||Function("return this")();const We=kd;var Id=We.Symbol;const He=Id;var Vo=Object.prototype,Fd=Vo.hasOwnProperty,Ld=Vo.toString,Et=He?He.toStringTag:void 0;function Bd(e){var t=Fd.call(e,Et),r=e[Et];try{e[Et]=void 0;var n=!0}catch{}var o=Ld.call(e);return n&&(t?e[Et]=r:delete e[Et]),o}var Ud=Object.prototype,zd=Ud.toString;function Vd(e){return zd.call(e)}var Gd="[object Null]",Wd="[object Undefined]",Go=He?He.toStringTag:void 0;function jt(e){return e==null?e===void 0?Wd:Gd:Go&&Go in Object(e)?Bd(e):Vd(e)}function Ye(e){return e!=null&&typeof e=="object"}var Hd="[object Symbol]";function Yd(e){return typeof e=="symbol"||Ye(e)&&jt(e)==Hd}function Jd(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Qd=Array.isArray;const Je=Qd;var qd=1/0,Wo=He?He.prototype:void 0,Ho=Wo?Wo.toString:void 0;function Yo(e){if(typeof e=="string")return e;if(Je(e))return Jd(e,Yo)+"";if(Yd(e))return Ho?Ho.call(e):"";var t=e+"";return t=="0"&&1/e==-qd?"-0":t}function Ae(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Jo(e){return e}var Xd="[object AsyncFunction]",Kd="[object Function]",Zd="[object GeneratorFunction]",ep="[object Proxy]";function Hr(e){if(!Ae(e))return!1;var t=jt(e);return t==Kd||t==Zd||t==Xd||t==ep}var tp=We["__core-js_shared__"];const Yr=tp;var Qo=function(){var e=/[^.]+$/.exec(Yr&&Yr.keys&&Yr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function rp(e){return!!Qo&&Qo in e}var np=Function.prototype,op=np.toString;function ap(e){if(e!=null){try{return op.call(e)}catch{}try{return e+""}catch{}}return""}var ip=/[\\^$.*+?()[\]{}|]/g,sp=/^\[object .+?Constructor\]$/,cp=Function.prototype,up=Object.prototype,lp=cp.toString,fp=up.hasOwnProperty,dp=RegExp("^"+lp.call(fp).replace(ip,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pp(e){if(!Ae(e)||rp(e))return!1;var t=Hr(e)?dp:sp;return t.test(ap(e))}function hp(e,t){return e==null?void 0:e[t]}function Jr(e,t){var r=hp(e,t);return pp(r)?r:void 0}var qo=Object.create,vp=function(){function e(){}return function(t){if(!Ae(t))return{};if(qo)return qo(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const yp=vp;function mp(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function gp(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var bp=800,_p=16,Ep=Date.now;function jp(e){var t=0,r=0;return function(){var n=Ep(),o=_p-(n-r);if(r=n,o>0){if(++t>=bp)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Op(e){return function(){return e}}var Sp=function(){try{var e=Jr(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Lt=Sp;var wp=Lt?function(e,t){return Lt(e,"toString",{configurable:!0,enumerable:!1,value:Op(t),writable:!0})}:Jo,Cp=jp(wp);const xp=Cp;var Rp=9007199254740991,Np=/^(?:0|[1-9]\d*)$/;function Xo(e,t){var r=typeof e;return t=t??Rp,!!t&&(r=="number"||r!="symbol"&&Np.test(e))&&e>-1&&e%1==0&&e<t}function Qr(e,t,r){t=="__proto__"&&Lt?Lt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Bt(e,t){return e===t||e!==e&&t!==t}var Mp=Object.prototype,Ap=Mp.hasOwnProperty;function Tp(e,t,r){var n=e[t];(!(Ap.call(e,t)&&Bt(n,r))||r===void 0&&!(t in e))&&Qr(e,t,r)}function $p(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;u===void 0&&(u=e[s]),o?Qr(r,s,u):Tp(r,s,u)}return r}var Ko=Math.max;function Pp(e,t,r){return t=Ko(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=Ko(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(i),mp(e,this,s)}}function Dp(e,t){return xp(Pp(e,t,Jo),e+"")}var kp=9007199254740991;function Zo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kp}function qr(e){return e!=null&&Zo(e.length)&&!Hr(e)}function Ip(e,t,r){if(!Ae(r))return!1;var n=typeof t;return(n=="number"?qr(r)&&Xo(t,r.length):n=="string"&&t in r)?Bt(r[t],e):!1}function Fp(e){return Dp(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,i&&Ip(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,a)}return t})}var Lp=Object.prototype;function ea(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Lp;return e===r}function Bp(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Up="[object Arguments]";function ta(e){return Ye(e)&&jt(e)==Up}var ra=Object.prototype,zp=ra.hasOwnProperty,Vp=ra.propertyIsEnumerable,Gp=ta(function(){return arguments}())?ta:function(e){return Ye(e)&&zp.call(e,"callee")&&!Vp.call(e,"callee")};const Xr=Gp;function Wp(){return!1}var na=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oa=na&&typeof module=="object"&&module&&!module.nodeType&&module,Hp=oa&&oa.exports===na,aa=Hp?We.Buffer:void 0,Yp=aa?aa.isBuffer:void 0,Jp=Yp||Wp;const ia=Jp;var Qp="[object Arguments]",qp="[object Array]",Xp="[object Boolean]",Kp="[object Date]",Zp="[object Error]",eh="[object Function]",th="[object Map]",rh="[object Number]",nh="[object Object]",oh="[object RegExp]",ah="[object Set]",ih="[object String]",sh="[object WeakMap]",ch="[object ArrayBuffer]",uh="[object DataView]",lh="[object Float32Array]",fh="[object Float64Array]",dh="[object Int8Array]",ph="[object Int16Array]",hh="[object Int32Array]",vh="[object Uint8Array]",yh="[object Uint8ClampedArray]",mh="[object Uint16Array]",gh="[object Uint32Array]",I={};I[lh]=I[fh]=I[dh]=I[ph]=I[hh]=I[vh]=I[yh]=I[mh]=I[gh]=!0,I[Qp]=I[qp]=I[ch]=I[Xp]=I[uh]=I[Kp]=I[Zp]=I[eh]=I[th]=I[rh]=I[nh]=I[oh]=I[ah]=I[ih]=I[sh]=!1;function bh(e){return Ye(e)&&Zo(e.length)&&!!I[jt(e)]}function _h(e){return function(t){return e(t)}}var sa=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ot=sa&&typeof module=="object"&&module&&!module.nodeType&&module,Eh=Ot&&Ot.exports===sa,Kr=Eh&&zo.process,jh=function(){try{var e=Ot&&Ot.require&&Ot.require("util").types;return e||Kr&&Kr.binding&&Kr.binding("util")}catch{}}();const ca=jh;var ua=ca&&ca.isTypedArray,Oh=ua?_h(ua):bh;const la=Oh;var Sh=Object.prototype,wh=Sh.hasOwnProperty;function Ch(e,t){var r=Je(e),n=!r&&Xr(e),o=!r&&!n&&ia(e),a=!r&&!n&&!o&&la(e),i=r||n||o||a,s=i?Bp(e.length,String):[],u=s.length;for(var f in e)(t||wh.call(e,f))&&!(i&&(f=="length"||o&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Xo(f,u)))&&s.push(f);return s}function xh(e,t){return function(r){return e(t(r))}}function Rh(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Nh=Object.prototype,Mh=Nh.hasOwnProperty;function Ah(e){if(!Ae(e))return Rh(e);var t=ea(e),r=[];for(var n in e)n=="constructor"&&(t||!Mh.call(e,n))||r.push(n);return r}function fa(e){return qr(e)?Ch(e,!0):Ah(e)}var Th=Jr(Object,"create");const St=Th;function $h(){this.__data__=St?St(null):{},this.size=0}function Ph(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Dh="__lodash_hash_undefined__",kh=Object.prototype,Ih=kh.hasOwnProperty;function Fh(e){var t=this.__data__;if(St){var r=t[e];return r===Dh?void 0:r}return Ih.call(t,e)?t[e]:void 0}var Lh=Object.prototype,Bh=Lh.hasOwnProperty;function Uh(e){var t=this.__data__;return St?t[e]!==void 0:Bh.call(t,e)}var zh="__lodash_hash_undefined__";function Vh(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=St&&t===void 0?zh:t,this}function Te(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Te.prototype.clear=$h,Te.prototype.delete=Ph,Te.prototype.get=Fh,Te.prototype.has=Uh,Te.prototype.set=Vh;function Gh(){this.__data__=[],this.size=0}function Ut(e,t){for(var r=e.length;r--;)if(Bt(e[r][0],t))return r;return-1}var Wh=Array.prototype,Hh=Wh.splice;function Yh(e){var t=this.__data__,r=Ut(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Hh.call(t,r,1),--this.size,!0}function Jh(e){var t=this.__data__,r=Ut(t,e);return r<0?void 0:t[r][1]}function Qh(e){return Ut(this.__data__,e)>-1}function qh(e,t){var r=this.__data__,n=Ut(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function me(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}me.prototype.clear=Gh,me.prototype.delete=Yh,me.prototype.get=Jh,me.prototype.has=Qh,me.prototype.set=qh;var Xh=Jr(We,"Map");const da=Xh;function Kh(){this.size=0,this.__data__={hash:new Te,map:new(da||me),string:new Te}}function Zh(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function zt(e,t){var r=e.__data__;return Zh(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ev(e){var t=zt(this,e).delete(e);return this.size-=t?1:0,t}function tv(e){return zt(this,e).get(e)}function rv(e){return zt(this,e).has(e)}function nv(e,t){var r=zt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Qe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qe.prototype.clear=Kh,Qe.prototype.delete=ev,Qe.prototype.get=tv,Qe.prototype.has=rv,Qe.prototype.set=nv;function pa(e){return e==null?"":Yo(e)}var ov=xh(Object.getPrototypeOf,Object);const ha=ov;var av="[object Object]",iv=Function.prototype,sv=Object.prototype,va=iv.toString,cv=sv.hasOwnProperty,uv=va.call(Object);function qe(e){if(!Ye(e)||jt(e)!=av)return!1;var t=ha(e);if(t===null)return!0;var r=cv.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&va.call(r)==uv}function lv(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}function fv(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:lv(e,t,r)}var dv="\\ud800-\\udfff",pv="\\u0300-\\u036f",hv="\\ufe20-\\ufe2f",vv="\\u20d0-\\u20ff",yv=pv+hv+vv,mv="\\ufe0e\\ufe0f",gv="\\u200d",bv=RegExp("["+gv+dv+yv+mv+"]");function ya(e){return bv.test(e)}function _v(e){return e.split("")}var ma="\\ud800-\\udfff",Ev="\\u0300-\\u036f",jv="\\ufe20-\\ufe2f",Ov="\\u20d0-\\u20ff",Sv=Ev+jv+Ov,wv="\\ufe0e\\ufe0f",Cv="["+ma+"]",Zr="["+Sv+"]",en="\\ud83c[\\udffb-\\udfff]",xv="(?:"+Zr+"|"+en+")",ga="[^"+ma+"]",ba="(?:\\ud83c[\\udde6-\\uddff]){2}",_a="[\\ud800-\\udbff][\\udc00-\\udfff]",Rv="\\u200d",Ea=xv+"?",ja="["+wv+"]?",Nv="(?:"+Rv+"(?:"+[ga,ba,_a].join("|")+")"+ja+Ea+")*",Mv=ja+Ea+Nv,Av="(?:"+[ga+Zr+"?",Zr,ba,_a,Cv].join("|")+")",Tv=RegExp(en+"(?="+en+")|"+Av+Mv,"g");function $v(e){return e.match(Tv)||[]}function Pv(e){return ya(e)?$v(e):_v(e)}function Dv(e){return function(t){t=pa(t);var r=ya(t)?Pv(t):void 0,n=r?r[0]:t.charAt(0),o=r?fv(r,1).join(""):t.slice(1);return n[e]()+o}}var kv=Dv("toUpperCase");const Iv=kv;function Fv(e){return Iv(pa(e).toLowerCase())}function Lv(){this.__data__=new me,this.size=0}function Bv(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Uv(e){return this.__data__.get(e)}function zv(e){return this.__data__.has(e)}var Vv=200;function Gv(e,t){var r=this.__data__;if(r instanceof me){var n=r.__data__;if(!da||n.length<Vv-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Qe(n)}return r.set(e,t),this.size=r.size,this}function Xe(e){var t=this.__data__=new me(e);this.size=t.size}Xe.prototype.clear=Lv,Xe.prototype.delete=Bv,Xe.prototype.get=Uv,Xe.prototype.has=zv,Xe.prototype.set=Gv;var Oa=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Sa=Oa&&typeof module=="object"&&module&&!module.nodeType&&module,Wv=Sa&&Sa.exports===Oa,wa=Wv?We.Buffer:void 0,Ca=wa?wa.allocUnsafe:void 0;function Hv(e,t){if(t)return e.slice();var r=e.length,n=Ca?Ca(r):new e.constructor(r);return e.copy(n),n}var Yv=We.Uint8Array;const xa=Yv;function Jv(e){var t=new e.constructor(e.byteLength);return new xa(t).set(new xa(e)),t}function Qv(e,t){var r=t?Jv(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function qv(e){return typeof e.constructor=="function"&&!ea(e)?yp(ha(e)):{}}function Xv(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),s=i.length;s--;){var u=i[e?s:++o];if(r(a[u],u,a)===!1)break}return t}}var Kv=Xv();const Zv=Kv;function tn(e,t,r){(r!==void 0&&!Bt(e[t],r)||r===void 0&&!(t in e))&&Qr(e,t,r)}function ey(e){return Ye(e)&&qr(e)}function rn(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function ty(e){return $p(e,fa(e))}function ry(e,t,r,n,o,a,i){var s=rn(e,r),u=rn(t,r),f=i.get(u);if(f){tn(e,r,f);return}var l=a?a(s,u,r+"",e,t,i):void 0,p=l===void 0;if(p){var d=Je(u),v=!d&&ia(u),b=!d&&!v&&la(u);l=u,d||v||b?Je(s)?l=s:ey(s)?l=gp(s):v?(p=!1,l=Hv(u,!0)):b?(p=!1,l=Qv(u,!0)):l=[]:qe(u)||Xr(u)?(l=s,Xr(s)?l=ty(s):(!Ae(s)||Hr(s))&&(l=qv(u))):p=!1}p&&(i.set(u,l),o(l,u,n,a,i),i.delete(u)),tn(e,r,l)}function Ra(e,t,r,n,o){e!==t&&Zv(t,function(a,i){if(o||(o=new Xe),Ae(a))ry(e,t,i,r,Ra,n,o);else{var s=n?n(rn(e,i),a,i+"",e,t,o):void 0;s===void 0&&(s=a),tn(e,i,s)}},fa)}var ny=Fp(function(e,t,r){Ra(e,t,r)});const oy=ny,ay=function(e){return!(!e||typeof e!="function"||!e.prototype)};function Na(e){const t=e.prototype;return!!(t&&t.isReactComponent)}function Ma(e){var t,r;const n=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.forward_ref"):60112;return(e==null?void 0:e.$$typeof)===n||((t=e==null?void 0:e.prototype)==null?void 0:t.isReactComponent)||((r=e==null?void 0:e.prototype)==null?void 0:r.setState)||e._forwardRef}function Aa(e){class t extends x.Component{render(){return x.createElement(e,this.props)}}return t.displayName=e.displayName,t}const $e=(e,t)=>{const r=n=>{const o=`
    ${Object.keys(t).map(a=>`const ${a} = $$context['${a}'];`).join(`
`)}
    return ${n};
    `;return new Function("$$context",o)(t)};try{return r(e)}catch(n){console.warn(n);const o=`[${e}] expression run failed`;return console.warn(o),null}},Ta=(e,t,r)=>function(...n){try{const o=`
        var f = ${e};
        var args = Array.from(arguments);
        var __$$storeManager__ = args.pop();
        var $$context = args.pop();
        $$context.stateManager = __$$storeManager__.getStateSnapshot();
        return f.apply(f, args)
      `;new Function(o)(...n,t,r)}catch(o){console.warn(o)}},nn=(e,t)=>{const r={};return t.forEach((n,o)=>{r[n]=e[o]}),r},on=e=>{const t={};return Object.keys(e).forEach(r=>{let n=r.replace("-webkit","Webkit");n=n.replace("-ms","ms"),n=n.replace("-moz","Moz"),n=n.replace("-o","O");let o=n.split("-");o.length>=2&&(o=o.map((a,i)=>i!==0?Fv(a):a)),t[o.join("")]=e[r]}),t},an=e=>{let t="";return Object.keys(e).forEach(r=>{t+=`${r}:${e[r]};`}),t},iy=(e,t)=>{const r={};return e.forEach(n=>{if(n.globalName){const o=t[n.globalName];o&&(r[n.globalName]=o)}}),r},sy=(e,t=1)=>{let r=0,n=e,o={},a={};for(;r<t;)Object.keys(n).forEach(i=>{o={...o,...n[i]}}),a=o,n=o,o={},r+=1;return a},Vt="DYNAMIC",cy=["$$context","$$nodeModel"],$a=e=>{let t;const r=new Set,n=(i,s)=>{const u=typeof i=="function"?i(t):i;if(!Object.is(u,t)){const f=t;t=s??typeof u!="object"?u:Object.assign({},t,u),r.forEach(l=>l(t,f))}},o=()=>t,a={setState:n,getState:o,subscribe:i=>(r.add(i),()=>r.delete(i)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return t=e(n,o,a),a},uy=e=>e?$a(e):$a;var ly=e=>(({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'."),uy(e));class fy{constructor(){_(this,"storeMap",new Map)}addStore(t,r){const n=ly(r);return this.storeMap.set(t,n),n.name=t,n}setStore(t,r){this.storeMap.set(t,r)}removeStore(t){this.storeMap.delete(t)}getStore(t){return this.storeMap.get(t)}connect(t,r){const n=this.storeMap.get(t);return n?n.subscribe(r):(console.warn("store not exits"),()=>{})}getStateSnapshot(){const t={};return this.storeMap.forEach((r,n)=>{t[n]={state:r.getState(),updateState:o=>{r.setState(o)}}}),t}destroy(){this.storeMap.forEach(t=>{t.destroy()}),this.storeMap=new Map}}class dy{constructor(){_(this,"varSpace",new Map)}get(t){return this.varSpace.get(t)}add(t,r){this.varSpace.set(t,r)}remove(t){this.varSpace.delete(t)}destroy(){this.varSpace.clear()}getStateSnapshot(){const t={};return this.varSpace.forEach((r,n)=>{t[n]=r}),t}}class Pa{constructor(){_(this,"renderMode","normal"),_(this,"components",{}),_(this,"storeManager",new fy),_(this,"variableManager",new dy),_(this,"runtimeComponentCache",new Map),_(this,"onGetRef"),_(this,"onGetComponent"),_(this,"onComponentMount"),_(this,"onComponentDestroy"),_(this,"processNodeConfigHook")}getComponent(t){var r;const n=t.value.componentName;let o=this.components[n]||(()=>`Component [${n}] not found`);return Ma(o)||(o=Aa(o),this.components[n]=o),this.onGetComponent&&(o=(r=this.onGetComponent)==null?void 0:r.call(this,o,t)),o}getContext(t={},r){let n=t;return r&&(n={...t},n.__proto__=r||null),n}pageRender(t,{components:r,onGetRef:n,$$context:o={},onGetComponent:a,onComponentMount:i,onComponentDestroy:s,renderMode:u,processNodeConfigHook:f}){this.renderMode=u,this.components=r,this.onGetRef=n,this.onGetComponent=a,this.onComponentMount=i,this.onComponentDestroy=s,this.processNodeConfigHook=f;const l=t.value.componentsTree,p=this.getComponent(l),d=this.convertModelToComponent(p,t.value.componentsTree),v={},b=l.props;return Object.keys(b).forEach(E=>{v[E]=b[E].value}),v.$$context=o,this.render(d,v)}transformProps(t={},{$$context:r}){const n=t,o=i=>{if(Array.isArray(i))return i.map(s=>o(s));if(zr(i))return o(i.value);if(xd(i)){const s=i.value,u=s.value;if(!u)return console.warn("slot value is null, this maybe cause some error, pls check it",t),()=>{};const f=l=>{const p=`${l.id}-${Vt}`;if(this.runtimeComponentCache.get(l.id))return{key:p,component:this.runtimeComponentCache.get(l.id)};const d=this.getComponent(l),v=this.convertModelToComponent(d,l),b=s.params||[];return{component:(...E)=>{const S=nn(E,b),j=this.getContext({params:S},r);return this.render(v,{$$context:j,key:p})},key:p}};if(Array.isArray(u)){const l=u==null?void 0:u.map(p=>f(p));return(...p)=>l.map(d=>Na(d.component)?x.createElement(d.component,{$$context:r,key:d.key}):d.component(...p))}else return f(u).component}else{if(Ne(i))return $e(i.value,r||{});if(wd(i))return Ta(i.value,r,this.storeManager);if(qe(i)){let s=i;zr(i)&&(s=i.value);const u=s,f={};return Object.keys(s).forEach(l=>{f[l]=o(u[l])}),f}else return i}},a={};return Object.keys(n).forEach(i=>{const s=n[i];a[i]=o(s)}),a}collectSpecialProps(t={},r){const n=[],o=(a,i)=>{let s=i;zr(i)&&(s=i.value),r(s)?n.push({keyPath:a,val:s}):Je(s)?s.forEach((u,f)=>{o([...a,String(f)],u)}):qe(s)&&Object.keys(s).forEach(u=>{o([...a,u],s[u])})};return o(["$root"],t),n}convertModelToComponent(t,r){const n=this;class o extends x.Component{constructor(i){super(i),_(this,"_CONDITION",!0),_(this,"_DESIGN_BOX",!1),_(this,"_NODE_MODEL",r),_(this,"_NODE_ID",r.id),_(this,"UNIQUE_ID",`${r.id}_${he()}`),_(this,"targetComponentRef"),_(this,"listenerHandle",[]),_(this,"storeState"),_(this,"staticState",{}),_(this,"storeListenDisposeLint",[]),_(this,"domHeader"),_(this,"mediaStyleDomMap",{}),_(this,"variableSpace"),_(this,"nodeName"),_(this,"updateState",l=>{this.storeState.setState(l),this.forceUpdate()}),_(this,"getStyleDomById",l=>{const p=this.mediaStyleDomMap;let d=p[l];return d||(d=document.createElement("style"),d.type="text/css",p[l]=d),d.id=l,d}),_(this,"addMediaCSS",()=>{var l;let p=this.domHeader;if(p||(p=(l=document.getElementsByTagName("head"))==null?void 0:l[0],this.domHeader=p),!this.domHeader)return;const d=this._NODE_MODEL.value.css;d&&d.value.forEach(v=>{var b;const E=`${this.UNIQUE_ID}_${v.state}`;let S=`.${d.class}`;if(v.state!=="normal"&&(S=`${S}:${v.state}`),Object.keys(v.style).length!==0){const j=this.getStyleDomById(E);j.innerText=`${S} { ${an(v.style)} }`,p==null||p.appendChild(j)}(b=v.media)!=null&&b.length&&v.media.forEach(j=>{const w=`${E}_${j.type}_${j.value}`,L=this.getStyleDomById(w);L.media=`screen and (${j.type}:${j.value}px)`,L.innerHTML=`${S} { ${an(j.style)} }`,p==null||p.appendChild(L)})})}),_(this,"removeMediaCSS",()=>{const l=this.mediaStyleDomMap;Object.keys(l).forEach(p=>{var d;(d=this.domHeader)==null||d.removeChild(l[p])})}),_(this,"rebuildNode",()=>{this.storeListenDisposeLint.forEach(l=>l()),this.removeMediaCSS(),this.connectStore(),this.addMediaCSS(),this.forceUpdate()}),this.targetComponentRef=x.createRef(),this.state=r.value.state||{};const s=r.value.nodeName||r.id;this.nodeName=s;const u=n.storeManager.getStore(s);u?(this.storeState=u,u.setState({...r.value.state||{}})):this.storeState=n.storeManager.addStore(s,()=>({...r.value.state||{}})),this.storeState.subscribe(l=>{this.setState({...l})}),this.connectStore();const f=n.variableManager.get(s);f?this.variableSpace=f:(this.variableSpace={},n.variableManager.add(s,this.variableSpace))}connectStore(){const i=n.collectSpecialProps(r.props,p=>!!Ne(p)),s=n.collectSpecialProps({css:r.value.css,class:r.value.classNames},p=>!!Ne(p)),u=[...i,...s].map(p=>{const d=p.val,v=/\$\$context.stateManager\.(.+?)\./gim.exec(d.value);return v!=null&&v.length?v[1]:""}).filter(Boolean),f=Array.from(new Set(u)),l=[];f.length&&f.forEach(p=>{n.storeManager.getStore(p)||(n.storeManager.addStore(p,()=>({})),console.log(n.storeManager,p,"not exits"));const d=n.storeManager.connect(p,()=>{this.forceUpdate()});l.push(d)}),this.storeListenDisposeLint=l}componentDidMount(){var i;this.addMediaCSS(),n.onGetRef&&n.onGetRef(this.targetComponentRef,r,this),(i=n.onComponentMount)==null||i.call(n,this,r);const s=()=>{n.storeManager.setStore(r.value.nodeName||r.id,this.storeState),this.storeState.setState({...this.state,...r.value.state||{}}),this.rebuildNode()};r.onChange(s)}componentWillUnmount(){var i;this.storeListenDisposeLint.forEach(s=>s()),this.removeMediaCSS(),(i=n.onComponentDestroy)==null||i.call(n,this,r)}render(){var i;const{$$context:s,...u}=this.props,f={key:r.id,...r.props,...u},l={state:this.state||{},variableSpace:this.variableSpace,updateState:this.updateState,staticState:this.staticState};r.value.componentName===Ve.ROOT_CONTAINER&&(l.globalState=this.state,l.updateGlobalState=this.updateState),l.stateManager=n.storeManager.getStateSnapshot(),l.variableSpace=n.variableManager.get(this.nodeName),l.variableManager=n.variableManager.getStateSnapshot();const p=n.getContext(l,s),d=r.value.loop;let v=[];if(d&&d.open){this.targetComponentRef.current=[];let J=d.data||[];if(Ne(d.data)){const N=d.data;J=$e(N.value,p||{})}return v=J.map((...N)=>{var ae;const le=N[1],wt=[d.forName||"item",d.forIndex||"index"],Gt=nn(N,wt);let ee="loopData";d.name&&(ee=`${ee}${d.name}`);const te=n.getContext({[ee]:Gt,staticState:this.staticState},p),H=n.transformProps(f,{$$context:te}),Wt=((ae=r.value.classNames)==null?void 0:ae.map(re=>{var be;const et=re.name;return Ne(re.status)&&$e(String(((be=re.status)==null?void 0:be.value)||""),te)?et:""}))||[];let Ke=`${H.className??""} ${Wt.join(" ")}`.trim();r.value.css&&(Ke=`${r.value.css.class} ${Ke}`.trim()),H.className=Ke;const Ht=n.transformProps(r.value.style,{$$context:te});r.value.style&&(H.style=on(Ht||{}));const{children:Pe}=H;let Ze=[];if(Pe!==void 0)delete H.children,Ze=Array.isArray(Pe)?Pe:[Pe];else{const re=[];r.value.children.forEach((be,et)=>{const sn=n.buildComponent(be,{$$context:te,idx:et});re.push(sn)}),Ze=re}if(H.key=`${H.key}-${le}`,Ne(d.key)){const re=d.key,be=$e(re.value,te||{});H.key+=`-${be}`}return H.ref=re=>{this.targetComponentRef.current=this.targetComponentRef.current||[],this.targetComponentRef.current[le]=re},n.render(t,H,...Ze)}),v}const b=n.transformProps(f,{$$context:p}),{children:E}=b;let S=[];if(E!==void 0)delete b.children,S=Array.isArray(E)?E:[E];else{const J=[];r.value.children.forEach((N,ae)=>{const le=n.buildComponent(N,{$$context:p,idx:ae});J.push(le)}),S=J}b.ref=this.targetComponentRef;const j=((i=r.value.classNames)==null?void 0:i.map(J=>{var N;const ae=J.name;return Ne(J.status)&&$e(((N=J.status)==null?void 0:N.value)||"",p)?ae:""}))||[];let w=`${b.className??""} ${j.join(" ")}`.trim();r.value.css&&(w=`${r.value.css.class} ${w}`.trim()),b.className=w;const L=n.transformProps(r.value.style,{$$context:p});r.value.style&&(b.style=on(L||{}));let D=r.value.condition??!0;typeof D!="boolean"&&(D=$e(D.value,p||{}));let z={condition:D,props:b};n.processNodeConfigHook&&(z=n.processNodeConfigHook(z,r));const Z=n.render(t,z.props,...S);return this._CONDITION=z.condition,z.condition?Z:it("div",{style:{display:"none"},children:Z})}}return _(o,"__CP_TYPE__",Vt),o.displayName=`${r.value.componentName}Dynamic`,o}buildComponent(t,{$$context:r={}}){const n=this.runtimeComponentCache;return typeof t=="string"?this.render(t):Cd(t)?(({currentNode:o})=>{const a=o.value.id;let i=null;if(n.get(a))i=n.get(a);else{const f=this.getComponent(o);i=this.convertModelToComponent(f,o)}!n.get(a)&&this.renderMode!=="design"&&n.set(a,i);const s=`${a}-${Vt}`,u={$$context:r,$$nodeModel:t,key:s};return this.render(i,u)})({currentNode:t}):void 0}render(t,r={},...n){return typeof t=="string"||typeof t=="number"?String(t):(cy.forEach(o=>{o in r&&t.__CP_TYPE__!==Vt&&delete r[o]}),x.createElement(t,r,...n))}clear(){this.runtimeComponentCache.clear(),this.storeManager.destroy()}}const py=En(new Pa),hy=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],ge=e=>{const t={};return e.forEach(r=>{t[r.key]=r.value}),t},vy=[...hy,...fd],yy=vy.reduce((e,t)=>(e[t]=({children:r,$$attributes:n=[],...o})=>{let a=r;return Array.isArray(r)||(a=[r]),x.createElement(t,{...o,...ge(n)},...a)},e),{}),my=({children:e,width:t,height:r,$$attributes:n=[],...o})=>{let a=e;Array.isArray(e)||(a=[e]),a=a.filter(f=>f!==void 0);const{style:i={},...s}=ge(n),u={height:r,width:t,...i,...o.style||{}};return x.createElement("div",{...o,...s,style:u},...a)},gy=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),x.createElement("canvas",{...r,...ge(t)},...n)},by=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),x.createElement("img",{...r,...ge(t)},...n)},_y=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),x.createElement("video",{...r,...ge(t)},...n)},Ey=({children:e,$$attributes:t=[],...r})=>{let n=e;return Array.isArray(e)||(n=[e]),x.createElement("audio",{...r,...ge(t)},...n)},jy=({$$attributes:e=[],content:t,...r})=>it("span",{...r,...ge(e),children:t}),Oy=({children:e,$$attributes:t=[],afterMount:r,beforeDestroy:n,...o})=>{let a=e;return Array.isArray(e)||(a=[e]),x.useEffect(()=>(r==null||r(o),()=>{n==null||n(o)}),[]),x.createElement("div",{...o,...ge(t)},...a)},Sy=({children:e,$$attributes:t=[],htmlTag:r="div",...n})=>{let o=e;Array.isArray(e)||(o=[e]);const{style:a={},...i}=ge(t),s={...a,...n.style||{}};return x.createElement(r,{...n,...i,style:s},...o)},wy={RootContainer:({children:e})=>e,...yy,CContainer:Oy,CVideo:_y,CAudio:Ey,CBlock:my,CImage:by,CText:jy,CCanvas:gy,CNativeTag:Sy};class Cy{constructor(){_(this,"refMap",new Map)}get(t){return this.refMap.get(t)}add(t,r){this.refMap.set(t,r)}remove(t){this.refMap.delete(t)}destroy(){this.refMap.clear()}}class Da extends x.Component{constructor(t){super(t),_(this,"refManager"),_(this,"dynamicComponentInstanceMap",new Map),_(this,"onGetRef",(r,n,o)=>{var a,i;(i=(a=this.props).onGetRef)==null||i.call(a,r,n,o),this.dynamicComponentInstanceMap.set(n.id,o),this.refManager.add(n.value.refId||n.id,r)}),_(this,"rerender",r=>{if(this.props.adapter.clear(),(r==null?void 0:r.nodeType)==="PAGE"&&r)this.setState({pageModel:r});else if(qe(r)&&Uo(r)){const n=r;this.setState({pageModel:new Ft(n,{materials:this.state.pageModel.materialsModel.rawValue})})}}),this.state={pageModel:t.pageModel||new Ft(t.page)},this.refManager=new Cy}getPageModel(){return this.state.pageModel}componentDidMount(){const{render:t}=this.props;t&&(t.ref.current=this)}componentWillUnmount(){this.refManager.destroy()}render(){const{props:t}=this,{adapter:r,onGetComponent:n,onComponentDestroy:o,onComponentMount:a}=t,{pageModel:i}=this.state;if(!i)return console.warn("pageModel is null"),null;const s={...wy,...t.components};return r.pageRender(i,{libs:{},components:s,onGetRef:this.onGetRef,onGetComponent:n,onComponentMount:a,onComponentDestroy:o,$$context:{refs:this.refManager},renderMode:t.renderMode,processNodeConfigHook:t.processNodeConfigHook})}}const xy=()=>{const e=x.useRef(null);return{ref:e,rerender:function(...t){e.current&&e.current.rerender(...t)}}};class Ry extends x.Component{constructor(t){super(t),_(this,"onDoubleClick",()=>{this.setState({hasError:!1,error:null})}),this.state={hasError:!1,error:""}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){var n,o;(o=(n=this.props).onError)==null||o.call(n,r)}render(){if(this.state.hasError){const{onDoubleClick:t}=this,r=this.props.node.value;console.error(this.props.node,this.props.children);const n=bn("div",{style:{backgroundColor:"rgb(255 206 215 / 13%)",padding:"5px",color:"#ff0000b0",textAlign:"center",fontSize:"12px"},children:["Render error, node id: ",r.id,", node name：",r.title," component name：",r.title||r.componentName,bn("p",{children:["msg: ",String(this.state.error)]}),it("button",{onDoubleClick:t,style:{border:"1px solid rgba(100,100,100,0.1)",backgroundColor:"#fff",padding:"5px 10px",borderRadius:"2px",color:"gray",cursor:"pointer",marginTop:"5px"},children:"double click to refresh"}),it("div",{style:{display:"none"}})]});return x.createElement(this.props.targetComponent,{onlyRenderChild:!0},n)}return this.props.children}}class ka{constructor(){_(this,"instanceMap",new Map)}get(t){return this.instanceMap.get(t)}add(t,r){const n=this.instanceMap.get(t);n?n.push(r):this.instanceMap.set(t,[r])}remove(t,r){const n=this.instanceMap.get(t);if(r!==void 0&&Array.isArray(n)){const o=n.filter(a=>a!==r);this.instanceMap.set(t,o)}else this.instanceMap.delete(t)}destroy(){this.instanceMap.clear()}}const Ia=e=>{const{node:t}=e,r=x.useMemo(()=>{const s=t.isContainer();return qe(s)?s:{placeholder:"Drag the component to place it",width:"100%",height:"100%",style:{}}},[e.node]),{placeholder:n,height:o,width:a,style:i}=r;return it("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(200,200,200,0.1)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"2px",fontSize:"14px",color:"gray",cursor:"default",minWidth:"300px",minHeight:"50px",width:a,height:o,...i},children:n})};class Ny extends x.Component{constructor(t){super(t),_(this,"instanceManager",new ka),_(this,"renderRef"),_(this,"dropPlaceholder",Ia),_(this,"onGetComponent",(r,n)=>{const o=this;class a extends x.Component{constructor(){super(...arguments),_(this,"_DESIGN_BOX",!0),_(this,"_NODE_MODEL",n),_(this,"_NODE_ID",n.id),_(this,"_UNIQUE_ID",`${n.id}_${he()}`),_(this,"_STATUS")}componentDidMount(){o.instanceManager.add(n.id,this)}componentWillUnmount(){this._STATUS="DESTROY",o.instanceManager.remove(n.id,this)}render(){const{children:s=[],onlyRenderChild:u,...f}=this.props;let l=s;return Je(s)||(l=[s]),!l.filter(Boolean).length&&(n.isContainer()||n.value.componentName===Ve.ROOT_CONTAINER)&&l.push(x.createElement(o.dropPlaceholder,{node:n})),u?l:x.createElement(r,f,...l)}}return x.forwardRef(function(i,s){return x.createElement(Ry,{node:n,targetComponent:a},x.createElement(a,{ref:s,...i}))})}),this.renderRef=x.createRef(),t.dropPlaceholder&&(this.dropPlaceholder=t.dropPlaceholder)}componentDidMount(){var t,r;(r=(t=this.props).onMount)==null||r.call(t,this)}getPageModel(){var t;return(t=this.renderRef.current)==null?void 0:t.state.pageModel}rerender(t){var r;return(r=this.renderRef.current)==null?void 0:r.rerender(t)}getInstancesById(t,r){let n=[...this.instanceManager.get(t)||[]];return r!==void 0&&(n=n.filter(o=>r===(o==null?void 0:o._UNIQUE_ID))),n}getInstanceByDom(t){const r=Fa(t);if(!r)return null;const n=La(r);return(n==null?void 0:n.stateNode)||null}getDomsById(t,r){const n=this.getInstancesById(t),o=[];return n==null||n.forEach(a=>{if((a==null?void 0:a._STATUS)==="DESTROY")return;const i=ni.findDOMNode(a);if(i&&!(i instanceof Text))if(r){const s=Array.from(i.querySelectorAll(r));o.push(...s)}else o.push(i)}),o}getDomRectById(t,r){return this.getDomsById(t,r).map(n=>n==null?void 0:n.getBoundingClientRect()).filter(Boolean)}render(){const{props:t,onGetComponent:r}=this,{render:n,...o}=t;return n&&(n.ref.current=this),x.createElement(Da,{onGetComponent:r,...o,processNodeConfigHook:(a,i)=>{var s,u;if(i.nodeType!=="NODE")return a;const{props:f,condition:l}=a;let p={...f};const d=((s=i.value.configure)==null?void 0:s.devState)||{},v=(u=i.material)==null?void 0:u.value.fixedProps;if(v!==void 0){if(qe(v))p={...p,...v};else if(typeof v=="function"){const E=v(p);p={...p,...E}}}let b=l;return d.condition===!1&&(b=d.condition),{props:oy(p,d.props||{}),condition:b}},ref:this.renderRef})}}const Fa=e=>{if(!e)return null;const t=Object.keys(e).find(r=>r.startsWith("__reactInternalInstance$")||r.startsWith("__reactFiber$"))||"";return t?e[t]:Fa(e.parentElement)},La=e=>{var t;return e?(t=e==null?void 0:e.stateNode)!=null&&t._DESIGN_BOX?e:La(e.return):null},My=()=>{const e=x.useRef(null);return{ref:e,rerender:function(...t){e.current&&e.current.rerender(...t)},getInstancesById(t,r){var n;return((n=e.current)==null?void 0:n.getInstancesById(t,r))||[]},getInstanceByDom(t){var r;return((r=e.current)==null?void 0:r.getInstanceByDom(t))||null},getDomsById(t,r){var n;return((n=e.current)==null?void 0:n.getDomsById(t,r))||[]},getDomRectById(t,r){var n;return((n=e.current)==null?void 0:n.getDomRectById(t,r))||[]}}};var Ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ty(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ba={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Ay,function(){var r=function(){},n={},o={},a={};function i(d,v){d=d.push?d:[d];var b=[],E=d.length,S=E,j,w,L,D;for(j=function(z,Z){Z.length&&b.push(z),S--,S||v(b)};E--;){if(w=d[E],L=o[w],L){j(w,L);continue}D=a[w]=a[w]||[],D.push(j)}}function s(d,v){if(d){var b=a[d];if(o[d]=v,!!b)for(;b.length;)b[0](d,v),b.splice(0,1)}}function u(d,v){d.call&&(d={success:d}),v.length?(d.error||r)(v):(d.success||r)(d)}function f(d,v,b,E){var S=document,j=b.async,w=(b.numRetries||0)+1,L=b.before||r,D=d.replace(/[\?|#].*$/,""),z=d.replace(/^(css|img|module|nomodule)!/,""),Z,J,N;if(E=E||0,/(^css!|\.css$)/.test(D))N=S.createElement("link"),N.rel="stylesheet",N.href=z,Z="hideFocus"in N,Z&&N.relList&&(Z=0,N.rel="preload",N.as="style");else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(D))N=S.createElement("img"),N.src=z;else if(N=S.createElement("script"),N.src=z,N.async=j===void 0?!0:j,J="noModule"in N,/^module!/.test(D)){if(!J)return v(d,"l");N.type="module"}else if(/^nomodule!/.test(D)&&J)return v(d,"l");N.onload=N.onerror=N.onbeforeload=function(ae){var le=ae.type[0];if(Z)try{N.sheet.cssText.length||(le="e")}catch(wt){wt.code!=18&&(le="e")}if(le=="e"){if(E+=1,E<w)return f(d,v,b,E)}else if(N.rel=="preload"&&N.as=="style")return N.rel="stylesheet";v(d,le,ae.defaultPrevented)},L(d,N)!==!1&&S.head.appendChild(N)}function l(d,v,b){d=d.push?d:[d];var E=d.length,S=E,j=[],w,L;for(w=function(D,z,Z){if(z=="e"&&j.push(D),z=="b")if(Z)j.push(D);else return;E--,E||v(j)},L=0;L<S;L++)f(d[L],w,b)}function p(d,v,b){var E,S;if(v&&v.trim&&(E=v),S=(E?b:v)||{},E){if(E in n)throw"LoadJS";n[E]=!0}function j(w,L){l(d,function(D){u(S,D),w&&u({success:w,error:L},D),s(E,D)},S)}if(S.returnPromise)return new Promise(j);j()}return p.ready=function(d,v){return i(d,function(b){u(v,b)}),p},p.done=function(d){s(d,[])},p.reset=function(){n={},o={},a={}},p.isDefined=function(d){return d in n},p})})(Ba);var $y=Ba.exports;const Ua=Ty($y);class Py{constructor(t,r){_(this,"assets"),_(this,"loadStatus"),_(this,"win",window),_(this,"_onSuccessList",[]),_(this,"_onErrorList",[]),this.assets=t,this.loadStatus="INIT",r!=null&&r.window&&(this.win=r.window)}load(){const t=this.assets||[],r=[];for(let n=0;n<t.length;n++){const o=t[n];o.id||(o.id=he()),r.push(o.id);const a=o.resources.map(i=>i.src);Ua(a,o.id,{async:!1,before:(i,s)=>(this.win.document.body.appendChild(s),!1)})}if(t.length===0){this._onSuccessList.forEach(n=>n());return}return new Promise((n,o)=>{Ua.ready(r,{success:()=>{this._onSuccessList.forEach(a=>a()),n("")},error:a=>{this._onErrorList.forEach(i=>i(a)),o(a)}})})}onSuccess(t){return this._onSuccessList.push(t),this}onError(t){return this._onErrorList.push(t),this}}return Object.freeze(Object.defineProperty({__proto__:null,AssetLoader:Py,ComponentInstanceManager:ka,DefaultDropPlaceholder:Ia,DefineReactAdapter:Pa,DesignRender:Ny,ReactAdapter:py,Render:Da,canAcceptsRef:Ma,collectVariable:iy,compWrapper:Aa,convertCodeStringToFunction:Ta,flatObject:sy,formatSourceStylePropertyName:on,getAdapter:En,getCSSTextValue:an,getObjFromArrayMap:nn,isClass:ay,runExpression:$e,shouldConstruct:Na,useDesignRender:My,useRender:xy},Symbol.toStringTag,{value:"Module"}))});
//# sourceMappingURL=render.umd.js.map
